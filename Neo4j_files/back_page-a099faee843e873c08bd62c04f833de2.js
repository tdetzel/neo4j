/*
 AngularJS v1.5.5
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
 AngularJS v1.5.5
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
(function(a){"undefined"===typeof a&&(a={});"undefined"===typeof a.performance&&(a.performance={});a._perfRefForUserTimingPolyfill=a.performance;a.performance.userTimingJsNow=!1;a.performance.userTimingJsNowPrefixed=!1;a.performance.userTimingJsUserTiming=!1;a.performance.userTimingJsUserTimingPrefixed=!1;a.performance.userTimingJsPerformanceTimeline=!1;a.performance.userTimingJsPerformanceTimelinePrefixed=!1;var c=[],d=[],b=null,g,e;if("function"!==typeof a.performance.now){a.performance.userTimingJsNow=
!0;d=["webkitNow","msNow","mozNow"];for(g=0;g<d.length;g++)if("function"===typeof a.performance[d[g]]){a.performance.now=a.performance[d[g]];a.performance.userTimingJsNowPrefixed=!0;break}var h=+new Date;a.performance.timing&&a.performance.timing.navigationStart&&(h=a.performance.timing.navigationStart);"function"!==typeof a.performance.now&&(a.performance.now=Date.now?function(){return Date.now()-h}:function(){return+new Date-h})}var f=function(){},k=function(){},l=[],n=!1,m=!1;if("function"!==typeof a.performance.getEntries||
"function"!==typeof a.performance.mark){"function"===typeof a.performance.getEntries&&"function"!==typeof a.performance.mark&&(m=!0);a.performance.userTimingJsPerformanceTimeline=!0;c=["webkit","moz"];d=["getEntries","getEntriesByName","getEntriesByType"];for(g=0;g<d.length;g++)for(e=0;e<c.length;e++)b=c[e]+d[g].substr(0,1).toUpperCase()+d[g].substr(1),"function"===typeof a.performance[b]&&(a.performance[d[g]]=a.performance[b],a.performance.userTimingJsPerformanceTimelinePrefixed=!0);var f=function(a){l.push(a);
"measure"===a.entryType&&(n=!0)},q=function(){n&&(l.sort(function(a,c){return a.startTime-c.startTime}),n=!1)},k=function(a,c){for(g=0;g<l.length;)l[g].entryType!==a?g++:"undefined"!==typeof c&&l[g].name!==c?g++:l.splice(g,1)};if("function"!==typeof a.performance.getEntries||m){var r=a.performance.getEntries;a.performance.getEntries=function(){q();var c=l.slice(0);m&&r&&(Array.prototype.push.apply(c,r.call(a.performance)),c.sort(function(a,c){return a.startTime-c.startTime}));return c}}if("function"!==
typeof a.performance.getEntriesByType||m){var u=a.performance.getEntriesByType;a.performance.getEntriesByType=function(c){if("undefined"===typeof c||"mark"!==c&&"measure"!==c)return m&&u?u.call(a.performance,c):[];"measure"===c&&q();var b=[];for(g=0;g<l.length;g++)l[g].entryType===c&&b.push(l[g]);return b}}if("function"!==typeof a.performance.getEntriesByName||m){var t=a.performance.getEntriesByName;a.performance.getEntriesByName=function(c,b){if(b&&"mark"!==b&&"measure"!==b)return m&&t?t.call(a.performance,
c,b):[];"undefined"!==typeof b&&"measure"===b&&q();var e=[];for(g=0;g<l.length;g++)"undefined"!==typeof b&&l[g].entryType!==b||l[g].name!==c||e.push(l[g]);m&&t&&(Array.prototype.push.apply(e,t.call(a.performance,c,b)),e.sort(function(a,c){return a.startTime-c.startTime}));return e}}}if("function"!==typeof a.performance.mark){a.performance.userTimingJsUserTiming=!0;c=["webkit","moz","ms"];d=["mark","measure","clearMarks","clearMeasures"];for(g=0;g<d.length;g++)for(e=0;e<c.length;e++)b=c[e]+d[g].substr(0,
1).toUpperCase()+d[g].substr(1),"function"===typeof a.performance[b]&&(a.performance[d[g]]=a.performance[b],a.performance.userTimingJsUserTimingPrefixed=!0);var v={};"function"!==typeof a.performance.mark&&(a.performance.mark=function(c){var b=a.performance.now();if("undefined"===typeof c)throw new SyntaxError("Mark name must be specified");if(a.performance.timing&&c in a.performance.timing)throw new SyntaxError("Mark name is not allowed");v[c]||(v[c]=[]);v[c].push(b);f({entryType:"mark",name:c,startTime:b,
duration:0})});"function"!==typeof a.performance.clearMarks&&(a.performance.clearMarks=function(a){a?v[a]=[]:v={};k("mark",a)});"function"!==typeof a.performance.measure&&(a.performance.measure=function(c,b,e){var d=a.performance.now();if("undefined"===typeof c)throw new SyntaxError("Measure must be specified");if(b){var g=0;if(a.performance.timing&&b in a.performance.timing){if("navigationStart"!==b&&0===a.performance.timing[b])throw Error(b+" has a timing of 0");g=a.performance.timing[b]-a.performance.timing.navigationStart}else if(b in
v)g=v[b][v[b].length-1];else throw Error(b+" mark not found");b=d;if(e)if(a.performance.timing&&e in a.performance.timing){if("navigationStart"!==e&&0===a.performance.timing[e])throw Error(e+" has a timing of 0");b=a.performance.timing[e]-a.performance.timing.navigationStart}else if(e in v)b=v[e][v[e].length-1];else throw Error(e+" mark not found");f({entryType:"measure",name:c,startTime:g,duration:b-g})}else f({entryType:"measure",name:c,startTime:0,duration:d})});"function"!==typeof a.performance.clearMeasures&&
(a.performance.clearMeasures=function(a){k("measure",a)})}"function"===typeof define&&define.amd?define([],function(){return a.performance}):"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=a.performance)})("undefined"!==typeof window?window:void 0);window.performance.mark("genius.startScriptEvaluation");window["com.genius.Genius"]||(window["com.genius.Genius"]={},window.require=function(){return window["com.genius.Genius"].require.apply(this,arguments)});
(function(a,c){function d(a){var c=P[a]={},b,e;a=a.split(/\s+/);b=0;for(e=a.length;b<e;b++)c[a[b]]=!0;return c}function b(a,b,e){if(e===c&&1===a.nodeType)if(e="data-"+b.replace(Z,"-$1").toLowerCase(),e=a.getAttribute(e),"string"===typeof e){try{e="true"===e?!0:"false"===e?!1:"null"===e?null:p.isNumeric(e)?+e:W.test(e)?p.parseJSON(e):e}catch(d){}p.data(a,b,e)}else e=c;return e}function g(a){for(var c in a)if(("data"!==c||!p.isEmptyObject(a[c]))&&"toJSON"!==c)return!1;return!0}function e(a,c,b){var e=
c+"defer",d=c+"queue",f=c+"mark",g=p._data(a,e);!g||"queue"!==b&&p._data(a,d)||"mark"!==b&&p._data(a,f)||setTimeout(function(){p._data(a,d)||p._data(a,f)||(p.removeData(a,e,!0),g.fire())},0)}function h(){return!1}function f(){return!0}function k(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function l(a,c,b){c=c||0;if(p.isFunction(c))return p.grep(a,function(a,e){return!!c.call(a,e,a)===b});if(c.nodeType)return p.grep(a,function(a,e){return a===c===b});if("string"===typeof c){var e=p.grep(a,
function(a){return 1===a.nodeType});if(gb.test(c))return p.filter(c,e,!b);c=p.filter(c,e)}return p.grep(a,function(a,e){return 0<=p.inArray(a,c)===b})}function n(a){var c=Kb.split("|");a=a.createDocumentFragment();if(a.createElement)for(;c.length;)a.createElement(c.pop());return a}function m(a,c){return p.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function q(a,c){if(1===c.nodeType&&p.hasData(a)){var b,e,d;e=p._data(a);var f=p._data(c,
e),g=e.events;if(g)for(b in delete f.handle,f.events={},g)for(e=0,d=g[b].length;e<d;e++)p.event.add(c,b,g[b][e]);f.data&&(f.data=p.extend({},f.data))}}function r(a,c){var b;1===c.nodeType&&(c.clearAttributes&&c.clearAttributes(),c.mergeAttributes&&c.mergeAttributes(a),b=c.nodeName.toLowerCase(),"object"===b?c.outerHTML=a.outerHTML:"input"!==b||"checkbox"!==a.type&&"radio"!==a.type?"option"===b?c.selected=a.defaultSelected:"input"===b||"textarea"===b?c.defaultValue=a.defaultValue:"script"===b&&c.text!==
a.text&&(c.text=a.text):(a.checked&&(c.defaultChecked=c.checked=a.checked),c.value!==a.value&&(c.value=a.value)),c.removeAttribute(p.expando),c.removeAttribute("_submit_attached"),c.removeAttribute("_change_attached"))}function u(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function t(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function v(a){var c=(a.nodeName||"").toLowerCase();
"input"===c?t(a):"script"!==c&&"undefined"!==typeof a.getElementsByTagName&&p.grep(a.getElementsByTagName("input"),t)}function w(a,c,b){var e="width"===c?a.offsetWidth:a.offsetHeight,d="width"===c?1:0;if(0<e){if("border"!==b)for(;4>d;d+=2)b||(e-=parseFloat(p.css(a,"padding"+Ia[d]))||0),e="margin"===b?e+(parseFloat(p.css(a,b+Ia[d]))||0):e-(parseFloat(p.css(a,"border"+Ia[d]+"Width"))||0);return e+"px"}e=Za(a,c);if(0>e||null==e)e=a.style[c];if(Ja.test(e))return e;e=parseFloat(e)||0;if(b)for(;4>d;d+=
2)e+=parseFloat(p.css(a,"padding"+Ia[d]))||0,"padding"!==b&&(e+=parseFloat(p.css(a,"border"+Ia[d]+"Width"))||0),"margin"===b&&(e+=parseFloat(p.css(a,b+Ia[d]))||0);return e+"px"}function x(a){return function(c,b){"string"!==typeof c&&(b=c,c="*");if(p.isFunction(b))for(var e=c.toLowerCase().split(oc),d=0,f=e.length,g,h;d<f;d++)g=e[d],(h=/^\+/.test(g))&&(g=g.substr(1)||"*"),g=a[g]=a[g]||[],g[h?"unshift":"push"](b)}}function J(a,b,e,d,f,g){f=f||b.dataTypes[0];g=g||{};g[f]=!0;f=a[f];for(var h=0,k=f?f.length:
0,l=a===mb,n;h<k&&(l||!n);h++)n=f[h](b,e,d),"string"===typeof n&&(!l||g[n]?n=c:(b.dataTypes.unshift(n),n=J(a,b,e,d,n,g)));!l&&n||g["*"]||(n=J(a,b,e,d,"*",g));return n}function D(a,b){var e,d,f=p.ajaxSettings.flatOptions||{};for(e in b)b[e]!==c&&((f[e]?a:d||(d={}))[e]=b[e]);d&&p.extend(!0,a,d)}function A(a,c,b,e){if(p.isArray(c))p.each(c,function(c,d){b||Qa.test(a)?e(a,d):A(a+"["+("object"===typeof d?c:"")+"]",d,b,e)});else if(b||"object"!==p.type(c))e(a,c);else for(var d in c)A(a+"["+d+"]",c[d],b,
e)}function z(){try{return new a.XMLHttpRequest}catch(c){}}function B(){setTimeout(C,0);return Lb=p.now()}function C(){Lb=c}function K(a,c){var b={};p.each(Mb.concat.apply([],Mb.slice(0,c)),function(){b[this]=a});return b}function M(a){if(!bc[a]){var c=y.body,b=p("<"+a+">").appendTo(c),e=b.css("display");b.remove();if("none"===e||""===e)xa||(xa=y.createElement("iframe"),xa.frameBorder=xa.width=xa.height=0),c.appendChild(xa),hb&&xa.createElement||(hb=(xa.contentWindow||xa.contentDocument).document,
hb.write((p.support.boxModel?"<!doctype html>":"")+"<html><body>"),hb.close()),b=hb.createElement(a),hb.body.appendChild(b),e=p.css(b,"display"),c.removeChild(xa);bc[a]=e}return bc[a]}function N(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var y=a.document,G=a.navigator,V=a.location,p=function(){function b(){if(!e.isReady){try{y.documentElement.doScroll("left")}catch(a){setTimeout(b,1);return}e.ready()}}var e=function(a,c){return new e.fn.init(a,c,g)},d=a.jQuery,f=a.$,
g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,l=/^\s+/,n=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,t=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,u=/(webkit)[ \/]([\w.]+)/,v=/(opera)(?:.*version)?[ \/]([\w.]+)/,C=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,K=/-([a-z]|[0-9])/ig,x=/^-ms-/,M=function(a,c){return(c+"").toUpperCase()},A=G.userAgent,Ua,D,N=Object.prototype.toString,P=Object.prototype.hasOwnProperty,
z=Array.prototype.push,B=Array.prototype.slice,V=String.prototype.trim,S=Array.prototype.indexOf,O={};e.fn=e.prototype={constructor:e,init:function(a,b,d){var f;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!b&&y.body)return this.context=y,this[0]=y.body,this.selector=a,this.length=1,this;if("string"===typeof a){f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:h.exec(a);if(!f||!f[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);
if(f[1])return d=(b=b instanceof e?b[0]:b)?b.ownerDocument||b:y,(a=m.exec(a))?e.isPlainObject(b)?(a=[y.createElement(a[1])],e.fn.attr.call(a,b,!0)):a=[d.createElement(a[1])]:(a=e.buildFragment([f[1]],[d]),a=(a.cacheable?e.clone(a.fragment):a.fragment).childNodes),e.merge(this,a);if((b=y.getElementById(f[2]))&&b.parentNode){if(b.id!==f[2])return d.find(a);this.length=1;this[0]=b}this.context=y;this.selector=a;return this}if(e.isFunction(a))return d.ready(a);a.selector!==c&&(this.selector=a.selector,
this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,c,b){var d=this.constructor();e.isArray(a)?z.apply(d,a):e.merge(d,a);d.prevObject=this;d.context=this.context;"find"===c?d.selector=this.selector+(this.selector?" ":"")+b:c&&(d.selector=this.selector+"."+c+"("+b+")");return d},each:function(a,
c){return e.each(this,a,c)},ready:function(a){e.bindReady();Ua.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(c,e){return a.call(c,e,c)}))},end:function(){return this.prevObject||this.constructor(null)},push:z,sort:[].sort,splice:[].splice};
e.fn.init.prototype=e.fn;e.extend=e.fn.extend=function(){var a,b,d,f,g,h=arguments[0]||{},k=1,l=arguments.length,n=!1;"boolean"===typeof h&&(n=h,h=arguments[1]||{},k=2);"object"===typeof h||e.isFunction(h)||(h={});l===k&&(h=this,--k);for(;k<l;k++)if(null!=(a=arguments[k]))for(b in a)d=h[b],f=a[b],h!==f&&(n&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,d=d&&e.isArray(d)?d:[]):d=d&&e.isPlainObject(d)?d:{},h[b]=e.extend(n,d,f)):f!==c&&(h[b]=f));return h};e.extend({noConflict:function(c){a.$===
e&&(a.$=f);c&&a.jQuery===e&&(a.jQuery=d);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(!0===a&&!--e.readyWait||!0!==a&&!e.isReady){if(!y.body)return setTimeout(e.ready,1);e.isReady=!0;!0!==a&&0<--e.readyWait||(Ua.fireWith(y,[e]),e.fn.trigger&&e(y).trigger("ready").off("ready"))}},bindReady:function(){if(!Ua){Ua=e.Callbacks("once memory");if("complete"===y.readyState)return setTimeout(e.ready,1);if(y.addEventListener)y.addEventListener("DOMContentLoaded",
D,!1),a.addEventListener("load",e.ready,!1);else if(y.attachEvent){y.attachEvent("onreadystatechange",D);a.attachEvent("onload",e.ready);var c=!1;try{c=null==a.frameElement}catch(d){}y.documentElement.doScroll&&c&&b()}}},isFunction:function(a){return"function"===e.type(a)},isArray:Array.isArray||function(a){return"array"===e.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):O[N.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==e.type(a)||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!P.call(a,"constructor")&&!P.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var d in a);return d===c||P.call(a,d)},isEmptyObject:function(a){for(var c in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(c){if("string"!==typeof c||!c)return null;c=e.trim(c);if(a.JSON&&a.JSON.parse)return a.JSON.parse(c);if(p.test(c.replace(r,
"@").replace(t,"]").replace(q,"")))return(new Function("return "+c))();e.error("Invalid JSON: "+c)},parseXML:function(b){if("string"!==typeof b||!b)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(g){d=c}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||e.error("Invalid XML: "+b);return d},noop:function(){},globalEval:function(c){c&&k.test(c)&&(a.execScript||function(c){a.eval.call(a,
c)})(c)},camelCase:function(a){return a.replace(x,"ms-").replace(K,M)},nodeName:function(a,c){return a.nodeName&&a.nodeName.toUpperCase()===c.toUpperCase()},each:function(a,b,d){var f,g=0,h=a.length,k=h===c||e.isFunction(a);if(d)if(k)for(f in a){if(!1===b.apply(a[f],d))break}else for(;g<h&&!1!==b.apply(a[g++],d););else if(k)for(f in a){if(!1===b.call(a[f],f,a[f]))break}else for(;g<h&&!1!==b.call(a[g],g,a[g++]););return a},trim:V?function(a){return null==a?"":V.call(a)}:function(a){return null==a?
"":a.toString().replace(l,"").replace(n,"")},makeArray:function(a,c){var b=c||[];if(null!=a){var d=e.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||e.isWindow(a)?z.call(b,a):e.merge(b,a)}return b},inArray:function(a,c,e){var b;if(c){if(S)return S.call(c,a,e);b=c.length;for(e=e?0>e?Math.max(0,b+e):e:0;e<b;e++)if(e in c&&c[e]===a)return e}return-1},merge:function(a,e){var b=a.length,d=0;if("number"===typeof e.length)for(var f=e.length;d<f;d++)a[b++]=e[d];else for(;e[d]!==c;)a[b++]=
e[d++];a.length=b;return a},grep:function(a,c,e){var b=[],d;e=!!e;for(var f=0,g=a.length;f<g;f++)d=!!c(a[f],f),e!==d&&b.push(a[f]);return b},map:function(a,b,d){var f,g,h=[],k=0,l=a.length;if(a instanceof e||l!==c&&"number"===typeof l&&(0<l&&a[0]&&a[l-1]||0===l||e.isArray(a)))for(;k<l;k++)f=b(a[k],k,d),null!=f&&(h[h.length]=f);else for(g in a)f=b(a[g],g,d),null!=f&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,b){if("string"===typeof b){var d=a[b];b=a;a=d}if(!e.isFunction(a))return c;
var f=B.call(arguments,2),d=function(){return a.apply(b,f.concat(B.call(arguments)))};d.guid=a.guid=a.guid||d.guid||e.guid++;return d},access:function(a,b,d,f,g,h,k){var l,n=null==d,m=0,p=a.length;if(d&&"object"===typeof d){for(m in d)e.access(a,b,m,d[m],1,h,f);g=1}else if(f!==c){l=k===c&&e.isFunction(f);n&&(l?(l=b,b=function(a,c,b){return l.call(e(a),b)}):(b.call(a,f),b=null));if(b)for(;m<p;m++)b(a[m],d,l?f.call(a[m],m,b(a[m],d)):f,k);g=1}return g?a:n?b.call(a):p?b(a[0],d):h},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=u.exec(a)||v.exec(a)||C.exec(a)||0>a.indexOf("compatible")&&w.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(c,e){return new a.fn.init(c,e)}e.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(b,d){d&&d instanceof e&&!(d instanceof a)&&(d=a(d));return e.fn.init.call(this,b,d,c)};a.fn.init.prototype=a.fn;var c=a(y);return a},browser:{}});e.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,c){O["[object "+c+"]"]=c.toLowerCase()});A=e.uaMatch(A);A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version);e.browser.webkit&&(e.browser.safari=!0);k.test("\u00a0")&&(l=/^[\s\xA0]+/,n=/[\s\xA0]+$/);g=e(y);y.addEventListener?D=function(){y.removeEventListener("DOMContentLoaded",D,!1);e.ready()}:y.attachEvent&&(D=function(){"complete"===y.readyState&&(y.detachEvent("onreadystatechange",D),e.ready())});return e}(),P={};p.Callbacks=function(a){a=a?P[a]||d(a):{};var e=[],b=[],f,
g,h,k,l,n,m=function(c){var b,d,f,g;b=0;for(d=c.length;b<d;b++)f=c[b],g=p.type(f),"array"===g?m(f):"function"===g&&(a.unique&&t.has(f)||e.push(f))},r=function(c,d){d=d||[];f=!a.memory||[c,d];h=g=!0;n=k||0;k=0;for(l=e.length;e&&n<l;n++)if(!1===e[n].apply(c,d)&&a.stopOnFalse){f=!0;break}h=!1;e&&(a.once?!0===f?t.disable():e=[]:b&&b.length&&(f=b.shift(),t.fireWith(f[0],f[1])))},t={add:function(){if(e){var a=e.length;m(arguments);h?l=e.length:f&&!0!==f&&(k=a,r(f[0],f[1]))}return this},remove:function(){if(e)for(var c=
arguments,b=0,d=c.length;b<d;b++)for(var f=0;f<e.length&&(c[b]!==e[f]||(h&&f<=l&&(l--,f<=n&&n--),e.splice(f--,1),!a.unique));f++);return this},has:function(a){if(e)for(var c=0,b=e.length;c<b;c++)if(a===e[c])return!0;return!1},empty:function(){e=[];return this},disable:function(){e=b=f=c;return this},disabled:function(){return!e},lock:function(){b=c;f&&!0!==f||t.disable();return this},locked:function(){return!b},fireWith:function(c,e){b&&(h?a.once||b.push([c,e]):a.once&&f||r(c,e));return this},fire:function(){t.fireWith(this,
arguments);return this},fired:function(){return!!g}};return t};var O=[].slice;p.extend({Deferred:function(a){var c=p.Callbacks("once memory"),e=p.Callbacks("once memory"),b=p.Callbacks("memory"),d="pending",f={resolve:c,reject:e,notify:b},g={done:c.add,fail:e.add,progress:b.add,state:function(){return d},isResolved:c.fired,isRejected:e.fired,then:function(a,c,e){h.done(a).fail(c).progress(e);return this},always:function(){h.done.apply(h,arguments).fail.apply(h,arguments);return this},pipe:function(a,
c,e){return p.Deferred(function(b){p.each({done:[a,"resolve"],fail:[c,"reject"],progress:[e,"notify"]},function(a,c){var e=c[0],d=c[1],f;if(p.isFunction(e))h[a](function(){if((f=e.apply(this,arguments))&&p.isFunction(f.promise))f.promise().then(b.resolve,b.reject,b.notify);else b[d+"With"](this===h?b:this,[f])});else h[a](b[d])})}).promise()},promise:function(a){if(null==a)a=g;else for(var c in g)a[c]=g[c];return a}},h=g.promise({}),k;for(k in f)h[k]=f[k].fire,h[k+"With"]=f[k].fireWith;h.done(function(){d=
"resolved"},e.disable,b.lock).fail(function(){d="rejected"},c.disable,b.lock);a&&a.call(h,h);return h},when:function(a){function c(a){return function(c){b[a]=1<arguments.length?O.call(arguments,0):c;--h||k.resolveWith(k,b)}}function e(a){return function(c){g[a]=1<arguments.length?O.call(arguments,0):c;k.notifyWith(l,g)}}var b=O.call(arguments,0),d=0,f=b.length,g=Array(f),h=f,k=1>=f&&a&&p.isFunction(a.promise)?a:p.Deferred(),l=k.promise();if(1<f){for(;d<f;d++)b[d]&&b[d].promise&&p.isFunction(b[d].promise)?
b[d].promise().then(c(d),k.reject,e(d)):--h;h||k.resolveWith(k,b)}else k!==a&&k.resolveWith(k,f?[a]:[]);return l}});p.support=function(){var c,b,e,d,f,g,h,k,l=y.createElement("div");l.setAttribute("className","t");l.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=l.getElementsByTagName("*");e=l.getElementsByTagName("a")[0];if(!b||!b.length||!e)return{};d=y.createElement("select");f=d.appendChild(y.createElement("option"));b=
l.getElementsByTagName("input")[0];c={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:"/a"===e.getAttribute("href"),opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:"on"===b.value,optSelected:f.selected,getSetAttribute:"t"!==l.className,enctype:!!y.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};p.boxModel=c.boxModel="CSS1Compat"===y.compatMode;b.checked=!0;c.noCloneChecked=b.cloneNode(!0).checked;d.disabled=!0;c.optDisabled=!f.disabled;try{delete l.test}catch(n){c.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",function(){c.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"));
b=y.createElement("input");b.value="t";b.setAttribute("type","radio");c.radioValue="t"===b.value;b.setAttribute("checked","checked");b.setAttribute("name","t");l.appendChild(b);e=y.createDocumentFragment();e.appendChild(l.lastChild);c.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked;c.appendChecked=b.checked;e.removeChild(b);e.appendChild(l);if(l.attachEvent)for(h in{submit:1,change:1,focusin:1})b="on"+h,k=b in l,k||(l.setAttribute(b,"return;"),k="function"===typeof l[b]),c[h+"Bubbles"]=
k;e.removeChild(l);e=d=f=l=b=null;p(function(){var b,e,d,f,h=y.getElementsByTagName("body")[0];h&&(b=y.createElement("div"),b.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(b,h.firstChild),l=y.createElement("div"),b.appendChild(l),l.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",g=l.getElementsByTagName("td"),k=0===g[0].offsetHeight,g[0].style.display="",g[1].style.display=
"none",c.reliableHiddenOffsets=k&&0===g[0].offsetHeight,a.getComputedStyle&&(l.innerHTML="",e=y.createElement("div"),e.style.width="0",e.style.marginRight="0",l.style.width="2px",l.appendChild(e),c.reliableMarginRight=0===(parseInt((a.getComputedStyle(e,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof l.style.zoom&&(l.innerHTML="",l.style.width=l.style.padding="1px",l.style.border=0,l.style.overflow="hidden",l.style.display="inline",l.style.zoom=1,c.inlineBlockNeedsLayout=3===l.offsetWidth,
l.style.display="block",l.style.overflow="visible",l.innerHTML="<div style='width:5px;'></div>",c.shrinkWrapBlocks=3!==l.offsetWidth),l.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",l.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
e=l.firstChild,d=e.firstChild,f=e.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==d.offsetTop,doesAddBorderForTableAndCells:5===f.offsetTop},d.style.position="fixed",d.style.top="20px",f.fixedPosition=20===d.offsetTop||15===d.offsetTop,d.style.position=d.style.top="",e.style.overflow="hidden",e.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===d.offsetTop,f.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(l.style.marginTop="1%",c.pixelMargin="1%"!==
(a.getComputedStyle(l,null)||{marginTop:0}).marginTop),"undefined"!==typeof b.style.zoom&&(b.style.zoom=1),h.removeChild(b),l=null,p.extend(c,f))});return c}();var W=/^(?:\{.*\}|\[.*\])$/,Z=/([A-Z])/g;p.extend({cache:{},uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!g(a)},data:function(a,b,e,d){if(p.acceptData(a)){var f;
f=p.expando;var g="string"===typeof b,h=a.nodeType,k=h?p.cache:a,l=h?a[f]:a[f]&&f,n="events"===b;if(l&&k[l]&&(n||d||k[l].data)||!g||e!==c){l||(h?a[f]=l=++p.uuid:l=f);k[l]||(k[l]={},h||(k[l].toJSON=p.noop));if("object"===typeof b||"function"===typeof b)d?k[l]=p.extend(k[l],b):k[l].data=p.extend(k[l].data,b);f=a=k[l];d||(a.data||(a.data={}),a=a.data);e!==c&&(a[p.camelCase(b)]=e);if(n&&!a[b])return f.events;g?(e=a[b],null==e&&(e=a[p.camelCase(b)])):e=a;return e}}},removeData:function(a,c,b){if(p.acceptData(a)){var e,
d,f,h=p.expando,k=a.nodeType,l=k?p.cache:a,n=k?a[h]:h;if(l[n]){if(c&&(e=b?l[n]:l[n].data)){p.isArray(c)||(c in e?c=[c]:(c=p.camelCase(c),c=c in e?[c]:c.split(" ")));d=0;for(f=c.length;d<f;d++)delete e[c[d]];if(!(b?g:p.isEmptyObject)(e))return}if(!b&&(delete l[n].data,!g(l[n])))return;p.support.deleteExpando||!l.setInterval?delete l[n]:l[n]=null;k&&(p.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}}},_data:function(a,c,b){return p.data(a,c,b,!0)},acceptData:function(a){if(a.nodeName){var c=
p.noData[a.nodeName.toLowerCase()];if(c)return!(!0===c||a.getAttribute("classid")!==c)}return!0}});p.fn.extend({data:function(a,e){var d,f,g,h,k,l=this[0],n=0,m=null;if(a===c){if(this.length&&(m=p.data(l),1===l.nodeType&&!p._data(l,"parsedAttrs"))){g=l.attributes;for(k=g.length;n<k;n++)h=g[n].name,0===h.indexOf("data-")&&(h=p.camelCase(h.substring(5)),b(l,h,m[h]));p._data(l,"parsedAttrs",!0)}return m}if("object"===typeof a)return this.each(function(){p.data(this,a)});d=a.split(".",2);d[1]=d[1]?"."+
d[1]:"";f=d[1]+"!";return p.access(this,function(e){if(e===c)return m=this.triggerHandler("getData"+f,[d[0]]),m===c&&l&&(m=p.data(l,a),m=b(l,a,m)),m===c&&d[1]?this.data(d[0]):m;d[1]=e;this.each(function(){var c=p(this);c.triggerHandler("setData"+f,d);p.data(this,a,e);c.triggerHandler("changeData"+f,d)})},null,e,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",p._data(a,c,(p._data(a,c)||0)+
1))},_unmark:function(a,c,b){!0!==a&&(b=c,c=a,a=!1);if(c){b=b||"fx";var d=b+"mark";(a=a?0:(p._data(c,d)||1)-1)?p._data(c,d,a):(p.removeData(c,d,!0),e(c,b,"mark"))}},queue:function(a,c,b){var e;if(a)return c=(c||"fx")+"queue",e=p._data(a,c),b&&(!e||p.isArray(b)?e=p._data(a,c,p.makeArray(b)):e.push(b)),e||[]},dequeue:function(a,c){c=c||"fx";var b=p.queue(a,c),d=b.shift(),f={};"inprogress"===d&&(d=b.shift());d&&("fx"===c&&b.unshift("inprogress"),p._data(a,c+".run",f),d.call(a,function(){p.dequeue(a,
c)},f));b.length||(p.removeData(a,c+"queue "+c+".run",!0),e(a,c,"queue"))}});p.fn.extend({queue:function(a,b){var e=2;"string"!==typeof a&&(b=a,a="fx",e--);return arguments.length<e?p.queue(this[0],a):b===c?this:this.each(function(){var c=p.queue(this,a,b);"fx"===a&&"inprogress"!==c[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,c){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(c||"fx",function(c,b){var e=setTimeout(c,a);b.stop=function(){clearTimeout(e)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){function e(){--h||d.resolveWith(f,[f])}"string"!==typeof a&&(b=a,a=c);a=a||"fx";for(var d=p.Deferred(),f=this,g=f.length,h=1,k=a+"defer",l=a+"queue",n=a+"mark",m;g--;)if(m=p.data(f[g],k,c,!0)||(p.data(f[g],l,c,!0)||p.data(f[g],n,c,!0))&&p.data(f[g],k,p.Callbacks("once memory"),!0))h++,m.add(e);e();return d.promise(b)}});var la=/[\n\t\r]/g,ia=/\s+/,wa=/\r/g,aa=/^(?:button|input)$/i,ya=/^(?:button|input|object|select|textarea)$/i,
Ra=/^a(?:rea)?$/i,H=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,na=p.support.getSetAttribute,Q,S,Sa;p.fn.extend({attr:function(a,c){return p.access(this,p.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,c){return p.access(this,p.prop,a,c,1<arguments.length)},removeProp:function(a){a=p.propFix[a]||a;return this.each(function(){try{this[a]=c,delete this[a]}catch(b){}})},
addClass:function(a){var c,b,e,d,f,g,h;if(p.isFunction(a))return this.each(function(c){p(this).addClass(a.call(this,c,this.className))});if(a&&"string"===typeof a)for(c=a.split(ia),b=0,e=this.length;b<e;b++)if(d=this[b],1===d.nodeType)if(d.className||1!==c.length){f=" "+d.className+" ";g=0;for(h=c.length;g<h;g++)~f.indexOf(" "+c[g]+" ")||(f+=c[g]+" ");d.className=p.trim(f)}else d.className=a;return this},removeClass:function(a){var b,e,d,f,g,h,k;if(p.isFunction(a))return this.each(function(c){p(this).removeClass(a.call(this,
c,this.className))});if(a&&"string"===typeof a||a===c)for(b=(a||"").split(ia),e=0,d=this.length;e<d;e++)if(f=this[e],1===f.nodeType&&f.className)if(a){g=(" "+f.className+" ").replace(la," ");h=0;for(k=b.length;h<k;h++)g=g.replace(" "+b[h]+" "," ");f.className=p.trim(g)}else f.className="";return this},toggleClass:function(a,c){var b=typeof a,e="boolean"===typeof c;return p.isFunction(a)?this.each(function(b){p(this).toggleClass(a.call(this,b,this.className,c),c)}):this.each(function(){if("string"===
b)for(var d,f=0,g=p(this),h=c,k=a.split(ia);d=k[f++];)h=e?h:!g.hasClass(d),g[h?"addClass":"removeClass"](d);else if("undefined"===b||"boolean"===b)this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var c=0,b=this.length;c<b;c++)if(1===this[c].nodeType&&-1<(" "+this[c].className+" ").replace(la," ").indexOf(a))return!0;return!1},val:function(a){var b,e,d,f=this[0];if(arguments.length)return d=
p.isFunction(a),this.each(function(e){var f=p(this);1===this.nodeType&&(e=d?a.call(this,e,f.val()):a,null==e?e="":"number"===typeof e?e+="":p.isArray(e)&&(e=p.map(e,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&b.set(this,e,"value")!==c||(this.value=e))});if(f){if((b=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&(e=b.get(f,"value"))!==c)return e;e=f.value;return"string"===typeof e?e.replace(wa,""):null==
e?"":e}}});p.extend({valHooks:{option:{get:function(a){var c=a.attributes.value;return!c||c.specified?a.value:a.text}},select:{get:function(a){var c,b,e=a.selectedIndex,d=[],f=a.options,g="select-one"===a.type;if(0>e)return null;a=g?e:0;for(b=g?e+1:f.length;a<b;a++)if(c=f[a],!(!c.selected||(p.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&p.nodeName(c.parentNode,"optgroup"))){c=p(c).val();if(g)return c;d.push(c)}return g&&!d.length&&f.length?p(f[e]).val():
d},set:function(a,c){var b=p.makeArray(c);p(a).find("option").each(function(){this.selected=0<=p.inArray(p(this).val(),b)});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,b,e,d){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(d&&b in p.attrFn)return p(a)[b](e);if("undefined"===typeof a.getAttribute)return p.prop(a,b,e);if(d=1!==h||!p.isXMLDoc(a))b=b.toLowerCase(),g=p.attrHooks[b]||(H.test(b)?S:Q);if(e!==c)if(null===
e)p.removeAttr(a,b);else{if(g&&"set"in g&&d&&(f=g.set(a,e,b))!==c)return f;a.setAttribute(b,""+e);return e}else{if(g&&"get"in g&&d&&null!==(f=g.get(a,b)))return f;f=a.getAttribute(b);return null===f?c:f}}},removeAttr:function(a,c){var b,e,d,f,g,h=0;if(c&&1===a.nodeType)for(e=c.toLowerCase().split(ia),f=e.length;h<f;h++)if(d=e[h])b=p.propFix[d]||d,(g=H.test(d))||p.attr(a,d,""),a.removeAttribute(na?d:b),g&&b in a&&(a[b]=!1)},attrHooks:{type:{set:function(a,c){if(aa.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");
else if(!p.support.radioValue&&"radio"===c&&p.nodeName(a,"input")){var b=a.value;a.setAttribute("type",c);b&&(a.value=b);return c}}},value:{get:function(a,c){return Q&&p.nodeName(a,"button")?Q.get(a,c):c in a?a.value:null},set:function(a,c,b){if(Q&&p.nodeName(a,"button"))return Q.set(a,c,b);a.value=c}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",
frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,b,e){var d,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!p.isXMLDoc(a))b=p.propFix[b]||b,f=p.propHooks[b];return e!==c?f&&"set"in f&&(d=f.set(a,e,b))!==c?d:a[b]=e:f&&"get"in f&&null!==(d=f.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):ya.test(a.nodeName)||Ra.test(a.nodeName)&&a.href?0:c}}}});p.attrHooks.tabindex=p.propHooks.tabIndex;
S={get:function(a,b){var e,d=p.prop(a,b);return!0===d||"boolean"!==typeof d&&(e=a.getAttributeNode(b))&&!1!==e.nodeValue?b.toLowerCase():c},set:function(a,c,b){!1===c?p.removeAttr(a,b):(c=p.propFix[b]||b,c in a&&(a[c]=!0),a.setAttribute(b,b.toLowerCase()));return b}};na||(Sa={name:!0,id:!0,coords:!0},Q=p.valHooks.button={get:function(a,b){var e;return(e=a.getAttributeNode(b))&&(Sa[b]?""!==e.nodeValue:e.specified)?e.nodeValue:c},set:function(a,c,b){var e=a.getAttributeNode(b);e||(e=y.createAttribute(b),
a.setAttributeNode(e));return e.nodeValue=c+""}},p.attrHooks.tabindex.set=Q.set,p.each(["width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{set:function(a,b){if(""===b)return a.setAttribute(c,"auto"),b}})}),p.attrHooks.contenteditable={get:Q.get,set:function(a,c,b){""===c&&(c="false");Q.set(a,c,b)}});p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return null===a?c:a}})});
p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||c},set:function(a,c){return a.style.cssText=""+c}});p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));p.support.enctype||(p.propFix.enctype="encoding");p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===a.getAttribute("value")?
"on":a.value}}});p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,c){if(p.isArray(c))return a.checked=0<=p.inArray(p(a).val(),c)}})});var ua=/^(?:textarea|input|select)$/i,pa=/^([^\.]*)?(?:\.(.+))?$/,Ab=/(?:^|\s)hover(\.\S+)?\b/,Bb=/^key/,pb=/^(?:mouse|contextmenu)|click/,qb=/^(?:focusinfocus|focusoutblur)$/,rb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Ob=function(a){if(a=rb.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&new RegExp("(?:^|\\s)"+a[3]+
"(?:\\s|$)");return a},Da=function(a){return p.event.special.hover?a:a.replace(Ab,"mouseenter$1 mouseleave$1")};p.event={add:function(a,b,e,d,f){var g,h,k,l,n,m,r,t,q;if(3!==a.nodeType&&8!==a.nodeType&&b&&e&&(g=p._data(a))){e.handler&&(r=e,e=r.handler,f=r.selector);e.guid||(e.guid=p.guid++);k=g.events;k||(g.events=k={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof p||a&&p.event.triggered===a.type?c:p.event.dispatch.apply(h.elem,arguments)},h.elem=a);b=p.trim(Da(b)).split(" ");
for(g=0;g<b.length;g++)l=pa.exec(b[g])||[],n=l[1],m=(l[2]||"").split(".").sort(),q=p.event.special[n]||{},n=(f?q.delegateType:q.bindType)||n,q=p.event.special[n]||{},l=p.extend({type:n,origType:l[1],data:d,handler:e,guid:e.guid,selector:f,quick:f&&Ob(f),namespace:m.join(".")},r),t=k[n],t||(t=k[n]=[],t.delegateCount=0,q.setup&&!1!==q.setup.call(a,d,m,h)||(a.addEventListener?a.addEventListener(n,h,!1):a.attachEvent&&a.attachEvent("on"+n,h))),q.add&&(q.add.call(a,l),l.handler.guid||(l.handler.guid=e.guid)),
f?t.splice(t.delegateCount++,0,l):t.push(l),p.event.global[n]=!0;a=null}},global:{},remove:function(a,c,b,e,d){var f=p.hasData(a)&&p._data(a),g,h,k,l,n,m,t,r,q,u;if(f&&(t=f.events)){c=p.trim(Da(c||"")).split(" ");for(g=0;g<c.length;g++)if(h=pa.exec(c[g])||[],k=l=h[1],h=h[2],k){r=p.event.special[k]||{};k=(e?r.delegateType:r.bindType)||k;q=t[k]||[];n=q.length;h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(m=0;m<q.length;m++)u=q[m],!d&&l!==u.origType||b&&b.guid!==
u.guid||h&&!h.test(u.namespace)||e&&e!==u.selector&&("**"!==e||!u.selector)||(q.splice(m--,1),u.selector&&q.delegateCount--,r.remove&&r.remove.call(a,u));0===q.length&&n!==q.length&&(r.teardown&&!1!==r.teardown.call(a,h)||p.removeEvent(a,k,f.handle),delete t[k])}else for(k in t)p.event.remove(a,k+c[g],b,e,!0);if(p.isEmptyObject(t)){if(c=f.handle)c.elem=null;p.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,e,d,f){if(!d||3!==d.nodeType&&
8!==d.nodeType){var g=b.type||b,h=[],k,l,n,m,r;if(!qb.test(g+p.event.triggered)&&(0<=g.indexOf("!")&&(g=g.slice(0,-1),k=!0),0<=g.indexOf(".")&&(h=g.split("."),g=h.shift(),h.sort()),d&&!p.event.customEvent[g]||p.event.global[g]))if(b="object"===typeof b?b[p.expando]?b:new p.Event(g,b):new p.Event(g),b.type=g,b.isTrigger=!0,b.exclusive=k,b.namespace=h.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,k=0>g.indexOf(":")?"on"+g:"",d){if(b.result=c,b.target||
(b.target=d),e=null!=e?p.makeArray(e):[],e.unshift(b),n=p.event.special[g]||{},!n.trigger||!1!==n.trigger.apply(d,e)){r=[[d,n.bindType||g]];if(!f&&!n.noBubble&&!p.isWindow(d)){m=n.delegateType||g;h=qb.test(m+g)?d:d.parentNode;for(l=null;h;h=h.parentNode)r.push([h,m]),l=h;l&&l===d.ownerDocument&&r.push([l.defaultView||l.parentWindow||a,m])}for(l=0;l<r.length&&!b.isPropagationStopped();l++)h=r[l][0],b.type=r[l][1],(m=(p._data(h,"events")||{})[b.type]&&p._data(h,"handle"))&&m.apply(h,e),(m=k&&h[k])&&
p.acceptData(h)&&!1===m.apply(h,e)&&b.preventDefault();b.type=g;f||b.isDefaultPrevented()||n._default&&!1!==n._default.apply(d.ownerDocument,e)||"click"===g&&p.nodeName(d,"a")||!p.acceptData(d)||!k||!d[g]||("focus"===g||"blur"===g)&&0===b.target.offsetWidth||p.isWindow(d)||((l=d[k])&&(d[k]=null),p.event.triggered=g,d[g](),p.event.triggered=c,l&&(d[k]=l));return b.result}}else for(l in d=p.cache,d)d[l].events&&d[l].events[g]&&p.event.trigger(b,e,d[l].handle.elem,!0)}},dispatch:function(b){b=p.event.fix(b||
a.event);var e=(p._data(this,"events")||{})[b.type]||[],d=e.delegateCount,f=[].slice.call(arguments,0),g=!b.exclusive&&!b.namespace,h=p.event.special[b.type]||{},k=[],l,n,m,r,t,q,u;f[0]=b;b.delegateTarget=this;if(!h.preDispatch||!1!==h.preDispatch.call(this,b)){if(d&&(!b.button||"click"!==b.type))for(m=p(this),m.context=this.ownerDocument||this,n=b.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled){t={};q=[];m[0]=n;for(l=0;l<d;l++){r=e[l];u=r.selector;if(t[u]===c){var v=t,y=u,C;if(r.quick){C=
r.quick;var w=n.attributes||{};C=(!C[1]||n.nodeName.toLowerCase()===C[1])&&(!C[2]||(w.id||{}).value===C[2])&&(!C[3]||C[3].test((w["class"]||{}).value))}else C=m.is(u);v[y]=C}t[u]&&q.push(r)}q.length&&k.push({elem:n,matches:q})}e.length>d&&k.push({elem:this,matches:e.slice(d)});for(l=0;l<k.length&&!b.isPropagationStopped();l++)for(d=k[l],b.currentTarget=d.elem,e=0;e<d.matches.length&&!b.isImmediatePropagationStopped();e++)if(r=d.matches[e],g||!b.namespace&&!r.namespace||b.namespace_re&&b.namespace_re.test(r.namespace))b.data=
r.data,b.handleObj=r,r=((p.event.special[r.origType]||{}).handle||r.handler).apply(d.elem,f),r!==c&&(b.result=r,!1===r&&(b.preventDefault(),b.stopPropagation()));h.postDispatch&&h.postDispatch.call(this,b);return b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&
(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var e,d,f=b.button,g=b.fromElement;null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||y,d=e.documentElement,e=e.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&
e.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g);a.which||f===c||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var b,e,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)e=g[--b],a[e]=d[e];a.target||(a.target=d.srcElement||y);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===c&&(a.metaKey=a.ctrlKey);return f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,e){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});e?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.event.handle=p.event.dispatch;p.removeEvent=y.removeEventListener?function(a,
b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?f:h):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
f;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=f;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()},isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h};p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,
bindType:b,handle:function(a){var c=a.relatedTarget,e=a.handleObj,d;if(!c||c!==this&&!p.contains(this,c))a.type=e.origType,d=e.handler.apply(this,arguments),a.type=b;return d}}});p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=p.nodeName(a,"input")||p.nodeName(a,"button")?a.form:c)&&!a._submit_attached&&(p.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}});p.support.changeBubbles||(p.event.special.change={setup:function(){if(ua.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,p.event.simulate("change",this,a,!0))});return!1}p.event.add(this,"beforeactivate._change",function(a){a=a.target;ua.test(a.nodeName)&&!a._change_attached&&(p.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||p.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){p.event.remove(this,"._change");return ua.test(this.nodeName)}});p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,e=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){0===c++&&y.addEventListener(a,e,!0)},teardown:function(){0===--c&&y.removeEventListener(a,e,!0)}}});p.fn.extend({on:function(a,
b,e,d,f){var g,k;if("object"===typeof a){"string"!==typeof b&&(e=e||b,b=c);for(k in a)this.on(k,b,e,a[k],f);return this}null==e&&null==d?(d=b,e=b=c):null==d&&("string"===typeof b?(d=e,e=c):(d=e,e=b,b=c));if(!1===d)d=h;else if(!d)return this;1===f&&(g=d,d=function(a){p().off(a);return g.apply(this,arguments)},d.guid=g.guid||(g.guid=p.guid++));return this.each(function(){p.event.add(this,a,d,e,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,e){if(a&&a.preventDefault&&a.handleObj){var d=
a.handleObj;p(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)e=b,b=c;!1===e&&(e=h);return this.each(function(){p.event.remove(this,a,e,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){p(this.context).on(a,this.selector,b,c);return this},die:function(a,b){p(this.context).off(a,
this.selector||"**",b);return this},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,e=0,d=function(c){var d=(p._data(this,"lastToggle"+a.guid)||0)%e;p._data(this,"lastToggle"+a.guid,d+1);c.preventDefault();
return b[d].apply(this,arguments)||!1};for(d.guid=c;e<b.length;)b[e++].guid=c;return this.click(d)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};
p.attrFn&&(p.attrFn[b]=!0);Bb.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks);pb.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)});(function(){function a(b,c,e,f,g,h){g=0;for(var k=f.length;g<k;g++){var l=f[g];if(l){for(var n=!1,l=l[b];l;){if(l[d]===e){n=f[l.sizset];break}1!==l.nodeType||h||(l[d]=e,l.sizset=g);if(l.nodeName.toLowerCase()===c){n=l;break}l=l[b]}f[g]=n}}}function b(a,c,e,f,g,h){g=0;for(var k=f.length;g<k;g++){var l=f[g];if(l){for(var n=!1,l=l[a];l;){if(l[d]===e){n=f[l.sizset];break}if(1===
l.nodeType)if(h||(l[d]=e,l.sizset=g),"string"!==typeof c){if(l===c){n=!0;break}}else if(0<r.filter(c,[l]).length){n=l;break}l=l[a]}f[g]=n}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,k=!0,l=/\\/g,n=/\r\n/g,m=/\W/;[0,0].sort(function(){k=!1;return 0});var r=function(a,b,c,d){c=c||[];var f=b=b||y;if(1!==b.nodeType&&9!==
b.nodeType)return[];if(!a||"string"!==typeof a)return c;var h,k,l,n,m,p=!0,t=r.isXML(b),v=[],C=a;do if(e.exec(""),h=e.exec(C))if(C=h[3],v.push(h[1]),h[2]){n=h[3];break}while(h);if(1<v.length&&u.exec(a))if(2===v.length&&q.relative[v[0]])k=G(v[0]+v[1],b,d);else for(k=q.relative[v[0]]?[b]:r(v.shift(),b);v.length;)a=v.shift(),q.relative[a]&&(a+=v.shift()),k=G(a,k,d);else if(!d&&1<v.length&&9===b.nodeType&&!t&&q.match.ID.test(v[0])&&!q.match.ID.test(v[v.length-1])&&(h=r.find(v.shift(),b,t),b=h.expr?r.filter(h.expr,
h.set)[0]:h.set[0]),b)for(h=d?{expr:v.pop(),set:w(d)}:r.find(v.pop(),1!==v.length||"~"!==v[0]&&"+"!==v[0]||!b.parentNode?b:b.parentNode,t),k=h.expr?r.filter(h.expr,h.set):h.set,0<v.length?l=w(k):p=!1;v.length;)h=m=v.pop(),q.relative[m]?h=v.pop():m="",null==h&&(h=b),q.relative[m](l,h,t);else l=[];l||(l=k);l||r.error(m||a);if("[object Array]"===g.call(l))if(p)if(b&&1===b.nodeType)for(a=0;null!=l[a];a++)l[a]&&(!0===l[a]||1===l[a].nodeType&&r.contains(b,l[a]))&&c.push(k[a]);else for(a=0;null!=l[a];a++)l[a]&&
1===l[a].nodeType&&c.push(k[a]);else c.push.apply(c,l);else w(l,c);n&&(r(n,f,c,d),r.uniqueSort(c));return c};r.uniqueSort=function(a){if(x&&(h=k,a.sort(x),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};r.matches=function(a,b){return r(a,null,null,b)};r.matchesSelector=function(a,b){return 0<r(b,null,null,[a]).length};r.find=function(a,b,c){var e,d,f,g,h,k;if(!a)return[];d=0;for(f=q.order.length;d<f;d++)if(h=q.order[d],g=q.leftMatch[h].exec(a))if(k=g[1],g.splice(1,1),"\\"!==
k.substr(k.length-1)&&(g[1]=(g[1]||"").replace(l,""),e=q.find[h](g,b,c),null!=e)){a=a.replace(q.match[h],"");break}e||(e="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:e,expr:a}};r.filter=function(a,b,e,d){for(var f,g,h,k,l,n,m,p,t=a,u=[],v=b,y=b&&b[0]&&r.isXML(b[0]);a&&b.length;){for(h in q.filter)if(null!=(f=q.leftMatch[h].exec(a))&&f[2]&&(n=q.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"!==l.substr(l.length-1))){v===u&&(u=[]);if(q.preFilter[h])if(f=q.preFilter[h](f,
v,e,u,d,y),!f)g=k=!0;else if(!0===f)continue;if(f)for(m=0;null!=(l=v[m]);m++)l&&(k=n(l,f,m,v),p=d^k,e&&null!=k?p?g=!0:v[m]=!1:p&&(u.push(l),g=!0));if(k!==c){e||(v=u);a=a.replace(q.match[h],"");if(!g)return[];break}}if(a===t)if(null==g)r.error(a);else break;t=a}return v};r.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var t=r.getText=function(a){var b,c;b=a.nodeType;var e="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(n,"");for(a=a.firstChild;a;a=a.nextSibling)e+=t(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=t(c));return e},q=r.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,e=c&&!m.test(b),
c=c&&!e;e&&(b=b.toLowerCase());for(var e=0,d=a.length,f;e<d;e++)if(f=a[e]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[e]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&r.filter(b,a,!0)},">":function(a,b){var c,e="string"===typeof b,d=0,f=a.length;if(e&&!m.test(b))for(b=b.toLowerCase();d<f;d++){if(c=a[d])c=c.parentNode,a[d]=c.nodeName.toLowerCase()===b?c:!1}else{for(;d<f;d++)(c=a[d])&&(a[d]=e?c.parentNode:c.parentNode===b);e&&r.filter(b,a,!0)}},"":function(c,e,d){var g,h=f++,k=b;"string"!==
typeof e||m.test(e)||(g=e=e.toLowerCase(),k=a);k("parentNode",e,h,c,g,d)},"~":function(c,e,d){var g,h=f++,k=b;"string"!==typeof e||m.test(e)||(g=e=e.toLowerCase(),k=a);k("previousSibling",e,h,c,g,d)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],e=b.getElementsByName(a[1]),d=0,f=e.length;d<f;d++)e[d].getAttribute("name")===a[1]&&c.push(e[d]);
return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,e,d,f){a=" "+a[1].replace(l,"")+" ";if(f)return a;f=0;for(var g;null!=(g=b[f]);f++)g&&(d^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||e.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(l,"")},TAG:function(a,b){return a[1].replace(l,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
r.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&r.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,e,d,f){b=a[1]=a[1].replace(l,"");!f&&q.attrMap[b]&&(a[1]=q.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(l,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,d,f){if("not"===a[1])if(1<(e.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
r(a[3],null,null,b);else return a=r.filter(a[3],b,c,1^f),c||d.push.apply(d,a),!1;else if(q.match.POS.test(a[0])||q.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,b,c){return!!r(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,e){return b===e.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,e){var d=b[1],f=q.filters[d];if(f)return f(a,c,b,e);if("contains"===d)return 0<=(a.textContent||a.innerText||t([a])||"").indexOf(b[3]);
if("not"===d){b=b[3];c=0;for(e=b.length;c<e;c++)if(b[c]===a)return!1;return!0}r.error(d)},CHILD:function(a,b){var c,e,f,g,h,k;c=b[1];k=a;switch(c){case "only":case "first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===c)return!0;k=a;case "last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case "nth":c=b[2];e=b[3];if(1===c&&0===e)return!0;f=b[0];if((g=a.parentNode)&&(g[d]!==f||!a.nodeIndex)){h=0;for(k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);
g[d]=f}k=a.nodeIndex-e;return 0===c?0===k:0===k%c&&0<=k/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=r.attr?r.attr(a,c):q.attrHandle[c]?q.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=c+"",d=b[2],f=b[4];return null==c?"!="===d:!d&&r.attr?null!=c:"="===d?
e===f:"*="===d?0<=e.indexOf(f):"~="===d?0<=(" "+e+" ").indexOf(f):f?"!="===d?e!==f:"^="===d?0===e.indexOf(f):"$="===d?e.substr(e.length-f.length)===f:"|="===d?e===f||e.substr(0,f.length+1)===f+"-":!1:e&&!1!==c},POS:function(a,b,c,e){var d=q.setFilters[b[2]];if(d)return d(a,c,b,e)}}},u=q.match.POS,v=function(a,b){return"\\"+(b-0+1)},C;for(C in q.match)q.match[C]=new RegExp(q.match[C].source+/(?![^\[]*\])(?![^\(]*\))/.source),q.leftMatch[C]=new RegExp(/(^(?:.|\r|\n)*?)/.source+q.match[C].source.replace(/\\(\d+)/g,
v));q.match.globalPOS=u;var w=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(y.documentElement.childNodes,0)[0].nodeType}catch(K){w=function(a,b){var c=0,e=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(e,a);else if("number"===typeof a.length)for(var d=a.length;c<d;c++)e.push(a[c]);else for(;a[c];c++)e.push(a[c]);return e}}var x,M;y.documentElement.compareDocumentPosition?x=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&
b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(x=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,e,d=[],f=[];c=a.parentNode;e=b.parentNode;var g=c;if(c===e)return M(a,b);if(!c)return-1;if(!e)return 1;for(;g;)d.unshift(g),g=g.parentNode;for(g=e;g;)f.unshift(g),g=g.parentNode;c=d.length;e=f.length;for(g=0;g<c&&g<e;g++)if(d[g]!==f[g])return M(d[g],f[g]);return g===c?M(a,f[g],-1):M(d[g],b,1)},
M=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=y.createElement("div"),b="script"+(new Date).getTime(),e=y.documentElement;a.innerHTML="<a name='"+b+"'/>";e.insertBefore(a,e.firstChild);y.getElementById(b)&&(q.find.ID=function(a,b,e){if("undefined"!==typeof b.getElementById&&!e)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:c:[]},q.filter.ID=
function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});e.removeChild(a);e=a=null})();(function(){var a=y.createElement("div");a.appendChild(y.createComment(""));0<a.getElementsByTagName("*").length&&(q.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var e=[],d=0;c[d];d++)1===c[d].nodeType&&e.push(c[d]);c=e}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(q.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();y.querySelectorAll&&function(){var a=r,b=y.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){r=function(b,c,e,d){c=c||y;if(!d&&!r.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return w(c.getElementsByTagName(b),e);if(f[2]&&q.find.CLASS&&c.getElementsByClassName)return w(c.getElementsByClassName(f[2]),
e)}if(9===c.nodeType){if("body"===b&&c.body)return w([c.body],e);if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return w([g],e)}else return w([],e)}try{return w(c.querySelectorAll(b),e)}catch(h){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,k=(g=c.getAttribute("id"))||"__sizzle__",l=c.parentNode,n=/^\s*[+~]/.test(b);g?k=k.replace(/'/g,"\\$&"):c.setAttribute("id",k);n&&l&&(c=c.parentNode);try{if(!n||l)return w(c.querySelectorAll("[id='"+k+"'] "+
b),e)}catch(h){}finally{g||f.removeAttribute("id")}}}return a(b,c,e,d)};for(var c in a)r[c]=a[c];b=null}}();(function(){var a=y.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(y.createElement("div"),"div"),e=!1;try{b.call(y.documentElement,"[test!='']:sizzle")}catch(d){e=!0}r.matchesSelector=function(a,d){d=d.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!r.isXML(a))try{if(e||!q.match.PSEUDO.test(d)&&!/!=/.test(d)){var f=b.call(a,
d);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return 0<r(d,null,null,[a]).length}}})();(function(){var a=y.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(q.order.splice(1,0,"CLASS"),q.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},
a=null))})();r.contains=y.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:y.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};r.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var G=function(a,b,c){var e,d=[],f="";for(b=b.nodeType?[b]:b;e=q.match.PSEUDO.exec(a);)f+=e[0],a=a.replace(q.match.PSEUDO,"");a=q.relative[a]?a+"*":a;e=0;for(var g=b.length;e<g;e++)r(a,
b[e],d,c);return r.filter(f,d)};r.attr=p.attr;r.selectors.attrMap={};p.find=r;p.expr=r.selectors;p.expr[":"]=p.expr.filters;p.unique=r.uniqueSort;p.text=r.getText;p.isXMLDoc=r.isXML;p.contains=r.contains})();var sb=/Until$/,Ka=/^(?:parents|prevUntil|prevAll)/,za=/,/,gb=/^.[^:#\[\.,]*$/,La=Array.prototype.slice,da=p.expr.match.globalPOS,Aa={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b=this,c,e;if("string"!==typeof a)return p(a).filter(function(){c=0;for(e=b.length;c<
e;c++)if(p.contains(b[c],this))return!0});var d=this.pushStack("","find",a),f,g,h;c=0;for(e=this.length;c<e;c++)if(f=d.length,p.find(a,this[c],d),0<c)for(g=f;g<d.length;g++)for(h=0;h<f;h++)if(d[h]===d[g]){d.splice(g--,1);break}return d},has:function(a){var b=p(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(p.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(l(this,a,!1),"not",a)},filter:function(a){return this.pushStack(l(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?da.test(a)?0<=p(a,this.context).index(this[0]):0<p.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],e,d,f=this[0];if(p.isArray(a)){for(d=1;f&&f.ownerDocument&&f!==b;){for(e=0;e<a.length;e++)p(f).is(a[e])&&c.push({selector:a[e],elem:f,level:d});f=f.parentNode;d++}return c}var g=da.test(a)||"string"!==typeof a?p(a,b||this.context):0;e=0;for(d=this.length;e<d;e++)for(f=this[e];f;)if(g?-1<g.index(f):p.find.matchesSelector(f,a)){c.push(f);break}else if(f=
f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break;c=1<c.length?p.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return a?"string"===typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),e=p.merge(this.get(),c);return this.pushStack(k(c[0])||k(e[0])?e:p.unique(e))},andSelf:function(){return this.add(this.prevObject)}});
p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return p.nth(a,2,"nextSibling")},prev:function(a){return p.nth(a,2,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",
c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.makeArray(a.childNodes)}},function(a,b){p.fn[a]=function(c,e){var d=p.map(this,b,c);sb.test(a)||(e=c);e&&"string"===typeof e&&(d=p.filter(e,d));d=1<this.length&&!Aa[a]?p.unique(d):d;(1<this.length||za.test(e))&&Ka.test(a)&&(d=d.reverse());return this.pushStack(d,a,La.call(arguments).join(","))}});
p.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,b,e){var d=[];for(a=a[b];a&&9!==a.nodeType&&(e===c||1!==a.nodeType||!p(a).is(e));)1===a.nodeType&&d.push(a),a=a[b];return d},nth:function(a,b,c,e){b=b||1;for(e=0;a&&(1!==a.nodeType||++e!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Kb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
Ea=/ jQuery\d+="(?:\d+|null)"/g,Cb=/^\s+/,$a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ib=/<([\w:]+)/,Pb=/<tbody/i,Db=/<|&#?\w+;/,Y=/<(?:script|style)/i,tb=/<(?:script|object|embed|option|style)/i,Ta=new RegExp("<(?:"+Kb+")[\\s/>]","i"),ab=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=/\/(java|ecma)script/i,bb=/^\s*<!(?:\[CDATA\[|\-\-)/,ja={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},F=n(y);ja.optgroup=ja.option;ja.tbody=ja.tfoot=ja.colgroup=ja.caption=ja.thead;ja.th=ja.td;p.support.htmlSerialize||(ja._default=[1,"div<div>","</div>"]);p.fn.extend({text:function(a){return p.access(this,function(a){return a===c?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,p.clean(arguments));return a}},remove:function(a,
b){for(var c=0,e;null!=(e=this[c]);c++)if(!a||p.filter(a,[e]).length)b||1!==e.nodeType||(p.cleanData(e.getElementsByTagName("*")),p.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&p.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,
function(a){var b=this[0]||{},e=0,d=this.length;if(a===c)return 1===b.nodeType?b.innerHTML.replace(Ea,""):null;if(!("string"!==typeof a||Y.test(a)||!p.support.leadingWhitespace&&Cb.test(a)||ja[(ib.exec(a)||["",""])[1].toLowerCase()])){a=a.replace($a,"<$1></$2>");try{for(;e<d;e++)b=this[e]||{},1===b.nodeType&&(p.cleanData(b.getElementsByTagName("*")),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(p.isFunction(a))return this.each(function(b){var c=
p(this),e=c.html();c.replaceWith(a.call(this,b,e))});"string"!==typeof a&&(a=p(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove();b?p(b).before(a):p(c).append(a)})}return this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,e){var d,f,g,h=a[0],k=[];if(!p.support.checkClone&&3===arguments.length&&"string"===typeof h&&ab.test(h))return this.each(function(){p(this).domManip(a,
b,e,!0)});if(p.isFunction(h))return this.each(function(d){var f=p(this);a[0]=h.call(this,d,b?f.html():c);f.domManip(a,b,e)});if(this[0]){d=h&&h.parentNode;d=p.support.parentNode&&d&&11===d.nodeType&&d.childNodes.length===this.length?{fragment:d}:p.buildFragment(a,this,k);g=d.fragment;if(f=1===g.childNodes.length?g=g.firstChild:g.firstChild){b=b&&p.nodeName(f,"tr");for(var l=0,n=this.length,r=n-1;l<n;l++)e.call(b?m(this[l],f):this[l],d.cacheable||1<n&&l<r?p.clone(g,!0,!0):g)}k.length&&p.each(k,function(a,
b){b.src?p.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bb,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});p.buildFragment=function(a,b,c){var e,d,f,g,h=a[0];b&&b[0]&&(g=b[0].ownerDocument||b[0]);g.createDocumentFragment||(g=y);!(1===a.length&&"string"===typeof h&&512>h.length&&g===y&&"<"===h.charAt(0))||tb.test(h)||!p.support.checkClone&&ab.test(h)||!p.support.html5Clone&&Ta.test(h)||(d=!0,(f=
p.fragments[h])&&1!==f&&(e=f));e||(e=g.createDocumentFragment(),p.clean(a,g,e,c));d&&(p.fragments[h]=f?e:1);return{fragment:e,cacheable:d}};p.fragments={};p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var e=[];c=p(c);var d=1===this.length&&this[0].parentNode;if(d&&11===d.nodeType&&1===d.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var d=0,f=c.length;d<f;d++){var g=(0<d?this.clone(!0):
this).get();p(c[d])[b](g);e=e.concat(g)}return this.pushStack(e,a,c.selector)}});p.extend({clone:function(a,b,c){var e,d,f;p.support.html5Clone||p.isXMLDoc(a)||!Ta.test("<"+a.nodeName+">")?e=a.cloneNode(!0):(e=y.createElement("div"),F.appendChild(e),e.innerHTML=a.outerHTML,e=e.firstChild);var g=e;if(!(p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(r(a,g),e=u(a),d=u(g),f=0;e[f];++f)d[f]&&r(e[f],d[f]);if(b&&(q(a,g),c))for(e=u(a),d=u(g),f=0;e[f];++f)q(e[f],
d[f]);return g},clean:function(a,b,c,e){var d,f=[];b=b||y;"undefined"===typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||y);for(var g=0,h;null!=(h=a[g]);g++)if("number"===typeof h&&(h+=""),h){if("string"===typeof h)if(Db.test(h)){h=h.replace($a,"<$1></$2>");d=(ib.exec(h)||["",""])[1].toLowerCase();var k=ja[d]||ja._default,l=k[0],m=b.createElement("div"),r=F.childNodes;b===y?F.appendChild(m):n(b).appendChild(m);for(m.innerHTML=k[1]+h+k[2];l--;)m=m.lastChild;if(!p.support.tbody)for(l=
Pb.test(h),k="table"!==d||l?"<table>"!==k[1]||l?[]:m.childNodes:m.firstChild&&m.firstChild.childNodes,d=k.length-1;0<=d;--d)p.nodeName(k[d],"tbody")&&!k[d].childNodes.length&&k[d].parentNode.removeChild(k[d]);!p.support.leadingWhitespace&&Cb.test(h)&&m.insertBefore(b.createTextNode(Cb.exec(h)[0]),m.firstChild);h=m.childNodes;m&&(m.parentNode.removeChild(m),0<r.length&&(m=r[r.length-1])&&m.parentNode&&m.parentNode.removeChild(m))}else h=b.createTextNode(h);var t;if(!p.support.appendChecked)if(h[0]&&
"number"===typeof(t=h.length))for(d=0;d<t;d++)v(h[d]);else v(h);h.nodeType?f.push(h):f=p.merge(f,h)}if(c)for(a=function(a){return!a.type||Ma.test(a.type)},g=0;f[g];g++)b=f[g],e&&p.nodeName(b,"script")&&(!b.type||Ma.test(b.type))?e.push(b.parentNode?b.parentNode.removeChild(b):b):(1===b.nodeType&&(h=p.grep(b.getElementsByTagName("script"),a),f.splice.apply(f,[g+1,0].concat(h))),c.appendChild(b));return f},cleanData:function(a){for(var b,c,e=p.cache,d=p.event.special,f=p.support.deleteExpando,g=0,h;null!=
(h=a[g]);g++)if(!h.nodeName||!p.noData[h.nodeName.toLowerCase()])if(c=h[p.expando]){if((b=e[c])&&b.events){for(var k in b.events)d[k]?p.event.remove(h,k):p.removeEvent(h,k,b.handle);b.handle&&(b.handle.elem=null)}f?delete h[p.expando]:h.removeAttribute&&h.removeAttribute(p.expando);delete e[c]}}});var cb=/alpha\([^)]*\)/i,ba=/opacity=([^)]*)/,Qb=/([A-Z]|^ms)/g,jb=/^[\-+]?(?:\d*\.)?\d+$/i,Ja=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Rb=/^([\-+])=([\-+.\de]+)/,ub=/^margin/,cc={position:"absolute",visibility:"hidden",
display:"block"},Ia=["Top","Right","Bottom","Left"],Za,Sb,Tb;p.fn.css=function(a,b){return p.access(this,function(a,b,e){return e!==c?p.style(a,b,e):p.css(a,b)},a,b,1<arguments.length)};p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Za(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,e,d){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g=p.camelCase(b),h=a.style,k=p.cssHooks[g];b=p.cssProps[g]||g;if(e!==c){if(d=typeof e,"string"===d&&(f=Rb.exec(e))&&(e=+(f[1]+1)*+f[2]+parseFloat(p.css(a,b)),d="number"),!(null==e||"number"===d&&isNaN(e)||("number"!==d||p.cssNumber[g]||(e+="px"),k&&"set"in k&&(e=k.set(a,e))===c)))try{h[b]=e}catch(l){}}else return k&&"get"in k&&(f=k.get(a,!1,d))!==c?f:h[b]}},css:function(a,b,e){var d,f;b=p.camelCase(b);f=p.cssHooks[b];b=p.cssProps[b]||b;"cssFloat"===b&&
(b="float");if(f&&"get"in f&&(d=f.get(a,!0,e))!==c)return d;if(Za)return Za(a,b)},swap:function(a,b,c){var e={},d;for(d in b)e[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=e[d];return c}});p.curCSS=p.css;y.defaultView&&y.defaultView.getComputedStyle&&(Sb=function(a,b){var c,e,d,f=a.style;b=b.replace(Qb,"-$1").toLowerCase();(e=a.ownerDocument.defaultView)&&(d=e.getComputedStyle(a,null))&&(c=d.getPropertyValue(b),""!==c||p.contains(a.ownerDocument.documentElement,a)||(c=p.style(a,
b)));!p.support.pixelMargin&&d&&ub.test(b)&&Ja.test(c)&&(e=f.width,f.width=c,c=d.width,f.width=e);return c});y.documentElement.currentStyle&&(Tb=function(a,b){var c,e,d=a.currentStyle&&a.currentStyle[b],f=a.style;null==d&&f&&(c=f[b])&&(d=c);if(Ja.test(d)){c=f.left;if(e=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":d;d=f.pixelLeft+"px";f.left=c;e&&(a.runtimeStyle.left=e)}return""===d?"auto":d});Za=Sb||Tb;p.each(["height","width"],function(a,
b){p.cssHooks[b]={get:function(a,c,e){if(c)return 0!==a.offsetWidth?w(a,b,e):p.swap(a,cc,function(){return w(a,b,e)})},set:function(a,b){return jb.test(b)?b+"px":b}}});p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return ba.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,e=a.currentStyle,d=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=e&&e.filter||c.filter||"";c.zoom=1;if(1<=b&&""===p.trim(f.replace(cb,
""))&&(c.removeAttribute("filter"),e&&!e.filter))return;c.filter=cb.test(f)?f.replace(cb,d):f+" "+d}});p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){return b?Za(a,"margin-right"):a.style.marginRight})}})});p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||p.css(a,"display"))},
p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var e="string"===typeof c?c.split(" "):[c],d={};for(c=0;4>c;c++)d[a+Ia[c]+b]=e[c]||e[c-2]||e[0];return d}}});var dc=/%20/g,Qa=/\[\]$/,Na=/\r?\n/g,Ub=/#.*$/,Ua=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Oa=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Pa=/^(?:GET|HEAD)$/,Va=/^\/\//,
sc=/\?/,kb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Oc=/^(?:select|textarea)/i,oc=/\s+/,Pc=/([?&])_=[^&]*/,tc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ec=p.fn.load,mb={},Fa={},db,eb,fc=["*/"]+["*"];try{db=V.href}catch(Ca){db=y.createElement("a"),db.href="",db=db.href}eb=tc.exec(db.toLowerCase())||[];p.fn.extend({load:function(a,b,e){if("string"!==typeof a&&ec)return ec.apply(this,arguments);if(!this.length)return this;var d=a.indexOf(" ");if(0<=d){var f=a.slice(d,a.length);a=
a.slice(0,d)}d="GET";b&&(p.isFunction(b)?(e=b,b=c):"object"===typeof b&&(b=p.param(b,p.ajaxSettings.traditional),d="POST"));var g=this;p.ajax({url:a,type:d,dataType:"html",data:b,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),g.html(f?p("<div>").append(c.replace(kb,"")).find(f):c));e&&g.each(e,[c,b,a])}});return this},serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Oc.test(this.nodeName)||Oa.test(this.type))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(Na,"\r\n")}}):{name:b.name,value:c.replace(Na,"\r\n")}}).get()}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.each(["get","post"],function(a,b){p[b]=function(a,
e,d,f){p.isFunction(e)&&(f=f||d,d=e,e=c);return p.ajax({type:b,url:a,data:e,success:d,dataType:f})}});p.extend({getScript:function(a,b){return p.get(a,c,b,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){b?D(a,p.ajaxSettings):(b=a,a=p.ajaxSettings);D(a,b);return a},ajaxSettings:{url:db,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(eb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":fc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:x(mb),ajaxTransport:x(Fa),ajax:function(a,b){function e(a,b,m,r){if(2!==C){C=2;v&&clearTimeout(v);u=c;t=r||"";x.readyState=0<a?4:
0;var q,y,K;r=b;if(m){var M=d,G=x,A=M.contents,D=M.dataTypes,Ua=M.responseFields,N,P,z,B;for(P in Ua)P in m&&(G[Ua[P]]=m[P]);for(;"*"===D[0];)D.shift(),N===c&&(N=M.mimeType||G.getResponseHeader("content-type"));if(N)for(P in A)if(A[P]&&A[P].test(N)){D.unshift(P);break}if(D[0]in m)z=D[0];else{for(P in m){if(!D[0]||M.converters[P+" "+D[0]]){z=P;break}B||(B=P)}z=z||B}z?(z!==D[0]&&D.unshift(z),m=m[z]):m=void 0}else m=c;if(200<=a&&300>a||304===a){if(d.ifModified){if(N=x.getResponseHeader("Last-Modified"))p.lastModified[n]=
N;if(N=x.getResponseHeader("Etag"))p.etag[n]=N}if(304===a)r="notmodified",q=!0;else try{N=d;N.dataFilter&&(m=N.dataFilter(m,N.dataType));var V=N.dataTypes;P={};var S,O,J=V.length,Oa,Pa=V[0],W,Z,Ca,H,Q;for(S=1;S<J;S++){if(1===S)for(O in N.converters)"string"===typeof O&&(P[O.toLowerCase()]=N.converters[O]);W=Pa;Pa=V[S];if("*"===Pa)Pa=W;else if("*"!==W&&W!==Pa){Z=W+" "+Pa;Ca=P[Z]||P["* "+Pa];if(!Ca)for(H in Q=c,P)if(Oa=H.split(" "),Oa[0]===W||"*"===Oa[0])if(Q=P[Oa[1]+" "+Pa]){H=P[H];!0===H?Ca=Q:!0===
Q&&(Ca=H);break}Ca||Q||p.error("No conversion from "+Z.replace(" "," to "));!0!==Ca&&(m=Ca?Ca(m):Q(H(m)))}}y=m;r="success";q=!0}catch(Va){r="parsererror",K=Va}}else if(K=r,!r||a)r="error",0>a&&(a=0);x.status=a;x.statusText=""+(b||r);q?h.resolveWith(f,[y,r,x]):h.rejectWith(f,[x,r,K]);x.statusCode(l);l=c;w&&g.trigger("ajax"+(q?"Success":"Error"),[x,d,q?y:K]);k.fireWith(f,[x,r]);w&&(g.trigger("ajaxComplete",[x,d]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=c);b=b||{};var d=
p.ajaxSetup({},b),f=d.context||d,g=f!==d&&(f.nodeType||f instanceof p)?p(f):p.event,h=p.Deferred(),k=p.Callbacks("once memory"),l=d.statusCode||{},n,m={},r={},t,q,u,v,y,C=0,w,K,x={readyState:0,setRequestHeader:function(a,b){if(!C){var c=a.toLowerCase();a=r[c]=r[c]||a;m[a]=b}return this},getAllResponseHeaders:function(){return 2===C?t:null},getResponseHeader:function(a){var b;if(2===C){if(!q)for(q={};b=Ua.exec(t);)q[b[1].toLowerCase()]=b[2];b=q[a.toLowerCase()]}return b===c?null:b},overrideMimeType:function(a){C||
(d.mimeType=a);return this},abort:function(a){a=a||"abort";u&&u.abort(a);e(0,a);return this}};h.promise(x);x.success=x.done;x.error=x.fail;x.complete=k.add;x.statusCode=function(a){if(a){var b;if(2>C)for(b in a)l[b]=[l[b],a[b]];else b=a[x.status],x.then(b,b)}return this};d.url=((a||d.url)+"").replace(Ub,"").replace(Va,eb[1]+"//");d.dataTypes=p.trim(d.dataType||"*").toLowerCase().split(oc);null==d.crossDomain&&(y=tc.exec(d.url.toLowerCase()),d.crossDomain=!(!y||y[1]==eb[1]&&y[2]==eb[2]&&(y[3]||("http:"===
y[1]?80:443))==(eb[3]||("http:"===eb[1]?80:443))));d.data&&d.processData&&"string"!==typeof d.data&&(d.data=p.param(d.data,d.traditional));J(mb,d,b,x);if(2===C)return!1;w=d.global;d.type=d.type.toUpperCase();d.hasContent=!Pa.test(d.type);w&&0===p.active++&&p.event.trigger("ajaxStart");if(!d.hasContent&&(d.data&&(d.url+=(sc.test(d.url)?"&":"?")+d.data,delete d.data),n=d.url,!1===d.cache)){y=p.now();var M=d.url.replace(Pc,"$1_="+y);d.url=M+(M===d.url?(sc.test(d.url)?"&":"?")+"_="+y:"")}(d.data&&d.hasContent&&
!1!==d.contentType||b.contentType)&&x.setRequestHeader("Content-Type",d.contentType);d.ifModified&&(n=n||d.url,p.lastModified[n]&&x.setRequestHeader("If-Modified-Since",p.lastModified[n]),p.etag[n]&&x.setRequestHeader("If-None-Match",p.etag[n]));x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+fc+"; q=0.01":""):d.accepts["*"]);for(K in d.headers)x.setRequestHeader(K,d.headers[K]);if(d.beforeSend&&(!1===d.beforeSend.call(f,x,
d)||2===C))return x.abort(),!1;for(K in{success:1,error:1,complete:1})x[K](d[K]);if(u=J(Fa,d,b,x)){x.readyState=1;w&&g.trigger("ajaxSend",[x,d]);d.async&&0<d.timeout&&(v=setTimeout(function(){x.abort("timeout")},d.timeout));try{C=1,u.send(m,e)}catch(G){if(2>C)e(-1,G);else throw G;}}else e(-1,"No Transport");return x},param:function(a,b){var e=[],d=function(a,b){b=p.isFunction(b)?b():b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===c&&(b=p.ajaxSettings.traditional);if(p.isArray(a)||
a.jquery&&!p.isPlainObject(a))p.each(a,function(){d(this.name,this.value)});else for(var f in a)A(f,a[f],b,d);return e.join("&").replace(dc,"+")}});p.extend({active:0,lastModified:{},etag:{}});var Qc=p.now(),Vb=/(\=)\?(&|$)|\?\?/i;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return p.expando+"_"+Qc++}});p.ajaxPrefilter("json jsonp",function(b,c,e){c="string"===typeof b.data&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&(Vb.test(b.url)||
c&&Vb.test(b.data))){var d,f=b.jsonpCallback=p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[f],h=b.url,k=b.data,l="$1"+f+"$2";!1!==b.jsonp&&(h=h.replace(Vb,l),b.url===h&&(c&&(k=k.replace(Vb,l)),b.data===k&&(h+=(/\?/.test(h)?"&":"?")+b.jsonp+"="+f)));b.url=h;b.data=k;a[f]=function(a){d=[a]};e.always(function(){a[f]=g;if(d&&p.isFunction(g))a[f](d[0])});b.converters["script json"]=function(){d||p.error(f+" was not called");return d[0]};b.dataTypes[0]="json";return"script"}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,e=y.head||y.getElementsByTagName("head")[0]||y.documentElement;return{send:function(d,f){b=y.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,
d){if(d||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,e&&b.parentNode&&e.removeChild(b),b=c,d||f(200,"success")};e.insertBefore(b,e.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var gc=a.ActiveXObject?function(){for(var a in vb)vb[a](0,1)}:!1,hc=0,vb;p.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&z()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:z;(function(a){p.extend(p.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(p.ajaxSettings.xhr());p.support.ajax&&p.ajaxTransport(function(b){if(!b.crossDomain||p.support.cors){var e;return{send:function(d,f){var g=b.xhr(),h,k;b.username?g.open(b.type,b.url,b.async,b.username,b.password):g.open(b.type,b.url,b.async);if(b.xhrFields)for(k in b.xhrFields)g[k]=b.xhrFields[k];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType);b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");try{for(k in d)g.setRequestHeader(k,
d[k])}catch(l){}g.send(b.hasContent&&b.data||null);e=function(a,d){var k,l,n,m,r;try{if(e&&(d||4===g.readyState))if(e=c,h&&(g.onreadystatechange=p.noop,gc&&delete vb[h]),d)4!==g.readyState&&g.abort();else{k=g.status;n=g.getAllResponseHeaders();m={};(r=g.responseXML)&&r.documentElement&&(m.xml=r);try{m.text=g.responseText}catch(t){}try{l=g.statusText}catch(t){l=""}k||!b.isLocal||b.crossDomain?1223===k&&(k=204):k=m.text?200:404}}catch(t){d||f(-1,t)}m&&f(k,l,m,n)};b.async&&4!==g.readyState?(h=++hc,gc&&
(vb||(vb={},p(a).unload(gc)),vb[h]=e),g.onreadystatechange=e):e()},abort:function(){e&&e(0,1)}}}});var bc={},xa,hb,uc=/^(?:toggle|show|hide)$/,vc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Wb,Mb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Lb;p.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(K("show",3),a,b,c);c=0;for(var e=this.length;c<e;c++)a=this[c],a.style&&(b=a.style.display,p._data(a,
"olddisplay")||"none"!==b||(b=a.style.display=""),(""===b&&"none"===p.css(a,"display")||!p.contains(a.ownerDocument.documentElement,a))&&p._data(a,"olddisplay",M(a.nodeName)));for(c=0;c<e;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=p._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(K("hide",3),a,b,c);c=0;for(var e=this.length;c<e;c++)a=this[c],a.style&&(b=p.css(a,"display"),"none"===b||p._data(a,"olddisplay")||p._data(a,
"olddisplay",b));for(c=0;c<e;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:p.fn.toggle,toggle:function(a,b,c){var e="boolean"===typeof a;p.isFunction(a)&&p.isFunction(b)?this._toggle.apply(this,arguments):null==a||e?this.each(function(){var b=e?a:p(this).is(":hidden");p(this)[b?"show":"hide"]()}):this.animate(K("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,
b,c,e){function d(){!1===f.queue&&p._mark(this);var b=p.extend({},f),c=1===this.nodeType,e=c&&p(this).is(":hidden"),g,h,k,l,n;b.animatedProperties={};for(k in a)if(g=p.camelCase(k),k!==g&&(a[g]=a[k],delete a[k]),(h=p.cssHooks[g])&&"expand"in h)for(k in l=h.expand(a[g]),delete a[g],l)k in a||(a[k]=l[k]);for(g in a){h=a[g];p.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if("hide"===h&&e||"show"===h&&!e)return b.complete.call(this);
!c||"height"!==g&&"width"!==g||(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===p.css(this,"display")&&"none"===p.css(this,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==M(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(k in a)if(c=new p.fx(this,b,k),h=a[k],uc.test(h))if(g=p._data(this,"toggle"+k)||("toggle"===h?e?"show":"hide":0))p._data(this,"toggle"+k,"show"===g?"hide":"show"),
c[g]();else c[h]();else g=vc.exec(h),l=c.cur(),g?(h=parseFloat(g[2]),n=g[3]||(p.cssNumber[k]?"":"px"),"px"!==n&&(p.style(this,k,(h||1)+n),l*=(h||1)/c.cur(),p.style(this,k,l+n)),g[1]&&(h=("-="===g[1]?-1:1)*h+l),c.custom(l,h,n)):c.custom(l,h,"");return!0}var f=p.speed(b,c,e);if(p.isEmptyObject(a))return this.each(f.complete,[!1]);a=p.extend({},a);return!1===f.queue?this.each(d):this.queue(f.queue,d)},stop:function(a,b,e){"string"!==typeof a&&(e=b,b=a,a=c);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,
c=!1,d=p.timers,f=p._data(this);e||p._unmark(!0,this);if(null==a)for(b in f){if(f[b]&&f[b].stop&&b.indexOf(".run")===b.length-4){var g=f[b];p.removeData(this,b,!0);g.stop(e)}}else f[b=a+".run"]&&f[b].stop&&(f=f[b],p.removeData(this,b,!0),f.stop(e));for(b=d.length;b--;)if(d[b].elem===this&&(null==a||d[b].queue===a)){if(e)d[b](!0);else d[b].saveState();c=!0;d.splice(b,1)}e&&c||p.dequeue(this,a)})}});p.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,e){return this.animate(b,a,c,e)}});p.extend({speed:function(a,b,c){var e=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};e.duration=p.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in p.fx.speeds?p.fx.speeds[e.duration]:p.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(a){p.isFunction(e.old)&&
e.old.call(this);e.queue?p.dequeue(this,e.queue):!1!==a&&p._unmark(this)};return e},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});p.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(p.fx.step[this.prop]||p.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,b=p.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,b,e){function d(a){return f.step(a)}var f=this,g=p.fx;this.startTime=Lb||B();this.end=b;this.now=this.start=a;this.pos=this.state=0;this.unit=e||this.unit||(p.cssNumber[this.prop]?"":"px");d.queue=this.options.queue;d.elem=this.elem;d.saveState=function(){p._data(f.elem,"fxshow"+f.prop)===c&&(f.options.hide?p._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&p._data(f.elem,"fxshow"+f.prop,f.end))};
d()&&p.timers.push(d)&&!Wb&&(Wb=setInterval(g.tick,g.interval))},show:function(){var a=p._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||p.style(this.elem,this.prop);this.options.show=!0;a!==c?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());p(this.elem).show()},hide:function(){this.options.orig[this.prop]=p._data(this.elem,"fxshow"+this.prop)||p.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,
c=Lb||B(),e=!0,d=this.elem,f=this.options;if(a||c>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(b in f.animatedProperties)!0!==f.animatedProperties[b]&&(e=!1);if(e){null==f.overflow||p.support.shrinkWrapBlocks||p.each(["","X","Y"],function(a,b){d.style["overflow"+b]=f.overflow[a]});f.hide&&p(d).hide();if(f.hide||f.show)for(b in f.animatedProperties)p.style(d,b,f.orig[b]),p.removeData(d,"fxshow"+b,!0),p.removeData(d,"toggle"+
b,!0);if(a=f.complete)f.complete=!1,a.call(d)}return!1}Infinity==f.duration?this.now=c:(a=c-this.startTime,this.state=a/f.duration,this.pos=p.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};p.extend(p.fx,{tick:function(){for(var a,b=p.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||p.fx.stop()},interval:13,stop:function(){clearInterval(Wb);Wb=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){p.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});p.each(Mb.concat.apply([],Mb),function(a,b){b.indexOf("margin")&&(p.fx.step[b]=function(a){p.style(a.elem,b,Math.max(0,a.now)+a.unit)})});p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var wc,Rc=/^t(?:able|d|h)$/i,xc=/^(?:body|html)$/i;
wc="getBoundingClientRect"in y.documentElement?function(a,b,c,e){try{e=a.getBoundingClientRect()}catch(d){}if(!e||!p.contains(c,a))return e?{top:e.top,left:e.left}:{top:0,left:0};a=b.body;b=N(b);return{top:e.top+(b.pageYOffset||p.support.boxModel&&c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0),left:e.left+(b.pageXOffset||p.support.boxModel&&c.scrollLeft||a.scrollLeft)-(c.clientLeft||a.clientLeft||0)}}:function(a,b,c){var e,d=a.offsetParent,f=b.body;e=(b=b.defaultView)?b.getComputedStyle(a,
null):a.currentStyle;for(var g=a.offsetTop,h=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==c&&(!p.support.fixedPosition||"fixed"!==e.position);)e=b?b.getComputedStyle(a,null):a.currentStyle,g-=a.scrollTop,h-=a.scrollLeft,a===d&&(g+=a.offsetTop,h+=a.offsetLeft,!p.support.doesNotAddBorder||p.support.doesAddBorderForTableAndCells&&Rc.test(a.nodeName)||(g+=parseFloat(e.borderTopWidth)||0,h+=parseFloat(e.borderLeftWidth)||0),d=a.offsetParent),p.support.subtractsBorderForOverflowNotVisible&&"visible"!==e.overflow&&
(g+=parseFloat(e.borderTopWidth)||0,h+=parseFloat(e.borderLeftWidth)||0);if("relative"===e.position||"static"===e.position)g+=f.offsetTop,h+=f.offsetLeft;p.support.fixedPosition&&"fixed"===e.position&&(g+=Math.max(c.scrollTop,f.scrollTop),h+=Math.max(c.scrollLeft,f.scrollLeft));return{top:g,left:h}};p.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b=this[0],e=b&&b.ownerDocument;return e?b===e.body?p.offset.bodyOffset(b):wc(b,e,
e.documentElement):null};p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var e=p.css(a,"position");"static"===e&&(a.style.position="relative");var d=p(a),f=d.offset(),g=p.css(a,"top"),h=p.css(a,"left"),k={},l={};("absolute"===e||"fixed"===e)&&-1<p.inArray("auto",[g,h])?(l=d.position(),e=l.top,h=l.left):(e=parseFloat(g)||
0,h=parseFloat(h)||0);p.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(k.top=b.top-f.top+e);null!=b.left&&(k.left=b.left-f.left+h);"using"in b?b.using.call(a,k):d.css(k)}};p.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),e=xc.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(p.css(a,"marginTop"))||0;c.left-=parseFloat(p.css(a,"marginLeft"))||0;e.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0;e.left+=parseFloat(p.css(b[0],
"borderLeftWidth"))||0;return{top:c.top-e.top,left:c.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||y.body;a&&!xc.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var e=/Y/.test(b);p.fn[a]=function(d){return p.access(this,function(a,d,f){var g=N(a);if(f===c)return g?b in g?g[b]:p.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:a[d];
g?g.scrollTo(e?p(g).scrollLeft():f,e?f:p(g).scrollTop()):a[d]=f},a,d,arguments.length,null)}});p.each({Height:"height",Width:"width"},function(a,b){var e="client"+a,d="scroll"+a,f="offset"+a;p.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(p.css(a,b,"padding")):this[b]():null};p.fn["outer"+a]=function(a){var c=this[0];return c?c.style?parseFloat(p.css(c,b,a?"margin":"border")):this[b]():null};p.fn[b]=function(a){return p.access(this,function(a,b,g){if(p.isWindow(a))return b=a.document,
a=b.documentElement[e],p.support.boxModel&&a||b.body&&b.body[e]||a;if(9===a.nodeType)return b=a.documentElement,b[e]>=b[d]?b[e]:Math.max(a.body[d],b[d],a.body[f],b[f]);if(g===c)return a=p.css(a,b),b=parseFloat(a),p.isNumeric(b)?b:a;p(a).css(b,g)},b,a,arguments.length,null)}});a.jQuery=a.$=p;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
(function(a,c){function d(a){r[q]=b.apply(c,a);return q++}function b(a){var b=[].slice.call(arguments,1);return function(){"function"===typeof a?a.apply(c,b):(new Function(""+a))()}}function g(a){if(u)setTimeout(b(g,a),0);else{var c=r[a];if(c){u=!0;try{c()}finally{e(a),u=!1}}}}function e(a){delete r[a]}function h(){v=function(){var a=d(arguments);process.nextTick(b(g,a));return a}}function f(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("",
"*");a.onmessage=c;return b}}function k(){var b="setImmediate$"+Math.random()+"$",c=function(c){c.source===a&&"string"===typeof c.data&&0===c.data.indexOf(b)&&g(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c);v=function(){var c=d(arguments);a.postMessage(b+c,"*");return c}}function l(){var a=new MessageChannel;a.port1.onmessage=function(a){g(a.data)};v=function(){var b=d(arguments);a.port2.postMessage(b);return b}}function n(){var a=t.documentElement;
v=function(){var b=d(arguments),c=t.createElement("script");c.onreadystatechange=function(){g(b);c.onreadystatechange=null;a.removeChild(c);c=null};a.appendChild(c);return b}}function m(){v=function(){var a=d(arguments);setTimeout(b(g,a),0);return a}}if(!a.setImmediate){var q=1,r={},u=!1,t=a.document,v,w=Object.getPrototypeOf&&Object.getPrototypeOf(a),w=w&&w.setTimeout?w:a;"[object process]"==={}.toString.call(a.process)?h():f()?k():a.MessageChannel?l():t&&"onreadystatechange"in t.createElement("script")?
n():m();w.setImmediate=v;w.clearImmediate=e}})("undefined"===typeof self?"undefined"===typeof global?this:global:self);
(function(){var a=this,c=a._,d=Array.prototype,b=Object.prototype,g=d.push,e=d.slice,h=d.concat,f=b.toString,k=b.hasOwnProperty,b=Array.isArray,l=Object.keys,n=Function.prototype.bind,m=function(a){if(a instanceof m)return a;if(!(this instanceof m))return new m(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=m),exports._=m):a._=m;m.VERSION="1.7.0";var q=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,
c)};case 2:return function(c,e){return a.call(b,c,e)};case 3:return function(c,e,d){return a.call(b,c,e,d)};case 4:return function(c,e,d,f){return a.call(b,c,e,d,f)}}return function(){return a.apply(b,arguments)}};m.iteratee=function(a,b,c){return null==a?m.identity:m.isFunction(a)?q(a,b,c):m.isObject(a)?m.matches(a):m.property(a)};m.each=m.forEach=function(a,b,c){if(null==a)return a;b=q(b,c);var e=a.length;if(e===+e)for(c=0;c<e;c++)b(a[c],c,a);else{var d=m.keys(a);c=0;for(e=d.length;c<e;c++)b(a[d[c]],
d[c],a)}return a};m.map=m.collect=function(a,b,c){if(null==a)return[];b=m.iteratee(b,c);c=a.length!==+a.length&&m.keys(a);for(var e=(c||a).length,d=Array(e),f,g=0;g<e;g++)f=c?c[g]:g,d[g]=b(a[f],f,a);return d};m.reduce=m.foldl=m.inject=function(a,b,c,e){null==a&&(a=[]);b=q(b,e,4);var d=a.length!==+a.length&&m.keys(a),f=(d||a).length,g=0,h;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[d?d[g++]:g++]}for(;g<f;g++)h=d?d[g]:g,c=b(c,a[h],h,a);return c};
m.reduceRight=m.foldr=function(a,b,c,e){null==a&&(a=[]);b=q(b,e,4);var d=a.length!==+a.length&&m.keys(a),f=(d||a).length,g;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[d?d[--f]:--f]}for(;f--;)g=d?d[f]:f,c=b(c,a[g],g,a);return c};m.find=m.detect=function(a,b,c){var e;b=m.iteratee(b,c);m.some(a,function(a,c,d){if(b(a,c,d))return e=a,!0});return e};m.filter=m.select=function(a,b,c){var e=[];if(null==a)return e;b=m.iteratee(b,c);m.each(a,function(a,
c,d){b(a,c,d)&&e.push(a)});return e};m.reject=function(a,b,c){return m.filter(a,m.negate(m.iteratee(b)),c)};m.every=m.all=function(a,b,c){if(null==a)return!0;b=m.iteratee(b,c);c=a.length!==+a.length&&m.keys(a);var e=(c||a).length,d,f;for(d=0;d<e;d++)if(f=c?c[d]:d,!b(a[f],f,a))return!1;return!0};m.some=m.any=function(a,b,c){if(null==a)return!1;b=m.iteratee(b,c);c=a.length!==+a.length&&m.keys(a);var e=(c||a).length,d,f;for(d=0;d<e;d++)if(f=c?c[d]:d,b(a[f],f,a))return!0;return!1};m.contains=m.include=
function(a,b){if(null==a)return!1;a.length!==+a.length&&(a=m.values(a));return 0<=m.indexOf(a,b)};m.invoke=function(a,b){var c=e.call(arguments,2),d=m.isFunction(b);return m.map(a,function(a){return(d?b:a[b]).apply(a,c)})};m.pluck=function(a,b){return m.map(a,m.property(b))};m.where=function(a,b){return m.filter(a,m.matches(b))};m.findWhere=function(a,b){return m.find(a,m.matches(b))};m.max=function(a,b,c){var e=-Infinity,d=-Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:m.values(a);for(var g=
0,h=a.length;g<h;g++)c=a[g],c>e&&(e=c)}else b=m.iteratee(b,c),m.each(a,function(a,c,g){f=b(a,c,g);if(f>d||-Infinity===f&&-Infinity===e)e=a,d=f});return e};m.min=function(a,b,c){var e=Infinity,d=Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:m.values(a);for(var g=0,h=a.length;g<h;g++)c=a[g],c<e&&(e=c)}else b=m.iteratee(b,c),m.each(a,function(a,c,g){f=b(a,c,g);if(f<d||Infinity===f&&Infinity===e)e=a,d=f});return e};m.shuffle=function(a){a=a&&a.length===+a.length?a:m.values(a);for(var b=a.length,
c=Array(b),e=0,d;e<b;e++)d=m.random(0,e),d!==e&&(c[e]=c[d]),c[d]=a[e];return c};m.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=m.values(a)),a[m.random(a.length-1)]):m.shuffle(a).slice(0,Math.max(0,b))};m.sortBy=function(a,b,c){b=m.iteratee(b,c);return m.pluck(m.map(a,function(a,c,e){return{value:a,index:c,criteria:b(a,c,e)}}).sort(function(a,b){var c=a.criteria,e=b.criteria;if(c!==e){if(c>e||void 0===c)return 1;if(c<e||void 0===e)return-1}return a.index-b.index}),"value")};var r=
function(a){return function(b,c,e){var d={};c=m.iteratee(c,e);m.each(b,function(e,f){var g=c(e,f,b);a(d,e,g)});return d}};m.groupBy=r(function(a,b,c){m.has(a,c)?a[c].push(b):a[c]=[b]});m.indexBy=r(function(a,b,c){a[c]=b});m.countBy=r(function(a,b,c){m.has(a,c)?a[c]++:a[c]=1});m.sortedIndex=function(a,b,c,e){c=m.iteratee(c,e,1);b=c(b);e=0;for(var d=a.length;e<d;){var f=e+d>>>1;c(a[f])<b?e=f+1:d=f}return e};m.toArray=function(a){return a?m.isArray(a)?e.call(a):a.length===+a.length?m.map(a,m.identity):
m.values(a):[]};m.size=function(a){return null==a?0:a.length===+a.length?a.length:m.keys(a).length};m.partition=function(a,b,c){b=m.iteratee(b,c);var e=[],d=[];m.each(a,function(a,c,f){(b(a,c,f)?e:d).push(a)});return[e,d]};m.first=m.head=m.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:e.call(a,0,b)};m.initial=function(a,b,c){return e.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};m.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:e.call(a,Math.max(a.length-
b,0))};m.rest=m.tail=m.drop=function(a,b,c){return e.call(a,null==b||c?1:b)};m.compact=function(a){return m.filter(a,m.identity)};var u=function(a,b,c,e){if(b&&m.every(a,m.isArray))return h.apply(e,a);for(var d=0,f=a.length;d<f;d++){var k=a[d];m.isArray(k)||m.isArguments(k)?b?g.apply(e,k):u(k,b,c,e):c||e.push(k)}return e};m.flatten=function(a,b){return u(a,b,!1,[])};m.without=function(a){return m.difference(a,e.call(arguments,1))};m.uniq=m.unique=function(a,b,c,e){if(null==a)return[];m.isBoolean(b)||
(e=c,c=b,b=!1);null!=c&&(c=m.iteratee(c,e));e=[];for(var d=[],f=0,g=a.length;f<g;f++){var h=a[f];if(b)f&&d===h||e.push(h),d=h;else if(c){var k=c(h,f,a);0>m.indexOf(d,k)&&(d.push(k),e.push(h))}else 0>m.indexOf(e,h)&&e.push(h)}return e};m.union=function(){return m.uniq(u(arguments,!0,!0,[]))};m.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,e=0,d=a.length;e<d;e++){var f=a[e];if(!m.contains(b,f)){for(var g=1;g<c&&m.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b};
m.difference=function(a){var b=u(e.call(arguments,1),!0,!0,[]);return m.filter(a,function(a){return!m.contains(b,a)})};m.zip=function(a){if(null==a)return[];for(var b=m.max(arguments,"length").length,c=Array(b),e=0;e<b;e++)c[e]=m.pluck(arguments,e);return c};m.object=function(a,b){if(null==a)return{};for(var c={},e=0,d=a.length;e<d;e++)b?c[a[e]]=b[e]:c[a[e][0]]=a[e][1];return c};m.indexOf=function(a,b,c){if(null==a)return-1;var e=0,d=a.length;if(c)if("number"==typeof c)e=0>c?Math.max(0,d+c):c;else return e=
m.sortedIndex(a,b),a[e]===b?e:-1;for(;e<d;e++)if(a[e]===b)return e;return-1};m.lastIndexOf=function(a,b,c){if(null==a)return-1;var e=a.length;for("number"==typeof c&&(e=0>c?e+c+1:Math.min(e,c+1));0<=--e;)if(a[e]===b)return e;return-1};m.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=c||1;for(var e=Math.max(Math.ceil((b-a)/c),0),d=Array(e),f=0;f<e;f++,a+=c)d[f]=a;return d};var t=function(){};m.bind=function(a,b){var c,d;if(n&&a.bind===n)return n.apply(a,e.call(arguments,1));if(!m.isFunction(a))throw new TypeError("Bind must be called on a function");
c=e.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(e.call(arguments)));t.prototype=a.prototype;var f=new t;t.prototype=null;var g=a.apply(f,c.concat(e.call(arguments)));return m.isObject(g)?g:f}};m.partial=function(a){var b=e.call(arguments,1);return function(){for(var c=0,e=b.slice(),d=0,f=e.length;d<f;d++)e[d]===m&&(e[d]=arguments[c++]);for(;c<arguments.length;)e.push(arguments[c++]);return a.apply(this,e)}};m.bindAll=function(a){var b,c=arguments.length,
e;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)e=arguments[b],a[e]=m.bind(a[e],a);return a};m.memoize=function(a,b){var c=function(e){var d=c.cache,f=b?b.apply(this,arguments):e;m.has(d,f)||(d[f]=a.apply(this,arguments));return d[f]};c.cache={};return c};m.delay=function(a,b){var c=e.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};m.defer=function(a){return m.delay.apply(m,[a,1].concat(e.call(arguments,1)))};m.throttle=function(a,b,c){var e,
d,f,g=null,h=0;c||(c={});var k=function(){h=!1===c.leading?0:m.now();g=null;f=a.apply(e,d);g||(e=d=null)};return function(){var l=m.now();h||!1!==c.leading||(h=l);var n=b-(l-h);e=this;d=arguments;0>=n||n>b?(clearTimeout(g),g=null,h=l,f=a.apply(e,d),g||(e=d=null)):g||!1===c.trailing||(g=setTimeout(k,n));return f}};m.debounce=function(a,b,c){var e,d,f,g,h,k=function(){var l=m.now()-g;l<b&&0<l?e=setTimeout(k,b-l):(e=null,c||(h=a.apply(f,d),e||(f=d=null)))};return function(){f=this;d=arguments;g=m.now();
var l=c&&!e;e||(e=setTimeout(k,b));l&&(h=a.apply(f,d),f=d=null);return h}};m.wrap=function(a,b){return m.partial(b,a)};m.negate=function(a){return function(){return!a.apply(this,arguments)}};m.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,e=a[b].apply(this,arguments);c--;)e=a[c].call(this,e);return e}};m.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};m.before=function(a,b){var c;return function(){0<--a?c=b.apply(this,arguments):b=null;
return c}};m.once=m.partial(m.before,2);m.keys=function(a){if(!m.isObject(a))return[];if(l)return l(a);var b=[],c;for(c in a)m.has(a,c)&&b.push(c);return b};m.values=function(a){for(var b=m.keys(a),c=b.length,e=Array(c),d=0;d<c;d++)e[d]=a[b[d]];return e};m.pairs=function(a){for(var b=m.keys(a),c=b.length,e=Array(c),d=0;d<c;d++)e[d]=[b[d],a[b[d]]];return e};m.invert=function(a){for(var b={},c=m.keys(a),e=0,d=c.length;e<d;e++)b[a[c[e]]]=c[e];return b};m.functions=m.methods=function(a){var b=[],c;for(c in a)m.isFunction(a[c])&&
b.push(c);return b.sort()};m.extend=function(a){if(!m.isObject(a))return a;for(var b,c,e=1,d=arguments.length;e<d;e++)for(c in b=arguments[e],b)k.call(b,c)&&(a[c]=b[c]);return a};m.pick=function(a,b,c){var d={},f;if(null==a)return d;if(m.isFunction(b))for(f in b=q(b,c),a){var g=a[f];b(g,f,a)&&(d[f]=g)}else{g=h.apply([],e.call(arguments,1));a=Object(a);for(var k=0,l=g.length;k<l;k++)f=g[k],f in a&&(d[f]=a[f])}return d};m.omit=function(a,b,c){if(m.isFunction(b))b=m.negate(b);else{var d=m.map(h.apply([],
e.call(arguments,1)),String);b=function(a,b){return!m.contains(d,b)}}return m.pick(a,b,c)};m.defaults=function(a){if(!m.isObject(a))return a;for(var b=1,c=arguments.length;b<c;b++){var e=arguments[b],d;for(d in e)void 0===a[d]&&(a[d]=e[d])}return a};m.clone=function(a){return m.isObject(a)?m.isArray(a)?a.slice():m.extend({},a):a};m.tap=function(a,b){b(a);return a};var v=function(a,b,c,e){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof m&&(a=a._wrapped);b instanceof m&&
(b=b._wrapped);var d=f.call(a);if(d!==f.call(b))return!1;switch(d){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var g=c.length;g--;)if(c[g]===a)return e[g]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(m.isFunction(g)&&g instanceof g&&m.isFunction(h)&&h instanceof
h))return!1;c.push(a);e.push(b);if("[object Array]"===d){if(d=a.length,h=d===b.length)for(;d--&&(h=v(a[d],b[d],c,e)););}else if(g=m.keys(a),d=g.length,h=m.keys(b).length===d)for(;d--&&(h=g[d],h=m.has(b,h)&&v(a[h],b[h],c,e)););c.pop();e.pop();return h};m.isEqual=function(a,b){return v(a,b,[],[])};m.isEmpty=function(a){if(null==a)return!0;if(m.isArray(a)||m.isString(a)||m.isArguments(a))return 0===a.length;for(var b in a)if(m.has(a,b))return!1;return!0};m.isElement=function(a){return!(!a||1!==a.nodeType)};
m.isArray=b||function(a){return"[object Array]"===f.call(a)};m.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};m.each("Arguments Function String Number Date RegExp".split(" "),function(a){m["is"+a]=function(b){return f.call(b)==="[object "+a+"]"}});m.isArguments(arguments)||(m.isArguments=function(a){return m.has(a,"callee")});"function"!==typeof/./&&(m.isFunction=function(a){return"function"==typeof a||!1});m.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};
m.isNaN=function(a){return m.isNumber(a)&&a!==+a};m.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===f.call(a)};m.isNull=function(a){return null===a};m.isUndefined=function(a){return void 0===a};m.has=function(a,b){return null!=a&&k.call(a,b)};m.noConflict=function(){a._=c;return this};m.identity=function(a){return a};m.constant=function(a){return function(){return a}};m.noop=function(){};m.property=function(a){return function(b){return b[a]}};m.matches=function(a){var b=m.pairs(a),
c=b.length;return function(a){if(null==a)return!c;a=Object(a);for(var e=0;e<c;e++){var d=b[e],f=d[0];if(d[1]!==a[f]||!(f in a))return!1}return!0}};m.times=function(a,b,c){var e=Array(Math.max(0,a));b=q(b,c,1);for(c=0;c<a;c++)e[c]=b(c);return e};m.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};m.now=Date.now||function(){return(new Date).getTime()};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=m.invert(b),w=function(a){var b=
function(b){return a[b]},c="(?:"+m.keys(a).join("|")+")",e=RegExp(c),d=RegExp(c,"g");return function(a){a=null==a?"":""+a;return e.test(a)?a.replace(d,b):a}};m.escape=w(b);m.unescape=w(r);m.result=function(a,b){if(null!=a){var c=a[b];return m.isFunction(c)?a[b]():c}};var x=0;m.uniqueId=function(a){var b=++x+"";return a?a+b:b};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028",
"\u2029":"u2029"},A=/\\|'|\r|\n|\u2028|\u2029/g,z=function(a){return"\\"+D[a]};m.template=function(a,b,c){!b&&c&&(b=c);b=m.defaults({},b,m.templateSettings);c=RegExp([(b.escape||J).source,(b.interpolate||J).source,(b.evaluate||J).source].join("|")+"|$","g");var e=0,d="__p+='";a.replace(c,function(b,c,f,g,h){d+=a.slice(e,h).replace(A,z);e=h+b.length;c?d+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?d+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(d+="';\n"+g+"\n__p+='");return b});d+="';\n";b.variable||
(d="with(obj||{}){\n"+d+"}\n");d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{var f=new Function(b.variable||"obj","_",d)}catch(g){throw g.source=d,g;}c=function(a){return f.call(this,a,m)};c.source="function("+(b.variable||"obj")+"){\n"+d+"}";return c};m.chain=function(a){a=m(a);a._chain=!0;return a};var B=function(a){return this._chain?m(a).chain():a};m.mixin=function(a){m.each(m.functions(a),function(b){var c=m[b]=a[b];m.prototype[b]=
function(){var a=[this._wrapped];g.apply(a,arguments);return B.call(this,c.apply(m,a))}})};m.mixin(m);m.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=d[a];m.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||delete c[0];return B.call(this,c)}});m.each(["concat","join","slice"],function(a){var b=d[a];m.prototype[a]=function(){return B.call(this,b.apply(this._wrapped,arguments))}});m.prototype.value=function(){return this._wrapped};
"function"===typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
(function(a,c){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(b,d,e){a.Backbone=c(a,e,b,d)});else if("undefined"!==typeof exports){var d=require("underscore");c(a,exports,d)}else a.Backbone=c(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)})(this,function(a,c,d,b){var g=a.Backbone,e=[].slice;c.VERSION="1.1.2";c.$=b;c.noConflict=function(){a.Backbone=g;return this};c.emulateHTTP=!1;c.emulateJSON=!1;var h=c.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||
!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var e=this,f=d.once(function(){e.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var e,f,g,h,l,n,m,r;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events=void 0,this;h=a?[a]:d.keys(this._events);l=0;for(n=h.length;l<n;l++)if(a=
h[l],g=this._events[a]){this._events[a]=e=[];if(b||c)for(m=0,r=g.length;m<r;m++)f=g[m],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&l(c,b);d&&l(d,arguments);return this},stopListening:function(a,b,c){var e=this._listeningTo;if(!e)return this;var f=!b&&!c;c||"object"!==
typeof b||(c=this);a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,c,this),(f||d.isEmpty(a._events))&&delete this._listeningTo[g];return this}},f=/\s+/,k=function(a,b,c,e){if(!c)return!0;if("object"===typeof c){for(var d in c)a[b].apply(a,[d,c[d]].concat(e));return!1}if(f.test(c)){c=c.split(f);d=0;for(var g=c.length;d<g;d++)a[b].apply(a,[c[d]].concat(e));return!1}return!0},l=function(a,b){var c,e=-1,d=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++e<d;)(c=a[e]).callback.call(c.ctx);
break;case 1:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f);break;case 2:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,g);break;case 3:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,g,h);break;default:for(;++e<d;)(c=a[e]).callback.apply(c.ctx,b)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,c,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=d.uniqueId("l"));f[g]=b;e||"object"!==typeof c||(e=this);b[a](c,e,this);return this}});h.bind=h.on;h.unbind=h.off;
d.extend(c,h);var n=c.Model=function(a,b){var c=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(c=this.parse(c,b)||{});c=d.defaults({},c,d.result(this,"defaults"));this.set(c,b);this.changed={};this.initialize.apply(this,arguments)};d.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return d.clone(this.attributes)},sync:function(){return c.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var e,f,g,h,k,l,n;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;h=c.silent;a=[];k=this._changing;this._changing=!0;k||(this._previousAttributes=d.clone(this.attributes),this.changed={});n=this.attributes;l=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);
for(e in f)b=f[e],d.isEqual(n[e],b)||a.push(e),d.isEqual(l[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete n[e]:n[e]=b;if(!h)for(a.length&&(this._pending=c),b=0,e=a.length;b<e;b++)this.trigger("change:"+a[b],this,n[a[b]],c);if(k)return this;if(!h)for(;this._pending;)c=this._pending,this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=
void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,c=!1,e=this._changing?this._previousAttributes:this.attributes,f;for(f in a)d.isEqual(e[f],b=a[f])||((c||(c={}))[f]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},
fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(e){if(!b.set(b.parse(e,a),a))return!1;c&&c(b,e,a);b.trigger("sync",b,e,a)};V(this,a);return this.sync("read",this,a)},save:function(a,b,c){var e,f=this.attributes;null==a||"object"===typeof a?(e=a,c=b):(e={})[a]=b;c=d.extend({validate:!0},c);if(e&&!c.wait){if(!this.set(e,c))return!1}else if(!this._validate(e,c))return!1;e&&c.wait&&(this.attributes=d.extend({},f,e));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=d.extend(e||{},b));if(d.isObject(b)&&!g.set(b,c))return!1;h&&h(g,a,c);g.trigger("sync",g,a,c)};V(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=e);a=this.sync(a,this,c);e&&c.wait&&(this.attributes=f);return a},destroy:function(a){a=a?d.clone(a):{};var b=this,c=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&e();c&&c(b,
d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;V(this,a);var f=this.sync("delete",this,a);a.wait||e();return f},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||G();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},d.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=d.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,d.extend(b,{validationError:c}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=e.call(arguments);b.unshift(this.attributes);return d[a].apply(d,b)}});var m=c.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);
void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,d.extend({silent:!0},b))},q={add:!0,remove:!0,merge:!0},r={add:!0,remove:!1};d.extend(m.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return c.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.extend({merge:!1},b,r))},remove:function(a,b){var c=!d.isArray(a);a=c?[a]:d.clone(a);b||
(b={});var e,f,g,h;e=0;for(f=a.length;e<f;e++)if(h=a[e]=this.get(a[e]))delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b);return c?a[0]:a},set:function(a,b){b=d.defaults({},b,q);b.parse&&(a=this.parse(a,b));var c=!d.isArray(a);a=c?a?[a]:[]:d.clone(a);var e,f,g,h,k,l,m=b.at,r=this.model,t=this.comparator&&null==m&&!1!==b.sort,u=d.isString(this.comparator)?this.comparator:
null,v=[],w=[],y={},x=b.add,A=b.merge,D=b.remove,z=!t&&x&&D?[]:!1;e=0;for(f=a.length;e<f;e++){k=a[e]||{};g=k instanceof n?h=k:k[r.prototype.idAttribute||"id"];if(g=this.get(g))D&&(y[g.cid]=!0),A&&(k=k===h?h.attributes:k,b.parse&&(k=g.parse(k,b)),g.set(k,b),t&&!l&&g.hasChanged(u)&&(l=!0)),a[e]=g;else if(x){h=a[e]=this._prepareModel(k,b);if(!h)continue;v.push(h);this._addReference(h,b)}h=g||h;!z||!h.isNew()&&y[h.id]||z.push(h);y[h.id]=!0}if(D){e=0;for(f=this.length;e<f;++e)y[(h=this.models[e]).cid]||
w.push(h);w.length&&this.remove(w,b)}if(v.length||z&&z.length)if(t&&(l=!0),this.length+=v.length,null!=m)for(e=0,f=v.length;e<f;e++)this.models.splice(m+e,0,v[e]);else for(z&&(this.models.length=0),k=z||v,e=0,f=k.length;e<f;e++)this.models.push(k[e]);l&&this.sort({silent:!0});if(!b.silent){e=0;for(f=v.length;e<f;e++)(h=v[e]).trigger("add",h,this,b);(l||z&&z.length)&&this.trigger("sort",this,b)}return c?a[0]:a},reset:function(a,b){b||(b={});for(var c=0,e=this.models.length;c<e;c++)this._removeReference(this.models[c],
b);b.previousModels=this.models;this._reset();a=this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,d.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,d.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return e.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return d.invoke(this.models,"get",a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(e){c[a.reset?"reset":"set"](e,a);b&&b(c,e,a);c.trigger("sync",c,e,a)};V(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,e=b.success;b.success=function(a,d){b.wait&&c.add(a,
b);e&&e(a,d,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a;b=b?d.clone(b):{};b.collection=this;var c=new this.model(a,b);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){if("add"!==a&&"remove"!==a||c===this)"destroy"===a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){m.prototype[a]=function(){var b=e.call(arguments);b.unshift(this.models);return d[a].apply(d,b)}});d.each(["groupBy","countBy","sortBy","indexBy"],function(a){m.prototype[a]=function(b,c){var e=d.isFunction(b)?b:function(a){return a.get(b)};return d[a](this.models,e,c)}});b=c.View=function(a){this.cid=d.uniqueId("view");a||(a={});d.extend(this,d.pick(a,t));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var u=/^(\S+)\s*(.*)$/,t="model collection el id attributes className tagName events".split(" ");
d.extend(b.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof c.$?a:c.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||
(c=this[a[b]]);if(c){var e=b.match(u),f=e[1],e=e[2],c=d.bind(c,this),f=f+(".delegateEvents"+this.cid);if(""===e)this.$el.on(f,c);else this.$el.on(f,e,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id"));this.className&&(a["class"]=d.result(this,"className"));a=c.$("<"+d.result(this,"tagName")+
">").attr(a);this.setElement(a,!1)}}});c.sync=function(a,b,e){var f=w[a];d.defaults(e||(e={}),{emulateHTTP:c.emulateHTTP,emulateJSON:c.emulateJSON});var g={type:f,dataType:"json"};e.url||(g.url=d.result(b,"url")||G());null!=e.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||b.toJSON(e)));e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===
f)){g.type="POST";e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);"PATCH"===g.type&&v&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=e.xhr=c.ajax(d.extend(g,e));b.trigger("request",b,a,e);return a};var v="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};c.ajax=function(){return c.$.ajax.apply(c.$,arguments)};var x=c.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,A=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(x.prototype,h,{initialize:function(){},route:function(a,b,e){d.isRegExp(a)||(a=this._routeToRegExp(a));d.isFunction(b)&&(e=b,b="");e||(e=this[b]);var f=this;c.history.route(a,
function(d){d=f._extractParameters(a,d);f.execute(e,d);f.trigger.apply(f,["route:"+b].concat(d));f.trigger("route",b,d);c.history.trigger("route",f,b,d)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,b){c.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(z,"\\$&").replace(J,"(?:$1)?").replace(D,
function(a,b){return b?a:"([^/?]+)"}).replace(A,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a,b){return b===c.length-1?a||null:a?decodeURIComponent(a):null})}});var B=c.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,K=/^\/+|\/+$/g,M=/msie [\w.]+/,N=/\/$/,y=/#.*$/;B.started=!1;d.extend(B.prototype,
h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(N,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(C,"")},start:function(a){if(B.started)throw Error("Backbone.history has already been started");
B.started=!0;this.options=d.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);a=this.getFragment();var b=document.documentMode,b=M.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(K,"/");b&&this._wantsHashChange&&(this.iframe=c.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)c.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)c.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){c.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);B.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return d.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!B.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));a=a.replace(y,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});c.history=new B;n.extend=m.extend=x.extend=b.extend=B.extend=function(a,
b){var c=this,e;e=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};d.extend(e,c,b);var f=function(){this.constructor=e};f.prototype=c.prototype;e.prototype=new f;a&&d.extend(e.prototype,a);e.__super__=c.prototype;return e};var G=function(){throw Error('A "url" property or function must be specified');},V=function(a,b){var c=b.error;b.error=function(e){c&&c(a,e,b);a.trigger("error",a,e,b)}};return c});
(function(a,c,d){var b,g,e,h,f=[],k=[];a.extend(d.View,{attach:function(a,b){"function"!==typeof b&&(b=d.View.extend(b));f.push(function(){this.find(a).add(this.filter(a)).each(function(){var a=c(this);void 0===a.data("backbone.attached-view")&&a.data("backbone.attached-view",new b({el:this}))})});return b}});g=function(a){var b,c=f.length;for(b=0;b<c;b+=1)f[b].call(a)};b=function(){var a;a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(void 0===a)return!1;(new a(function(a){var b,
e=a.length,d=[];for(b=0;b<e;b+=1)d.push.apply(d,a[b].addedNodes);0<d.length&&g(c(d))})).observe(document.body,{childList:!0,subtree:!0});return!0};e=function(){c(document.body).on("DOMNodeInserted",function(a){var b=0<k.length;k.push(a);b||setTimeout(h,0)})};h=function(){var a,b=k.length,e=[];for(a=0;a<b;a+=1)e.push(k[a].target);k=[];g(c(e))};c(function(){g(c(document));b()||e()})})(window._,window.jQuery,window.Backbone);
(function(a){a.extend(a.fn,{validate:function(c){if(this.length){var d=a.data(this[0],"validator");if(d)return d;d=new a.validator(c,this[0]);a.data(this[0],"validator",d);d.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){d.cancelSubmit=!0}),d.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){d.submitButton=this}),this.submit(function(b){function c(){if(d.settings.submitHandler){if(d.submitButton)var b=a("<input type='hidden'/>").attr("name",
d.submitButton.name).val(d.submitButton.value).appendTo(d.currentForm);d.settings.submitHandler.call(d,d.currentForm);d.submitButton&&b.remove();return!1}return!0}d.settings.debug&&b.preventDefault();if(d.cancelSubmit)return d.cancelSubmit=!1,c();if(d.form())return d.pendingRequest?(d.formSubmitted=!0,!1):c();d.focusInvalid();return!1}));return d}c&&c.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();
var c=!0,d=a(this[0].form).validate();this.each(function(){c&=d.element(this)});return c},removeAttrs:function(c){var d={},b=this;a.each(c.split(/\s/),function(a,c){d[c]=b.attr(c);b.removeAttr(c)});return d},rules:function(c,d){var b=this[0];if(c){var g=a.data(b.form,"validator").settings,e=g.rules,h=a.validator.staticRules(b);switch(c){case "add":a.extend(h,a.validator.normalizeRule(d));e[b.name]=h;d.messages&&(g.messages[b.name]=a.extend(g.messages[b.name],d.messages));break;case "remove":if(!d)return delete e[b.name],
h;var f={};a.each(d.split(/\s/),function(a,b){f[b]=h[b];delete h[b]});return f}}b=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(b),a.validator.classRules(b),a.validator.attributeRules(b),a.validator.staticRules(b)),b);b.required&&(g=b.required,delete b.required,b=a.extend({required:g},b));return b}});a.extend(a.expr[":"],{blank:function(c){return!a.trim(""+c.value)},filled:function(c){return!!a.trim(""+c.value)},unchecked:function(a){return!a.checked}});a.validator=function(c,d){this.settings=
a.extend({},a.validator.defaults,c);this.currentForm=d;this.init()};a.validator.format=function(c,d){if(1==arguments.length)return function(){var b=a.makeArray(arguments);b.unshift(c);return a.validator.format.apply(this,b)};2<arguments.length&&d.constructor!=Array&&(d=a.makeArray(arguments).slice(1));d.constructor!=Array&&(d=[d]);a.each(d,function(a,d){c=c.replace(new RegExp("\\{"+a+"\\}","g"),d)});return c};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.errorsFor(a).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||
a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(c,d,b){a(c).addClass(d).removeClass(b)},unhighlight:function(c,d,b){a(c).removeClass(d).addClass(b)}},setDefaults:function(c){a.extend(a.validator.defaults,c)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),
range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function c(b){var c=a.data(this[0].form,"validator");c.settings["on"+b.type]&&c.settings["on"+b.type].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||
a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=this.groups={};a.each(this.settings.groups,function(b,c){a.each(c.split(/\s/),function(a,c){d[c]=b})});var b=this.settings.rules;a.each(b,function(c,e){b[c]=a.validator.normalizeRule(e)});a(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",
c).delegate("click",":radio, :checkbox, select, option",c);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,d=this.currentElements=this.elements();d[a];a++)this.check(d[a]);
return this.valid()},element:function(c){this.lastElement=c=this.clean(c);this.prepareElement(c);this.currentElements=a(c);var d=this.check(c);d?delete this.invalid[c.name]:this.invalid[c.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return d},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var d in c)this.errorList.push({message:c[d],element:this.findByName(d)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in
c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var d=0,b;for(b in a)d++;return d},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus()}catch(c){}},findLastActive:function(){var c=this.lastActive;return c&&1==a.grep(this.errorList,function(a){return a.element.name==c.name}).length&&c},elements:function(){var c=this,d={};return a([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
c.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in d||!c.objectLength(a(this).rules())?!1:d[this.name]=!0})},clean:function(c){return a(c)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(c){c=this.clean(c);this.checkable(c)&&(c=this.findByName(c.name)[0]);var d=a(c).rules(),b=!1;for(method in d){var g={method:method,parameters:d[method]};try{var e=a.validator.methods[method].call(this,c.value.replace(/\r/g,""),c,g.parameters);if("dependency-mismatch"==e)b=!0;else{b=!1;if("pending"==e){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!e)return this.formatAndAdd(c,g),!1}}catch(h){throw this.settings.debug&&
window.console&&console.log("exception occured when checking element "+c.id+", check the '"+g.method+"' method",h),h;}}if(!b)return this.objectLength(d)&&this.successList.push(c),!0},customMetaMessage:function(c,d){if(a.metadata){var b=this.settings.meta?a(c).metadata()[this.settings.meta]:a(c).metadata();return b&&b.messages&&b.messages[d]}},customMessage:function(a,d){var b=this.settings.messages[a];return b&&(b.constructor==String?b:b[d])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==
arguments[a])return arguments[a]},defaultMessage:function(c,d){return this.findDefined(this.customMessage(c.name,d),this.customMetaMessage(c,d),!this.settings.ignoreTitle&&c.title||void 0,a.validator.messages[d],"<strong>Warning: No message defined for "+c.name+"</strong>")},formatAndAdd:function(a,d){var b=this.defaultMessage(a,d.method),g=/\$?\{(\d+)\}/g;"function"==typeof b?b=b.call(this,d.parameters,a):g.test(b)&&(b=jQuery.format(b.replace(g,"{$1}"),d.parameters));this.errorList.push({message:b,
element:a});this.errorMap[a.name]=b;this.submitted[a.name]=b},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var d=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,d.element,this.settings.errorClass,this.settings.validClass);this.showLabel(d.element,d.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=
0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,d=this.validElements();d[a];a++)this.settings.unhighlight.call(this,d[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,
d){var b=this.errorsFor(c);b.length?(b.removeClass().addClass(this.settings.errorClass),b.attr("generated")&&b.html(d)):(b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:!0}).addClass(this.settings.errorClass).html(d||""),this.settings.wrapper&&(b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(b).length||(this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)));!d&&this.settings.success&&(b.text(""),
"string"==typeof this.settings.success?b.addClass(this.settings.success):this.settings.success(b));this.toShow=this.toShow.add(b)},errorsFor:function(c){var d=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")==d})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(c){var d=this.currentForm;return a(document.getElementsByName(c)).map(function(a,g){return g.form==
d&&g.name==c&&g||null})},getLength:function(c,d){switch(d.nodeName.toLowerCase()){case "select":return a("option:selected",d).length;case "input":if(this.checkable(d))return this.findByName(d.name).filter(":checked").length}return c.length},depend:function(a,d){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,d):!0},dependTypes:{"boolean":function(a,d){return a},string:function(c,d){return!!a(c,d.form).length},"function":function(a,d){return a(d)}},optional:function(c){return!a.validator.methods.required.call(this,
a.trim(c.value),c)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(c,d){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[c.name];d&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!d&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(c){return a.data(c,"previousValue")||a.data(c,"previousValue",{old:null,valid:!0,message:this.defaultMessage(c,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(c,d){c.constructor==String?this.classRuleSettings[c]=d:a.extend(this.classRuleSettings,c)},classRules:function(c){var d=
{};(c=a(c).attr("class"))&&a.each(c.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(d,a.validator.classRuleSettings[this])});return d},attributeRules:function(c){var d={};c=a(c);for(method in a.validator.methods){var b=c.attr(method);b&&(d[method]=b)}d.maxlength&&/-1|2147483647|524288/.test(d.maxlength)&&delete d.maxlength;return d},metadataRules:function(c){if(!a.metadata)return{};var d=a.data(c.form,"validator").settings.meta;return d?a(c).metadata()[d]:a(c).metadata()},staticRules:function(c){var d=
{},b=a.data(c.form,"validator");b.settings.rules&&(d=a.validator.normalizeRule(b.settings.rules[c.name])||{});return d},normalizeRules:function(c,d){a.each(c,function(b,g){if(!1===g)delete c[b];else if(g.param||g.depends){var e=!0;switch(typeof g.depends){case "string":e=!!a(g.depends,d.form).length;break;case "function":e=g.depends.call(d,d)}e?c[b]=void 0!==g.param?g.param:!0:delete c[b]}});a.each(c,function(b,g){c[b]=a.isFunction(g)?g(d):g});a.each(["minlength","maxlength","min","max"],function(){c[this]&&
(c[this]=Number(c[this]))});a.each(["rangelength","range"],function(){c[this]&&(c[this]=[Number(c[this][0]),Number(c[this][1])])});a.validator.autoCreateRanges&&(c.min&&c.max&&(c.range=[c.min,c.max],delete c.min,delete c.max),c.minlength&&c.maxlength&&(c.rangelength=[c.minlength,c.maxlength],delete c.minlength,delete c.maxlength));c.messages&&delete c.messages;return c},normalizeRule:function(c){if("string"==typeof c){var d={};a.each(c.split(/\s/),function(){d[this]=!0});c=d}return c},addMethod:function(c,
d,b){a.validator.methods[c]=d;a.validator.messages[c]=void 0!=b?b:a.validator.messages[c];3>d.length&&a.validator.addClassRules(c,a.validator.normalizeRule(c))},methods:{required:function(c,d,b){if(!this.depend(b,d))return"dependency-mismatch";switch(d.nodeName.toLowerCase()){case "select":return(c=a(d).val())&&0<c.length;case "input":if(this.checkable(d))return 0<this.getLength(c,d);default:return 0<a.trim(c).length}},remote:function(c,d,b){if(this.optional(d))return"dependency-mismatch";var g=this.previousValue(d);
this.settings.messages[d.name]||(this.settings.messages[d.name]={});g.originalMessage=this.settings.messages[d.name].remote;this.settings.messages[d.name].remote=g.message;b="string"==typeof b&&{url:b}||b;if(g.old!==c){g.old=c;var e=this;this.startRequest(d);var h={};h[d.name]=c;a.ajax(a.extend(!0,{url:b,mode:"abort",port:"validate"+d.name,dataType:"json",data:h,success:function(b){e.settings.messages[d.name].remote=g.originalMessage;var h=!0===b;if(h){var l=e.formSubmitted;e.prepareElement(d);e.formSubmitted=
l;e.successList.push(d);e.showErrors()}else l={},b=g.message=b||e.defaultMessage(d,"remote"),l[d.name]=a.isFunction(b)?b(c):b,e.showErrors(l);g.valid=h;e.stopRequest(d,h)}},b));return"pending"}return this.pending[d.name]?"pending":g.valid},minlength:function(c,d,b){return this.optional(d)||this.getLength(a.trim(c),d)>=b},maxlength:function(c,d,b){return this.optional(d)||this.getLength(a.trim(c),d)<=b},rangelength:function(c,d,b){c=this.getLength(a.trim(c),d);return this.optional(d)||c>=b[0]&&c<=
b[1]},min:function(a,d,b){return this.optional(d)||a>=b},max:function(a,d,b){return this.optional(d)||a<=b},range:function(a,d,b){return this.optional(d)||a>=b[0]&&a<=b[1]},email:function(a,d){return this.optional(d)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,d){return this.optional(d)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,d){return this.optional(d)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,d){return this.optional(d)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,d){return this.optional(d)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,d){return this.optional(d)||/^\d+$/.test(a)},creditcard:function(a,d){if(this.optional(d))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var b=0,g=0,e=!1;a=a.replace(/\D/g,"");for(var h=a.length-1;0<=h;h--)g=
a.charAt(h),g=parseInt(g,10),e&&9<(g*=2)&&(g-=9),b+=g,e=!e;return 0==b%10},accept:function(a,d,b){b="string"==typeof b?b.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(d)||a.match(new RegExp(".("+b+")$","i"))},equalTo:function(c,d,b){b=a(b).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(d).valid()});return c==b.val()}}});a.format=a.validator.format})(jQuery);
(function(a){var c=a.ajax,d={};a.ajax=function(b){b=a.extend(b,a.extend({},a.ajaxSettings,b));var g=b.port;return"abort"==b.mode?(d[g]&&d[g].abort(),d[g]=c.apply(this,arguments)):c.apply(this,arguments)}})(jQuery);
(function(a){a.each({focus:"focusin",blur:"focusout"},function(c,d){a.event.special[d]={setup:function(){if(a.browser.msie)return!1;this.addEventListener(c,a.event.special[d].handler,!0)},teardown:function(){if(a.browser.msie)return!1;this.removeEventListener(c,a.event.special[d].handler,!0)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=d;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{delegate:function(c,d,b){return this.bind(c,function(c){var e=a(c.target);if(e.is(d))return b.apply(e,
arguments)})},triggerEvent:function(c,d){return this.triggerHandler(c,[a.event.fix({type:c,target:d})])}})})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function c(a){a=g.json?JSON.stringify(a):String(a);return g.raw?a:encodeURIComponent(a)}function d(c,d){var f;if(g.raw)f=c;else a:{var k=c;0===k.indexOf('"')&&(k=k.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{k=decodeURIComponent(k.replace(b," "));f=g.json?JSON.parse(k):k;break a}catch(l){}f=void 0}return a.isFunction(d)?d(f):f}var b=/\+/g,g=a.cookie=function(b,h,f){if(void 0!==h&&!a.isFunction(h)){f=
a.extend({},g.defaults,f);if("number"===typeof f.expires){var k=f.expires,l=f.expires=new Date;l.setTime(+l+864E5*k)}return document.cookie=[g.raw?b:encodeURIComponent(b),"=",c(h),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=b?void 0:{};for(var k=document.cookie?document.cookie.split("; "):[],l=0,n=k.length;l<n;l++){var m=k[l].split("="),q;q=m.shift();q=g.raw?q:decodeURIComponent(q);m=m.join("=");if(b&&
b===q){f=d(m,h);break}b||void 0===(m=d(m))||(f[q]=m)}return f};g.defaults={};a.removeCookie=function(b,c){if(void 0===a.cookie(b))return!1;a.cookie(b,"",a.extend({},c,{expires:-1}));return!a.cookie(b)}});
(function(a){var c={},d={};a.manageAjax=function(){return{create:function(b,d){c[b]=new a.manageAjax._manager(b,d);return c[b]},destroy:function(a){c[a]&&(c[a].clear(!0),delete c[a])}}}();a.manageAjax._manager=function(b,c){this.requests={};this.inProgress=0;this.qName=this.name=b;this.opts=a.extend({},a.ajaxSettings,a.manageAjax.defaults,c);c&&c.queue&&!0!==c.queue&&"string"===typeof c.queue&&"clear"!==c.queue&&(this.qName=c.queue)};a.manageAjax._manager.prototype={add:function(b){b=a.extend({},
this.opts,b);var c=b.complete||a.noop,e=b.success||a.noop,d=b.beforeSend||a.noop,f=b.error||a.noop,k="string"==typeof b.data?b.data:a.param(b.data||{}),l=b.type+b.url+k,n=this,m=this._createAjax(l,b,e,c);if(!this.requests[l]||!b.preventDoubbleRequests)return m.xhrID=l,b.xhrID=l,b.beforeSend=function(a,b){var c=d.call(this,a,b);!1===c&&n._removeXHR(l);return c},b.complete=function(a,e){n._complete.call(n,this,c,a,e,l,b)},b.success=function(a,c,d){n._success.call(n,this,e,a,c,d,b)},b.error=function(a,
c,e){var d="",g="";"timeout"!==c&&a&&(d=a.status,g=a.responseXML||a.responseText);f?f.call(this,a,c,e,b):setTimeout(function(){throw c+"| status: "+d+" | URL: "+b.url+" | data: "+k+" | thrown: "+e+" | response: "+g;},0);a=null},"clear"===b.queue&&a(document).clearQueue(this.qName),b.queue?(a.queue(document,this.qName,m),this.inProgress<b.maxRequests&&a.dequeue(document,this.qName),l):m()},_createAjax:function(b,c,e,h){var f=this;return function(){if(!1!==c.beforeCreate.call(c.context||f,b,c))return f.inProgress++,
1===f.inProgress&&a.event.trigger(f.name+"AjaxStart"),c.cacheResponse&&d[b]?(f.requests[b]={},setTimeout(function(){f._complete.call(f,c.context||c,h,d[b],"success",b,c);f._success.call(f,c.context||c,e,d[b]._successData,"success",d[b],c)},0)):c.async?f.requests[b]=a.ajax(c):a.ajax(c),b}},_removeXHR:function(b){this.opts.queue&&a.dequeue(document,this.qName);this.inProgress--;this.requests[b]=null;delete this.requests[b]},_isAbort:function(a,c){return!(!c.abortIsNoSuccess||a&&0!==a.readyState&&this.lastAbort!==
c.xhrID)},_complete:function(b,c,e,d,f,k){this._isAbort(e,k)&&(d="abort",k.abort.call(b,e,d,k));c.call(b,e,d,k);a.event.trigger(this.name+"AjaxComplete",[e,d,k]);k.domCompleteTrigger&&a(k.domCompleteTrigger).trigger(this.name+"DOMComplete",[e,d,k]).trigger("DOMComplete",[e,d,k]);this._removeXHR(f);this.inProgress||a.event.trigger(this.name+"AjaxStop")},_success:function(b,c,e,h,f,k){var l=this;if(!this._isAbort(f,k)){k.abortOld&&a.each(this.requests,function(a){if(a===k.xhrID)return!1;l.abort(a)});
if(k.cacheResponse&&!d[k.xhrID]&&(d[k.xhrID]={status:f.status,statusText:f.statusText,responseText:f.responseText,responseXML:f.responseXML,_successData:e},f.getAllResponseHeaders)){var n=f.getAllResponseHeaders();a.extend(d[k.xhrID],{getAllResponseHeaders:function(){return n},getResponseHeader:function(){var b={};a.each(n.split("\n"),function(a,c){var e=c.indexOf(":");b[c.substr(0,e)]=c.substr(e+2)});return function(a){return b[a]}}()})}c.call(b,e,h,f,k);a.event.trigger(this.name+"AjaxSuccess",[f,
k,e]);k.domSuccessTrigger&&a(k.domSuccessTrigger).trigger(this.name+"DOMSuccess",[e,k]).trigger("DOMSuccess",[e,k])}f=null},getData:function(b){if(b){var c=this.requests[b];!c&&this.opts.queue&&(c=a.grep(a(document).queue(this.qName),function(a,c){return a.xhrID===b})[0]);return c}return{requests:this.requests,queue:this.opts.queue?a(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(b){var c;if(b)(c=this.getData(b))&&c.abort?(this.lastAbort=b,c.abort(),this.lastAbort=!1):
a(document).queue(this.qName,a.grep(a(document).queue(this.qName),function(a,b){return a!==c})),c=null;else{var e=this,d=[];a.each(this.requests,function(a){d.push(a)});a.each(d,function(a,b){e.abort(b)})}},clear:function(b){a(document).clearQueue(this.qName);b&&this.abort()}};a.manageAjax._manager.prototype.getXHR=a.manageAjax._manager.prototype.getData;a.manageAjax.defaults={beforeCreate:a.noop,abort:a.noop,abortIsNoSuccess:!0,maxRequests:1,cacheResponse:!1,domCompleteTrigger:!1,domSuccessTrigger:!1,
preventDoubbleRequests:!0,queue:!1};a.each(a.manageAjax._manager.prototype,function(b,d){0!==b.indexOf("_")&&a.isFunction(d)&&(a.manageAjax[b]=function(e,d){if(!c[e])if("add"===b)a.manageAjax.create(e,d);else return;var f=Array.prototype.slice.call(arguments,1);c[e][b].apply(c[e],f)})})})(jQuery);var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};
Attacklab.showdown.converter=function(){var a,c,d,b=0;this.makeHtml=function(b){if(null!==b)return a=[],c=[],d=[],b=b.replace(/~/g,"~T"),b=b.replace(/\$/g,"~D"),b=b.replace(/\r\n/g,"\n"),b=b.replace(/\r/g,"\n"),b="\n\n"+b+"\n\n",b=K(b),b=b.replace(/^[ \t]+$/mg,""),b=e(b),b=g(b),b=f(b),b=B(b),b=b.replace(/~D/g,"$$"),b=b.replace(/~T/g,"~"),b=b.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(a,c){var e=b.slice(0,c),d=b.slice(c);return e.match(/<[^>]+$/)&&d.match(/^[^>]*>/)?a:"<a href='"+
a+"'>"+a+"</a>"}),b=b.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(a){return"<a href='mailto:"+a+"'>"+a+"</a>"})};var g=function(b){return b=b.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(b,e,d,f,g){e=e.toLowerCase();a[e]=D(d);if(f)return f+g;g&&(c[e]=g.replace(/"/g,"&quot;"));return""})},e=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,
h);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h);return a=a.replace(/\n\n/g,"\n")},h=function(a,b){var c;c=b.replace(/\n\n/g,"\n");c=c.replace(/^\n/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+
(d.push(c)-1)+"K\n\n"},f=function(a){a=q(a);var b=v("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,b);a=u(a);a=t(a);a=J(a);a=e(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");var c=a.split(/\n{2,}/g);a=[];for(var b=c.length,f=0;f<b;f++){var g=c[f];0<=g.search(/~K(\d+)K/g)?a.push(g):0<=g.search(/\S/)&&(g=k(g),g=g.replace(/\n/g,"<br />"),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",a.push(g))}b=
a.length;for(f=0;f<b;f++)for(;0<=a[f].search(/~K(\d+)K/);)c=d[RegExp.$1],c=c.replace(/\$/g,"$$$$"),a[f]=a[f].replace(/~K\d+K/,c);return a=a.join("\n\n")},k=function(a){a=w(a);a=l(a);a=a.replace(/\\(\\)/g,N);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,N);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,n);a=a.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
n);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,n);a=A(a);a=D(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\w)_(\w)/g,"$1~E95E$2");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},l=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=M(a,"\\`*_")})},n=function(b,e,d,f,g,h,k,l){void 0==l&&(l="");b=f.toLowerCase();
if(""==g)if(""==b&&(b=d.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[b])g=a[b],void 0!=c[b]&&(l=c[b]);else if(-1<e.search(/\(\s*\)$/m))g="";else return e;g=M(g,"*_");e='<a href="'+g+'"';""!=l&&(l=l.replace(/"/g,"&quot;"),l=M(l,"*_"),e+=' title="'+l+'"');return e+(">"+d+"</a>")},m=function(b,e,d,f,g,h,k,l){b=d;f=f.toLowerCase();l||(l="");if(""==g)if(""==f&&(f=b.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[f])g=a[f],void 0!=c[f]&&(l=c[f]);else return e;b=b.replace(/"/g,"&quot;");g=M(g,"*_");e='<img src="'+
g+'" alt="'+b+'"';l=l.replace(/"/g,"&quot;");l=M(l,"*_");return e=e+(' title="'+l+'"')+" />"},q=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return v("<h1>"+k(b)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return v("<h2>"+k(b)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){a=b.length;return v("<h"+a+">"+k(c)+"</h"+a+">")})},r,u=function(a){a+="~0";var c=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;
b?a=a.replace(c,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=r(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(c=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(c,function(a,b,c,e){a=c;e=-1<e.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=r(a);return b+"<"+e+">\n"+a+"</"+e+">\n"}));return a=a.replace(/~0/,"")};r=function(a){b++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,
function(a,b,c,e,d){a=d;b||-1<a.search(/\n{2,}/)?a=f(C(a)):(a=u(C(a)),a=a.replace(/\n$/,""),a=k(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");b--;return a};var t=function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){a=x(C(b));a=K(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return v(a)+c});return a=a.replace(/~0/,"")},v=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(d.push(a)-1)+
"K\n\n"},w=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,e,d){a=e.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=x(a);return b+"<code>"+a+"</code>"})},x=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=M(a,"*_{}[]\\",!1)},J=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=f(c);
c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return v("<blockquote>\n"+c+"\n</blockquote>")})},D=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},A=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return z(B(b))})},
z=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=.9<c?b[2](a):.45<c?b[1](a):b[0](a)}return a});a='<a href="'+a+'">'+a+"</a>";return a=a.replace(/">.+:/g,'">')},B=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=
parseInt(b);return String.fromCharCode(c)})},C=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},K=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b,c){a=b;b=4-a.length%4;for(c=0;c<b;c++)a+=" ";return a});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},M=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(new RegExp(b,"g"),N)},N=function(a,b){return"~E"+b.charCodeAt(0)+
"E"}};var Showdown=Attacklab.showdown;Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js");
(function(a,c){var d=a.document,b=a.navigator,g=a.setTimeout,e=a.clearTimeout,h=a.setInterval,f=a.clearInterval,k=a.getComputedStyle,l=a.encodeURIComponent,n=a.ActiveXObject,m=a.Error,q=a.Number.parseInt||a.parseInt,r=a.Number.parseFloat||a.parseFloat,u=a.Number.isNaN||a.isNaN,t=a.Date.now,v=a.Object.keys,w=a.Object.defineProperty,x=a.Object.prototype.hasOwnProperty,J=a.Array.prototype.slice,D=function(){var b=function(a){return a};if("function"===typeof a.wrap&&"function"===typeof a.unwrap)try{var c=
d.createElement("div"),e=a.unwrap(c);1===c.nodeType&&e&&1===e.nodeType&&(b=a.unwrap)}catch(f){}return b}(),A=function(a){return J.call(a,0)},z=function(){var a,b,e,d,f,g=A(arguments),h=g[0]||{};a=1;for(b=g.length;a<b;a++)if(null!=(e=g[a]))for(d in e)x.call(e,d)&&(f=e[d],h!==f&&f!==c&&(h[d]=f));return h},B=function(a){var b,c,e;if("object"!==typeof a||null==a||"number"===typeof a.nodeType)b=a;else if("number"===typeof a.length)for(b=[],c=0,e=a.length;c<e;c++)x.call(a,c)&&(b[c]=B(a[c]));else for(c in b=
{},a)x.call(a,c)&&(b[c]=B(a[c]));return b},C=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument)){do{if(a===b)return!0;a=a.parentNode}while(a)}return!1},K=function(a){var b;"string"===typeof a&&a&&(a.split("#")[0].split("?"),b=a.slice(0,a.lastIndexOf("/")+1));return b},M=function(){var a,b,e;if(d.currentScript&&(a=d.currentScript.src))return a;b=d.getElementsByTagName("script");
if(1===b.length)return b[0].src||c;if("readyState"in b[0])for(e=b.length;e--;)if("interactive"===b[e].readyState&&(a=b[e].src))return a;if("loading"===d.readyState&&(a=b[b.length-1].src))return a;var f;try{throw new m;}catch(g){b=g}if(b&&!(f=b.sourceURL||b.fileName)){f=b.stack;var h;"string"===typeof f&&f&&((b=f.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&b[1]?h=b[1]:(b=f.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&
b[1]&&(h=b[1]));f=h}return(a=f)?a:c},N=null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent),y={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},G,V={},p,P,O={},W=null,Z=0,la=0,ia={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard",
"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.",
"flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},
wa="flash-unavailable flash-degraded flash-overdue version-mismatch config-mismatch clipboard-error".split(" "),aa="flash-disabled flash-outdated flash-sandboxed flash-unavailable flash-degraded flash-deactivated flash-overdue".split(" "),ya=new RegExp("^flash-("+aa.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Ra=new RegExp("^flash-("+aa.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),H={swfPath:function(){var a;if(!(a=K(M()))){var b,e,f=d.getElementsByTagName("script");
for(a=f.length;a--;){if(!(e=f[a].src)){b=null;break}e=K(e);if(null==b)b=e;else if(b!==e){b=null;break}}a=b||c}return(a||"")+"ZeroClipboard.swf"}(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3E4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",
forceHandCursor:!1,title:null,zIndex:999999999},na=function(a){if("object"===typeof a&&null!==a)for(var b in a)if(x.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))H[b]=a[b];else if(null==y.bridge)if("containerId"===b||"swfObjectId"===b){var c=a[b];if("string"===typeof c&&c&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(c))H[b]=a[b];else throw Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");}else H[b]=a[b];if("string"===typeof a&&a){if(x.call(H,a))return H[a]}else return B(H)},
Q=function(){bb();for(var a=["userAgent","platform","appName"],c={},e=0,d=a.length;e<d;e++)a[e]in b&&(c[a[e]]=b[a[e]]);var a=["bridge"],e={},f;for(f in y)-1===a.indexOf(f)&&(e[f]=y[f]);return{browser:c,flash:e,zeroclipboard:{version:F.version,config:F.config()}}},S=function(){return!!(y.disabled||y.outdated||y.sandboxed||y.unavailable||y.degraded||y.deactivated)},Sa=function(a,b){var e,d,f,g={};if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===
typeof b)for(e in a)if(x.call(a,e)&&"string"===typeof e&&e&&"function"===typeof a[e])F.on(e,a[e]);if(f&&f.length){e=0;for(d=f.length;e<d;e++)a=f[e].replace(/^on/,""),g[a]=!0,V[a]||(V[a]=[]),V[a].push(b);g.ready&&y.ready&&F.emit({type:"ready"});if(g.error){e=0;for(d=aa.length;e<d;e++)if(!0===y[aa[e].replace(/^flash-/,"")]){F.emit({type:"error",name:aa[e]});break}G!==c&&F.version!==G&&F.emit({type:"error",name:"version-mismatch",jsVersion:F.version,swfVersion:G})}}return F},ua=function(a,b){var c,e,
d,f,g;if(0===arguments.length)f=v(V);else if("string"===typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)x.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&F.off(c,a[c]);if(f&&f.length)for(c=0,e=f.length;c<e;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=V[a])&&g.length)if(b)for(d=g.indexOf(b);-1!==d;)g.splice(d,1),d=g.indexOf(b,d);else g.length=0;return F},pa=function(a){return"string"===typeof a&&a?B(V[a])||null:B(V)},Ab=function(b){var c,
e,f;if(b=za(b)){c=b;var g=c.target||p||null,h="swf"===c._source;delete c._source;switch(c.type){case "error":!(g="flash-sandboxed"===c.name)&&(g=null,!1===N||c&&"error"===c.type&&c.name&&-1!==wa.indexOf(c.name))&&(g=!1);"boolean"===typeof g&&(y.sandboxed=g);-1!==aa.indexOf(c.name)?z(y,{disabled:"flash-disabled"===c.name,outdated:"flash-outdated"===c.name,unavailable:"flash-unavailable"===c.name,degraded:"flash-degraded"===c.name,deactivated:"flash-deactivated"===c.name,overdue:"flash-overdue"===c.name,
ready:!1}):"version-mismatch"===c.name&&(G=c.swfVersion,z(y,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}));ab();break;case "ready":G=c.swfVersion;g=!0===y.deactivated;z(y,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:g,ready:!g});ab();break;case "beforecopy":P=g;break;case "copy":var k,l,g=c.relatedTarget;!O["text/html"]&&!O["text/plain"]&&g&&(l=g.value||g.outerHTML||g.innerHTML)&&(k=g.value||g.textContent||g.innerText)?
(c.clipboardData.clearData(),c.clipboardData.setData("text/plain",k),l!==k&&c.clipboardData.setData("text/html",l)):!O["text/plain"]&&c.target&&(k=c.target.getAttribute("data-clipboard-text"))&&(c.clipboardData.clearData(),c.clipboardData.setData("text/plain",k));break;case "aftercopy":da(c);F.clearData();if(k=g){var n;try{n=d.activeElement}catch(m){n=null}k=g!==n}k&&g.focus&&g.focus();break;case "_mouseover":F.focus(g);!0===H.bubbleEvents&&h&&(g&&g!==c.relatedTarget&&!C(c.relatedTarget,g)&&Aa(z({},
c,{type:"mouseenter",bubbles:!1,cancelable:!1})),Aa(z({},c,{type:"mouseover"})));break;case "_mouseout":F.blur();!0===H.bubbleEvents&&h&&(g&&g!==c.relatedTarget&&!C(c.relatedTarget,g)&&Aa(z({},c,{type:"mouseleave",bubbles:!1,cancelable:!1})),Aa(z({},c,{type:"mouseout"})));break;case "_mousedown":Db(g,H.activeClass);!0===H.bubbleEvents&&h&&Aa(z({},c,{type:c.type.slice(1)}));break;case "_mouseup":Y(g,H.activeClass);!0===H.bubbleEvents&&h&&Aa(z({},c,{type:c.type.slice(1)}));break;case "_click":P=null;
!0===H.bubbleEvents&&h&&Aa(z({},c,{type:c.type.slice(1)}));break;case "_mousemove":!0===H.bubbleEvents&&h&&Aa(z({},c,{type:c.type.slice(1)}))}c=/^_(?:click|mouse(?:over|out|down|up|move))$/.test(c.type)?!0:void 0;if(!c){if("ready"===b.type&&!0===y.overdue)return F.emit({type:"error",name:"flash-overdue"});c=z({},b);if("object"===typeof c&&c&&c.type&&(g=gb(c),(k=(V["*"]||[]).concat(V[c.type]||[]))&&k.length)){var r,t;l=0;for(n=k.length;l<n;l++)h=k[l],r=this,"string"===typeof h&&"function"===typeof a[h]&&
(h=a[h]),"object"===typeof h&&h&&"function"===typeof h.handleEvent&&(r=h,h=h.handleEvent),"function"===typeof h&&(t=z({},c),La(h,r,[t],g))}if("copy"===b.type){e={};b={};if("object"===typeof O&&O){for(f in O)if(f&&x.call(O,f)&&"string"===typeof O[f]&&O[f])switch(f.toLowerCase()){case "text/plain":case "text":case "air:text":case "flash:text":e.text=O[f];b.text=f;break;case "text/html":case "html":case "air:html":case "flash:html":e.html=O[f];b.html=f;break;case "application/rtf":case "text/rtf":case "rtf":case "richtext":case "air:rtf":case "flash:rtf":e.rtf=
O[f],b.rtf=f}f={data:e,formatMap:b}}else f=void 0;e=f.data;W=f.formatMap}return e}}},Bb=function(){var a=y.sandboxed;bb();"boolean"!==typeof y.ready&&(y.ready=!1);y.sandboxed!==a&&!0===y.sandboxed?(y.ready=!1,F.emit({type:"error",name:"flash-sandboxed"})):F.isFlashUnusable()||null!==y.bridge||(a=H.flashLoadTimeout,"number"===typeof a&&0<=a&&(Z=g(function(){"boolean"!==typeof y.deactivated&&(y.deactivated=!0);!0===y.deactivated&&F.emit({type:"error",name:"flash-deactivated"})},a)),y.overdue=!1,Cb())},
pb=function(){F.clearData();F.blur();F.emit("destroy");$a();F.off()},qb=function(a,b){var c;if("object"===typeof a&&a&&"undefined"===typeof b)c=a,F.clearData();else if("string"===typeof a&&a)c={},c[a]=b;else return;for(var e in c)"string"===typeof e&&e&&x.call(c,e)&&"string"===typeof c[e]&&c[e]&&(O[e]=c[e])},rb=function(a){if("undefined"===typeof a){if(O)for(var b in O)x.call(O,b)&&delete O[b];W=null}else"string"===typeof a&&x.call(O,a)&&delete O[a]},Ob=function(a){if("undefined"===typeof a)return B(O);
if("string"===typeof a&&x.call(O,a))return O[a]},Da=function(a){if(a&&1===a.nodeType){p&&(Y(p,H.activeClass),p!==a&&Y(p,H.hoverClass));p=a;Db(a,H.hoverClass);var b=a.getAttribute("title")||H.title;if("string"===typeof b&&b){var c=Ea(y.bridge);c&&c.setAttribute("title",b)}a=!0===H.forceHandCursor||"pointer"===tb(a,"cursor");!0===y.ready&&(y.bridge&&"function"===typeof y.bridge.setHandCursor?y.bridge.setHandCursor(a):y.ready=!1);var e;p&&(e=Ea(y.bridge))&&(a=Ta(p),z(e.style,{width:a.width+"px",height:a.height+
"px",top:a.top+"px",left:a.left+"px",zIndex:""+Ma(H.zIndex)}))}},sb=function(){var a=Ea(y.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px");p&&(Y(p,H.hoverClass),Y(p,H.activeClass),p=null)},Ka=function(){return p||null},za=function(b){var e;"string"===typeof b&&b?(e=b,b={}):"object"===typeof b&&b&&"string"===typeof b.type&&b.type&&(e=b.type);if(e){e=e.toLowerCase();!b.target&&(/^(copy|aftercopy|_click)$/.test(e)||"error"===e&&
"clipboard-error"===b.name)&&(b.target=P);z(b,{type:e,target:b.target||p||null,relatedTarget:b.relatedTarget||null,currentTarget:y&&y.bridge||null,timeStamp:b.timeStamp||t()||null});e=ia[b.type];"error"===b.type&&b.name&&e&&(e=e[b.name]);e&&(b.message=e);"ready"===b.type&&z(b,{target:null,version:y.version});"error"===b.type&&(ya.test(b.name)&&z(b,{target:null,minimumVersion:"11.0.0"}),Ra.test(b.name)&&z(b,{version:y.version}));"copy"===b.type&&(b.clipboardData={setData:F.setData,clearData:F.clearData});
if("aftercopy"===b.type&&(e=W,"object"===typeof b&&b&&"object"===typeof e&&e)){var f={},g;for(g in b)if(x.call(b,g))if("errors"===g){f[g]=b[g]?b[g].slice():[];for(var h=0,k=f[g].length;h<k;h++)f[g][h].format=e[f[g][h].format]}else if("success"!==g&&"data"!==g)f[g]=b[g];else{f[g]={};var h=b[g],l;for(l in h)l&&x.call(h,l)&&x.call(e,l)&&(f[g][e[l]]=h[l])}b=f}b.target&&!b.relatedTarget&&(g=b,l=(l=(l=b.target)&&l.getAttribute&&l.getAttribute("data-clipboard-target"))?d.getElementById(l):null,g.relatedTarget=
l);if((g=b)&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(g.type)){l=g.target;b="_mouseover"===g.type&&g.relatedTarget?g.relatedTarget:c;e="_mouseout"===g.type&&g.relatedTarget?g.relatedTarget:c;var h=Ta(l),f=h.left+("number"===typeof g._stageX?g._stageX:0),h=h.top+("number"===typeof g._stageY?g._stageY:0),k=f-(d.body.scrollLeft+d.documentElement.scrollLeft),n=h-(d.body.scrollTop+d.documentElement.scrollTop),m=(a.screenLeft||a.screenX||0)+k,r=(a.screenTop||a.screenY||0)+n,q="number"===typeof g.movementX?
g.movementX:0,u="number"===typeof g.movementY?g.movementY:0;delete g._stageX;delete g._stageY;z(g,{srcElement:l,fromElement:b,toElement:e,screenX:m,screenY:r,pageX:f,pageY:h,clientX:k,clientY:n,x:k,y:n,movementX:q,movementY:u,offsetX:0,offsetY:0,layerX:0,layerY:0})}return g}},gb=function(a){return!/^(?:(?:before)?copy|destroy)$/.test(a&&"string"===typeof a.type&&a.type||"")},La=function(a,b,c,e){e?g(function(){a.apply(b,c)},0):a.apply(b,c)},da=function(a){if(a.errors&&0<a.errors.length){var b=B(a);
z(b,{type:"error",name:"clipboard-error"});delete b.success;g(function(){F.emit(b)},0)}},Aa=function(b){if(b&&"string"===typeof b.type&&b){var c,e=b.target||null;c=e&&e.ownerDocument||d;b=z({view:c.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===b.type?1:0,button:"number"===typeof b.which?b.which-1:"number"===typeof b.button?b.button:c.createEvent?0:1},b);e&&c.createEvent&&e.dispatchEvent&&(b=[b.type,b.canBubble,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,
b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget],c=c.createEvent("MouseEvents"),c.initMouseEvent&&(c.initMouseEvent.apply(c,b),c._source="js",e.dispatchEvent(c)))}},Kb=function(){var a=H.flashLoadTimeout;if("number"===typeof a&&0<=a){var b=H.swfObjectId+"_fallbackContent";la=h(function(){var a;var c=d.getElementById(b);if(c){a=k(c,null);var e=0<r(a.height),f=0<r(a.width),g=0<=r(a.top),h=0<=r(a.left),l=e&&f&&g&&h,c=l?null:Ta(c);a="none"!==a.display&&"collapse"!==a.visibility&&(l||!!c&&(e||0<
c.height)&&(f||0<c.width)&&(g||0<=c.top)&&(h||0<=c.left))}else a=!1;a&&(ab(),y.deactivated=null,F.emit({type:"error",name:"swf-not-found"}))},Math.min(1E3,a/10))}},Ea=function(a){for(a=a&&a.parentNode;a&&"OBJECT"===a.nodeName&&a.parentNode;)a=a.parentNode;return a||null},Cb=function(){var b,c=y.bridge,e=Ea(c);if(!c){var c=Pb(a.location.host,H),f="never"===c?"none":"all",g,e=z({jsVersion:F.version},H),h,k,n,m="",r=[];e.trustedDomains&&("string"===typeof e.trustedDomains?g=[e.trustedDomains]:"object"===
typeof e.trustedDomains&&"length"in e.trustedDomains&&(g=e.trustedDomains));if(g&&g.length)for(h=0,k=g.length;h<k;h++)if(x.call(g,h)&&g[h]&&"string"===typeof g[h]&&(n=ib(g[h]))){if("*"===n){r.length=0;r.push(n);break}r.push.apply(r,[n,"//"+n,a.location.protocol+"//"+n])}r.length&&(m+="trustedOrigins="+l(r.join(",")));!0===e.forceEnhancedClipboard&&(m+=(m?"&":"")+"forceEnhancedClipboard=true");"string"===typeof e.swfObjectId&&e.swfObjectId&&(m+=(m?"&":"")+"swfObjectId="+l(e.swfObjectId));"string"===
typeof e.jsVersion&&e.jsVersion&&(m+=(m?"&":"")+"jsVersion="+l(e.jsVersion));g=m;e=H.swfPath;h=null==H||H&&!0===H.cacheBust?(-1===H.swfPath.indexOf("?")?"?":"&")+"noCache="+t():"";h=e+h;e=d.createElement("div");e.id=H.containerId;e.className=H.containerClass;e.style.position="absolute";e.style.left="0px";e.style.top="-9999px";e.style.width="1px";e.style.height="1px";e.style.zIndex=""+Ma(H.zIndex);k=d.createElement("div");e.appendChild(k);d.body.appendChild(e);n=d.createElement("div");m="activex"===
y.pluginType;n.innerHTML='<object id="'+H.swfObjectId+'" name="'+H.swfObjectId+'" width="100%" height="100%" '+(m?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+h+'"')+">"+(m?'<param name="movie" value="'+h+'"/>':"")+'<param name="allowScriptAccess" value="'+c+'"/><param name="allowNetworking" value="'+f+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+g+'"/><div id="'+H.swfObjectId+
'_fallbackContent">&nbsp;</div></object>';c=n.firstChild;D(c).ZeroClipboard=F;e.replaceChild(c,k);Kb()}c||((c=d[H.swfObjectId])&&(b=c.length)&&(c=c[b-1]),!c&&e&&(c=e.firstChild));y.bridge=c||null;return c},$a=function(){var a=y.bridge;if(a){var b=Ea(a);b&&("activex"===y.pluginType&&"readyState"in a?(a.style.display="none",function Va(){if(4===a.readyState){for(var c in a)"function"===typeof a[c]&&(a[c]=null);a.parentNode&&a.parentNode.removeChild(a);b.parentNode&&b.parentNode.removeChild(b)}else g(Va,
10)}()):(a.parentNode&&a.parentNode.removeChild(a),b.parentNode&&b.parentNode.removeChild(b)));ab();y.ready=null;y.bridge=null;y.deactivated=null;G=c}},ib=function(a){if(null==a||""===a)return null;a=a.replace(/^\s+|\s+$/g,"");if(""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return(a=-1===c?a:-1===b||0===c?null:a.slice(0,c))&&".swf"===a.slice(-4).toLowerCase()?null:a||null},Pb=function(){return function(a,b){var c=ib(b.swfPath);null===c&&(c=a);var e=b.trustedDomains,
d,f,g,h=[];"string"===typeof e&&(e=[e]);if("object"===typeof e&&e&&"number"===typeof e.length)for(d=0,f=e.length;d<f;d++)if(x.call(e,d)&&(g=ib(e[d]))){if("*"===g){h.length=0;h.push("*");break}-1===h.indexOf(g)&&h.push(g)}e=h.length;if(0<e){if(1===e&&"*"===h[0])return"always";if(-1!==h.indexOf(a))return 1===e&&a===c?"sameDomain":"always"}return"never"}}(),Db=function(a,b){var c,e,d,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList)for(c=0,e=f.length;c<
e;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){d=" "+a.className+" ";c=0;for(e=f.length;c<e;c++)-1===d.indexOf(" "+f[c]+" ")&&(d+=f[c]+" ");a.className=d.replace(/^\s+|\s+$/g,"")}return a},Y=function(a,b){var c,e,d,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList&&0<a.classList.length)for(c=0,e=f.length;c<e;c++)a.classList.remove(f[c]);else if(a.className){d=(" "+a.className+" ").replace(/[\r\n\t]/g," ");c=0;for(e=f.length;c<e;c++)d=
d.replace(" "+f[c]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}return a},tb=function(a,b){var c=k(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Ta=function(b){var c={left:0,top:0,width:0,height:0};if(b.getBoundingClientRect){b=b.getBoundingClientRect();var e=a.pageXOffset,f=a.pageYOffset,g=d.documentElement.clientLeft||0,h=d.documentElement.clientTop||0,k=0,l=0;if("relative"===tb(d.body,"position"))var l=d.body.getBoundingClientRect(),n=d.documentElement.getBoundingClientRect(),
k=l.left-n.left||0,l=l.top-n.top||0;c.left=b.left+e-g-k;c.top=b.top+f-h-l;c.width="width"in b?b.width:b.right-b.left;c.height="height"in b?b.height:b.bottom-b.top}return c},ab=function(){e(Z);Z=0;f(la);la=0},Ma=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;"number"!==typeof a||u(a)?"string"===typeof a&&(b=Ma(q(a,10))):b=a;return"number"===typeof b?b:"auto"},bb=function(b){var c,e,d,f=y.sandboxed,g=null;b=!0===b;if(!1===N)g=!1;else{try{e=a.frameElement||null}catch(h){d={name:h.name,message:h.message}}if(e&&
1===e.nodeType&&"IFRAME"===e.nodeName)try{g=e.hasAttribute("sandbox")}catch(h){g=null}else{try{c=document.domain||null}catch(h){c=null}if(null===c||d&&"SecurityError"===d.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(d.message.toLowerCase()))g=!0}}y.sandboxed=g;f===g||b||ja(n);return g},ja=function(a){function c(a){a=a.match(/[\d]+/g);a.length=3;return a.join(".")}function e(a){a&&(f=!0,a.version&&(k=c(a.version)),!k&&a.description&&(k=c(a.description)),a.filename&&(a=a.filename,h=
!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))))}var d,f=!1,g=!1,h=!1,k="";if(b.plugins&&b.plugins.length)a=b.plugins["Shockwave Flash"],e(a),b.plugins["Shockwave Flash 2.0"]&&(f=!0,k="2.0.0.11");else if(b.mimeTypes&&b.mimeTypes.length)a=(a=b.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin,e(a);else if("undefined"!==typeof a){g=!0;try{d=new a("ShockwaveFlash.ShockwaveFlash.7"),f=!0,k=c(d.GetVariable("$version"))}catch(l){try{d=
new a("ShockwaveFlash.ShockwaveFlash.6"),f=!0,k="6.0.21"}catch(n){try{d=new a("ShockwaveFlash.ShockwaveFlash"),f=!0,k=c(d.GetVariable("$version"))}catch(m){g=!1}}}}y.disabled=!0!==f;y.outdated=k&&r(k)<r("11.0.0");y.version=k||"0.0.0";y.pluginType=h?"pepper":g?"activex":f?"netscape":"unknown"};ja(n);bb(!0);var F=function(){if(!(this instanceof F))return new F;"function"===typeof F._createClient&&F._createClient.apply(this,A(arguments))};w(F,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0});
F.config=function(){return na.apply(this,A(arguments))};F.state=function(){return Q.apply(this,A(arguments))};F.isFlashUnusable=function(){return S.apply(this,A(arguments))};F.on=function(){return Sa.apply(this,A(arguments))};F.off=function(){return ua.apply(this,A(arguments))};F.handlers=function(){return pa.apply(this,A(arguments))};F.emit=function(){return Ab.apply(this,A(arguments))};F.create=function(){return Bb.apply(this,A(arguments))};F.destroy=function(){return pb.apply(this,A(arguments))};
F.setData=function(){return qb.apply(this,A(arguments))};F.clearData=function(){return rb.apply(this,A(arguments))};F.getData=function(){return Ob.apply(this,A(arguments))};F.focus=F.activate=function(){return Da.apply(this,A(arguments))};F.blur=F.deactivate=function(){return sb.apply(this,A(arguments))};F.activeElement=function(){return Ka.apply(this,A(arguments))};var cb=0,ba={},Qb=0,jb={},Ja={};z(H,{autoActivate:!0});var Rb=function(a){var b=this;b.id=""+cb++;ba[b.id]={instance:b,elements:[],handlers:{}};
a&&b.clip(a);F.on("*",function(a){return b.emit(a)});F.on("destroy",function(){b.destroy()});F.create()},ub=function(a,b){var e,d,f,g={},h=(d=ba[this.id])&&d.handlers;if(!d)throw Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(e in a)if(x.call(a,e)&&"string"===typeof e&&e&&"function"===typeof a[e])this.on(e,a[e]);if(f&&f.length){e=0;for(d=f.length;e<
d;e++)a=f[e].replace(/^on/,""),g[a]=!0,h[a]||(h[a]=[]),h[a].push(b);g.ready&&y.ready&&this.emit({type:"ready",client:this});if(g.error){e=0;for(d=aa.length;e<d;e++)if(y[aa[e].replace(/^flash-/,"")]){this.emit({type:"error",name:aa[e],client:this});break}G!==c&&F.version!==G&&this.emit({type:"error",name:"version-mismatch",jsVersion:F.version,swfVersion:G})}}return this},cc=function(a,b){var c,e,d,f,g,h=(e=ba[this.id])&&e.handlers;if(!h)return this;if(0===arguments.length)f=v(h);else if("string"===
typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)x.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,e=f.length;c<e;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=h[a])&&g.length)if(b)for(d=g.indexOf(b);-1!==d;)g.splice(d,1),d=g.indexOf(b,d);else g.length=0;return this},Ia=function(a){var b=null,c=ba[this.id]&&ba[this.id].handlers;c&&(b="string"===typeof a&&a?c[a]?c[a].slice(0):[]:B(c));return b},Za=
function(b){var c;var e=b;if(!e||!e.type||e.client&&e.client!==this)c=!1;else{var d=(c=ba[this.id])&&c.elements,f=!!d&&0<d.length,g=!e.target||f&&-1!==d.indexOf(e.target),d=e.relatedTarget&&f&&-1!==d.indexOf(e.relatedTarget),e=e.client&&e.client===this;c=c&&(g||d||e)?!0:!1}if(c&&("object"===typeof b&&b&&"string"===typeof b.type&&b.type&&(b=z({},b)),b=z({},za(b),{client:this}),g=ba[this.id],"object"===typeof b&&b&&b.type&&g&&(c=gb(b),(g=(g&&g.handlers["*"]||[]).concat(g&&g.handlers[b.type]||[]))&&
g.length)))for(var h,k,e=0,d=g.length;e<d;e++)f=g[e],h=this,"string"===typeof f&&"function"===typeof a[f]&&(f=a[f]),"object"===typeof f&&f&&"function"===typeof f.handleEvent&&(h=f,f=f.handleEvent),"function"===typeof f&&(k=z({},b),La(f,h,[k],c));return this},Sb=function(a){if(!ba[this.id])throw Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=Na(a);for(var b=0;b<a.length;b++)if(x.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===jb[a[b].zcClippingId].indexOf(this.id)&&
jb[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Qb++,jb[a[b].zcClippingId]=[this.id],!0===H.autoActivate&&Ub(a[b]));var c=ba[this.id]&&ba[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},Tb=function(a){var b=ba[this.id];if(!b)return this;var b=b.elements,c;a="undefined"===typeof a?b.slice(0):Na(a);for(var e=a.length;e--;)if(x.call(a,e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=b.indexOf(a[e],c));)b.splice(c,1);var d=jb[a[e].zcClippingId];if(d){for(c=0;-1!==
(c=d.indexOf(this.id,c));)d.splice(c,1);if(0===d.length){if(!0===H.autoActivate&&(c=a[e])&&1===c.nodeType&&(d=Ja[c.zcClippingId],"object"===typeof d&&d)){for(var f=void 0,g=void 0,h=["move","leave","enter","out","over"],k=0,l=h.length;k<l;k++)f="mouse"+h[k],g=d[f],"function"===typeof g&&c.removeEventListener(f,g,!1);delete Ja[c.zcClippingId]}delete a[e].zcClippingId}}}return this},dc=function(){var a=ba[this.id];return a&&a.elements?a.elements.slice(0):[]},Qa=function(){ba[this.id]&&(this.unclip(),
this.off(),delete ba[this.id])},Na=function(a){"string"===typeof a&&(a=[]);return"number"!==typeof a.length?[a]:a},Ub=function(b){if(b&&1===b.nodeType){var c=function(b){if(b||(b=a.event))"js"!==b._source&&(b.stopImmediatePropagation(),b.preventDefault()),delete b._source},e=function(e){if(e||(e=a.event))c(e),F.focus(b)};b.addEventListener("mouseover",e,!1);b.addEventListener("mouseout",c,!1);b.addEventListener("mouseenter",c,!1);b.addEventListener("mouseleave",c,!1);b.addEventListener("mousemove",
c,!1);Ja[b.zcClippingId]={mouseover:e,mouseout:c,mouseenter:c,mouseleave:c,mousemove:c}}};F._createClient=function(){Rb.apply(this,A(arguments))};F.prototype.on=function(){return ub.apply(this,A(arguments))};F.prototype.off=function(){return cc.apply(this,A(arguments))};F.prototype.handlers=function(){return Ia.apply(this,A(arguments))};F.prototype.emit=function(){return Za.apply(this,A(arguments))};F.prototype.clip=function(){return Sb.apply(this,A(arguments))};F.prototype.unclip=function(){return Tb.apply(this,
A(arguments))};F.prototype.elements=function(){return dc.apply(this,A(arguments))};F.prototype.destroy=function(){return Qa.apply(this,A(arguments))};F.prototype.setText=function(a){if(!ba[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");F.setData("text/plain",a);return this};F.prototype.setHtml=function(a){if(!ba[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");F.setData("text/html",
a);return this};F.prototype.setRichText=function(a){if(!ba[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");F.setData("application/rtf",a);return this};F.prototype.setData=function(){if(!ba[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");F.setData.apply(this,A(arguments));return this};F.prototype.clearData=function(){if(!ba[this.id])throw Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");
F.clearData.apply(this,A(arguments));return this};F.prototype.getData=function(){if(!ba[this.id])throw Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return F.getData.apply(this,A(arguments))};"function"===typeof define&&define.amd?define(function(){return F}):"object"===typeof module&&module&&"object"===typeof module.exports&&module.exports?module.exports=F:a.ZeroClipboard=F})(function(){return this||window}());var Hogan={};
(function(a,c){function d(a){return""+(null===a||void 0===a?"":a)}a.Template=function(a,b,e,d){this.r=a||this.r;this.c=e;this.options=d;this.text=b||"";this.buf=c?[]:""};a.Template.prototype={r:function(){return""},v:function(a){a=d(a);return k.test(a)?a.replace(b,"&amp;").replace(g,"&lt;").replace(e,"&gt;").replace(h,"&#39;").replace(f,"&quot;"):a},t:d,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,e){a=c[a];if(!a)return"";this.c&&"string"==
typeof a&&(a=this.c.compile(a,this.options));return a.ri(b,c,e)},rs:function(a,b,c){var e=a[a.length-1];if(l(e))for(var d=0;d<e.length;d++)a.push(e[d]),c(a,b,this),a.pop();else c(a,b,this)},s:function(a,b,c,e,d,f,g){if(l(a)&&0===a.length)return!1;"function"==typeof a&&(a=this.ls(a,b,c,e,d,f,g));c=""===a||!!a;!e&&c&&b&&b.push("object"==typeof a?a:b[b.length-1]);return c},d:function(a,b,c,e){var d=a.split("."),f=this.f(d[0],b,c,e),g=null;if("."===a&&l(b[b.length-2]))return b[b.length-1];for(a=1;a<d.length;a++)f&&
"object"==typeof f&&d[a]in f?(g=f,f=f[d[a]]):f="";if(e&&!f)return!1;!e&&"function"==typeof f&&(b.push(g),f=this.lv(f,b,c),b.pop());return f},f:function(a,b,c,e){for(var d=!1,f=null,g=!1,h=b.length-1;0<=h;h--)if((f=b[h])&&"object"==typeof f&&a in f){d=f[a];g=!0;break}if(!g)return e?!1:"";!e&&"function"==typeof d&&(d=this.lv(d,b,c));return d},ho:function(a,b,c,e,d){var f=this.c,g=this.options;g.delimiters=d;e=a.call(b,e);e=null==e?""+e:e.toString();this.b(f.compile(e,g).render(b,c));return!1},b:c?function(a){this.buf.push(a)}:
function(a){this.buf+=a},fl:c?function(){var a=this.buf.join("");this.buf=[];return a}:function(){var a=this.buf;this.buf="";return a},ls:function(a,b,c,e,d,f,g){b=b[b.length-1];var h=null;if(!e&&this.c&&0<a.length)return this.ho(a,b,c,this.text.substring(d,f),g);h=a.call(b);if("function"==typeof h){if(e)return!0;if(this.c)return this.ho(h,b,c,this.text.substring(d,f),g)}return h},lv:function(a,b,c){b=b[b.length-1];a=a.call(b);return"function"==typeof a&&(a=d(a.call(b)),this.c&&~a.indexOf("{{"))?
this.c.compile(a,this.options).render(b,c):d(a)}};var b=/&/g,g=/</g,e=/>/g,h=/\'/g,f=/\"/g,k=/[&<>\"\']/,l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}})("undefined"!==typeof exports?exports:Hogan);
(function(a){function c(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function d(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function b(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var e=1,d=a.length;e<d;e++)if(b.charAt(c+e)!=a.charAt(e))return!1;return!0}function g(a,b,c,e){b=[];for(var d=null,f=null;0<a.length;){f=a.shift();if(!(d="#"==f.tag)&&!(d="^"==f.tag))a:{for(var d=f,h=e,k=0,l=h.length;k<l;k++)if(h[k].o==d.n){d.tag="#";d=!0;break a}d=void 0}if(d)c.push(f),
f.nodes=g(a,f.tag,c,e);else if("/"==f.tag){if(0===c.length)throw Error("Closing tag without opener: /"+f.n);d=c.pop();if(a=f.n!=d.n){a:{a=0;for(c=e.length;a<c;a++)if(e[a].c==f.n&&e[a].o==d.n){e=!0;break a}e=void 0}a=!e}if(a)throw Error("Nesting error: "+d.n+" vs. "+f.n);d.end=f.i;return b}b.push(f)}if(0<c.length)throw Error("missing closing tag: "+c.pop().n);return b}function e(a){return a.replace(q,"\\\\").replace(l,'\\"').replace(n,"\\n").replace(m,"\\r")}function h(a){return~a.indexOf(".")?"d":
"f"}function f(a){for(var b="",c=0,d=a.length;c<d;c++){var g=a[c].tag;if("#"==g)var g=a[c].nodes,k=h(a[c].n),l=a[c].i,n=a[c].end,m=a[c].otag+" "+a[c].ctag,g="if(_.s(_."+k+'("'+e(a[c].n)+'",c,p,1),c,p,0,'+l+","+n+',"'+m+'")){_.rs(c,p,function(c,p,_){'+f(g)+"});c.pop();}",b=b+g;else"^"==g?(g=a[c].nodes,g="if(!_.s(_."+h(a[c].n)+'("'+e(a[c].n)+'",c,p,1),c,p,1,0,0,"")){'+f(g)+"};",b+=g):"<"==g||">"==g?b+='_.b(_.rp("'+e(a[c].n)+'",c,p,"'+(a[c].indent||"")+'"));':"{"==g||"&"==g?(g="_.b(_.t(_."+h(a[c].n)+
'("'+e(a[c].n)+'",c,p,0)));',b+=g):"\n"==g?b+='_.b("\\n"'+(a.length-1==c?"":" + i")+");":"_v"==g?(g="_.b(_.v(_."+h(a[c].n)+'("'+e(a[c].n)+'",c,p,0)));',b+=g):void 0===g&&(g='"'+e(a[c])+'"',b+="_.b("+g+");")}return b}var k=/\S/,l=/\"/g,n=/\n/g,m=/\r/g,q=/\\/g,r={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(a,e){function f(){0<B.length&&(C.push(new String(B)),B="")}function g(a,b){f();var c;if(c=a)a:{c=!0;for(var e=N;e<C.length;e++)if(c=C[e].tag&&r[C[e].tag]<r._v||!C[e].tag&&
null===C[e].match(k),!c){c=!1;break a}}if(c){c=N;for(var d;c<C.length;c++)C[c].tag||((d=C[c+1])&&">"==d.tag&&(d.indent=C[c].toString()),C.splice(c,1))}else b||C.push({tag:"\n"});K=!1;N=C.length}function h(a,b){var c="="+G,e=a.indexOf(c,b),f=d(a.substring(a.indexOf("=",b)+1,e)).split(" ");y=f[0];G=f[1];return e+c.length-1}var l=a.length,n=0,m=null,q=null,B="",C=[],K=!1,M=0,N=0,y="{{",G="}}";e&&(e=e.split(" "),y=e[0],G=e[1]);for(M=0;M<l;M++)0==n?b(y,a,M)?(--M,f(),n=1):"\n"==a.charAt(M)?g(K):B+=a.charAt(M):
1==n?(M+=y.length-1,m=(q=r[a.charAt(M+1)])?a.charAt(M+1):"_v","="==m?(M=h(a,M),n=0):(q&&M++,n=2),K=M):b(G,a,M)?(C.push({tag:m,n:d(B),otag:y,ctag:G,i:"/"==m?K-G.length:M+y.length}),B="",M+=G.length-1,n=0,"{"==m&&("}}"==G?M++:c(C[C.length-1]))):B+=a.charAt(M);g(K,!0);return C};a.generate=function(b,c,e){b='var _=this;_.b(i=i||"");'+f(b)+"return _.fl();";return e.asString?"function(c,p,i){"+b+";}":new a.Template(new Function("c","p","i",b),c,a,e)};a.parse=function(a,b,c){c=c||{};return g(a,"",[],c.sectionTags||
[])};a.cache={};a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,e=this.cache[c];if(e)return e;e=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b);return this.cache[c]=e}})("undefined"!==typeof exports?exports:Hogan);
(function(a){var c={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},d=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,b=function(a){return null===a||void 0===a},g=function(b,c){var e=[],d=[];a.each(b,function(a,b){d.push(b);d.length===c&&(e.push(d),d=[])});0!==d.length&&e.push(d);return e},e=function(c){return b(c)?[]:a.isArray(c)?c:[c]},h=function(b){return a.map(b[0],function(c,
e){return[a.map(b,function(a){return a[e]})]})},f=function(a,b,c){this.init(a,b,c)};f.prototype={init:function(b){this.urls=b;this.count=0;this.results={};this._deferred=a.Deferred()},notify:function(b){this.results[b.original_url]=b;this.count++;this._deferred.notify.apply(this._deferred,[b]);if(this.count===this.urls.length){var c=this;b=a.map(this.urls,function(a){return c.results[a]});this._deferred.resolve(b)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}};
window.Keeper=f;var k=function(){};k.prototype={defaults:{},log:function(a,c){b(window.console)||b(window.console[a])||window.console[a].apply(window.console,[c])},build:function(c,e,d){d=b(d)?{}:d;var f=d.secure;b(f)&&(f="https:"===window.location.protocol?!0:!1);c=(f?"https":"http")+"://api.embed.ly/"+("objectify"===c?"2/":"1/")+c;f=b(d.query)?{}:d.query;f.key=d.key;c+="?"+a.param(f);return c+="&urls="+a.map(e,encodeURIComponent).join(",")},ajax:function(k,l,n){n=a.extend({},c,a.embedly.defaults,
"object"===typeof n&&n);if(b(n.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;l=e(l);var u=new f(l),t=[],v=[],w;a.each(l,function(a,b){w=!1;d.test(b)&&(w=!0,null!==n.urlRe&&n.urlRe.test&&!n.urlRe.test(b)&&(w=!1));!0===w?t.push(b):v.push({url:b,original_url:b,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+b+'"'})});l=g(t,n.batch);var x=this;a.each(l,function(b,c){a.ajax({url:x.build(k,c,n),dataType:"jsonp",success:function(b){a.each(h([c,
b]),function(a,b){var c=b[1];c.original_url=b[0];c.invalid=!1;u.notify(c)})}})});v.length&&setTimeout(function(){a.each(v,function(a,b){u.notify(b)})},1);return u._deferred},oembed:function(a,b){return this.ajax("oembed",a,b)},preview:function(a,b){return this.ajax("preview",a,b)},objectify:function(a,b){return this.ajax("objectify",a,b)},extract:function(a,b){return this.ajax("extract",a,b)}};var l=function(){};l.prototype={build:function(c,e,d){d=a.extend({},a.embedly.defaults,"object"===typeof d&&
d);var f=d.secure;b(f)&&(f="https:"===window.location.protocol?!0:!1);c=(f?"https":"http")+"://i.embed.ly/"+("display"===c?"1/":"1/display/")+c;f=b(d.query)?{}:d.query;f.key=d.key;c+="?"+a.param(f);return c+="&url="+encodeURIComponent(e)},display:function(a,b){return this.build("display",a,b)},resize:function(a,b){return this.build("resize",a,b)},fill:function(a,b){return this.build("fill",a,b)},crop:function(a,b){return this.build("crop",a,b)}};var n=function(a,b,c){this.init(a,b,c)};n.prototype=
{init:function(b,c,e){this.elem=b;this.$elem=a(b);this.original_url=c;this.options=e;this.loaded=a.Deferred();var d=this;this.loaded.done(function(){d.$elem.trigger("loaded",[d])});this.$elem.trigger("initialized",[this])},progress:function(b){a.extend(this,b);this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display();this.loaded.resolve(this)},imageStyle:function(){var a=[],b;this.options.addImageStyles&&(this.options.query.maxwidth&&
(b=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",a.push("max-width: "+this.options.query.maxwidth+b)),this.options.query.maxheight&&(b=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",a.push("max-height: "+this.options.query.maxheight+b)));return a.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var a;"photo"===this.type?(a="<a href='"+this.original_url+"' target='_blank'>",a+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+
"' /></a>"):"video"===this.type||"rich"===this.type?a=this.html:(this.title=this.title||this.url,a=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",a+="<a href='"+this.original_url+"'>"+this.title+"</a>",a+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",a+=this.description?'<div class="description">'+this.description+"</div>":"");this.options.wrapElement&&(a="<"+this.options.wrapElement+' class="'+
this.options.className+'">'+a+"</"+this.options.wrapElement+">");this.code=a;"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code);this.$elem.trigger("displayed",[this])}};a.embedly=new k;a.embedly.display=new l;a.fn.embedly=function(e){if(void 0===e||"object"===typeof e){e=a.extend({},
c,a.embedly.defaults,"object"===typeof e&&e);if(b(e.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(a.noop);var d={},f=function(b){if(!a.data(a(b),"embedly")){var c=a(b).attr("href"),f=new n(b,c,e);a.data(b,"embedly",f);d.hasOwnProperty(c)?d[c].push(f):d[c]=[f]}},g=this.each(function(){b(a(this).attr("href"))?a(this).find("a").each(function(){b(a(this).attr("href"))||f(this)}):f(this)}),h=a.embedly.ajax(e.endpoint,a.map(d,
function(a,b){return b}),e).progress(function(b){a.each(d[b.original_url],function(a,c){c.progress(b)})});e.progress&&h.progress(e.progress);e.done&&h.done(e.done);return g}};a.expr[":"].embedly=function(c){return!b(a(c).data("embedly"))};a.fn.display=function(e,d){b(e)&&(e="display");if(void 0===d||"object"===typeof d){d=a.extend({},c,a.embedly.defaults,"object"===typeof d&&d);if(b(d.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),
this.each(a.noop);var f=function(b){var c=a(b);if(!c.data("display")){var f=c.data("src")||c.attr("href"),f={original_url:f,url:a.embedly.display.build(e,f,d)};c.data("display",f);c.trigger("initialized",[b]);b="<img src='"+f.url+"' />";c.is("a")?c.append(b):c.replaceWith(b)}},g=function(c){return b(a(c).data("src"))&&b(a(c).attr("href"))?!1:!0};return this.each(function(){g(this)?f(this):a(this).find("img,a").each(function(){g(this)&&f(this)})})}};a.expr[":"].display=function(c){return!b(a(c).data("display"))}})(jQuery,
window);
(function(a){function c(c){function e(){c?k.removeData(c):r&&delete d[r]}function h(){l.id=setTimeout(function(){l.fn()},u)}var f=this,k,l={},n=c?a.fn:a,m=arguments,q=4,r=m[1],u=m[2],t=m[3];"string"!==typeof r&&(q--,r=c=0,u=m[1],t=m[2]);c?(k=f.eq(0),k.data(c,l=k.data(c)||{})):r&&(l=d[r]||(d[r]={}));l.id&&clearTimeout(l.id);delete l.id;if(t)l.fn=function(a){"string"===typeof t&&(t=n[t]);!0!==t.apply(f,b.call(m,q))||a?e():h()},h();else{if(l.fn)return void 0===u?e():l.fn(!1===u),!0;e()}}var d={},b=Array.prototype.slice;
a.doTimeout=function(){return c.apply(window,[0].concat(b.call(arguments)))};a.fn.doTimeout=function(){var a=b.call(arguments),e=c.apply(this,["doTimeout"+a[0]].concat(a));return"number"===typeof a[0]||"number"===typeof a[1]?this:e}})(jQuery);
(function(a){function c(){var b;b=a(this);if(!b.data("timeago")){b.data("timeago",{datetime:g.datetime(b)});var c=a.trim(b.text());0<c.length&&b.attr("title",c)}b=b.data("timeago");isNaN(b.datetime)||a(this).text(d(b.datetime));return this}function d(a){return g.inWords(b(a))}function b(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return b instanceof Date?d(b):"string"==typeof b?d(a.timeago.parse(b)):d(a.timeago.datetime(b))};var g=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,
allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(b){function c(b,e){return(a.isFunction(b)?b(e):b).replace(/%d/i,d.numbers&&d.numbers[e]||e)}var d=this.settings.strings,g=d.prefixAgo,l=d.suffixAgo;this.settings.allowFuture&&
(0>b&&(g=d.prefixFromNow,l=d.suffixFromNow),b=Math.abs(b));b/=1E3;var n=b/60,m=n/60,q=m/24,r=q/365;b=45>b&&c(d.seconds,Math.round(b))||90>b&&c(d.minute,1)||45>n&&c(d.minutes,Math.round(n))||90>n&&c(d.hour,1)||24>m&&c(d.hours,Math.round(m))||48>m&&c(d.day,1)||30>q&&c(d.days,Math.floor(q))||60>q&&c(d.month,1)||365>q&&c(d.months,Math.floor(q/30))||2>r&&c(d.year,1)||c(d.years,Math.floor(r));return a.trim([g,b,l].join(" "))},parse:function(b){b=a.trim(b);b=b.replace(/\.\d\d\d/,"");b=b.replace(/-/,"/").replace(/-/,
"/");b=b.replace(/T/," ").replace(/Z/," UTC");b=b.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(b)},datetime:function(b){b="time"==a(b).get(0).tagName.toLowerCase()?a(b).attr("datetime"):a(b).attr("title");return g.parse(b)}});a.fn.timeago=function(){var a=this;a.each(c);var b=g.settings;0<b.refreshMillis&&setInterval(function(){a.each(c)},b.refreshMillis);return a};document.createElement("abbr");document.createElement("time")})(jQuery);
(function(a){var c={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},d="fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent whiteSpace".split(" "),b,g=a('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",
!0)[0];g.style.lineHeight="99px";"99px"===a(g).css("lineHeight")&&d.push("lineHeight");g.style.lineHeight="";a.fn.autosize=function(e){if(!this.length)return this;e=a.extend({},c,e||{});g.parentNode!==document.body&&a(document.body).append(g);return this.each(function(){function c(){var b,e=window.getComputedStyle?window.getComputedStyle(n,null):null;e?(b=parseFloat(e.width),"border-box"!==e.boxSizing&&"border-box"!==e.webkitBoxSizing&&"border-box"!==e.mozBoxSizing||a.each(["paddingLeft","paddingRight",
"borderLeftWidth","borderRightWidth"],function(a,c){b-=parseFloat(e[c])})):b=m.width();g.style.width=Math.max(b,0)+"px"}function f(){var f={};b=n;g.className=e.className;g.id=e.id;q=parseFloat(m.css("maxHeight"));a.each(d,function(a,b){f[b]=m.css(b)});a(g).css(f).attr("wrap",m.attr("wrap"));c();if(window.chrome){var k=n.style.width;n.style.width="0px";n.style.width=k}}function k(){var a,d;b!==n?f():c();g.value=!n.value&&e.placeholder?m.attr("placeholder")||"":n.value;g.value+=e.append||"";g.style.overflowY=
n.style.overflowY;d=parseFloat(n.style.height)||0;g.scrollTop=0;g.scrollTop=9E4;a=g.scrollTop;q&&a>q?(n.style.overflowY="scroll",a=q):(n.style.overflowY="hidden",a<r&&(a=r));a+=u;.01<Math.abs(d-a)&&(n.style.height=a+"px",g.className=g.className,t&&e.callback.call(n,n),m.trigger("autosize.resized"))}function l(){clearTimeout(w);w=setTimeout(function(){var a=m.width();a!==x&&(x=a,k())},parseInt(e.resizeDelay,10))}var n=this,m=a(n),q,r,u=0,t=a.isFunction(e.callback),v={height:n.style.height,overflow:n.style.overflow,
overflowY:n.style.overflowY,wordWrap:n.style.wordWrap,resize:n.style.resize},w,x=m.width(),J=m.css("resize");if(!m.data("autosize")){m.data("autosize",!0);if("border-box"===m.css("box-sizing")||"border-box"===m.css("-moz-box-sizing")||"border-box"===m.css("-webkit-box-sizing"))u=m.outerHeight()-m.height();r=Math.max(parseFloat(m.css("minHeight"))-u||0,m.height());m.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});"vertical"===J?m.css("resize","none"):"both"===J&&m.css("resize","horizontal");
if("onpropertychange"in n)if("oninput"in n)m.on("input.autosize keyup.autosize",k);else m.on("propertychange.autosize",function(){"value"===event.propertyName&&k()});else m.on("input.autosize",k);if(!1!==e.resizeDelay)a(window).on("resize.autosize",l);m.on("autosize.resize",k);m.on("autosize.resizeIncludeStyle",function(){b=null;k()});m.on("autosize.destroy",function(){b=null;clearTimeout(w);a(window).off("resize",l);m.off("autosize").off(".autosize").css(v).removeData("autosize")});k()}})}})(jQuery||
$);
(function(a){function c(c){"string"===typeof c.data&&(c.data={keys:c.data});if(c.data&&c.data.keys&&"string"===typeof c.data.keys){var b=c.handler,g=c.data.keys.toLowerCase().split(" "),e="text password number email url range date month week time datetime datetime-local search color tel".split(" ");c.handler=function(h){if(c.data.allowInTextInputField||this===h.target||!(/textarea|select/i.test(h.target.nodeName)||-1<a.inArray(h.target.type,e)||a(h.target).prop("isContentEditable"))){var f=a.hotkeys.specialKeys[h.keyCode],k=
0<h.which&&String.fromCharCode(h.which).toLowerCase(),l="",n={};h.altKey&&"alt"!==f&&(l+="alt+");h.ctrlKey&&"ctrl"!==f&&(l+="ctrl+");h.metaKey&&!h.ctrlKey&&"meta"!==f&&(l+="meta+");h.shiftKey&&"shift"!==f&&(l+="shift+");f&&(n[l+f]=!0);k&&(n[l+k]=!0,n[l+a.hotkeys.shiftNums[k]]=!0,"shift+"===l&&(n[a.hotkeys.shiftNums[k]]=!0));f=0;for(k=g.length;f<k;f++)if(n[g[f]])return b.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",
18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",
5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:c}})})(this.jQuery);
(function(){function a(b,c){function e(a,b){return function(){return a.apply(b,arguments)}}var g;c=c||{};this.trackingClick=!1;this.trackingClickStart=0;this.targetElement=null;this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0;this.touchBoundary=c.touchBoundary||10;this.layer=b;this.tapDelay=c.tapDelay||200;this.tapTimeout=c.tapTimeout||700;if(!a.notNeeded(b)){for(var h="onMouse onClick onTouchStart onTouchMove onTouchEnd onTouchCancel".split(" "),q=0,r=h.length;q<r;q++)this[h[q]]=e(this[h[q]],
this);d&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0));b.addEventListener("click",this.onClick,!0);b.addEventListener("touchstart",this.onTouchStart,!1);b.addEventListener("touchmove",this.onTouchMove,!1);b.addEventListener("touchend",this.onTouchEnd,!1);b.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,e){var d=Node.prototype.removeEventListener;
"click"===a?d.call(b,a,c.hijacked||c,e):d.call(b,a,c,e)},b.addEventListener=function(a,c,e){var d=Node.prototype.addEventListener;"click"===a?d.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),e):d.call(b,a,c,e)});"function"===typeof b.onclick&&(g=b.onclick,b.addEventListener("click",function(a){g(a)},!1),b.onclick=null)}}var c=0<=navigator.userAgent.indexOf("Windows Phone"),d=0<navigator.userAgent.indexOf("Android")&&!c,b=/iP(ad|hone|od)/.test(navigator.userAgent)&&!c,g=
b&&/OS 4_\d(_\d)?/.test(navigator.userAgent),e=b&&/OS [6-7]_\d/.test(navigator.userAgent),h=0<navigator.userAgent.indexOf("BB10");a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(a.disabled)return!0;break;case "input":if(b&&"file"===a.type||a.disabled)return!0;break;case "label":case "iframe":case "video":return!0}return/\bneedsclick\b/.test(a.className)};a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case "textarea":return!0;
case "select":return!d;case "input":switch(a.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}};a.prototype.sendClick=function(a,b){var c,e;document.activeElement&&document.activeElement!==a&&document.activeElement.blur();e=b.changedTouches[0];c=document.createEvent("MouseEvents");c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,
!1,!1,!1,!1,0,null);c.forwardedTouchEvent=!0;a.dispatchEvent(c)};a.prototype.determineEventType=function(a){return d&&"select"===a.tagName.toLowerCase()?"mousedown":"click"};a.prototype.focus=function(a){var c;b&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(c=a.value.length,a.setSelectionRange(c,c)):a.focus()};a.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c;a.fastClickScrollParent=
c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)};a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a};a.prototype.onTouchStart=function(a){var c,e,d;if(1<a.targetTouches.length)return!0;c=this.getTargetElementFromEventTarget(a.target);e=a.targetTouches[0];if(b){d=window.getSelection();if(d.rangeCount&&!d.isCollapsed)return!0;if(!g){if(e.identifier&&e.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;
this.lastTouchIdentifier=e.identifier;this.updateScrollParent(c)}}this.trackingClick=!0;this.trackingClickStart=a.timeStamp;this.targetElement=c;this.touchStartX=e.pageX;this.touchStartY=e.pageY;a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault();return!0};a.prototype.touchHasMoved=function(a){a=a.changedTouches[0];var b=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>b||Math.abs(a.pageY-this.touchStartY)>b?!0:!1};a.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;
if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0};a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};a.prototype.onTouchEnd=function(a){var c,h,n=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<
this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1;this.lastClickTime=a.timeStamp;c=this.trackingClickStart;this.trackingClick=!1;this.trackingClickStart=0;e&&(h=a.changedTouches[0],n=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||n,n.fastClickScrollParent=this.targetElement.fastClickScrollParent);h=n.tagName.toLowerCase();if("label"===h){if(c=this.findControl(n)){this.focus(n);if(d)return!1;
n=c}}else if(this.needsFocus(n)){if(100<a.timeStamp-c||b&&window.top!==window&&"input"===h)return this.targetElement=null,!1;this.focus(n);this.sendClick(n,a);b&&"select"===h||(this.targetElement=null,a.preventDefault());return!1}if(b&&!g&&(c=n.fastClickScrollParent)&&c.fastClickLastScrollTop!==c.scrollTop)return!0;this.needsClick(n)||(a.preventDefault(),this.sendClick(n,a));return!1};a.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};a.prototype.onMouse=function(a){return this.targetElement&&
!a.forwardedTouchEvent&&a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0};a.prototype.onClick=function(a){if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===a.target.type&&0===a.detail)return!0;a=this.onMouse(a);a||(this.targetElement=null);return a};a.prototype.destroy=function(){var a=this.layer;d&&(a.removeEventListener("mouseover",
this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0));a.removeEventListener("click",this.onClick,!0);a.removeEventListener("touchstart",this.onTouchStart,!1);a.removeEventListener("touchmove",this.onTouchMove,!1);a.removeEventListener("touchend",this.onTouchEnd,!1);a.removeEventListener("touchcancel",this.onTouchCancel,!1)};a.notNeeded=function(a){var b,c;if("undefined"===typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||
[,0])[1])if(d){if((b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||31<c&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return h&&(b=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),10<=b[1]&&3<=b[2]&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||
27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1};a.attach=function(b,c){return new a(b,c)};"function"===typeof define&&"object"===typeof define.amd&&define.amd?define(function(){return a}):"undefined"!==typeof module&&module.exports?(module.exports=a.attach,
module.exports.FastClick=a):window.FastClick=a})();$(function(){FastClick.attach(document.body)});
(function e$$0(c,d,b){function g(f,h){if(!d[f]){if(!c[f]){var l="function"==typeof require&&require;if(!h&&l)return l(f,!0);if(e)return e(f,!0);l=Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l;}l=d[f]={exports:{}};c[f][0].call(l.exports,function(b){var e=c[f][1][b];return g(e?e:b)},l,l.exports,e$$0,c,d,b)}return d[f].exports}for(var e="function"==typeof require&&require,h=0;h<b.length;h++)g(b[h]);return g})({1:[function(a,c,d){(function(b){var d,e;e=a("./util/merge.coffee");
d=function(){function a(b,c){this._projectId=0;this._projectKey="";this._host="https://api.airbrake.io";this._context={};this._params={};this._env={};this._session={};this._processor=b;this._reporters=[];this._filters=[];c&&this.addReporter(c)}a.prototype.setProject=function(a,b){this._projectId=a;return this._projectKey=b};a.prototype.setHost=function(a){return this._host=a};a.prototype.addContext=function(a){return e(this._context,a)};a.prototype.setEnvironmentName=function(a){return this._context.environment=
a};a.prototype.addParams=function(a){return e(this._params,a)};a.prototype.addEnvironment=function(a){return e(this._env,a)};a.prototype.addSession=function(a){return e(this._session,a)};a.prototype.addReporter=function(a){return this._reporters.push(a)};a.prototype.addFilter=function(a){return this._filters.push(a)};a.prototype.push=function(a){var c,d;c={language:"JavaScript",sourceMapEnabled:!0};null!=(d=b.navigator)&&d.userAgent&&(c.userAgent=b.navigator.userAgent);b.location&&(c.url=String(b.location));
return this._processor(a.error||a,function(b){return function(d,g){var h,l,t,v,w;l={notifier:{name:"airbrake-js-"+d,version:"0.3.10",url:"https://github.com/airbrake/airbrake-js"},errors:[g],context:e(c,b._context,a.context),params:e({},b._params,a.params),environment:e({},b._env,a.environment),session:e({},b._session,a.session)};w=b._filters;t=0;for(v=w.length;t<v;t++)if(h=w[t],!h(l))return;w=b._reporters;t=0;for(v=w.length;t<v;t++)h=w[t],h(l,{projectId:b._projectId,projectKey:b._projectKey,host:b._host})}}(this))};
a.prototype._wrapArguments=function(a){var b,c,e,d;c=e=0;for(d=a.length;e<d;c=++e)b=a[c],"function"===typeof b&&(a[c]=this.wrap(b));return a};a.prototype.wrap=function(a){var b,c,e;if(a.__airbrake__)return a;e=this;b=function(){var b,c;b=e._wrapArguments(arguments);try{return a.apply(this,b)}catch(d){return c=d,b=Array.prototype.slice.call(arguments),e.push({error:c,params:{arguments:b}}),null}};for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.__airbrake__=!0;b.__inner__=a;return b};return a}();c.exports=
d}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./util/merge.coffee":10}],2:[function(a,c,d){c="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};var b,g;a("./util/compat.coffee");d=a("./client.coffee");b=a("./processors/stack.coffee");g=a("./reporters/hybrid.coffee");d=new d(b,g);d.consoleReporter=a("./reporters/console.coffee");b=c.Airbrake;c.Airbrake=d;a("./util/slurp_config_from_dom.coffee")(d);
if(null!=b){null!=b.wrap&&(d.wrap=b.wrap);if(null!=b.onload)b.onload(d);c=0;for(g=b.length;c<g;c++)a=b[c],d.push(a)}},{"./client.coffee":1,"./processors/stack.coffee":3,"./reporters/console.coffee":4,"./reporters/hybrid.coffee":5,"./util/compat.coffee":8,"./util/slurp_config_from_dom.coffee":11}],3:[function(a,c,d){var b,g;b=[{name:"v8",re:/^\s*at\s(.+?)\s\((?:(?:(.+):(\d+):(\d+))|(.+))\)$/,fn:function(a){return{"function":a[1],file:a[2]||a[5],line:a[3]&&parseInt(a[3],10)||0,column:a[4]&&parseInt(a[4],
10)||0}}},{name:"firefox30",re:/^(.*)@(.+):(\d+):(\d+)$/,fn:function(a){var b,c,d;c=a[1];b=a[2];if(d=b.match(/^(\S+)\s(line\s\d+\s>\seval.*)$/))c=0<c.length?c+" "+d[2]:d[2],b=d[1];return{"function":c,file:b,line:parseInt(a[3],10),column:parseInt(a[4],10)}}},{name:"firefox14",re:/^(.*)@(.+):(\d+)$/,fn:function(a,b,c){b=0===b?c.columnNumber||0:0;return{"function":a[1],file:a[2],line:parseInt(a[3],10),column:b}}},{name:"v8-short",re:/^\s*at\s(.+):(\d+):(\d+)$/,fn:function(a){return{"function":"",file:a[1],
line:parseInt(a[2],10),column:parseInt(a[3],10)}}},{name:"default",re:/.+/,fn:function(a){return{"function":a[0],file:"",line:0,column:0}}}];g=/^\S+:\s.+$/;c.exports=function(a,c){var d,k,l,n,m,q,r,u,t,v,w;q="nostack";n=(a.stack||"").split("\n");d=[];k=u=0;for(v=n.length;u<v;k=++u)if(l=n[k],""!==l)for(t=0,w=b.length;t<w;t++)if(r=b[t],m=l.match(r.re)){q=r.name;d.push(r.fn(m,k,a));break}("v8"===q||"v8-short"===q)&&0<d.length&&d[0]["function"].match(g)&&(d=d.slice(1));0!==d.length||null==a.fileName&&
null==a.lineNumber&&null==a.columnNumber||d.push({"function":"",file:a.fileName||"",line:parseInt(a.lineNumber,10)||0,column:parseInt(a.columnNumber,10)||0});0!==d.length||null==a.filename&&null==a.lineno&&null==a.column&&null==a.colno||d.push({"function":"",file:a.filename||"",line:parseInt(a.lineno,10)||0,column:parseInt(a.column||a.colno,10)||0});k=null!=a.message?a.message:String(a);null!=a.name?(m=a.name,k=m+": "+k):(m=/^Uncaught\s(.+?):\s.+$/,m=(m=k.match(m))?m[1]:"");return c(q,{type:m,message:k,
backtrace:d})}},{}],4:[function(a,c,d){var b;b=function(a){var b,c,d,k;b=""+(a.message+"\n");k=a.backtrace;c=0;for(d=k.length;c<d;c++)a=k[c],""!==a["function"]&&(b+=" at "+a["function"]),""!==a.file&&(b+=" in "+a.file+":"+a.line,0!==a.column&&(b+=":"+a.column)),b+="\n";return b};c.exports=function(a){var c,d,f,k;f=a.errors;k=[];c=0;for(d=f.length;c<d;c++)a=f[c],k.push("undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log(b(a)):void 0:void 0);return k}},{}],5:[function(a,
c,d){c.exports="withCredentials"in new XMLHttpRequest?a("./xhr.coffee"):a("./jsonp.coffee")},{"./jsonp.coffee":6,"./xhr.coffee":7}],6:[function(a,c,d){(function(b){var d,e;e=a("../util/jsonify_notice.coffee");d=0;c.exports=function(a,c){var k,l,n,m,q;d++;k="airbrakeCb"+String(d);b[k]=function(a){"undefined"!==typeof console&&null!==console&&"function"===typeof console.debug&&console.debug("airbrake: error #%s was reported: %s",a.id,a.url);try{return delete b[k]}catch(c){return b[k]=void 0}};l=encodeURIComponent(e(a));
q=c.host+"/api/v3/projects/"+c.projectId+"/create-notice?key="+c.projectKey+"&callback="+k+"&body="+l;l=b.document;n=l.getElementsByTagName("head")[0];m=l.createElement("script");m.src=q;l=function(){return n.removeChild(m)};m.onload=l;m.onerror=l;return n.appendChild(m)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/jsonify_notice.coffee":9}],7:[function(a,c,d){(function(b){var d;d=a("../util/jsonify_notice.coffee");
c.exports=function(a,c){var f,k,l;l=c.host+"/api/v3/projects/"+c.projectId+"/notices?key="+c.projectKey;f=d(a);k=new b.XMLHttpRequest;k.open("POST",l,!0);k.setRequestHeader("Content-Type","application/json");k.send(f);return k.onreadystatechange=function(){var a;if(4===k.readyState&&201===k.status&&null!=("undefined"!==typeof console&&null!==console?console.debug:void 0))return a=JSON.parse(k.responseText),console.debug("airbrake: error #%s was reported: %s",a.id,a.url)}}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/jsonify_notice.coffee":9}],8:[function(a,c,d){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){var e,d,f;e=d=c=c||0;for(f=this.length;c<=f?d<f:d>f;e=c<=f?++d:--d)if(this[e]===a)return e;return-1})},{}],9:[function(a,c,d){var b,g;b=a("./truncate.coffee");g=function(a,c){var d,g;null==c&&(c=1E3);d={};for(g in a)d[g]=b(a[g],c);return d};c.exports=function(a,b,c){var d;null==b&&(b=1E3);
for(null==c&&(c=64E3);;){a.params=g(a.params,b);a.environment=g(a.environment,b);a.session=g(a.session,b);d=JSON.stringify(a);if(d.length<c)return d;if(0===b)break;b=Math.floor(b/2)}throw Error("cannot jsonify notice (length="+d.length+" maxLength="+c+")");}},{"./truncate.coffee":12}],10:[function(a,c,d){c.exports=function(){var a,c,e,d,f,k;d=Array.prototype.slice.call(arguments);a=d.shift()||{};f=0;for(k=d.length;f<k;f++)for(c in e=d[f],e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c]);return a}},
{}],11:[function(a,c,d){(function(a){var d;d=function(a,b){return a.getAttribute("data-airbrake-"+b)};c.exports=function(c){var h,f,k,l,n,m,q;l=a.document.getElementsByTagName("script");q=[];n=0;for(m=l.length;n<m;n++)f=l[n],h=d(f,"project-id"),k=d(f,"project-key"),h&&k&&c.setProject(h,k),(h=d(f,"environment-name"))&&c.setEnvironmentName(h),(h=d(f,"host"))&&c.setHost(h),(f=d(f,"onload"))?q.push(a[f](c)):q.push(void 0);return q}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{}],12:[function(a,c,d){var b;b=function(a,b){try{return a[b]}catch(c){}};c.exports=function(a,c,d){var f,k,l,n,m;null==c&&(c=1E3);null==d&&(d=5);n=0;l=[];m=[];k=function(a){var c,e,d,f;e=m.indexOf(a);d=[l[e]];for(c=f=e;0>=e?0>=f:0<=f;c=0>=e?++f:--f)m[c]&&b(m[c],d[0])===a&&(a=m[c],d.unshift(l[c]));return"~"+d.join(".")};f=function(a,g,u){var t,v,w,x;null==g&&(g="");null==u&&(u=0);n++;if(n>c)return"[Truncated]";if(null===a||void 0===a)return a;switch(typeof a){case "boolean":case "number":case "string":case "function":return a;
case "object":break;default:return String(a)}if(a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(0<=m.indexOf(a))return"[Circular "+k(a)+"]";u++;if(u>d)return"[Truncated]";l.push(g);m.push(a);n--;if("[object Array]"===Object.prototype.toString.apply(a)){t=[];v=w=0;for(x=a.length;w<x;v=++w){g=a[v];n++;if(n>=c)break;t.push(f(g,v,u))}return t}t={};for(g in a)if(Object.prototype.hasOwnProperty.call(a,g)){n++;if(n>=c)break;v=b(a,g);void 0!==
v&&(t[g]=f(v,g,u))}return t};return f(a)}},{}]},{},[2]);
!function(a,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):this[a]=c()}("bowser",function(){function a(a){function b(b){return(b=a.match(b))&&1<b.length&&b[1]||""}function c(b){return(b=a.match(b))&&1<b.length&&b[2]||""}var e=b(/(ipod|iphone|ipad)/i).toLowerCase(),h=!/like android/i.test(a)&&/android/i.test(a),f=/CrOS/.test(a),k=/silk/i.test(a),l=/sailfish/i.test(a),n=/tizen/i.test(a),m=/(web|hpw)os/i.test(a),q=/windows phone/i.test(a),
r=!q&&/windows/i.test(a),u=!e&&!k&&/macintosh/i.test(a),t=!h&&!l&&!n&&!m&&/linux/i.test(a),v=b(/edge\/(\d+(\.\d+)?)/i),w=b(/version\/(\d+(\.\d+)?)/i),x=/tablet/i.test(a),J=!x&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?f={name:"Opera",opera:!0,version:w||b(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?f={name:"Yandex Browser",yandexbrowser:!0,version:w||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:q?(f={name:"Windows Phone",windowsphone:!0},v?(f.msedge=!0,f.version=v):(f.msie=!0,f.version=b(/iemobile\/(\d+(\.\d+)?)/i))):
/msie|trident/i.test(a)?f={name:"Internet Explorer",msie:!0,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:f?f={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?f={name:"Microsoft Edge",msedge:!0,version:v}:/chrome|crios|crmo/i.test(a)?f={name:"Chrome",chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:e?(f={name:"iphone"==e?"iPhone":"ipad"==e?"iPad":"iPod"},w&&(f.version=w)):l?f={name:"Sailfish",sailfish:!0,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:
/seamonkey\//i.test(a)?f={name:"SeaMonkey",seamonkey:!0,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(f={name:"Firefox",firefox:!0,version:b(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(f.firefoxos=!0)):k?f={name:"Amazon Silk",silk:!0,version:b(/silk\/(\d+(\.\d+)?)/i)}:h?f={name:"Android",version:w}:/phantom/i.test(a)?f={name:"PhantomJS",phantom:!0,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?
f={name:"BlackBerry",blackberry:!0,version:w||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:m?(f={name:"WebOS",webos:!0,version:w||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(f.touchpad=!0)):f=/bada/i.test(a)?{name:"Bada",bada:!0,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:n?{name:"Tizen",tizen:!0,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/safari/i.test(a)?{name:"Safari",safari:!0,version:w}:{name:b(/^(.*)\/(.*) /),version:c(/^(.*)\/(.*) /)};!f.msedge&&/(apple)?webkit/i.test(a)?(f.name=
f.name||"Webkit",f.webkit=!0,!f.version&&w&&(f.version=w)):!f.opera&&/gecko\//i.test(a)&&(f.name=f.name||"Gecko",f.gecko=!0,f.version=f.version||b(/gecko\/(\d+(\.\d+)?)/i));f.msedge||!h&&!f.silk?e?(f[e]=!0,f.ios=!0):r?f.windows=!0:u?f.mac=!0:t&&(f.linux=!0):f.android=!0;r="";f.windowsphone?r=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):e?(r=b(/os (\d+([_\s]\d+)*) like mac os x/i),r=r.replace(/[_\s]/g,".")):h?r=b(/android[ \/-](\d+(\.\d+)*)/i):f.webos?r=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):f.blackberry?
r=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):f.bada?r=b(/bada\/(\d+(\.\d+)*)/i):f.tizen&&(r=b(/tizen[\/\s](\d+(\.\d+)*)/i));r&&(f.osversion=r);r=r.split(".")[0];if(x||"ipad"==e||h&&(3==r||4==r&&!J)||f.silk)f.tablet=!0;else if(J||"iphone"==e||"ipod"==e||h||f.blackberry||f.webos||f.bada)f.mobile=!0;f.msedge||f.msie&&10<=f.version||f.yandexbrowser&&15<=f.version||f.chrome&&20<=f.version||f.firefox&&20<=f.version||f.safari&&6<=f.version||f.opera&&10<=f.version||f.ios&&f.osversion&&6<=f.osversion.split(".")[0]||
f.blackberry&&10.1<=f.version?f.a=!0:f.msie&&10>f.version||f.chrome&&20>f.version||f.firefox&&20>f.version||f.safari&&6>f.version||f.opera&&10>f.version||f.ios&&f.osversion&&6>f.osversion.split(".")[0]?f.c=!0:f.x=!0;return f}var c=a("undefined"!==typeof navigator?navigator.userAgent:"");c.test=function(a){for(var b=0;b<a.length;++b){var g=a[b];if("string"===typeof g&&g in c)return!0}return!1};c._detect=a;return c});
(function(a){a.fn.extend({autocomplete:function(c,d){var b="string"==typeof c;d=a.extend({},a.Autocompleter.defaults,{url:b?c:null,data:b?null:c,delay:b?a.Autocompleter.defaults.delay:10,max:d&&!d.scroll?10:150},d);d.highlight=d.highlight||function(a){return a};d.formatMatch=d.formatMatch||d.formatItem;return this.each(function(){new a.Autocompleter(this,d)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(c,d){function b(){var b=x.selected();if(!b)return!1;var g=b.result;r=g;if(d.multiple){var h=e(m.val());if(1<h.length){var k=d.multipleSeparator.length,l=a(c).selection().start,n,t=0;a.each(h,function(a,b){t+=b.length;if(l<=t)return n=a,!1;t+=k});h[n]=g;g=h.join(d.multipleSeparator)}g+=d.multipleSeparator}m.val(g);f();m.trigger("result",[b.data,b.value]);
return!0}function g(a,b){if(v==n.DEL)x.hide();else{var c=m.val();if(b||c!=r)r=c,c=h(c),c.length>=d.minChars?(m.addClass(d.loadingClass),d.matchCase||(c=c.toLowerCase()),l(c,k,f)):(m.removeClass(d.loadingClass),x.hide())}}function e(b){return b?d.multiple?a.map(b.split(d.multipleSeparator),function(c){return a.trim(b).length?a.trim(c):null}):[a.trim(b)]:[""]}function h(b){if(!d.multiple)return b;var f=e(b);if(1==f.length)return f[0];f=a(c).selection().start;f=f==b.length?e(b):e(b.replace(b.substring(f),
""));return f[f.length-1]}function f(){x.visible();x.hide();clearTimeout(q);m.removeClass(d.loadingClass);d.mustMatch&&m.search(function(a){a||(d.multiple?(a=e(m.val()).slice(0,-1),m.val(a.join(d.multipleSeparator)+(a.length?d.multipleSeparator:""))):(m.val(""),m.trigger("result",null)))})}function k(b,e){if(e&&e.length&&t){m.removeClass(d.loadingClass);x.display(e,b);var g=e[0].value;d.autoFill&&h(m.val()).toLowerCase()==b.toLowerCase()&&v!=n.BACKSPACE&&(m.val(m.val()+g.substring(h(r).length)),a(c).selection(r.length,
r.length+g.length));x.show()}else f()}function l(b,e,f){d.matchCase||(b=b.toLowerCase());var g=u.load(b);if(g&&g.length)e(b,g);else if("string"==typeof d.url&&0<d.url.length){var k={timestamp:+new Date};a.each(d.extraParams,function(a,b){k[a]="function"==typeof b?b():b});a.ajax({mode:"abort",port:"autocomplete"+c.name,dataType:d.dataType,url:d.url,data:a.extend({q:h(b),limit:d.max},k),success:function(c){var f;if(!(f=d.parse&&d.parse(c))){f=[];c=c.split("\n");for(var g=0;g<c.length;g++){var h=a.trim(c[g]);
h&&(h=h.split("|"),f[f.length]={data:h,value:h[0],result:d.formatResult&&d.formatResult(h,h[0])||h[0]})}}u.add(b,f);e(b,f)}})}else x.emptyList(),f(b)}var n={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},m=a(c).attr("autocomplete","off").addClass(d.inputClass),q,r="",u=a.Autocompleter.Cache(d),t=0,v,w={mouseDownOnSelect:!1},x=a.Autocompleter.Select(d,c,b,w),J;a.browser.opera&&a(c.form).bind("submit.autocomplete",function(){if(J)return J=!1});m.bind((a.browser.opera?
"keypress":"keydown")+".autocomplete",function(c){t=1;v=c.keyCode;switch(c.keyCode){case n.UP:c.preventDefault();x.visible()?x.prev():g(0,!0);break;case n.DOWN:c.preventDefault();x.visible()?x.next():g(0,!0);break;case n.PAGEUP:c.preventDefault();x.visible()?x.pageUp():g(0,!0);break;case n.PAGEDOWN:c.preventDefault();x.visible()?x.pageDown():g(0,!0);break;case d.multiple&&","==a.trim(d.multipleSeparator)&&n.COMMA:case n.TAB:case n.RETURN:if(b())return c.preventDefault(),J=!0,!1;break;case n.ESC:x.hide();
break;default:clearTimeout(q),q=setTimeout(g,d.delay)}}).focus(function(){t++}).blur(function(){t=0;w.mouseDownOnSelect||(clearTimeout(q),q=setTimeout(f,200))}).click(function(){1<t++&&!x.visible()&&g(0,!0)}).bind("search",function(){function b(a,e){var d;if(e&&e.length)for(var f=0;f<e.length;f++)if(e[f].result.toLowerCase()==a.toLowerCase()){d=e[f];break}"function"==typeof c?c(d):m.trigger("result",d&&[d.data,d.value])}var c=1<arguments.length?arguments[1]:null;a.each(e(m.val()),function(a,c){l(c,
b,b)})}).bind("flushCache",function(){u.flush()}).bind("setOptions",function(b,c){a.extend(d,c);"data"in c&&u.populate()}).bind("unautocomplete",function(){x.unbind();m.unbind();a(c.form).unbind(".autocomplete")})};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,
width:0,multiple:!1,multipleSeparator:", ",highlight:function(a,d){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};a.Autocompleter.Cache=function(c){function d(a,b){c.matchCase||(a=a.toLowerCase());var e=a.indexOf(b);"word"==c.matchContains&&(e=a.toLowerCase().search("\\b"+b.toLowerCase()));return-1==e?!1:0==e||c.matchContains}function b(a,b){f>c.cacheLength&&
e();h[a]||f++;h[a]=b}function g(){if(!c.data)return!1;var e={},d=0;c.url||(c.cacheLength=1);e[""]=[];for(var f=0,g=c.data.length;f<g;f++){var h=c.data[f],h="string"==typeof h?[h]:h,r=c.formatMatch(h,f+1,c.data.length);if(!1!==r){var u=r.charAt(0).toLowerCase();e[u]||(e[u]=[]);h={value:r,data:h,result:c.formatResult&&c.formatResult(h)||r};e[u].push(h);d++<c.max&&e[""].push(h)}}a.each(e,function(a,e){c.cacheLength++;b(a,e)})}function e(){h={};f=0}var h={},f=0;setTimeout(g,25);return{flush:e,add:b,populate:g,
load:function(b){if(!c.cacheLength||!f)return null;if(!c.url&&c.matchContains){var e=[],g;for(g in h)if(0<g.length){var m=h[g];a.each(m,function(a,c){d(c.value,b)&&e.push(c)})}return e}if(h[b])return h[b];if(c.matchSubset)for(g=b.length-1;g>=c.minChars;g--)if(m=h[b.substr(0,g)])return e=[],a.each(m,function(a,c){d(c.value,b)&&(e[e.length]=c)}),e;return null}}};a.Autocompleter.Select=function(c,d,b,g){function e(){r&&(u=a("<div/>").hide().addClass(c.resultsClass).css("position","absolute").appendTo(document.body),
t=a("<ul/>").appendTo(u).mouseover(function(b){h(b).nodeName&&"LI"==h(b).nodeName.toUpperCase()&&(n=a("li",t).removeClass(k.ACTIVE).index(h(b)),a(h(b)).addClass(k.ACTIVE))}).click(function(c){a(h(c)).addClass(k.ACTIVE);b();d.focus();return!1}).mousedown(function(){g.mouseDownOnSelect=!0}).mouseup(function(){g.mouseDownOnSelect=!1}),0<c.width&&u.css("width",c.width),r=!1)}function h(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return a?a:[]}function f(a){l.slice(n,n+1).removeClass(k.ACTIVE);
n+=a;0>n?n=l.size()-1:n>=l.size()&&(n=0);a=l.slice(n,n+1).addClass(k.ACTIVE);if(c.scroll){var b=0;l.slice(0,n).each(function(){b+=this.offsetHeight});b+a[0].offsetHeight-t.scrollTop()>t[0].clientHeight?t.scrollTop(b+a[0].offsetHeight-t.innerHeight()):b<t.scrollTop()&&t.scrollTop(b)}}var k={ACTIVE:"ac_over"},l,n=-1,m,q="",r=!0,u,t;return{display:function(b,d){e();m=b;q=d;t.empty();var f;f=m.length;f=c.max&&c.max<f?c.max:f;for(var g=0;g<f;g++)if(m[g]){var h=c.formatItem(m[g].data,g+1,f,m[g].value,q);
!1!==h&&(h=a("<li/>").html(c.highlight(h,q)).addClass(0==g%2?"ac_even":"ac_odd").appendTo(t)[0],a.data(h,"ac_data",m[g]))}l=t.find("li");c.selectFirst&&(l.slice(0,1).addClass(k.ACTIVE),n=0);a.fn.bgiframe&&t.bgiframe()},next:function(){f(1)},prev:function(){f(-1)},pageUp:function(){0!=n&&0>n-8?f(-n):f(-8)},pageDown:function(){n!=l.size()-1&&n+8>l.size()?f(l.size()-1-n):f(8)},hide:function(){u&&u.hide();l&&l.removeClass(k.ACTIVE);n=-1},visible:function(){return u&&u.is(":visible")},current:function(){return this.visible()&&
(l.filter("."+k.ACTIVE)[0]||c.selectFirst&&l[0])},show:function(){var b=a(d).offset();u.css({width:"string"==typeof c.width||0<c.width?c.width:a(d).width(),top:b.top+d.offsetHeight,left:b.left}).show();if(c.scroll&&(t.scrollTop(0),t.css({maxHeight:c.scrollHeight,overflow:"auto"}),a.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var e=0;l.each(function(){e+=this.offsetHeight});b=e>c.scrollHeight;t.css("height",b?c.scrollHeight:e);b||l.width(t.width()-parseInt(l.css("padding-left"))-
parseInt(l.css("padding-right")))}},selected:function(){var b=l&&l.filter("."+k.ACTIVE).removeClass(k.ACTIVE);return b&&b.length&&a.data(b[0],"ac_data")},emptyList:function(){t&&t.empty()},unbind:function(){u&&u.remove()}}};a.fn.selection=function(a,d){if(void 0!==a)return this.each(function(){if(this.createTextRange){var b=this.createTextRange();void 0===d||a==d?b.move("character",a):(b.collapse(!0),b.moveStart("character",a),b.moveEnd("character",d));b.select()}else this.setSelectionRange?this.setSelectionRange(a,
d):this.selectionStart&&(this.selectionStart=a,this.selectionEnd=d)});var b=this[0];if(b.createTextRange){var g=document.selection.createRange(),e=b.value,h=g.text.length;g.text="<->";g=b.value.indexOf("<->");b.value=e;this.selection(g,g+h);return{start:g,end:g+h}}if(void 0!==b.selectionStart)return{start:b.selectionStart,end:b.selectionEnd}}})(jQuery);
(function(a,c){"object"===typeof exports&&"object"===typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):"object"===typeof exports?exports.Pusher=c():a.Pusher=c()})(this,function(){return function(a){function c(b){if(d[b])return d[b].exports;var g=d[b]={exports:{},id:b,loaded:!1};a[b].call(g.exports,g,g.exports,c);g.loaded=!0;return g.exports}var d={};c.m=a;c.c=d;c.p="";return c(0)}([function(a,c,d){c=d(1);a.exports=c["default"]},function(a,c,d){var b=d(2),g=d(9),
e=d(23),h=d(38),f=d(39),k=d(40),l=d(12),n=d(5),m=d(62),q=d(8),r=d(42);a=function(){function a(c,d){var l=this;if(null===c||void 0===c)throw"You must pass your app key when you instantiate Pusher.";d=d||{};this.key=c;this.config=g.extend(m.getGlobalConfig(),d.cluster?m.getClusterConfig(d.cluster):{},d);this.channels=r["default"].createChannels();this.global_emitter=new e["default"];this.sessionID=Math.floor(1E9*Math.random());this.timeline=new h["default"](this.key,this.sessionID,{cluster:this.config.cluster,
features:a.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:f["default"].INFO,version:n["default"].VERSION});this.config.disableStats||(this.timelineSender=r["default"].createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+b["default"].TimelineTransport.name}));this.connection=r["default"].createConnectionManager(this.key,g.extend({getStrategy:function(a){a=g.extend({},l.config,a);return k.build(b["default"].getDefaultStrategy(a),a)},timeline:this.timeline,
activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()}));this.connection.bind("connected",function(){l.subscribeAll();l.timelineSender&&l.timelineSender.send(l.connection.isEncrypted())});this.connection.bind("message",function(a){var b=0===a.event.indexOf("pusher_internal:");if(a.channel){var c=l.channel(a.channel);c&&c.handleEvent(a.event,a.data)}b||l.global_emitter.emit(a.event,
a.data)});this.connection.bind("disconnected",function(){l.channels.disconnect()});this.connection.bind("error",function(a){q["default"].warn("Error",a)});a.instances.push(this);this.timeline.info({instances:a.instances.length});a.isReady&&this.connect()}a.ready=function(){a.isReady=!0;for(var b=0,c=a.instances.length;b<c;b++)a.instances[b].connect()};a.log=function(b){var c=Function("return this")();a.logToConsole&&c.console&&c.console.log&&c.console.log(b)};a.getClientFeatures=function(){return g.keys(g.filterObject({ws:b["default"].Transports.ws},
function(a){return a.isSupported({})}))};a.prototype.channel=function(a){return this.channels.find(a)};a.prototype.allChannels=function(){return this.channels.all()};a.prototype.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var a=this.connection.isEncrypted(),b=this.timelineSender;this.timelineSenderTimer=new l.PeriodicTimer(6E4,function(){b.send(a)})}};a.prototype.disconnect=function(){this.connection.disconnect();this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),
this.timelineSenderTimer=null)};a.prototype.bind=function(a,b){this.global_emitter.bind(a,b);return this};a.prototype.bind_all=function(a){this.global_emitter.bind_all(a);return this};a.prototype.subscribeAll=function(){for(var a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)};a.prototype.subscribe=function(a){a=this.channels.add(a,this);"connected"===this.connection.state&&a.subscribe();return a};a.prototype.unsubscribe=function(a){(a=this.channels.remove(a))&&
"connected"===this.connection.state&&a.unsubscribe()};a.prototype.send_event=function(a,b,c){return this.connection.send_event(a,b,c)};a.prototype.isEncrypted=function(){return"https:"===b["default"].getProtocol()?!0:Boolean(this.config.encrypted)};a.instances=[];a.isReady=!1;a.logToConsole=!1;a.Runtime=b["default"];a.ScriptReceivers=b["default"].ScriptReceivers;a.DependenciesReceivers=b["default"].DependenciesReceivers;a.auth_callbacks=b["default"].auth_callbacks;return a}();c.__esModule=!0;c["default"]=
a;b["default"].setup(a)},function(a,c,d){var b=d(3),g=d(7),e=d(14),h=d(15),f=d(16);a=d(4);var k=d(17),l=d(18),n=d(25),m=d(26),q=d(27);d=d(28);d={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a.ScriptReceivers,DependenciesReceivers:b.DependenciesReceivers,getDefaultStrategy:m["default"],Transports:l["default"],transportConnectionInitializer:q["default"],HTTPFactory:d["default"],TimelineTransport:k["default"],getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||
window.MozWebSocket},setup:function(a){var c=this;window.Pusher=a;var e=function(){c.onDocumentBody(a.ready)};window.JSON?e():b.Dependencies.load("json2",{},e)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getGlobal:function(){return window},getAuthorizers:function(){return{ajax:g["default"],jsonp:e["default"]}},onDocumentBody:function(a){var b=this;document.body?a():setTimeout(function(){b.onDocumentBody(a)},0)},createJSONPRequest:function(a,
b){return new f["default"](a,b)},createScriptRequest:function(a){return new h["default"](a)},getLocalStorage:function(){try{return window.localStorage}catch(a){}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new (this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return n.Network},createWebSocket:function(a){return new (this.getWebSocketAPI())(a)},
createSocketRequest:function(a,b){if(this.isXHRSupported())return this.HTTPFactory.createXHR(a,b);if(this.isXDRSupported(0===b.indexOf("https:")))return this.HTTPFactory.createXDR(a,b);throw"Cross-origin HTTP requests are not supported";},isXHRSupported:function(){var a=this.getXHRAPI();return Boolean(a)&&void 0!==(new a).withCredentials},isXDRSupported:function(a){a=a?"https:":"http:";var b=this.getProtocol();return Boolean(window.XDomainRequest)&&b===a},addUnloadListener:function(a){void 0!==window.addEventListener?
window.addEventListener("unload",a,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",a)},removeUnloadListener:function(a){void 0!==window.addEventListener?window.removeEventListener("unload",a,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",a)}};c.__esModule=!0;c["default"]=d},function(a,c,d){a=d(4);var b=d(5);d=d(6);c.DependenciesReceivers=new a.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers");c.Dependencies=new d["default"]({cdn_http:b["default"].cdn_http,
cdn_https:b["default"].cdn_https,version:b["default"].VERSION,suffix:b["default"].dependency_suffix,receivers:c.DependenciesReceivers})},function(a,c){var d=function(){function a(b,c){this.lastId=0;this.prefix=b;this.name=c}a.prototype.create=function(a){this.lastId++;var b=this.lastId,c=this.prefix+b,d=this.name+"["+b+"]",k=!1,l=function(){k||(a.apply(null,arguments),k=!0)};this[b]=l;return{number:b,id:c,name:d,callback:l}};a.prototype.remove=function(a){delete this[a.number]};return a}();c.ScriptReceiverFactory=
d;c.ScriptReceivers=new d("_pusher_script_","Pusher.ScriptReceivers")},function(a,c){c.__esModule=!0;c["default"]={VERSION:"3.1.0-pre11",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12E4,pong_timeout:3E4,unavailable_timeout:1E4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",
dependency_suffix:""}},function(a,c,d){var b=d(4),g=d(2);a=function(){function a(c){this.options=c;this.receivers=c.receivers||b.ScriptReceivers;this.loading={}}a.prototype.load=function(a,b,c){var e=this;if(e.loading[a]&&0<e.loading[a].length)e.loading[a].push(c);else{e.loading[a]=[c];var d=g["default"].createScriptRequest(e.getPath(a,b)),m=e.receivers.create(function(b){e.receivers.remove(m);if(e.loading[a]){var c=e.loading[a];delete e.loading[a];for(var f=function(a){a||d.cleanup()},g=0;g<c.length;g++)c[g](b,
f)}});d.send(m)}};a.prototype.getRoot=function(a){var b=g["default"].getDocument().location.protocol;return(a&&a.encrypted||"https:"===b?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version};a.prototype.getPath=function(a,b){return this.getRoot(b)+"/"+a+this.options.suffix+".js"};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(8),g=d(2);c.__esModule=!0;c["default"]=function(a,c,d){var k;k=g["default"].createXHR();k.open("POST",this.options.authEndpoint,
!0);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var l in this.authOptions.headers)k.setRequestHeader(l,this.authOptions.headers[l]);k.onreadystatechange=function(){if(4===k.readyState)if(200===k.status){var a,c=!1;try{a=JSON.parse(k.responseText),c=!0}catch(e){d(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+k.responseText)}c&&d(!1,a)}else b["default"].warn("Couldn't get auth info from your webapp",k.status),d(!0,k.status)};k.send(this.composeQuery(c));
return k}},function(a,c,d){var b=d(9),g=d(1);c.__esModule=!0;c["default"]={debug:function(){for(var a=0;a<arguments.length;a++);g["default"].log&&g["default"].log(b.stringify.apply(this,arguments))},warn:function(){for(var a=0;a<arguments.length;a++);var a=b.stringify.apply(this,arguments),c=Function("return this")();c.console&&(c.console.warn?c.console.warn(a):c.console.log&&c.console.log(a));g["default"].log&&g["default"].log(a)}}},function(a,c,d){function b(a){for(var c=[],e=1;e<arguments.length;e++)c[e-
1]=arguments[e];for(e=0;e<c.length;e++){var d=c[e],f;for(f in d)a[f]=d[f]&&d[f].constructor&&d[f].constructor===Object?b(a[f]||{},d[f]):d[f]}return a}function g(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)}function e(a,b){for(var c=[],e=0;e<a.length;e++)c.push(b(a[e],e,a,c));return c}function h(a,b){var c={};g(a,function(a,e){c[e]=b(a)});return c}function f(a,b){var c={};g(a,function(e,d){if(b&&b(e,d,a,c)||Boolean(e))c[d]=e});return c}function k(a){var b=[];g(a,function(a,
c){b.push([c,a])});return b}function l(a){return h(a,function(a){"object"===typeof a&&(a=JSON.stringify(a));return encodeURIComponent(n["default"](a.toString()))})}var n=d(10),m=d(11),q=Function("return this")();c.extend=b;c.stringify=function(){for(var a=["Pusher"],b=0;b<arguments.length;b++)"string"===typeof arguments[b]?a.push(arguments[b]):a.push(JSON.stringify(arguments[b]));return a.join(" : ")};c.arrayIndexOf=function(a,b){var c=Array.prototype.indexOf;if(null===a)return-1;if(c&&a.indexOf===
c)return a.indexOf(b);for(var c=0,e=a.length;c<e;c++)if(a[c]===b)return c;return-1};c.objectApply=g;c.keys=function(a){var b=[];g(a,function(a,c){b.push(c)});return b};c.values=function(a){var b=[];g(a,function(a){b.push(a)});return b};c.apply=function(a,b,c){for(var e=0;e<a.length;e++)b.call(c||q,a[e],e,a)};c.map=e;c.mapObject=h;c.filter=function(a,b){b=b||function(a){return!!a};for(var c=[],e=0;e<a.length;e++)b(a[e],e,a,c)&&c.push(a[e]);return c};c.filterObject=f;c.flatten=k;c.any=function(a,b){for(var c=
0;c<a.length;c++)if(b(a[c],c,a))return!0;return!1};c.all=function(a,b){for(var c=0;c<a.length;c++)if(!b(a[c],c,a))return!1;return!0};c.encodeParamsObject=l;c.buildQueryString=function(a){a=f(a,function(a){return void 0!==a});return e(k(l(a)),m["default"].method("join","=")).join("&")};c.safeJSONStringify=function(a){var b=[];a=JSON.stringify(a,function(a,c){if("object"===typeof c&&null!==c){if(-1!==b.indexOf(c))return;b.push(c)}return c});b=null;return a}},function(a,c){var d=Function("return this")();
c.__esModule=!0;c["default"]=function(a){return f(a.replace(/[^\x00-\x7F]/g,e))};for(var b=String.fromCharCode,g=0;64>g;g++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g);var e=function(a){var c=a.charCodeAt(0);return 128>c?a:2048>c?b(192|c>>>6)+b(128|c&63):b(224|c>>>12&15)+b(128|c>>>6&63)+b(128|c&63)},h=function(a){var b=[0,2,1][a.length%3];a=a.charCodeAt(0)<<16|(1<a.length?a.charCodeAt(1):0)<<8|(2<a.length?a.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>
18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>12&63),2<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6&63),1<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a&63)].join("")},f=d.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,h)}},function(a,c,d){var b=d(12);c.__esModule=!0;c["default"]={getGlobal:function(){return Function("return this")()},now:function(){return Date.now?Date.now():(new Date).valueOf()},
defer:function(a){return new b.OneOffTimer(0,a)},method:function(a){for(var b=1;b<arguments.length;b++);var c=Array.prototype.slice.call(arguments,1);return function(b){return b[a].apply(b,c.concat(arguments))}}}},function(a,c,d){function b(a){h.clearTimeout(a)}function g(a){h.clearInterval(a)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=d(13);var h=
Function("return this")();d=function(a){function c(e,d){a.call(this,setTimeout,b,e,function(a){d();return null})}e(c,a);return c}(a["default"]);c.OneOffTimer=d;a=function(a){function b(c,e){a.call(this,setInterval,g,c,function(a){e();return a})}e(b,a);return b}(a["default"]);c.PeriodicTimer=a},function(a,c){var d=function(){function a(b,c,d,f){var k=this;this.clear=c;this.timer=b(function(){k.timer&&(k.timer=f(k.timer))},d)}a.prototype.isRunning=function(){return null!==this.timer};a.prototype.ensureAborted=
function(){this.timer&&(this.clear(this.timer),this.timer=null)};return a}();c.__esModule=!0;c["default"]=d},function(a,c,d){var b=d(8);c.__esModule=!0;c["default"]=function(a,c,d){void 0!==this.authOptions.headers&&b["default"].warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var f=a.nextAuthCallbackID.toString();a.nextAuthCallbackID++;var k=a.getDocument(),l=k.createElement("script");a.auth_callbacks[f]=function(a){d(!1,a)};l.src=this.options.authEndpoint+
"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+f+"']")+"&"+this.composeQuery(c);a=k.getElementsByTagName("head")[0]||k.documentElement;a.insertBefore(l,a.firstChild)}},function(a,c){var d=function(){function a(b){this.src=b}a.prototype.send=function(a){var b=this,c="Error loading "+b.src;b.script=document.createElement("script");b.script.id=a.id;b.script.src=b.src;b.script.type="text/javascript";b.script.charset="UTF-8";b.script.addEventListener?(b.script.onerror=function(){a.callback(c)},
b.script.onload=function(){a.callback(null)}):b.script.onreadystatechange=function(){"loaded"!==b.script.readyState&&"complete"!==b.script.readyState||a.callback(null)};void 0===b.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(b.errorScript=document.createElement("script"),b.errorScript.id=a.id+"_error",b.errorScript.text=a.name+"('"+c+"');",b.script.async=b.errorScript.async=!1):b.script.async=!0;var d=document.getElementsByTagName("head")[0];d.insertBefore(b.script,d.firstChild);
b.errorScript&&d.insertBefore(b.errorScript,b.script.nextSibling)};a.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null);this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript);this.errorScript=this.script=null};return a}();c.__esModule=!0;c["default"]=d},function(a,c,d){var b=d(9),g=d(2);a=function(){function a(b,
c){this.url=b;this.data=c}a.prototype.send=function(a){if(!this.request){var c=b.buildQueryString(this.data);this.request=g["default"].createScriptRequest(this.url+"/"+a.number+"?"+c);this.request.send(a)}};a.prototype.cleanup=function(){this.request&&this.request.cleanup()};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(2),g=d(4);c.__esModule=!0;c["default"]={name:"jsonp",getAgent:function(a,c){return function(d,k){var l=b["default"].createJSONPRequest("http"+(c?"s":"")+"://"+
(a.host||a.options.host)+a.options.path,d),n=b["default"].ScriptReceivers.create(function(b,c){g.ScriptReceivers.remove(n);l.cleanup();c&&c.host&&(a.host=c.host);k&&k(b,c)});l.send(n)}}}},function(a,c,d){a=d(19);var b=d(21),g=d(20),e=d(2),h=d(3);d=d(9);var g=new b["default"]({file:"sockjs",urls:g.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(a,b){return new window.SockJS(a,null,{js_path:h.Dependencies.getPath("sockjs",
{encrypted:b.encrypted}),ignore_null_origin:b.ignoreNullOrigin})},beforeOpen:function(a,b){a.send(JSON.stringify({path:b}))}}),f={isSupported:function(a){return e["default"].isXDRSupported(a.encrypted)}},k=new b["default"](d.extend({},a.streamingConfiguration,f)),b=new b["default"](d.extend({},a.pollingConfiguration,f));a["default"].xdr_streaming=k;a["default"].xdr_polling=b;a["default"].sockjs=g;c.__esModule=!0;c["default"]=a["default"]},function(a,c,d){var b=d(20);a=d(21);var g=d(9),e=d(2);d=new a["default"]({urls:b.ws,
handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(e["default"].getWebSocketAPI())},isSupported:function(){return Boolean(e["default"].getWebSocketAPI())},getSocket:function(a){return e["default"].createWebSocket(a)}});b={urls:b.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};c.streamingConfiguration=g.extend({getSocket:function(a){return e["default"].HTTPFactory.createStreamingSocket(a)}},b);c.pollingConfiguration=g.extend({getSocket:function(a){return e["default"].HTTPFactory.createPollingSocket(a)}},
b);var h={isSupported:function(){return e["default"].isXHRSupported()}},b=new a["default"](g.extend({},c.streamingConfiguration,h));a=new a["default"](g.extend({},c.pollingConfiguration,h));a={ws:d,xhr_streaming:b,xhr_polling:a};c.__esModule=!0;c["default"]=a},function(a,c,d){function b(a,b,c){return a+(b.encrypted?"s":"")+"://"+(b.encrypted?b.hostEncrypted:b.hostUnencrypted)+c}function g(a,b){return"/app/"+a+("?protocol="+e["default"].PROTOCOL+"&client=js&version="+e["default"].VERSION+(b?"&"+b:
""))}var e=d(5);c.ws={getInitial:function(a,c){return b("ws",c,g(a,"flash=false"))}};c.http={getInitial:function(a,c){var e=(c.httpPath||"/pusher")+g(a);return b("http",c,e)}};c.sockjs={getInitial:function(a,c){return b("http",c,c.httpPath||"/pusher")},getPath:function(a,b){return g(a)}}},function(a,c,d){var b=d(22);a=function(){function a(b){this.hooks=b}a.prototype.isSupported=function(a){return this.hooks.isSupported(a)};a.prototype.createConnection=function(a,c,d,g){return new b["default"](this.hooks,
a,c,d,g)};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=d(11),e=d(9);a=d(23);var h=d(8),f=d(2);d=function(a){function c(b,e,d,g,h){a.call(this);this.initialize=f["default"].transportConnectionInitializer;this.hooks=b;this.name=e;this.priority=d;this.key=g;this.options=h;this.state="new";this.timeline=
h.timeline;this.activityTimeout=h.activityTimeout;this.id=this.timeline.generateUniqueID()}b(c,a);c.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)};c.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)};c.prototype.connect=function(){var a=this;if(this.socket||"initialized"!==this.state)return!1;var b=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(b,this.options)}catch(c){return g["default"].defer(function(){a.onError(c);
a.changeState("closed")}),!1}this.bindListeners();h["default"].debug("Connecting",{transport:this.name,url:b});this.changeState("connecting");return!0};c.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1};c.prototype.send=function(a){var b=this;return"open"===this.state?(g["default"].defer(function(){b.socket&&b.socket.send(a)}),!0):!1};c.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()};c.prototype.onOpen=function(){this.hooks.beforeOpen&&
this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options));this.changeState("open");this.socket.onopen=void 0};c.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a});this.timeline.error(this.buildTimelineMessage({error:a.toString()}))};c.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed");this.unbindListeners();this.socket=void 0};c.prototype.onMessage=function(a){this.emit("message",
a)};c.prototype.onActivity=function(){this.emit("activity")};c.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()};this.socket.onerror=function(b){a.onError(b)};this.socket.onclose=function(b){a.onClose(b)};this.socket.onmessage=function(b){a.onMessage(b)};this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})};c.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=
void 0,this.supportsPing()&&(this.socket.onactivity=void 0))};c.prototype.changeState=function(a,b){this.state=a;this.timeline.info(this.buildTimelineMessage({state:a,params:b}));this.emit(a,b)};c.prototype.buildTimelineMessage=function(a){return e.extend({cid:this.id},a)};return c}(a["default"]);c.__esModule=!0;c["default"]=d},function(a,c,d){var b=d(24),g=Function("return this")();a=function(){function a(c){this.callbacks=new b["default"];this.global_callbacks=[];this.failThrough=c}a.prototype.bind=
function(a,b,c){this.callbacks.add(a,b,c);return this};a.prototype.bind_all=function(a){this.global_callbacks.push(a);return this};a.prototype.unbind=function(a,b,c){this.callbacks.remove(a,b,c);return this};a.prototype.unbind_all=function(a,b){this.callbacks.remove(a,b);return this};a.prototype.emit=function(a,b){var c;for(c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var e=this.callbacks.get(a);if(e&&0<e.length)for(c=0;c<e.length;c++)e[c].fn.call(e[c].context||g,b);else this.failThrough&&
this.failThrough(a,b);return this};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(9);a=function(){function a(){this._callbacks={}}a.prototype.get=function(a){return this._callbacks["_"+a]};a.prototype.add=function(a,b,c){a="_"+a;this._callbacks[a]=this._callbacks[a]||[];this._callbacks[a].push({fn:b,context:c})};a.prototype.remove=function(a,c,d){a||c||d?(a=a?["_"+a]:b.keys(this._callbacks),c||d?this.removeCallback(a,c,d):this.removeAllCallbacks(a)):this._callbacks={}};a.prototype.removeCallback=
function(a,c,d){b.apply(a,function(a){this._callbacks[a]=b.filter(this._callbacks[a]||[],function(a){return c&&c!==a.fn||d&&d!==a.context});0===this._callbacks[a].length&&delete this._callbacks[a]},this)};a.prototype.removeAllCallbacks=function(a){b.apply(a,function(a){delete this._callbacks[a]},this)};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function c(){a.call(this);var b=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){b.emit("online")},!1),window.addEventListener("offline",function(){b.emit("offline")},!1))}b(c,a);c.prototype.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine};return c}(d(23)["default"]);c.NetInfo=a;c.Network=new a},function(a,c){c.__esModule=!0;c["default"]=function(a){return[[":def",
"ws_options",{hostUnencrypted:a.wsHost+":"+a.wsPort,hostEncrypted:a.wsHost+":"+a.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:a.httpHost+":"+a.httpPort,hostEncrypted:a.httpHost+":"+a.httpsPort,httpPath:a.httpPath}],[":def","timeouts",{loop:!0,timeout:15E3,timeoutLimit:6E4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1E4,maxPingDelay:a.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,
minPingDelay:1E4,maxPingDelay:a.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling",
"xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",
":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4E3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18E5,[":first_connected",[":if",[":is_supported",":ws"],a.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2E3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2E3,[":wss_loop"]],[":delayed",5E3,[":http_fallback_loop"]]],
":http_fallback_loop"]]]]]}},function(a,c,d){var b=d(3);c.__esModule=!0;c["default"]=function(){var a=this;a.timeline.info(a.buildTimelineMessage({transport:a.name+(a.options.encrypted?"s":"")}));if(a.hooks.isInitialized())a.changeState("initialized");else if(a.hooks.file)a.changeState("initializing"),b.Dependencies.load(a.hooks.file,{encrypted:a.options.encrypted},function(b,c){if(a.hooks.isInitialized())a.changeState("initialized"),c(!0);else{if(b)a.onError(b);a.onClose();c(!1)}});else a.onClose()}},
function(a,c,d){var b=d(29);a=d(31);a["default"].createXDR=function(a,c){return this.createRequest(b["default"],a,c)};c.__esModule=!0;c["default"]=a["default"]},function(a,c,d){var b=d(30);c.__esModule=!0;c["default"]={getRequest:function(a){var c=new window.XDomainRequest;c.ontimeout=function(){a.emit("error",new b.RequestTimedOut);a.close()};c.onerror=function(b){a.emit("error",b);a.close()};c.onprogress=function(){if(c.responseText&&0<c.responseText.length)a.onChunk(200,c.responseText)};c.onload=
function(){if(c.responseText&&0<c.responseText.length)a.onChunk(200,c.responseText);a.emit("finished",200);a.close()};return c},abortRequest:function(a){a.ontimeout=a.onerror=a.onprogress=a.onload=null;a.abort()}}},function(a,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},b=function(a){function b(){a.apply(this,arguments)}d(b,a);return b}(Error);c.BadEventName=
b;b=function(a){function b(){a.apply(this,arguments)}d(b,a);return b}(Error);c.RequestTimedOut=b;b=function(a){function b(){a.apply(this,arguments)}d(b,a);return b}(Error);c.TransportPriorityTooLow=b;b=function(a){function b(){a.apply(this,arguments)}d(b,a);return b}(Error);c.TransportClosed=b;b=function(a){function b(){a.apply(this,arguments)}d(b,a);return b}(Error);c.UnsupportedTransport=b;b=function(a){function b(){a.apply(this,arguments)}d(b,a);return b}(Error);c.UnsupportedStrategy=b},function(a,
c,d){var b=d(32),g=d(33),e=d(35),h=d(36),f=d(37);c.__esModule=!0;c["default"]={createStreamingSocket:function(a){return this.createSocket(e["default"],a)},createPollingSocket:function(a){return this.createSocket(h["default"],a)},createSocket:function(a,b){return new g["default"](a,b)},createXHR:function(a,b){return this.createRequest(f["default"],a,b)},createRequest:function(a,c,e){return new b["default"](a,c,e)}}},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=d(2);a=function(a){function c(b,d,g){a.call(this);this.hooks=b;this.method=d;this.url=g}b(c,a);c.prototype.start=function(a){var b=this;this.position=0;this.xhr=this.hooks.getRequest(this);this.unloader=function(){b.close()};g["default"].addUnloadListener(this.unloader);this.xhr.open(this.method,this.url,!0);this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type",
"application/json");this.xhr.send(a)};c.prototype.close=function(){this.unloader&&(g["default"].removeUnloadListener(this.unloader),this.unloader=null);this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)};c.prototype.onChunk=function(a,b){for(;;){var c=this.advanceBuffer(b);if(c)this.emit("chunk",{status:a,data:c});else break}this.isBufferTooLong(b)&&this.emit("buffer_too_long")};c.prototype.advanceBuffer=function(a){a=a.slice(this.position);var b=a.indexOf("\n");return-1!==b?(this.position+=
b+1,a.slice(0,b)):null};c.prototype.isBufferTooLong=function(a){return this.position===a.length&&262144<a.length};return c}(d(23)["default"]);c.__esModule=!0;c["default"]=a},function(a,c,d){function b(a){var b=-1===a.indexOf("?")?"?":"&";return a+b+"t="+ +new Date+"&n="+f++}var g=d(34),e=d(11),h=d(2),f=1;a=function(){function a(b,c){this.hooks=b;var e=Math.floor(1E3*Math.random())+"/",d;d=[];for(var f=0;8>f;f++)d.push(Math.floor(32*Math.random()).toString(32));d=d.join("");this.session=e+d;e=/([^\?]*)\/*(\??.*)/.exec(c);
this.location={base:e[1],queryString:e[2]};this.readyState=g["default"].CONNECTING;this.openStream()}a.prototype.send=function(a){return this.sendRaw(JSON.stringify([a]))};a.prototype.ping=function(){this.hooks.sendHeartbeat(this)};a.prototype.close=function(a,b){this.onClose(a,b,!0)};a.prototype.sendRaw=function(a){if(this.readyState===g["default"].OPEN)try{return h["default"].createSocketRequest("POST",b(this.location.base+"/"+this.session+"/xhr_send")).start(a),!0}catch(c){return!1}else return!1};
a.prototype.reconnect=function(){this.closeStream();this.openStream()};a.prototype.onClose=function(a,b,c){this.closeStream();this.readyState=g["default"].CLOSED;if(this.onclose)this.onclose({code:a,reason:b,wasClean:c})};a.prototype.onChunk=function(a){if(200===a.status){if(this.readyState===g["default"].OPEN)this.onActivity();switch(a.data.slice(0,1)){case "o":a=JSON.parse(a.data.slice(1)||"{}");this.onOpen(a);break;case "a":a=JSON.parse(a.data.slice(1)||"[]");for(var b=0;b<a.length;b++)this.onEvent(a[b]);
break;case "m":a=JSON.parse(a.data.slice(1)||"null");this.onEvent(a);break;case "h":this.hooks.onHeartbeat(this);break;case "c":a=JSON.parse(a.data.slice(1)||"[]"),this.onClose(a[0],a[1],!0)}}};a.prototype.onOpen=function(a){if(this.readyState===g["default"].CONNECTING){if(a&&a.hostname){var b=this.location;a=a.hostname;var c=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(this.location.base);b.base=c[1]+a+c[3]}this.readyState=g["default"].OPEN;if(this.onopen)this.onopen()}else this.onClose(1006,"Server lost session",
!0)};a.prototype.onEvent=function(a){if(this.readyState===g["default"].OPEN&&this.onmessage)this.onmessage({data:a})};a.prototype.onActivity=function(){if(this.onactivity)this.onactivity()};a.prototype.onError=function(a){if(this.onerror)this.onerror(a)};a.prototype.openStream=function(){var a=this;this.stream=h["default"].createSocketRequest("POST",b(this.hooks.getReceiveURL(this.location,this.session)));this.stream.bind("chunk",function(b){a.onChunk(b)});this.stream.bind("finished",function(b){a.hooks.onFinished(a,
b)});this.stream.bind("buffer_too_long",function(){a.reconnect()});try{this.stream.start()}catch(c){e["default"].defer(function(){a.onError(c);a.onClose(1006,"Could not start streaming",!1)})}};a.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)};return a}();c.__esModule=!0;c["default"]=a},function(a,c){var d,b=d||(d={});b[b.CONNECTING=0]="CONNECTING";b[b.OPEN=1]="OPEN";b[b.CLOSED=3]="CLOSED";c.__esModule=!0;c["default"]=d},function(a,c){c.__esModule=
!0;c["default"]={getReceiveURL:function(a,b){return a.base+"/"+b+"/xhr_streaming"+a.queryString},onHeartbeat:function(a){a.sendRaw("[]")},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,b){a.onClose(1006,"Connection interrupted ("+b+")",!1)}}},function(a,c){c.__esModule=!0;c["default"]={getReceiveURL:function(a,b){return a.base+"/"+b+"/xhr"+a.queryString},onHeartbeat:function(){},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,b){if(200===b)a.reconnect();else a.onClose(1006,
"Connection interrupted ("+b+")",!1)}}},function(a,c,d){var b=d(2);c.__esModule=!0;c["default"]={getRequest:function(a){var c=new (b["default"].getXHRAPI());c.onreadystatechange=c.onprogress=function(){switch(c.readyState){case 3:if(c.responseText&&0<c.responseText.length)a.onChunk(c.status,c.responseText);break;case 4:if(c.responseText&&0<c.responseText.length)a.onChunk(c.status,c.responseText);a.emit("finished",c.status);a.close()}};return c},abortRequest:function(a){a.onreadystatechange=null;a.abort()}}},
function(a,c,d){var b=d(9),g=d(11),e=d(39);a=function(){function a(b,c,e){this.key=b;this.session=c;this.events=[];this.options=e||{};this.uniqueID=this.sent=0}a.prototype.log=function(a,c){a<=this.options.level&&(this.events.push(b.extend({},c,{timestamp:g["default"].now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())};a.prototype.error=function(a){this.log(e["default"].ERROR,a)};a.prototype.info=function(a){this.log(e["default"].INFO,a)};a.prototype.debug=function(a){this.log(e["default"].DEBUG,
a)};a.prototype.isEmpty=function(){return 0===this.events.length};a.prototype.send=function(a,c){var e=this,d=b.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);this.events=[];a(d,function(a,b){a||e.sent++;c&&c(a,b)});return!0};a.prototype.generateUniqueID=function(){this.uniqueID++;return this.uniqueID};return a}();c.__esModule=!0;c["default"]=a},
function(a,c){var d,b=d||(d={});b[b.ERROR=3]="ERROR";b[b.INFO=6]="INFO";b[b.DEBUG=7]="DEBUG";c.__esModule=!0;c["default"]=d},function(a,c,d){function b(a){return function(b){return[a.apply(this,arguments),b]}}function g(a){return"string"===typeof a&&":"===a.charAt(0)}function e(a,b){if(0===a.length)return[[],b];var c=f(a[0],b),d=e(a.slice(1),c[1]);return[[c[0]].concat(d[0]),d[1]]}function h(a,b){if(g(a[0])){var c=b[a[0].slice(1)];if(1<a.length){if("function"!==typeof c)throw"Calling non-function "+
a[0];var d=[k.extend({},b)].concat(k.map(a.slice(1),function(a){return f(a,k.extend({},b))[0]}));return c.apply(this,d)}return[c,b]}return e(a,b)}function f(a,b){if("string"===typeof a){var c;if(g(a)){c=b[a.slice(1)];if(void 0===c)throw"Undefined symbol "+a;c=[c,b]}else c=[a,b];return c}return"object"===typeof a&&a instanceof Array&&0<a.length?h(a,b):[a,b]}var k=d(9),l=d(11),n=d(41),m=d(30),q=d(55),r=d(56),u=d(57),t=d(58),v=d(59),w=d(60),x=d(61),J=d(2)["default"].Transports;c.build=function(a,b){var c=
k.extend({},A,b);return f(a,c)[1].strategy};var D={isSupported:function(){return!1},connect:function(a,b){var c=l["default"].defer(function(){b(new m.UnsupportedStrategy)});return{abort:function(){c.ensureAborted()},forceMinPriority:function(){}}}},A={extend:function(a,b,c){return[k.extend({},b,c),a]},def:function(a,b,c){if(void 0!==a[b])throw"Redefining symbol "+b;a[b]=c;return[void 0,a]},def_transport:function(a,b,c,e,d,f){var g=J[c];if(!g)throw new m.UnsupportedTransport(c);c=a.enabledTransports&&
-1===k.arrayIndexOf(a.enabledTransports,b)||a.disabledTransports&&-1!==k.arrayIndexOf(a.disabledTransports,b)?D:new q["default"](b,e,f?f.getAssistant(g):g,k.extend({key:a.key,encrypted:a.encrypted,timeline:a.timeline,ignoreNullOrigin:a.ignoreNullOrigin},d));e=a.def(a,b,c)[1];e.Transports=a.Transports||{};e.Transports[b]=c;return[void 0,e]},transport_manager:b(function(a,b){return new n["default"](b)}),sequential:b(function(a,b){var c=Array.prototype.slice.call(arguments,2);return new r["default"](c,
b)}),cached:b(function(a,b,c){return new t["default"](c,a.Transports,{ttl:b,timeline:a.timeline,encrypted:a.encrypted})}),first_connected:b(function(a,b){return new x["default"](b)}),best_connected_ever:b(function(){var a=Array.prototype.slice.call(arguments,1);return new u["default"](a)}),delayed:b(function(a,b,c){return new v["default"](c,{delay:b})}),"if":b(function(a,b,c,e){return new w["default"](b,c,e)}),is_supported:b(function(a,b){return function(){return b.isSupported()}})}},function(a,c,
d){var b=d(42);a=function(){function a(b){this.options=b||{};this.livesLeft=this.options.lives||Infinity}a.prototype.getAssistant=function(a){return b["default"].createAssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})};a.prototype.isAlive=function(){return 0<this.livesLeft};a.prototype.reportDeath=function(){--this.livesLeft};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(43),g=d(44),e=d(47),h=d(48),f=d(49),
k=d(50),l=d(51),n=d(53),m=d(54);c.__esModule=!0;c["default"]={createChannels:function(){return new m["default"]},createConnectionManager:function(a,b){return new n["default"](a,b)},createChannel:function(a,b){return new l["default"](a,b)},createPrivateChannel:function(a,b){return new k["default"](a,b)},createPresenceChannel:function(a,b){return new f["default"](a,b)},createTimelineSender:function(a,b){return new h["default"](a,b)},createAuthorizer:function(a,b){return new e["default"](a,b)},createHandshake:function(a,
b){return new g["default"](a,b)},createAssistantToTheTransportManager:function(a,c,e){return new b["default"](a,c,e)}}},function(a,c,d){var b=d(11),g=d(9);a=function(){function a(b,c,e){this.manager=b;this.transport=c;this.minPingDelay=e.minPingDelay;this.maxPingDelay=e.maxPingDelay;this.pingDelay=void 0}a.prototype.createConnection=function(a,c,e,d){var n=this;d=g.extend({},d,{activityTimeout:this.pingDelay});var m=this.transport.createConnection(a,c,e,d),q=null,r=function(){m.unbind("open",r);m.bind("closed",
u);q=b["default"].now()},u=function(a){m.unbind("closed",u);1002===a.code||1003===a.code?n.manager.reportDeath():!a.wasClean&&q&&(a=b["default"].now()-q,a<2*n.maxPingDelay&&(n.manager.reportDeath(),n.pingDelay=Math.max(a/2,n.minPingDelay)))};m.bind("open",r);return m};a.prototype.isSupported=function(a){return this.manager.isAlive()&&this.transport.isSupported(a)};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(9),g=d(45),e=d(46);a=function(){function a(b,c){this.transport=b;this.callback=
c;this.bindListeners()}a.prototype.close=function(){this.unbindListeners();this.transport.close()};a.prototype.bindListeners=function(){var a=this;this.onMessage=function(b){a.unbindListeners();var c;try{c=g.processHandshake(b)}catch(d){a.finish("error",{error:d});a.transport.close();return}"connected"===c.action?a.finish("connected",{connection:new e["default"](c.id,a.transport),activityTimeout:c.activityTimeout}):(a.finish(c.action,{error:c.error}),a.transport.close())};this.onClosed=function(b){a.unbindListeners();
var c=g.getCloseAction(b)||"backoff";b=g.getCloseError(b);a.finish(c,{error:b})};this.transport.bind("message",this.onMessage);this.transport.bind("closed",this.onClosed)};a.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage);this.transport.unbind("closed",this.onClosed)};a.prototype.finish=function(a,c){this.callback(b.extend({transport:this.transport,action:a},c))};return a}();c.__esModule=!0;c["default"]=a},function(a,c){c.decodeMessage=function(a){try{var b=JSON.parse(a.data);
if("string"===typeof b.data)try{b.data=JSON.parse(b.data)}catch(c){if(!(c instanceof SyntaxError))throw c;}return b}catch(c){throw{type:"MessageParseError",error:c,data:a.data};}};c.encodeMessage=function(a){return JSON.stringify(a)};c.processHandshake=function(a){a=c.decodeMessage(a);if("pusher:connection_established"===a.event){if(!a.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:a.data.socket_id,activityTimeout:1E3*a.data.activity_timeout}}if("pusher:error"===
a.event)return{action:this.getCloseAction(a.data),error:this.getCloseError(a.data)};throw"Invalid handshake";};c.getCloseAction=function(a){return 4E3>a.code?1002<=a.code&&1004>=a.code?"backoff":null:4E3===a.code?"ssl_only":4100>a.code?"refused":4200>a.code?"backoff":4300>a.code?"retry":"refused"};c.getCloseError=function(a){return 1E3!==a.code&&1001!==a.code?{type:"PusherError",data:{code:a.code,message:a.reason||a.message}}:null}},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=d(9);a=d(23);var e=d(45),h=d(8);d=function(a){function c(b,e){a.call(this);this.id=b;this.transport=e;this.activityTimeout=e.activityTimeout;this.bindListeners()}b(c,a);c.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()};c.prototype.send=function(a){return this.transport.send(a)};c.prototype.send_event=function(a,b,c){a={event:a,data:b};
c&&(a.channel=c);h["default"].debug("Event sent",a);return this.send(e.encodeMessage(a))};c.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})};c.prototype.close=function(){this.transport.close()};c.prototype.bindListeners=function(){var a=this,b={message:function(b){var c;try{c=e.decodeMessage(b)}catch(d){a.emit("error",{type:"MessageParseError",error:d,data:b.data})}if(void 0!==c){h["default"].debug("Event recd",c);switch(c.event){case "pusher:error":a.emit("error",
{type:"PusherError",data:c.data});break;case "pusher:ping":a.emit("ping");break;case "pusher:pong":a.emit("pong")}a.emit("message",c)}},activity:function(){a.emit("activity")},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(b){c();b&&b.code&&a.handleCloseEvent(b);a.transport=null;a.emit("closed")}},c=function(){g.objectApply(b,function(b,c){a.transport.unbind(c,b)})};g.objectApply(b,function(b,c){a.transport.bind(c,b)})};c.prototype.handleCloseEvent=function(a){var b=
e.getCloseAction(a);(a=e.getCloseError(a))&&this.emit("error",a);b&&this.emit(b)};return c}(a["default"]);c.__esModule=!0;c["default"]=d},function(a,c,d){var b=d(2);a=function(){function a(c,d){this.channel=c;var f=d.authTransport;if("undefined"===typeof b["default"].getAuthorizers()[f])throw"'"+f+"' is not a recognized auth transport";this.type=f;this.options=d;this.authOptions=(d||{}).auth||{}}a.prototype.composeQuery=function(a){a="socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);
for(var b in this.authOptions.params)a+="&"+encodeURIComponent(b)+"="+encodeURIComponent(this.authOptions.params[b]);return a};a.prototype.authorize=function(c,d){a.authorizers=a.authorizers||b["default"].getAuthorizers();return a.authorizers[this.type].call(this,b["default"],c,d)};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(2);a=function(){function a(b,c){this.timeline=b;this.options=c||{}}a.prototype.send=function(a,c){this.timeline.isEmpty()||this.timeline.send(b["default"].TimelineTransport.getAgent(this,
a),c)};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=d(50),e=d(8),h=d(52);a=function(a){function c(b,e){a.call(this,b,e);this.members=new h["default"]}b(c,a);c.prototype.authorize=function(b,c){var d=this;a.prototype.authorize.call(this,b,function(a,b){if(!a){if(void 0===b.channel_data){e["default"].warn("Invalid auth response for channel '"+
d.name+"', expected 'channel_data' field");c("Invalid auth response");return}var f=JSON.parse(b.channel_data);d.members.setMyID(f.user_id)}c(a,b)})};c.prototype.handleEvent=function(a,b){switch(a){case "pusher_internal:subscription_succeeded":this.members.onSubscription(b);this.subscribed=!0;this.emit("pusher:subscription_succeeded",this.members);break;case "pusher_internal:member_added":var c=this.members.addMember(b);this.emit("pusher:member_added",c);break;case "pusher_internal:member_removed":(c=
this.members.removeMember(b))&&this.emit("pusher:member_removed",c);break;default:g["default"].prototype.handleEvent.call(this,a,b)}};c.prototype.disconnect=function(){this.members.reset();a.prototype.disconnect.call(this)};return c}(g["default"]);c.__esModule=!0;c["default"]=a},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=d(42);a=function(a){function c(){a.apply(this,
arguments)}b(c,a);c.prototype.authorize=function(a,b){return g["default"].createAuthorizer(this,this.pusher.config).authorize(a,b)};return c}(d(51)["default"]);c.__esModule=!0;c["default"]=a},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=d(23);var g=d(30),e=d(8);d=function(a){function c(b,d){a.call(this,function(a,c){e["default"].debug("No callbacks on "+
b+" for "+a)});this.name=b;this.pusher=d;this.subscribed=!1}b(c,a);c.prototype.authorize=function(a,b){return b(!1,{})};c.prototype.trigger=function(a,b){if(0!==a.indexOf("client-"))throw new g.BadEventName("Event '"+a+"' does not start with 'client-'");return this.pusher.send_event(a,b,this.name)};c.prototype.disconnect=function(){this.subscribed=!1};c.prototype.handleEvent=function(a,b){0===a.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===a&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",
b)):this.emit(a,b)};c.prototype.subscribe=function(){var a=this;this.authorize(this.pusher.connection.socket_id,function(b,c){b?a.handleEvent("pusher:subscription_error",c):a.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:a.name})})};c.prototype.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})};return c}(a["default"]);c.__esModule=!0;c["default"]=d},function(a,c,d){var b=d(9);a=function(){function a(){this.reset()}a.prototype.get=
function(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null};a.prototype.each=function(a){var c=this;b.objectApply(this.members,function(b,d){a(c.get(d))})};a.prototype.setMyID=function(a){this.myID=a};a.prototype.onSubscription=function(a){this.members=a.presence.hash;this.count=a.presence.count;this.me=this.get(this.myID)};a.prototype.addMember=function(a){null===this.get(a.user_id)&&this.count++;this.members[a.user_id]=a.user_info;return this.get(a.user_id)};
a.prototype.removeMember=function(a){var b=this.get(a.user_id);b&&(delete this.members[a.user_id],this.count--);return b};a.prototype.reset=function(){this.members={};this.count=0;this.me=this.myID=null};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=d(23);var g=d(12),e=d(8),h=d(9),f=d(2);d=function(a){function c(b,
e){var d=this;a.call(this);this.key=b;this.options=e||{};this.state="initialized";this.connection=null;this.encrypted=!!e.encrypted;this.timeline=this.options.timeline;this.connectionCallbacks=this.buildConnectionCallbacks();this.errorCallbacks=this.buildErrorCallbacks();this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var g=f["default"].getNetwork();g.bind("online",function(){d.timeline.info({netinfo:"online"});"connecting"!==d.state&&"unavailable"!==d.state||d.retryIn(0)});
g.bind("offline",function(){d.timeline.info({netinfo:"offline"});d.connection&&d.sendActivityCheck()});this.updateStrategy()}b(c,a);c.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))};c.prototype.send=function(a){return this.connection?this.connection.send(a):!1};c.prototype.send_event=function(a,b,c){return this.connection?this.connection.send_event(a,
b,c):!1};c.prototype.disconnect=function(){this.disconnectInternally();this.updateState("disconnected")};c.prototype.isEncrypted=function(){return this.encrypted};c.prototype.startConnecting=function(){var a=this,b=function(c,e){c?a.runner=a.strategy.connect(0,b):"error"===e.action?(a.emit("error",{type:"HandshakeError",error:e.error}),a.timeline.error({handshakeError:e.error})):(a.abortConnecting(),a.handshakeCallbacks[e.action](e))};this.runner=this.strategy.connect(0,b)};c.prototype.abortConnecting=
function(){this.runner&&(this.runner.abort(),this.runner=null)};c.prototype.disconnectInternally=function(){this.abortConnecting();this.clearRetryTimer();this.clearUnavailableTimer();this.connection&&this.abandonConnection().close()};c.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})};c.prototype.retryIn=function(a){var b=this;this.timeline.info({action:"retry",delay:a});0<a&&this.emit("connecting_in",Math.round(a/
1E3));this.retryTimer=new g.OneOffTimer(a||0,function(){b.disconnectInternally();b.connect()})};c.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)};c.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new g.OneOffTimer(this.options.unavailableTimeout,function(){a.updateState("unavailable")})};c.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()};c.prototype.sendActivityCheck=
function(){var a=this;this.stopActivityCheck();this.connection.ping();this.activityTimer=new g.OneOffTimer(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout});a.retryIn(0)})};c.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck();this.connection.handlesActivityChecks()||(this.activityTimer=new g.OneOffTimer(this.activityTimeout,function(){a.sendActivityCheck()}))};c.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()};
c.prototype.buildConnectionCallbacks=function(){var a=this;return{message:function(b){a.resetActivityCheck();a.emit("message",b)},ping:function(){a.send_event("pusher:pong",{})},activity:function(){a.resetActivityCheck()},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(){a.abandonConnection();a.shouldRetry()&&a.retryIn(1E3)}}};c.prototype.buildHandshakeCallbacks=function(a){var b=this;return h.extend({},a,{connected:function(a){b.activityTimeout=Math.min(b.options.activityTimeout,
a.activityTimeout,a.connection.activityTimeout||Infinity);b.clearUnavailableTimer();b.setConnection(a.connection);b.socket_id=b.connection.id;b.updateState("connected",{socket_id:b.socket_id})}})};c.prototype.buildErrorCallbacks=function(){var a=this,b=function(b){return function(c){c.error&&a.emit("error",{type:"WebSocketError",error:c.error});b(c)}};return{ssl_only:b(function(){a.encrypted=!0;a.updateStrategy();a.retryIn(0)}),refused:b(function(){a.disconnect()}),backoff:b(function(){a.retryIn(1E3)}),
retry:b(function(){a.retryIn(0)})}};c.prototype.setConnection=function(a){this.connection=a;for(var b in this.connectionCallbacks)this.connection.bind(b,this.connectionCallbacks[b]);this.resetActivityCheck()};c.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);a=this.connection;this.connection=null;return a}};c.prototype.updateState=function(a,b){var c=this.state;this.state=
a;if(c!==a){var d=a;"connected"===d&&(d+=" with new socket ID "+b.socket_id);e["default"].debug("State changed",c+" -> "+d);this.timeline.info({state:a,params:b});this.emit("state_change",{previous:c,current:a});this.emit(a,b)}};c.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state};return c}(a["default"]);c.__esModule=!0;c["default"]=d},function(a,c,d){var b=d(9),g=d(42);a=function(){function a(){this.channels={}}a.prototype.add=function(a,b){if(!this.channels[a]){var c=
this.channels,e;e=0===a.indexOf("private-")?g["default"].createPrivateChannel(a,b):0===a.indexOf("presence-")?g["default"].createPresenceChannel(a,b):g["default"].createChannel(a,b);c[a]=e}return this.channels[a]};a.prototype.all=function(){return b.values(this.channels)};a.prototype.find=function(a){return this.channels[a]};a.prototype.remove=function(a){var b=this.channels[a];delete this.channels[a];return b};a.prototype.disconnect=function(){b.objectApply(this.channels,function(a){a.disconnect()})};
return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){function b(a,b){e["default"].defer(function(){b(a)});return{abort:function(){},forceMinPriority:function(){}}}var g=d(42),e=d(11),h=d(30),f=d(9);a=function(){function a(b,c,e,d){this.name=b;this.priority=c;this.transport=e;this.options=d||{}}a.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})};a.prototype.connect=function(a,c){var e=this;if(!this.isSupported())return b(new h.UnsupportedStrategy,
c);if(this.priority<a)return b(new h.TransportPriorityTooLow,c);var d=!1,k=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),u=null,t=function(){k.unbind("initialized",t);k.connect()},v=function(){u=g["default"].createHandshake(k,function(a){d=!0;J();c(null,a)})},w=function(a){J();c(a)},x=function(){J();var a;try{a=JSON.stringify(k)}catch(b){a=f.safeJSONStringify(k)}c(new h.TransportClosed(a))},J=function(){k.unbind("initialized",t);k.unbind("open",v);k.unbind("error",
w);k.unbind("closed",x)};k.bind("initialized",t);k.bind("open",v);k.bind("error",w);k.bind("closed",x);k.initialize();return{abort:function(){d||(J(),u?u.close():k.close())},forceMinPriority:function(a){d||e.priority<a&&(u?u.close():k.close())}}};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(9),g=d(11),e=d(12);a=function(){function a(b,c){this.strategies=b;this.loop=Boolean(c.loop);this.failFast=Boolean(c.failFast);this.timeout=c.timeout;this.timeoutLimit=c.timeoutLimit}a.prototype.isSupported=
function(){return b.any(this.strategies,g["default"].method("isSupported"))};a.prototype.connect=function(a,b){var c=this,e=this.strategies,d=0,g=this.timeout,h=null,u=function(t,v){v?b(null,v):(d+=1,c.loop&&(d%=e.length),d<e.length?(g&&(g*=2,c.timeoutLimit&&(g=Math.min(g,c.timeoutLimit))),h=c.tryStrategy(e[d],a,{timeout:g,failFast:c.failFast},u)):b(!0))},h=this.tryStrategy(e[d],a,{timeout:g,failFast:this.failFast},u);return{abort:function(){h.abort()},forceMinPriority:function(b){a=b;h&&h.forceMinPriority(b)}}};
a.prototype.tryStrategy=function(a,b,c,d){var g=null,h=null;0<c.timeout&&(g=new e.OneOffTimer(c.timeout,function(){h.abort();d(!0)}));h=a.connect(b,function(a,b){a&&g&&g.isRunning()&&!c.failFast||(g&&g.ensureAborted(),d(a,b))});return{abort:function(){g&&g.ensureAborted();h.abort()},forceMinPriority:function(a){h.forceMinPriority(a)}}};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){function b(a,b,c){var d=h.map(a,function(a,e,d,f){return a.connect(b,c(e,f))});return{abort:function(){h.apply(d,
e)},forceMinPriority:function(a){h.apply(d,function(b){b.forceMinPriority(a)})}}}function g(a){return h.all(a,function(a){return Boolean(a.error)})}function e(a){a.error||a.aborted||(a.abort(),a.aborted=!0)}var h=d(9),f=d(11);a=function(){function a(b){this.strategies=b}a.prototype.isSupported=function(){return h.any(this.strategies,f["default"].method("isSupported"))};a.prototype.connect=function(a,c){return b(this.strategies,a,function(a,b){return function(e,d){(b[a].error=e)?g(b)&&c(!0):(h.apply(b,
function(a){a.forceMinPriority(d.transport.priority)}),c(null,d))}})};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){function b(a){return"pusherTransport"+(a?"Encrypted":"Unencrypted")}function g(a){var c=f["default"].getLocalStorage();if(c)try{var d=c[b(a)];if(d)return JSON.parse(d)}catch(g){e(a)}return null}function e(a){var c=f["default"].getLocalStorage();if(c)try{delete c[b(a)]}catch(e){}}var h=d(11),f=d(2),k=d(56);a=function(){function a(b,c,e){this.strategy=b;this.transports=c;
this.ttl=e.ttl||18E5;this.encrypted=e.encrypted;this.timeline=e.timeline}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,c){var d=this.encrypted,l=g(d),u=[this.strategy];if(l&&l.timestamp+this.ttl>=h["default"].now()){var t=this.transports[l.transport];t&&(this.timeline.info({cached:!0,transport:l.transport,latency:l.latency}),u.push(new k["default"]([t],{timeout:2*l.latency+1E3,failFast:!0})))}var v=h["default"].now(),w=u.pop().connect(a,function J(g,
k){if(g)e(d),0<u.length?(v=h["default"].now(),w=u.pop().connect(a,J)):c(g);else{var l=k.transport.name,t=h["default"].now()-v,r=f["default"].getLocalStorage();if(r)try{r[b(d)]=JSON.stringify({timestamp:h["default"].now(),transport:l,latency:t})}catch(K){}c(null,k)}});return{abort:function(){w.abort()},forceMinPriority:function(b){a=b;w&&w.forceMinPriority(b)}}};return a}();c.__esModule=!0;c["default"]=a},function(a,c,d){var b=d(12);a=function(){function a(b,c){var d=c.delay;this.strategy=b;this.options=
{delay:d}}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,c){var d=this.strategy,g,l=new b.OneOffTimer(this.options.delay,function(){g=d.connect(a,c)});return{abort:function(){l.ensureAborted();g&&g.abort()},forceMinPriority:function(b){a=b;g&&g.forceMinPriority(b)}}};return a}();c.__esModule=!0;c["default"]=a},function(a,c){var d=function(){function a(b,c,d){this.test=b;this.trueBranch=c;this.falseBranch=d}a.prototype.isSupported=function(){return(this.test()?
this.trueBranch:this.falseBranch).isSupported()};a.prototype.connect=function(a,b){return(this.test()?this.trueBranch:this.falseBranch).connect(a,b)};return a}();c.__esModule=!0;c["default"]=d},function(a,c){var d=function(){function a(b){this.strategy=b}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var c=this.strategy.connect(a,function(a,d){d&&c.abort();b(a,d)});return c};return a}();c.__esModule=!0;c["default"]=d},function(a,c,d){var b=
d(5);c.getGlobalConfig=function(){return{wsHost:b["default"].host,wsPort:b["default"].ws_port,wssPort:b["default"].wss_port,httpHost:b["default"].sockjs_host,httpPort:b["default"].sockjs_http_port,httpsPort:b["default"].sockjs_https_port,httpPath:b["default"].sockjs_path,statsHost:b["default"].stats_host,authEndpoint:b["default"].channel_auth_endpoint,authTransport:b["default"].channel_auth_transport,activity_timeout:b["default"].activity_timeout,pong_timeout:b["default"].pong_timeout,unavailable_timeout:b["default"].unavailable_timeout}};
c.getClusterConfig=function(a){return{wsHost:"ws-"+a+".pusher.com",httpHost:"sockjs-"+a+".pusher.com"}}}])});
(function(){function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function c(a){la&&"object"===typeof window.console&&console.log("[iFrameSizer]["+ia+"] "+a)}function d(a){"object"===typeof window.console&&console.warn("[iFrameSizer]["+ia+"] "+a)}function b(){var a=W.substr(13).split(":");ia=a[0];M=void 0!==a[1]?Number(a[1]):M;G=void 0!==a[2]?"true"===a[2]?!0:!1:G;la=void 0!==a[3]?"true"===a[3]?!0:!1:la;Z=void 0!==a[4]?Number(a[4]):
Z;wa=void 0!==a[5]?"true"===a[5]?!0:!1:wa;C=void 0!==a[6]?"true"===a[6]?!0:!1:C;N=a[7];P=void 0!==a[8]?a[8]:P;K=a[9];y=a[10];H=void 0!==a[11]?Number(a[11]):H}function g(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,c("Body "+a+' set to "'+b+'"'))}function e(){a(window,"resize",function(){D("resize","Window resized")})}function h(){a(window,"click",function(){D("click","Window clicked")})}function f(){"offset"!==P&&(P in Q||(d(P+" is not a valid option for heightCalculationMethod."),
P="bodyScroll"),c('Height calculation method set to "'+P+'"'))}function k(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function l(){wa&&(c("Enable public methods"),window.parentIFrame={close:function(){D("close","parentIFrame.close()",0,0)},getId:function(){return ia},reset:function(){z("parentIFrame.size")},scrollTo:function(a,b){B(b,a,"scrollTo")},scrollToOffset:function(a,b){B(b,a,"scrollToOffset")},sendMessage:function(a,b){B(0,
0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){P=a;f()},setTargetOrigin:function(a){c("Set targetOrigin: "+a);ya=a},size:function(a,b){D("size","parentIFrame.size("+(""+(a?a:"")+(b?","+b:""))+")",a,b)}})}function n(){0!==Z&&(c("setInterval: "+Z+"ms"),setInterval(function(){D("interval","setInterval: "+Z)},Math.abs(Z)))}function m(b){function e(b){if(void 0===b.height||void 0===b.width||0===b.height||0===b.width)c("Attach listerner to "+b.src),a(b,"load",function(){D("imageLoad",
"Image loaded")})}b.forEach(function(a){"attributes"===a.type&&"src"===a.attributeName?e(a.target):"childList"===a.type&&(a=a.target.querySelectorAll("img"),Array.prototype.forEach.call(a,function(a){e(a)}))})}function q(){function b(a){"height"!==a.propertyName&&"width"!==a.propertyName||D("transitionend","Transition end")}a(window,"transitionend",b);a(window,"webkitTransitionEnd",b);a(window,"oTransitionEnd",b);a(window,"otransitionend",b)}function r(){function a(){var e=document.querySelector("body"),
d=new b(function(a){D("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type);m(a)});c("Enable MutationObserver");d.observe(e,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var b=window.MutationObserver||window.WebKitMutationObserver;b?0>Z?n():a():(d("MutationObserver not supported in this browser!"),n())}function u(){function a(b){var c=document.body,e=0;if("defaultView"in document&&"getComputedStyle"in document.defaultView)e=document.defaultView.getComputedStyle(c,
null),e=null!==e?e[b]:0;else if(b=c.currentStyle[b],/^\d+(px)?$/i.test(b))e=parseInt(b,10);else{var e=c.style.left,d=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;c.style.left=b||0;b=c.style.pixelLeft;c.style.left=e;c.runtimeStyle.left=d;e=b}return parseInt(e,10)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}function t(){return document.body.scrollHeight}function v(){return document.documentElement.offsetHeight}function w(){return document.documentElement.scrollHeight}
function x(){for(var a=document.querySelectorAll("body *"),b=a.length,e=0,d=(new Date).getTime(),f=0;f<b;f++)a[f].getBoundingClientRect().bottom>e&&(e=a[f].getBoundingClientRect().bottom);d=(new Date).getTime()-d;c("Parsed "+b+" HTML elements");c("LowestElement bottom position calculated in "+d+"ms");return e}function J(){return Math.max.apply(null,[u(),t(),v(),w()])}function D(a,b,e,d){function f(){a in{reset:1,resetPage:1,init:1}||c("Trigger event: "+b)}e=void 0!==e?e:Q[P]();d=void 0!==d?d:Math.max(document.documentElement.scrollWidth,
document.body.scrollWidth);Math.abs(V-e)<=H&&(!G||Math.abs(na-d)<=H)?!(a in{init:1,interval:1,size:1})&&P in aa?z(b):a in{interval:1}||(f(),c("No change in size detected")):(f(),V=e,na=d,B(V,na,a),c("--"))}function A(a){V=Q[P]();na=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);B(V,na,a)}function z(a){var b=P;P="offset";c("Reset trigger event: "+a);A("reset");P=b}function B(a,b,e,d,f){void 0===f?f=ya:c("Message targetOrigin: "+f);a=ia+":"+(a+":"+b)+":"+e+(void 0!==d?":"+
d:"");c("Sending message to host page ("+a+")");Ra.postMessage("[iFrameSizer]"+a,f)}var C=!0,K="",M=0,N="",y="",G=!1,V=1,p=!0,P="offset",O=!0,W="",Z=32,la=!1,ia="",wa=!1,aa={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},ya="*",Ra=window.parent,H=0,na=1,Q={offset:u,bodyOffset:u,bodyScroll:t,documentElementOffset:v,scroll:w,documentElementScroll:w,max:J,min:function(){return Math.min.apply(null,[u(),t(),v(),w()])},grow:J,lowestElement:function(){return Math.max(u(),x())}};a(window,"message",
function(a){function n(){W=a.data;Ra=a.source;c("Initialising iFrame");b();void 0===N&&(N=M+"px");-1!==N.indexOf("-")&&d("Negative CSS value ignored for margin");g("margin",N);g("background",K);g("padding",y);k();f();document.documentElement.style.height="";document.body.style.height="";c('HTML & body height set to "auto"');l();!0===C?(e(),h(),q(),r()):c("Auto Resize disabled");D("init","Init message from host page");p=!1;setTimeout(function(){O=!1},128)}"[iFrameSizer]"===(""+a.data).substr(0,13)&&
(p&&a.data.split(":")[2]in{"true":1,"false":1}?n():"reset"===a.data.split("]")[1]?O?c("Page reset ignored by init"):(c("Page size reset by host page"),A("resetPage")):a.data===W||"iFrameResize"in window||d("Unexpected message ("+a.data+")"))})})();
(function(){if(!window["com.genius.Genius"].require){var a={},c={},d=function(g,e){var h=b(e,g),f=b(h,"./index"),k;if(k=c[h]||c[f])return k;if(f=a[h]||a[h=f])return k={id:h,exports:{}},c[h]=k.exports,f(k.exports,function(a){return d(a,h.split("/").slice(0,-1).join("/"))},k),c[h]=k.exports;throw"module "+g+" not found";},b=function(a,b){var c=[],d,k;d=/^\.\.?(\/|$)/.test(b)?[a,b].join("/").split("/"):b.split("/");for(var l=0,n=d.length;l<n;l++)k=d[l],".."==k?c.pop():"."!=k&&""!=k&&c.push(k);return c.join("/")};
window["com.genius.Genius"].require=function(a){return d(a,"")};window["com.genius.Genius"].require.define=function(b){for(var c in b)a[c]=b[c]};window["com.genius.Genius"].require.modules=a;window["com.genius.Genius"].require.cache=c}return window["com.genius.Genius"].require}).call(this);
(function(){window["com.genius.Genius"].require.define({jschannel:function(a,c,d){a=function(){function a(b,c,e,f){function g(a){for(var c=0;c<a.length;c++)if(a[c].win===b)return!0;return!1}var k=!1;if("*"===c)for(var t in d){if(d.hasOwnProperty(t)&&"*"!==t&&"object"===typeof d[t][e]&&(k=g(d[t][e])))break}else d["*"]&&d["*"][e]&&(k=g(d["*"][e])),!k&&d[c]&&d[c][e]&&(k=g(d[c][e]));if(k)throw"A channel is already bound to the same window which overlaps with origin '"+c+"' and has scope '"+e+"'";"object"!=
typeof d[c]&&(d[c]={});"object"!=typeof d[c][e]&&(d[c][e]=[]);d[c][e].push({win:b,handler:f})}function c(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var e=Math.floor(1000001*Math.random()),d={},f={},k=function(a){try{var b=JSON.parse(a.data);if("object"!==typeof b||null===b)throw"malformed";}catch(c){return}var e=a.source;a=a.origin;var g,k,u;"string"===typeof b.method&&(u=b.method.split("::"),2==u.length?(g=u[0],u=u[1]):u=b.method);"undefined"!==typeof b.id&&
(k=b.id);if("string"===typeof u){k=!1;if(d[a]&&d[a][g])for(var t=0;t<d[a][g].length;t++)if(d[a][g][t].win===e){d[a][g][t].handler(a,u,b);k=!0;break}if(!k&&d["*"]&&d["*"][g])for(t=0;t<d["*"][g].length;t++)if(d["*"][g][t].win===e){d["*"][g][t].handler(a,u,b);break}}else if("undefined"!=typeof k&&f[k])f[k](a,u,b)};window.addEventListener?window.addEventListener("message",k,!1):window.attachEvent&&window.attachEvent("onmessage",k);return{build:function(k){var n=function(a){if(k.debugOutput&&window.console&&
window.console.log){try{"string"!==typeof a&&(a=JSON.stringify(a))}catch(b){}console.log("["+r+"] "+a)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof k)throw"Channel build invoked without a proper object argument";if(!k.window||!k.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===
k.window)throw"target window is same as present window -- not allowed";var m=!1;if("string"===typeof k.origin){var q;"*"===k.origin?m=!0:null!==(q=k.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(k.origin=q[0].toLowerCase(),m=!0)}if(!m)throw"Channel.build() called with an invalid origin";if("undefined"!==typeof k.scope){if("string"!==typeof k.scope)throw"scope, when specified, must be a string";if(1<k.scope.split("::").length)throw"scope may not contain double colons: '::'";}var r=function(){for(var a=
"",b=0;5>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return a}(),u={},t={},v={},w=!1,x=[],J=function(a,b,c){var e=!1,d=!1;return{origin:b,invoke:function(b,e){if(!v[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var d=!1,f=0;f<c.length;f++)if(b===c[f]){d=!0;break}if(!d)throw"request supports no such callback '"+b+"'";B({id:a,callback:b,params:e})},error:function(b,c){d=!0;if(!v[a])throw"error called for nonexistent message: "+
a;delete v[a];B({id:a,error:b,message:c})},complete:function(b){d=!0;if(!v[a])throw"complete called for nonexistent message: "+a;delete v[a];B({id:a,result:b})},delayReturn:function(a){"boolean"===typeof a&&(e=!0===a);return e},completed:function(){return d}}},D=function(a,b,c){return window.setTimeout(function(){if(t[a]){var e="timeout ("+b+"ms) exceeded on method '"+c+"'";(1,t[a].error)("timeout_error",e);delete t[a];delete f[a]}},b)},A=function(a,b,e){if("function"===typeof k.gotMessageObserver)try{k.gotMessageObserver(a,
e)}catch(d){n("gotMessageObserver() raised an exception: "+d.toString())}if(e.id&&b){if(u[b]){var h=J(e.id,a,e.callbacks?e.callbacks:[]);v[e.id]={};try{if(e.callbacks&&c(e.callbacks)&&0<e.callbacks.length)for(a=0;a<e.callbacks.length;a++){for(var m=e.callbacks[a],r=e.params,q=m.split("/"),w=0;w<q.length-1;w++){var x=q[w];"object"!==typeof r[x]&&(r[x]={});r=r[x]}r[q[q.length-1]]=function(){var a=m;return function(b){return h.invoke(a,b)}}()}var A=u[b](h,e.params);h.delayReturn()||h.completed()||h.complete(A)}catch(d){b=
"runtime_error";e=null;"string"===typeof d?e=d:"object"===typeof d&&(d&&c(d)&&2==d.length?(b=d[0],e=d[1]):"string"===typeof d.error&&(b=d.error,d.message?"string"===typeof d.message?e=d.message:d=d.message:e=""));if(null===e)try{e=JSON.stringify(d),"undefined"==typeof e&&(e=d.toString())}catch(z){e=d.toString()}h.error(b,e)}}}else if(e.id&&e.callback)if(t[e.id]&&t[e.id].callbacks&&t[e.id].callbacks[e.callback])t[e.id].callbacks[e.callback](e.params);else n("ignoring invalid callback, id:"+e.id+" ("+
e.callback+")");else if(e.id)t[e.id]?(e.error?(1,t[e.id].error)(e.error,e.message):void 0!==e.result?(1,t[e.id].success)(e.result):(1,t[e.id].success)(),delete t[e.id],delete f[e.id]):n("ignoring invalid response: "+e.id);else if(b&&u[b])u[b]({origin:a},e.params)};a(k.window,k.origin,"string"===typeof k.scope?k.scope:"",A);var z=function(a){"string"===typeof k.scope&&k.scope.length&&(a=[k.scope,a].join("::"));return a},B=function(a,b){if(!a)throw"postMessage called with null message";n((w?"post  ":
"queue ")+" message: "+JSON.stringify(a));if(b||w){if("function"===typeof k.postMessageObserver)try{k.postMessageObserver(k.origin,a)}catch(c){n("postMessageObserver() raised an exception: "+c.toString())}k.window.postMessage(JSON.stringify(a),k.origin)}else x.push(a)},C={unbind:function(a){if(u[a]){if(!delete u[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!==typeof a)throw"'method' argument to bind must be string";if(!b||"function"!==typeof b)throw"callback missing from bind params";
if(u[a])throw"method '"+a+"' is already bound!";u[a]=b;return this},call:function(a){if(!a)throw"missing arguments to call function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!==typeof a.success)throw"'success' callback missing from call";var b={},c=[],d=[],g=function(a,e){if(0<=d.indexOf(e))throw"params cannot be a recursive data structure";d.push(e);if("object"===typeof e)for(var f in e)if(e.hasOwnProperty(f)){var h=a+(a.length?
"/":"")+f;"function"===typeof e[f]?(b[h]=e[f],c.push(h),delete e[f]):"object"===typeof e[f]&&g(h,e[f])}};g("",a.params);var h={id:e,method:z(a.method),params:a.params};c.length&&(h.callbacks=c);a.timeout&&D(e,a.timeout,z(a.method));t[e]={callbacks:b,error:a.error,success:a.success};f[e]=A;e++;B(h)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to notify must be string";B({method:z(a.method),params:a.params})},
destroy:function(){for(var a=k.window,b=k.origin,c="string"===typeof k.scope?k.scope:"",e=d[b][c],f=0;f<e.length;f++)e[f].win===a&&e.splice(f,1);0===d[b][c].length&&delete d[b][c];window.removeEventListener?window.removeEventListener("message",A,!1):window.detachEvent&&window.detachEvent("onmessage",A);w=!1;u={};v={};t={};k.origin=null;x=[];n("channel destroyed");r=""}};C.bind("__ready",function(a,b){n("ready msg received");if(w)throw"received ready message while in ready state.  help!";r="ping"===
b?r+"-R":r+"-L";C.unbind("__ready");w=!0;n("ready msg accepted.");for("ping"===b&&C.notify({method:"__ready",params:"pong"});x.length;)B(x.pop());if("function"===typeof k.onReady)k.onReady(C)});setTimeout(function(){B({method:z("__ready"),params:"ping"},!0)},0);return C}}}();d.exports=a}})})();window.app=window.app||{};
$.extend(window.app,{load_vidyard_players:function(a,c,d){var b;"function"===typeof a?(b=a,a=$("body")):(a=$(a||"body"),b=d||$.noop);d=a.find(".vidyard_container[data-vidyard-id]");c||(d=d.filter(":visible"));d.each(function(){var a=$(this),c=a.attr("data-vidyard-id"),d=$("#vidyard_"+c+":first");d.length?(a.replaceWith(d.remove()),b()):(a.attr("id","vidyard_"+c).removeAttr("data-vidyard-id"),d=MOBILE_DEVICE||window.RG_EMBEDDED_PAGE?"?width="+a.parent().width():"",$.getScript("//embed.vidyard.com/embed/"+
c+"/iframe/"+d,function(){a.removeClass("loading_with_indicator");b()}))})}});window.app=window.app||{};window.app.youtubeURLre=/https?:\/\/youtube.com\/watch|https?:\/\/www.youtube.com\/watch|https?:\/\/youtu.be\//;window.app.twitterURLre=/((http:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo|pic\.twitter\.com\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*))|(https:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo\/.*|www\.twitter\.com\/.*\/status\/.*\/photo\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*)))/i;
window.app.rgURLre=/^(https?:\/\/(.+\.)?((?:rap)?genius\.com|genius\.com)\/(\d+)(?:\/|\?|$))/i;window.app.embedlyURLre=/((https?:\/\/(.*yfrog\..*\/.*|www\.flickr\.com\/photos\/.*|flic\.kr\/.*|twitpic\.com\/.*|www\.twitpic\.com\/.*|twitpic\.com\/photos\/.*|www\.twitpic\.com\/photos\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|s.*\.photobucket\.com\/albums\/.*|phodroid\.com\/.*\/.*\/.*|www\.mobypicture\.com\/user\/.*\/view\/.*|moby\.to\/.*|xkcd\.com\/.*|www\.xkcd\.com\/.*|imgs\.xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.asofterworld\.com\/.*\.jpg|asofterworld\.com\/.*\.jpg|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|.*dribbble\.com\/shots\/.*|drbl\.in\/.*|.*\.smugmug\.com\/.*|.*\.smugmug\.com\/.*#.*|emberapp\.com\/.*\/images\/.*|emberapp\.com\/.*\/images\/.*\/sizes\/.*|emberapp\.com\/.*\/collections\/.*\/.*|emberapp\.com\/.*\/categories\/.*\/.*\/.*|embr\.it\/.*|picasaweb\.google\.com.*\/.*\/.*#.*|picasaweb\.google\.com.*\/lh\/photo\/.*|picasaweb\.google\.com.*\/.*\/.*|dailybooth\.com\/.*\/.*|brizzly\.com\/pic\/.*|pics\.brizzly\.com\/.*\.jpg|img\.ly\/.*|www\.tinypic\.com\/view\.php.*|tinypic\.com\/view\.php.*|www\.tinypic\.com\/player\.php.*|tinypic\.com\/player\.php.*|www\.tinypic\.com\/r\/.*\/.*|tinypic\.com\/r\/.*\/.*|.*\.tinypic\.com\/.*\.jpg|.*\.tinypic\.com\/.*\.png|meadd\.com\/.*\/.*|meadd\.com\/.*|.*\.deviantart\.com\/art\/.*|.*\.deviantart\.com\/gallery\/.*|.*\.deviantart\.com\/#\/.*|fav\.me\/.*|.*\.deviantart\.com|.*\.deviantart\.com\/gallery|.*\.deviantart\.com\/.*\/.*\.jpg|.*\.deviantart\.com\/.*\/.*\.gif|.*\.deviantart\.net\/.*\/.*\.jpg|.*\.deviantart\.net\/.*\/.*\.gif|www\.fotopedia\.com\/.*\/.*|fotopedia\.com\/.*\/.*|photozou\.jp\/photo\/show\/.*\/.*|photozou\.jp\/photo\/photo_only\/.*\/.*|instagr\.am\/p\/.*|instagram\.com\/p\/.*|www\.instagram\.com\/p\/.*|skitch\.com\/.*\/.*\/.*|img\.skitch\.com\/.*|share\.ovi\.com\/media\/.*\/.*|www\.questionablecontent\.net\/|questionablecontent\.net\/|www\.questionablecontent\.net\/view\.php.*|questionablecontent\.net\/view\.php.*|questionablecontent\.net\/comics\/.*\.png|www\.questionablecontent\.net\/comics\/.*\.png|picplz\.com\/user\/.*\/pic\/.*\/|twitrpix\.com\/.*|.*\.twitrpix\.com\/.*|www\.someecards\.com\/.*\/.*|someecards\.com\/.*\/.*|some\.ly\/.*|www\.some\.ly\/.*|pikchur\.com\/.*|achewood\.com\/.*|www\.achewood\.com\/.*|achewood\.com\/index\.php.*|www\.achewood\.com\/index\.php.*|www\.whosay\.com\/content\/.*|www\.whosay\.com\/photos\/.*|www\.whosay\.com\/videos\/.*|say\.ly\/.*|ow\.ly\/i\/.*|color\.com\/s\/.*|bnter\.com\/convo\/.*|mlkshk\.com\/p\/.*|lockerz\.com\/s\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|snd\.sc\/.*|www\.last\.fm\/music\/.*|www\.last\.fm\/music\/+videos\/.*|www\.last\.fm\/music\/+images\/.*|www\.last\.fm\/music\/.*\/_\/.*|www\.last\.fm\/music\/.*\/.*|www\.mixcloud\.com\/.*\/.*\/|www\.radionomy\.com\/.*\/radio\/.*|radionomy\.com\/.*\/radio\/.*|www\.hark\.com\/clips\/.*|www\.rdio\.com\/#\/artist\/.*\/album\/.*|www\.rdio\.com\/artist\/.*\/album\/.*|www\.zero-inch\.com\/.*|.*\.bandcamp\.com\/|.*\.bandcamp\.com\/track\/.*|.*\.bandcamp\.com\/album\/.*|freemusicarchive\.org\/music\/.*|www\.freemusicarchive\.org\/music\/.*|freemusicarchive\.org\/curator\/.*|www\.freemusicarchive\.org\/curator\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/templates\/story\/story\.php.*|huffduffer\.com\/.*\/.*|www\.audioboo\.fm\/boos\/.*|audioboo\.fm\/boos\/.*|boo\.fm\/b.*|www\.xiami\.com\/song\/.*|xiami\.com\/song\/.*|www\.saynow\.com\/playMsg\.html.*|www\.saynow\.com\/playMsg\.html.*|grooveshark\.com\/s\/.*|listen\.grooveshark\.com\/s\/.*|radioreddit\.com\/songs.*|www\.radioreddit\.com\/songs.*|radioreddit\.com\/\?q=songs.*|www\.radioreddit\.com\/\?q=songs.*|www\.gogoyoko\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|.*amazon\..*\/gp\/aw\/d\/.*|www\.amzn\.com\/.*|amzn\.com\/.*|www\.shopstyle\.com\/browse.*|www\.shopstyle\.com\/action\/apiVisitRetailer.*|api\.shopstyle\.com\/action\/apiVisitRetailer.*|www\.shopstyle\.com\/action\/viewLook.*|gist\.github\.com\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*|www\.crunchbase\.com\/.*\/.*|crunchbase\.com\/.*\/.*|www\.slideshare\.net\/.*\/.*|www\.slideshare\.net\/mobile\/.*\/.*|slidesha\.re\/.*|scribd\.com\/doc\/.*|www\.scribd\.com\/doc\/.*|scribd\.com\/mobile\/documents\/.*|www\.scribd\.com\/mobile\/documents\/.*|screenr\.com\/.*|polldaddy\.com\/community\/poll\/.*|polldaddy\.com\/poll\/.*|answers\.polldaddy\.com\/poll\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|issuu\.com\/.*\/docs\/.*|www\.kickstarter\.com\/projects\/.*\/.*|www\.scrapblog\.com\/viewer\/viewer\.aspx.*|ping\.fm\/p\/.*|chart\.ly\/symbols\/.*|chart\.ly\/.*|maps\.google\.com\/maps\?.*|maps\.google\.com\/\?.*|maps\.google\.com\/maps\/ms\?.*|.*\.craigslist\.org\/.*\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*|tumblr\.com\/.*|.*\.tumblr\.com\/post\/.*|www\.polleverywhere\.com\/polls\/.*|www\.polleverywhere\.com\/multiple_choice_polls\/.*|www\.polleverywhere\.com\/free_text_polls\/.*|www\.quantcast\.com\/wd:.*|www\.quantcast\.com\/.*|siteanalytics\.compete\.com\/.*|statsheet\.com\/statplot\/charts\/.*\/.*\/.*\/.*|statsheet\.com\/statplot\/charts\/e\/.*|statsheet\.com\/.*\/teams\/.*\/.*|statsheet\.com\/tools\/chartlets\?chart=.*|.*\.status\.net\/notice\/.*|identi\.ca\/notice\/.*|brainbird\.net\/notice\/.*|shitmydadsays\.com\/notice\/.*|www\.studivz\.net\/Profile\/.*|www\.studivz\.net\/l\/.*|www\.studivz\.net\/Groups\/Overview\/.*|www\.studivz\.net\/Gadgets\/Info\/.*|www\.studivz\.net\/Gadgets\/Install\/.*|www\.studivz\.net\/.*|www\.meinvz\.net\/Profile\/.*|www\.meinvz\.net\/l\/.*|www\.meinvz\.net\/Groups\/Overview\/.*|www\.meinvz\.net\/Gadgets\/Info\/.*|www\.meinvz\.net\/Gadgets\/Install\/.*|www\.meinvz\.net\/.*|www\.schuelervz\.net\/Profile\/.*|www\.schuelervz\.net\/l\/.*|www\.schuelervz\.net\/Groups\/Overview\/.*|www\.schuelervz\.net\/Gadgets\/Info\/.*|www\.schuelervz\.net\/Gadgets\/Install\/.*|www\.schuelervz\.net\/.*|myloc\.me\/.*|pastebin\.com\/.*|pastie\.org\/.*|www\.pastie\.org\/.*|redux\.com\/stream\/item\/.*\/.*|redux\.com\/f\/.*\/.*|www\.redux\.com\/stream\/item\/.*\/.*|www\.redux\.com\/f\/.*\/.*|cl\.ly\/.*|cl\.ly\/.*\/content|speakerdeck\.com\/u\/.*\/p\/.*|www\.kiva\.org\/lend\/.*|www\.timetoast\.com\/timelines\/.*|storify\.com\/.*\/.*|.*meetup\.com\/.*|meetu\.ps\/.*|www\.dailymile\.com\/people\/.*\/entries\/.*|.*\.kinomap\.com\/.*|www\.metacdn\.com\/api\/users\/.*\/content\/.*|www\.metacdn\.com\/api\/users\/.*\/media\/.*|prezi\.com\/.*\/.*|.*\.uservoice\.com\/.*\/suggestions\/.*|formspring\.me\/.*|www\.formspring\.me\/.*|formspring\.me\/.*\/q\/.*|www\.formspring\.me\/.*\/q\/.*|twitlonger\.com\/show\/.*|www\.twitlonger\.com\/show\/.*|tl\.gd\/.*|www\.qwiki\.com\/q\/.*|crocodoc\.com\/.*|.*\.crocodoc\.com\/.*|.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|.*\.youtube\.com\/user\/.*|.*\.youtube\.com\/.*#.*\/.*|m\.youtube\.com\/watch.*|m\.youtube\.com\/index.*|.*\.youtube\.com\/profile.*|.*\.youtube\.com\/view_play_list.*|.*\.youtube\.com\/playlist.*|www\.vevo\.com\/watch\/.*|www\.vevo\.com\/video\/.*|.*justin\.tv\/.*|.*justin\.tv\/.*\/b\/.*|.*justin\.tv\/.*\/w\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|www\.ustream\.tv\/.*|qik\.com\/video\/.*|qik\.com\/.*|qik\.ly\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|collegehumor\.com\/video:.*|collegehumor\.com\/video\/.*|www\.collegehumor\.com\/video:.*|www\.collegehumor\.com\/video\/.*|.*twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|www\.metacafe\.com\/w\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|www\.overstream\.net\/view\.php\?oid=.*|www\.livestream\.com\/.*|www\.worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|teachertube\.com\/viewVideo\.php.*|www\.teachertube\.com\/viewVideo\.php.*|www1\.teachertube\.com\/viewVideo\.php.*|www2\.teachertube\.com\/viewVideo\.php.*|bambuser\.com\/v\/.*|bambuser\.com\/channel\/.*|bambuser\.com\/channel\/.*\/broadcast\/.*|www\.schooltube\.com\/video\/.*\/.*|bigthink\.com\/ideas\/.*|bigthink\.com\/series\/.*|sendables\.jibjab\.com\/view\/.*|sendables\.jibjab\.com\/originals\/.*|www\.xtranormal\.com\/watch\/.*|socialcam\.com\/v\/.*|www\.socialcam\.com\/v\/.*|dipdive\.com\/media\/.*|dipdive\.com\/member\/.*\/media\/.*|dipdive\.com\/v\/.*|.*\.dipdive\.com\/media\/.*|.*\.dipdive\.com\/v\/.*|v\.youku\.com\/v_show\/.*\.html|v\.youku\.com\/v_playlist\/.*\.html|www\.snotr\.com\/video\/.*|snotr\.com\/video\/.*|video\.jardenberg\.se\/.*|www\.clipfish\.de\/.*\/.*\/video\/.*|www\.myvideo\.de\/watch\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|www\.hulu\.com\/w\/.*|hulu\.com\/watch.*|hulu\.com\/w\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.funnyordie\.com\/m\/.*|funnyordie\.com\/videos\/.*|funnyordie\.com\/m\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|vimeo\.com\/m\/#\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/trailer|movies\.yahoo\.com\/movie\/.*\/video|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|www\.trailerspy\.com\/trailer\/.*\/.*|www\.trailerspy\.com\/trailer\/.*|www\.trailerspy\.com\/view_video\.php.*|www\.atom\.com\/.*\/.*\/|fora\.tv\/.*\/.*\/.*\/.*|www\.spike\.com\/video\/.*|www\.gametrailers\.com\/video\/.*|gametrailers\.com\/video\/.*|www\.koldcast\.tv\/video\/.*|www\.koldcast\.tv\/#video:.*|techcrunch\.tv\/watch.*|techcrunch\.tv\/.*\/watch.*|mixergy\.com\/.*|video\.pbs\.org\/video\/.*|www\.zapiks\.com\/.*|tv\.digg\.com\/diggnation\/.*|tv\.digg\.com\/diggreel\/.*|tv\.digg\.com\/diggdialogg\/.*|www\.trutv\.com\/video\/.*|www\.nzonscreen\.com\/title\/.*|nzonscreen\.com\/title\/.*|app\.wistia\.com\/embed\/medias\/.*|hungrynation\.tv\/.*\/episode\/.*|www\.hungrynation\.tv\/.*\/episode\/.*|hungrynation\.tv\/episode\/.*|www\.hungrynation\.tv\/episode\/.*|indymogul\.com\/.*\/episode\/.*|www\.indymogul\.com\/.*\/episode\/.*|indymogul\.com\/episode\/.*|www\.indymogul\.com\/episode\/.*|channelfrederator\.com\/.*\/episode\/.*|www\.channelfrederator\.com\/.*\/episode\/.*|channelfrederator\.com\/episode\/.*|www\.channelfrederator\.com\/episode\/.*|tmiweekly\.com\/.*\/episode\/.*|www\.tmiweekly\.com\/.*\/episode\/.*|tmiweekly\.com\/episode\/.*|www\.tmiweekly\.com\/episode\/.*|99dollarmusicvideos\.com\/.*\/episode\/.*|www\.99dollarmusicvideos\.com\/.*\/episode\/.*|99dollarmusicvideos\.com\/episode\/.*|www\.99dollarmusicvideos\.com\/episode\/.*|ultrakawaii\.com\/.*\/episode\/.*|www\.ultrakawaii\.com\/.*\/episode\/.*|ultrakawaii\.com\/episode\/.*|www\.ultrakawaii\.com\/episode\/.*|barelypolitical\.com\/.*\/episode\/.*|www\.barelypolitical\.com\/.*\/episode\/.*|barelypolitical\.com\/episode\/.*|www\.barelypolitical\.com\/episode\/.*|barelydigital\.com\/.*\/episode\/.*|www\.barelydigital\.com\/.*\/episode\/.*|barelydigital\.com\/episode\/.*|www\.barelydigital\.com\/episode\/.*|threadbanger\.com\/.*\/episode\/.*|www\.threadbanger\.com\/.*\/episode\/.*|threadbanger\.com\/episode\/.*|www\.threadbanger\.com\/episode\/.*|vodcars\.com\/.*\/episode\/.*|www\.vodcars\.com\/.*\/episode\/.*|vodcars\.com\/episode\/.*|www\.vodcars\.com\/episode\/.*|confreaks\.net\/videos\/.*|www\.confreaks\.net\/videos\/.*|video\.allthingsd\.com\/video\/.*|videos\.nymag\.com\/.*|aniboom\.com\/animation-video\/.*|www\.aniboom\.com\/animation-video\/.*|clipshack\.com\/Clip\.aspx\?.*|www\.clipshack\.com\/Clip\.aspx\?.*|grindtv\.com\/.*\/video\/.*|www\.grindtv\.com\/.*\/video\/.*|ifood\.tv\/recipe\/.*|ifood\.tv\/video\/.*|ifood\.tv\/channel\/user\/.*|www\.ifood\.tv\/recipe\/.*|www\.ifood\.tv\/video\/.*|www\.ifood\.tv\/channel\/user\/.*|logotv\.com\/video\/.*|www\.logotv\.com\/video\/.*|lonelyplanet\.com\/Clip\.aspx\?.*|www\.lonelyplanet\.com\/Clip\.aspx\?.*|streetfire\.net\/video\/.*\.htm.*|www\.streetfire\.net\/video\/.*\.htm.*|trooptube\.tv\/videos\/.*|www\.trooptube\.tv\/videos\/.*|sciencestage\.com\/v\/.*\.html|sciencestage\.com\/a\/.*\.html|www\.sciencestage\.com\/v\/.*\.html|www\.sciencestage\.com\/a\/.*\.html|www\.godtube\.com\/featured\/video\/.*|godtube\.com\/featured\/video\/.*|www\.godtube\.com\/watch\/.*|godtube\.com\/watch\/.*|www\.tangle\.com\/view_video.*|mediamatters\.org\/mmtv\/.*|www\.clikthrough\.com\/theater\/video\/.*|espn\.go\.com\/video\/clip.*|espn\.go\.com\/.*\/story.*|abcnews\.com\/.*\/video\/.*|abcnews\.com\/video\/playerIndex.*|abcnews\.go\.com\/.*\/video\/.*|abcnews\.go\.com\/video\/playerIndex.*|washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.boston\.com\/video.*|boston\.com\/video.*|www\.facebook\.com\/photo\.php.*|www\.facebook\.com\/video\/video\.php.*|www\.facebook\.com\/v\/.*|www\.facebook\.com\/.*\/videos\/.*|cnbc\.com\/id\/.*\?.*video.*|www\.cnbc\.com\/id\/.*\?.*video.*|cnbc\.com\/id\/.*\/play\/1\/video\/.*|www\.cnbc\.com\/id\/.*\/play\/1\/video\/.*|cbsnews\.com\/video\/watch\/.*|www\.google\.com\/buzz\/.*\/.*\/.*|www\.google\.com\/buzz\/.*|www\.google\.com\/profiles\/.*|google\.com\/buzz\/.*\/.*\/.*|google\.com\/buzz\/.*|google\.com\/profiles\/.*|www\.cnn\.com\/video\/.*|edition\.cnn\.com\/video\/.*|money\.cnn\.com\/video\/.*|today\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/ns\/.*|today\.msnbc\.msn\.com\/id\/.*\/ns\/.*|multimedia\.foxsports\.com\/m\/video\/.*\/.*|msn\.foxsports\.com\/video.*|www\.globalpost\.com\/video\/.*|www\.globalpost\.com\/dispatch\/.*|guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|www\.guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|bravotv\.com\/.*\/.*\/videos\/.*|www\.bravotv\.com\/.*\/.*\/videos\/.*|video\.nationalgeographic\.com\/.*\/.*\/.*\.html|dsc\.discovery\.com\/videos\/.*|animal\.discovery\.com\/videos\/.*|health\.discovery\.com\/videos\/.*|investigation\.discovery\.com\/videos\/.*|military\.discovery\.com\/videos\/.*|planetgreen\.discovery\.com\/videos\/.*|science\.discovery\.com\/videos\/.*|tlc\.discovery\.com\/videos\/.*|video\.forbes\.com\/fvn\/.*|vine\.co\/v\/.*|www\.vine\.co\/v\/.*|video\.foxnews\.com\/v\/.*|thinglink\.com\/.*|www\.thinglink\.com\/.*|nbcnews\.com\/.*|www\.nbcnews\.com\/.*|itunes\.apple\.com\/.*)))/i;
window.app=window.app||{};
app.templates={ajax_error_message:'<h1>Whoops, our bad!!!</h1>       <h3>Something went wrong; we have to reload the page</h3>       <p class="callout"><a class="facebox" href="/feedback/new">Contact us</a> if this keeps happening</p>',link_injection_error_message:"<h1>Something weird is going on!</h1>       <p>We noticed some links on the page that shouldn't be there. It's       possible you have a malicious browser extension installed that is       putting spam on the page.</p>",twitter_embed:Hogan.compile('<blockquote class="twitter-tweet"><a href="{{tweet_url}}"></a></blockquote>'),
cosign_message:function(){var a=null;return function(){a||(a=Hogan.compile('<li class="cosign_message" data-user-id="{{user_id}}" data-uncosign-path="{{uncosign_path}}"><a href="{{artist_url}}" class="cosigner">You</a> cosigned this '+app.sc("annotation.singular_noun")+' {{#moderator}}<a href="#" class="remove_cosign">Remove</a>{{/moderator}}</li>'));return a}}(),rg_standalone_annotation_embed:function(){var a=null;return function(){a||(a=Hogan.compile('<blockquote class="rg_standalone_container" data-src="//'+
CANONICAL_DOMAIN+"/annotations/{{annotation_id}}/standalone_embed"+("undefined"!==typeof RG_EMBEDDED_PAGE&&RG_EMBEDDED_PAGE?"":"?dark=1")+'"></blockquote>'));return a}}()};window.app=window.app||{};$.expr[":"].inner_text_matches=function(a,c,d){return(new RegExp(d[3],"i")).test($.trim($(a).text()))};
$.extend(window.app,{setup_embedly_pro:function(a,c){var d,b;"function"===typeof a?(b=a,d=$(".embedly_pro:visible")):(b=c||$.noop,d=$(a||".embedly_pro:visible"));d.find("a:inner_text_matches(^https?://)").each(function(){if(app.embedlyURLre.test(this.href))return!0;var a=$(this);a.embedly({key:EMBEDLY_KEY,width:"",secure:!0,query:{secure:"true"},display:function(c){if(c.description&&a.parent().text().trim()===a.text().trim()){var d='<div class="embedly_preview"><img class="thumb" src="'+(c.thumbnail_url||
"")+'">           <div class="text"><a class="title" href="'+c.original_url+'">'+c.title+'</a>           <a class="provider" href="'+c.provider_url+'">'+c.provider_name+'</a>           <div class="description">'+c.description+"</div></div></div>";c.thumbnail_url||(d=$(d).removeClass("has_thumb").find("img.thumb").remove().end().outer_html());a.replaceWith(d)}else a.text(c.title);b()}})})},setup_embedly:function(a,c){var d,b;"function"===typeof a?(b=a,d=$(".embedly:visible")):(b=c||$.noop,d=$(a||".embedly:visible"));
d.find("a:inner_text_matches(^https?://)").each(function(){var a=$(this),c;if(a.parent().is(".embedly_preview"))return!0;if(app.twitterURLre.test(this.href))a.replaceWith($(app.templates.twitter_embed.render({tweet_url:this.href}))),$.getScript("//platform.twitter.com/widgets.js",b);else if(app.rgURLre.test(this.href)&&this.href===a.text()&&!a.closest(".cont-annotations.act-standlone_embed").length)c=app.rgURLre.exec(this.href).pop(),a.replaceWith($(app.templates.rg_standalone_annotation_embed().render({annotation_id:c}))),
$.getScript("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",b);else{if(c=this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))return a.addClass("vidyard_container").attr("data-vidyard-id",c[2]).removeAttr("href"),app.load_vidyard_players(d,!1,b),!0;if(app.embedlyURLre.test(this.href))c=a.closest("[data-embedly-width]").attr("data-embedly-width")||a.parent().width()-10,MOBILE_DEVICE&&(c=a.parent().width()),a.embedly({addImageStyles:!1,className:"embedly_preview",
secure:!0,query:{maxwidth:c,luxe:!MOBILE_DEVICE,secure:"true"},key:EMBEDLY_KEY,width:"",display:function(a){var c=a.html;/soundcloud\.com/.test(c)&&(a.html=c.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),a.height=165);a.display();b()}});else return!0}a.text("Loading embed...")});app.setup_embedly_pro(a,b)}});
window.Modernizr=function(a,c,d){function b(a,b){for(var c in a){var e=a[c];if(!~(""+e).indexOf("-")&&k[e]!==d)return"pfx"==b?e:!0}return!1}function g(a,c,e){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+n.join(f+" ")+f).split(" ");if("string"===typeof c||"undefined"===typeof c)c=b(g,c);else a:{g=(a+" "+m.join(f+" ")+f).split(" "),a=g;for(var h in a)if(f=c[a[h]],f!==d){c=!1===e?a[h]:"function"===typeof f?f.bind(e||c):f;break a}c=!1}return c}var e={},h=c.documentElement,f=c.createElement("modernizr"),
k=f.style,l=" -webkit- -moz- -o- -ms- ".split(" "),n=["Webkit","Moz","O","ms"],m=["webkit","moz","o","ms"],f={},q=[],r=q.slice,u,t=function(a,b,e,d){var f,g,k,l,n=c.createElement("div"),m=c.body,t=m||c.createElement("body");if(parseInt(e,10))for(;e--;)k=c.createElement("div"),k.id=d?d[e]:"modernizr"+(e+1),n.appendChild(k);return f=['&#173;<style id="smodernizr">',a,"</style>"].join(""),n.id="modernizr",(m?n:t).innerHTML+=f,t.appendChild(n),m||(t.style.background="",t.style.overflow="hidden",l=h.style.overflow,
h.style.overflow="hidden",h.appendChild(t)),g=b(n,a),m?n.parentNode.removeChild(n):(t.parentNode.removeChild(t),h.style.overflow=l),!!g},v={}.hasOwnProperty,w;"undefined"===typeof v||"undefined"===typeof v.call?w=function(a,b){return b in a&&"undefined"===typeof a.constructor.prototype[b]}:w=function(a,b){return v.call(a,b)};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=r.call(arguments,1),e=function(){if(this instanceof
e){var d=function(){};d.prototype=b.prototype;var d=new d,f=b.apply(d,c.concat(r.call(arguments)));return Object(f)===f?f:d}return b.apply(a,c.concat(r.call(arguments)))};return e});f.flexbox=function(){return g("flexWrap")};f.flexboxlegacy=function(){return g("boxDirection")};f.touch=function(){var b;return"ontouchstart"in a||a.DocumentTouch&&c instanceof DocumentTouch?b=!0:t(["@media (",l.join("touch-enabled),("),"modernizr){#modernizr{top:9px;position:absolute}}"].join(""),function(a){b=9===a.offsetTop}),
b};f.history=function(){return!!a.history&&!!history.pushState};f.csstransforms=function(){return!!g("transform")};f.csstransforms3d=function(){var a=!!g("perspective");return a&&"webkitPerspective"in h.style&&t("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a};for(var x in f)w(f,x)&&(u=x.toLowerCase(),e[u]=f[x](),q.push((e[u]?"":"no-")+u));e.addTest=function(a,b){if("object"==typeof a)for(var c in a)w(a,
c)&&e.addTest(c,a[c]);else{a=a.toLowerCase();if(e[a]!==d)return e;b="function"==typeof b?b():b;h.className+=" "+(b?"":"no-")+a;e[a]=b}return e};k.cssText="";return f=null,function(a,b){function c(){var a=v.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b=r[a[m]];return b||(b={},t++,a[m]=t,r[t]=b),b}function d(a,c,f){c||(c=b);if(q)return c.createElement(a);f||(f=e(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():l.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),
!g.canHaveChildren||k.test(a)||g.tagUrn?g:f.frag.appendChild(g)}function f(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag());a.createElement=function(c){return v.shivMethods?d(c,a,b):b.createElem(c)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(v,
b.frag)}function g(a){a||(a=b);var c=e(a);if(v.shivCSS&&!n&&!c.hasCSS){var d,h=a;d=h.createElement("p");h=h.getElementsByTagName("head")[0]||h.documentElement;d=(d.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",h.insertBefore(d.lastChild,h.firstChild));c.hasCSS=!!d}return q||f(a,c),a}var h=a.html5||{},k=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
l=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,n,m="_html5shiv",t=0,r={},q;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>";n="hidden"in a;var c;if(!(c=1==a.childNodes.length)){b.createElement("a");var e=b.createDocumentFragment();c="undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}q=c}catch(d){q=n=!0}})();var v={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
version:"3.7.0",shivCSS:!1!==h.shivCSS,supportsUnknownElements:q,shivMethods:!1!==h.shivMethods,type:"default",shivDocument:g,createElement:d,createDocumentFragment:function(a,d){a||(a=b);if(q)return a.createDocumentFragment();d=d||e(a);for(var f=d.frag.cloneNode(),g=0,h=c(),k=h.length;g<k;g++)f.createElement(h[g]);return f}};a.html5=v;g(b)}(this,c),e._version="2.8.3",e._prefixes=l,e._domPrefixes=m,e._cssomPrefixes=n,e.testProp=function(a){return b([a])},e.testAllProps=g,e.testStyles=t,h.className=
h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+q.join(" ")),e}(this,this.document);
(function(a,c,d){function b(a){return"[object Function]"==u.call(a)}function g(a){return"string"==typeof a}function e(){}function h(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function f(){var a=t.shift();v=1;a?a.t?q(function(){("c"==a.t?N.injectCss:N.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),f()):v=0}function k(a,b,e,d,g,k,l){function n(c){if(!u&&h(m.readyState)&&(A.r=u=1,!v&&f(),m.onload=m.onreadystatechange=null,c)){"img"!=a&&q(function(){J.removeChild(m)},50);for(var e in C[b])C[b].hasOwnProperty(e)&&
C[b][e].onload()}}l=l||N.errorTimeout;var m=c.createElement(a),u=0,w=0,A={t:e,s:b,e:g,a:k,x:l};1===C[b]&&(w=1,C[b]=[]);"object"==a?m.data=b:(m.src=b,m.type=a);m.width=m.height="0";m.onerror=m.onload=m.onreadystatechange=function(){n.call(this,w)};t.splice(d,0,A);"img"!=a&&(w||2===C[b]?(J.insertBefore(m,x?null:r),q(n,l)):C[b].push(m))}function l(a,b,c,e,d){return v=0,b=b||"j",g(a)?k("c"==b?A:D,a,b,this.i++,c,e,d):(t.splice(this.i++,0,a),1==t.length&&f()),this}function n(){var a=N;return a.loader={load:l,
i:0},a}var m=c.documentElement,q=a.setTimeout,r=c.getElementsByTagName("script")[0],u={}.toString,t=[],v=0,w="MozAppearance"in m.style,x=w&&!!c.createRange().compareNode,J=x?m:r.parentNode,m=a.opera&&"[object Opera]"==u.call(a.opera),m=!!c.attachEvent&&!m,D=w?"object":m?"script":"img",A=m?"script":D,z=Array.isArray||function(a){return"[object Array]"==u.call(a)},B=[],C={},K={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},M,N;N=function(a){function c(a){a=a.split("!");var b=B.length,e=
a.pop(),d=a.length,e={url:e,origUrl:e,prefixes:a},f,g,h;for(g=0;g<d;g++)h=a[g].split("="),(f=K[h.shift()])&&(e=f(e,h));for(g=0;g<b;g++)e=B[g](e);return e}function f(a,e,g,h,k){var l=c(a),m=l.autoCallback;l.url.split(".").pop().split("?").shift();l.bypass||(e&&(e=b(e)?e:e[a]||e[h]||e[a.split("/").pop().split("?")[0]]),l.instead?l.instead(a,e,g,h,k):(C[l.url]?l.noexec=!0:C[l.url]=1,g.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":d,l.noexec,l.attrs,l.timeout),
(b(e)||b(m))&&g.load(function(){n();e&&e(l.origUrl,k,h);m&&m(l.origUrl,k,h);C[l.url]=2})))}function h(a,c){function d(a,e){if(a)if(g(a))e||(n=function(){var a=[].slice.call(arguments);m.apply(this,a);t()}),f(a,n,c,0,k);else{if(Object(a)===a)for(q in r=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(q)&&(!e&&!--r&&(b(n)?n=function(){var a=[].slice.call(arguments);m.apply(this,a);t()}:n[q]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,
b);t()}}(m[q])),f(a[q],n,c,q,k))}else!e&&t()}var k=!!a.test,l=a.load||a.both,n=a.callback||e,m=n,t=a.complete||e,r,q;d(k?a.yep:a.nope,!!l);l&&d(l)}var k,l,m=this.yepnope.loader;if(g(a))f(a,0,m,0);else if(z(a))for(k=0;k<a.length;k++)l=a[k],g(l)?f(l,0,m,0):z(l)?N(l):Object(l)===l&&h(l,m);else Object(a)===a&&h(a,m)};N.addPrefix=function(a,b){K[a]=b};N.addFilter=function(a){B.push(a)};N.errorTimeout=1E4;null==c.readyState&&c.addEventListener&&(c.readyState="loading",c.addEventListener("DOMContentLoaded",
M=function(){c.removeEventListener("DOMContentLoaded",M,0);c.readyState="complete"},0));a.yepnope=n();a.yepnope.executeStack=f;a.yepnope.injectJs=function(a,b,d,g,k,l){var n=c.createElement("script"),m,t;g=g||N.errorTimeout;n.src=a;for(t in d)n.setAttribute(t,d[t]);b=l?f:b||e;n.onreadystatechange=n.onload=function(){!m&&h(n.readyState)&&(m=1,b(),n.onload=n.onreadystatechange=null)};q(function(){m||(m=1,b(1))},g);k?n.onload():r.parentNode.insertBefore(n,r)};a.yepnope.injectCss=function(a,b,d,g,h,k){g=
c.createElement("link");var l;b=k?f:b||e;g.href=a;g.rel="stylesheet";g.type="text/css";for(l in d)g.setAttribute(l,d[l]);h||(r.parentNode.insertBefore(g,r),q(b,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};Modernizr.addTest("cssfilters",function(){var a=document.createElement("div");return a.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!a.style.length&&(void 0===document.documentMode||9<document.documentMode)});
(function(a,c){function d(b,c){var e=function(d){if(!c.is(":not(:visible)"))if(a(d.target).closest(c).length)a(document).one("click",e);else return b.toggle_target(!1),!a(d.target).is_toggle_target_control_for(c)};a(document).one("click",e)}a.fn.scroll_lock=function(){return a(this).on("DOMMouseScroll mousewheel",function(b){var c=a(this),e=this.scrollTop,d=this.scrollHeight,f=c.height(),k="DOMMouseScroll"==b.type?-40*b.originalEvent.detail:b.originalEvent.wheelDelta,l=0<k,n=function(){b.stopPropagation();
b.preventDefault();return b.returnValue=!1};if(!l&&-k>d-f-e)return c.scrollTop(d),n();if(l&&k>e)return c.scrollTop(0),n()})};a.fn.scroll_release=function(){return a(this).off("DOMMouseScroll mousewheel")};a.fn.outer_html=function(){return this[0].outerHTML};a.fn.unique_items_in_array=function(){var b=[];a.each(this,function(c,e){-1==a.inArray(e,b)&&b.push(e)});return b};a.fn.force_reflow=function(){this[0].offsetHeight;return this};a.fn.is_scrolled_into_view=function(){return this.is_scrolled_vertically_into_view()&&
this.is_scrolled_horizontally_into_view()};a.fn.is_scrolled_vertically_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.top&&a.bottom<=window.innerHeight};a.fn.is_scrolled_horizontally_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.left&&a.right<=window.innerWidth};a.fn.scroll_bottom=function(){var a=this.prop("innerHeight");if(void 0!==a)return a+this.scrollTop()};a.fn.get_bounding_client_rect=function(){for(var a=this[0].getBoundingClientRect(),a={top:a.top,
bottom:a.bottom,left:a.left,right:a.right},c=1;c<this.length;c++){var e=this[c].getBoundingClientRect();a.top=Math.min(a.top,e.top);a.bottom=Math.max(a.bottom,e.bottom);a.left=Math.min(a.left,e.left);a.right=Math.max(a.right,e.right)}a.height=a.bottom-a.top;a.width=a.right-a.left;return a};a.fn.closest_block_level_element=function(){return this.parents().filter(function(){return"block"===a(this).css("display")}).first()};a.fn.is_block_level_element=function(){var b=a(this).css("display");return void 0===
b?!1:!("inline"===b||"none"===b)};a.fn.on_screen=function(b){a(this).waypoint(b,{offset:"150%",triggerOnce:!0})};a.fn.auto_load_more_on_scroll=function(){a(this).scroll(function(){a.doTimeout("context_scroll",250,function(){Waypoint.refreshAll();var b=a("a.more:visible:not(.loading, .no_auto_more a)");b.on_screen(function(){b.click()})})});return this};a.fn.scrollToCenterOfScreen=function(b){b=b||{};if(!this.length)return this;var c=a(b.scroller||(MOBILE_DEVICE?"#container":document)),e=a(window).height(),
d=this.height();c.scrollTo(this,{offset:d/2-e/2,onAfter:b.onAfter||function(){}});return this};a.fn.retainingScrollPosition=function(a,c){if(!a.length)return c(),this;var e=a.offset().top,d=this.scrollTop();c();var f=a.offset().top;if(f===e)return this;this.scrollTop(d+(f-e));return this};a.fn.reloadTooltip=function(){var a;try{a=this.qtip("api")}catch(c){return this}a.updateContent("Loading...");a.loadContent(a.options.content.url);return this};a.fn.reset_editable=function(){this.length&&"function"==
typeof this[0].reset&&this[0].reset()};a.fn.counter_value=function(){return parseInt(this.text().replace(/[^0-9]/g,""))};a.fn.change_counter_value_by=function(a){this.text(this.text().replace(/[0-9]+/,this.counter_value()+a))};a.fn.detect=function(a){var c=null;this.each(function(){if(a.call(this))return c=this,!1});return c};a.fn.insertAtCursor=function(a){return this.each(function(){if(this.selectionStart||"0"==this.selectionStart){var c=this.selectionStart,e=this.selectionEnd,d=this.scrollTop;
this.value=this.value.substring(0,c)+a+this.value.substring(e,this.value.length);this.focus();this.selectionStart=c+a.length;this.selectionEnd=c+a.length;this.scrollTop=d}else this.value+=a,this.focus()})};a.fn.submitWithAjaxQueue=function(b){var c=(b||{}).complete||a.noop;return this.each(function(){var e=a(this);app.ajaxQueue.add(a.extend({type:this.method,url:this.action,data:e.serialize()},b,{complete:function(){e.trigger("ajax:complete");c.apply(this,arguments)}}))})};a.referents_for_this_annotation=
{settings:{selector:function(a){return'a[data-id="'+a+'"]'},attribute:"data-id"}};a.fn.referents_for_this_annotation=function(){var b=this.attr(a.referents_for_this_annotation.settings.attribute),c=a.referents_for_this_annotation.settings.selector;return void 0===b?this:a(c(b))};a.fn.hydrate_diff=function(){a(this).each(function(){var b=a(this),c=new diff_match_patch,e=c.diff_main(b.data("before"),b.data("after"));c.diff_cleanupSemantic(e);b.html(c.diff_prettyHtml(e).replace(/&para;/g,""))});return this};
a.fn.chosen_auto_choose=function(b){var c=a(this),e=c.find('option[value="'+b+'"]');c.find("option.auto-selected").removeAttr("selected").removeClass("auto-selected");e.is(":selected")||e.attr("selected",!0).addClass("auto-selected");setTimeout(function(){var a=c.parent().find("ul.chzn-choices"),b=a.parent().attr("id");a.find("#"+b+"_c_"+e.index()).addClass("locked").siblings().removeClass("locked")},0);c.trigger("liszt:updated")};a.fn.toggle_target=function(b){var c=a(this).toggleClass("pressed",
b),e=c.attr("data-relative")?c.find(c.attr("data-target")):a(c.attr("data-target")),h=c.attr("data-show-with-class");h?e.toggleClass(h,b):e.toggle(b);(b=e.is(":visible"))&&app.process_auto_load_containers&&app.process_auto_load_containers();void 0!==c.attr("data-hide-on-blur")&&d(c,e);c.attr("data-hide-siblings")&&(e.is(":visible")?(e.siblings(":visible").addClass("toggle_target_hidden_sibling"),h?e.siblings().removeClass(h):e.siblings(":visible").hide()):e.siblings().removeClass("toggle_target_hidden_sibling"),
c.siblings(".toggle_target").removeClass("pressed"));h=c.attr("data-toggles-to-hide");void 0!==h&&b&&a(h).not(c).toggle_target(!1);(c=c.attr("data-focus"))&&a(c).focus();e.trigger(b?"toggle_target:visible":"toggle_target:hidden")};a.fn.is_toggle_target_control_for=function(b){var c=a(this).closest(".toggle_target");return c.length&&b.is(c.attr("data-target"))};a.fn.dirtyable=function(){if("undefined"===typeof this.data("dirty")){var b=this;this.data("dirty",!1);this.on("dirtyable:changed",function(a,
c){b.data("dirty",c).toggleClass("dirty",c)});this.on("input propertychange",function(){b.trigger("dirtyable:changed",!!b.val())});this.each(function(){var b=a(this),c=b.closest("form")[0];if(c){var d="function"===typeof c.onsubmit?c.onsubmit.bind(c):function(){return!0};c.onsubmit=function(){b.trigger("dirtyable:changed",!1);return d()};var f="function"===typeof c.onreset?c.onreset.bind(c):function(){return!0};c.onreset=function(){b.trigger("dirtyable:changed",!1);return f()}}})}};a.fn.values_for_attribute=
function(b){return a.map(a(this),function(c){return a(c).attr(b)})};a.when_all=function(b){return a.when.apply(a,b)};a.fn.toggle_boolean_attribute=function(b){var c=a(this);c.attr(b)?c.removeAttr(b):c.attr(b,!0)};a.trim=function(a){return(a||"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.html_to_text=function(b){return a("<div>").prop("innerHTML",b).text()};a.capitalize_first_letter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};a.hyphen_compatible_titleize=function(a){return a.replace(/\b('?[a-z])/g,
function(a){return a.toUpperCase()})};a.trim_to_length=function(b,c){return b.length>c?a.trim(b).substring(0,c).split(" ").slice(0,-1).join(" ")+"...":b};a.fn.unwrap_contents=function(){return a(this).contents().unwrap()};a.fn.acts_like_input=function(){var b=a(this);return b.is(":input")||b.prop("isContentEditable")};a.fn.cache_iframe_contents=function(){this.each(function(){this.src||this.srcdoc||!this.contentWindow||(this.srcdoc=this.contentWindow.document.documentElement.outerHTML)})};a.fn.capture=
function(b){var c,e;2===arguments.length?e=arguments[1]:(c=arguments[1],e=arguments[2]);var d=function(b,d){var h=b.originalEvent,n;if(n=c?a(h.target).closest(c)[0]:d)h=a.extend(a.event.fix(h),{currentTarget:n,delegateTarget:d,target:h.target}),!1===e.call(n,h)&&(h.stopPropagation(),h.preventDefault())};this.each(function(){var c=a(this),e=c.data("_capture_event_listener");e||(e=a({}),c.data("_capture_event_listener",e));e.prop(b)||(e.prop(b,!0),this.addEventListener(b,function(b){e.triggerHandler(a.Event(b),
this)},!0));e.on(b,d)});return this};void 0!==a.facebox&&(a.facebox_then_reload=function(b,c){a.facebox(b);a(document).bind("close.facebox",function(){(c||PRODUCTION_ENV)&&window.location.reload(!0)})});a.ajax_with_retry=function(b){b=a.extend({},{retry_limit:2,type:"get",dataType:"html",success:function(){},data:{}},b);a.ajax({url:b.url,type:b.type,data:b.data,dataType:b.dataType,try_count:0,retry_limit:b.retry_limit,success:b.success,error:function(){this.try_count++;this.try_count<=this.retry_limit&&
a.ajax(this)}})};a.event_emitter={ensure_jquery_wrapper:function(){return this.jquery_wrapper||(this.jquery_wrapper=a(this))},emit:function(a,c){this.ensure_jquery_wrapper().triggerHandler(a,c)},once:function(a,c){this.ensure_jquery_wrapper().one(a,c)},on:function(a,c){this.ensure_jquery_wrapper().bind(a,c)},off:function(a,c){this.ensure_jquery_wrapper().unbind(a,c)}};a.get_selection=function(){var b=(window.getSelection||document.getSelection||a.noop)();if("undefined"!==typeof b&&b.rangeCount&&!b.isCollapsed)return b};
a.get_selection_range=function(){return getSelection().getRangeAt(0)};a.on_body_available=function(){var b=a.Deferred();if(document.body)b.resolve();else{var c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!c)return a;(new c(function(a,c){document.body&&(c.disconnect(),b.resolve())})).observe(document.documentElement,{childList:!0})}c=b.promise();return c.done.bind(c)}();a(function(){var b=function(){var b=a.get_selection();if(b)return a("<div>").append(b.getRangeAt(0).cloneContents()).html()};
a(document).on("mouseup",function(){setTimeout(function(){var b=a.get_selection();if(b)for(var c=0;c<b.rangeCount;c++){for(var d=b.getRangeAt(c),g=d.commonAncestorContainer;g.nodeType!==Node.ELEMENT_NODE;)g=g.parentNode;var l=a.Event("textselected",{selection:b,range:d,triggering_event:l});a(g).trigger(l)}},0)});if(c.touch){var d=function(c){b()&&a(c.target).trigger("textselected",{triggering_event:c});window.setImmediate(function(){a(document).one("selectionchange",d)})};a(document).one("selectionchange",
d)}})})(jQuery,Modernizr);
(function(a,c){"function"===typeof define&&define.amd?define(["jquery"],function(a){return c(a)}):"object"===typeof exports?module.exports=c(require("jquery")):c(jQuery)})(this,function(a){var c,d,b,g,e,h,f,k,l,n=[].slice,m=function(a,b){function c(){this.constructor=a}for(var e in b)q.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},q={}.hasOwnProperty;d=function(){function b(c){this.currentFlag=null;this.controllers={};this.aliasMaps={};this.$inputor=
a(c);this.setupRootElement();this.listen()}b.prototype.createContainer=function(b){var c;null!=(c=this.$el)&&c.remove();return a(b.body).append(this.$el=a("<div class='atwho-container'></div>"))};b.prototype.setupRootElement=function(b,c){null==c&&(c=!1);if(b)this.window=b.contentWindow,this.document=b.contentDocument||this.window.document,this.iframe=b;else{this.document=this.$inputor[0].ownerDocument;this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(e){if(this.iframe=
null,a.fn.atwho.debug)throw Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+e);}}return this.createContainer((this.iframeAsRoot=c)?this.document:document)};b.prototype.controller=function(a){var b,c,e,d;if(this.aliasMaps[a])c=this.controllers[this.aliasMaps[a]];else for(e in d=this.controllers,d)if(b=d[e],e===a){c=b;break}return c?c:this.controllers[this.currentFlag]};b.prototype.setContextFor=function(a){this.currentFlag=a;return this};b.prototype.reg=
function(a,b){var c,d;d=(c=this.controllers)[a]||(c[a]=this.$inputor.is("[contentEditable]")?new e(this,a):new k(this,a));b.alias&&(this.aliasMaps[b.alias]=a);d.init(b);return this};b.prototype.listen=function(){return this.$inputor.on("compositionstart",function(a){return function(b){var c;null!=(c=a.controller())&&c.view.hide();a.isComposing=!0;return null}}(this)).on("compositionend",function(a){return function(b){a.isComposing=!1;return null}}(this)).on("keyup.atwhoInner",function(a){return function(b){return a.onKeyup(b)}}(this)).on("keydown.atwhoInner",
function(a){return function(b){return a.onKeydown(b)}}(this)).on("blur.atwhoInner",function(a){return function(b){var c;if(c=a.controller())return c.expectedQueryCBId=null,c.view.hide(b,c.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(a){return function(b){return a.dispatch(b)}}(this)).on("scroll.atwhoInner",function(a){return function(){var b;b=a.$inputor.scrollTop();return function(c){var e,d;e=c.target.scrollTop;b!==e&&null!=(d=a.controller())&&d.view.hide(c);b=e;return!0}}}(this)())};
b.prototype.shutdown=function(){var a,b,c;c=this.controllers;for(a in c)b=c[a],b.destroy(),delete this.controllers[a];this.$inputor.off(".atwhoInner");return this.$el.remove()};b.prototype.dispatch=function(a){var b,c,e,d;e=this.controllers;d=[];for(b in e)c=e[b],d.push(c.lookUp(a));return d};b.prototype.onKeyup=function(b){var c;switch(b.keyCode){case h.ESC:b.preventDefault();null!=(c=this.controller())&&c.view.hide();break;case h.DOWN:case h.UP:case h.CTRL:case h.ENTER:a.noop();break;case h.P:case h.N:b.ctrlKey||
this.dispatch(b);break;default:this.dispatch(b)}};b.prototype.onKeydown=function(b){var c,e;if((e=null!=(c=this.controller())?c.view:void 0)&&e.visible())switch(b.keyCode){case h.ESC:b.preventDefault();e.hide(b);break;case h.UP:b.preventDefault();e.prev();break;case h.DOWN:b.preventDefault();e.next();break;case h.P:if(!b.ctrlKey)break;b.preventDefault();e.prev();break;case h.N:if(!b.ctrlKey)break;b.preventDefault();e.next();break;case h.TAB:case h.ENTER:case h.SPACE:if(!e.visible())break;if(!this.controller().getOpt("spaceSelectsMatch")&&
b.keyCode===h.SPACE)break;if(!this.controller().getOpt("tabSelectsMatch")&&b.keyCode===h.TAB)break;e.highlighted()?(b.preventDefault(),e.choose(b)):e.hide(b);break;default:a.noop()}};return b}();b=function(){function b(c,e){this.app=c;this.at=e;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||this.uid();this.query=this.setting=this.expectedQueryCBId=null;this.pos=0;this.range=null;0===(this.$el=a("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=a("<div id='atwho-ground-"+
this.id+"'></div>"));this.model=new f(this);this.view=new l(this)}b.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()};b.prototype.init=function(b){this.setting=a.extend({},this.setting||a.fn.atwho["default"],b);this.view.init();return this.model.reload(this.setting.data)};b.prototype.destroy=function(){this.trigger("beforeDestroy");this.model.destroy();this.view.destroy();return this.$el.remove()};b.prototype.callDefault=function(){var b,c;c=
arguments[0];b=2<=arguments.length?n.call(arguments,1):[];try{return g[c].apply(this,b)}catch(e){return b=e,a.error(b+" Or maybe At.js doesn't have function "+c)}};b.prototype.trigger=function(a,b){var c;null==b&&(b=[]);b.push(this);c=this.getOpt("alias");return this.$inputor.trigger(c?a+"-"+c+".atwho":a+".atwho",b)};b.prototype.callbacks=function(a){return this.getOpt("callbacks")[a]||g[a]};b.prototype.getOpt=function(a,b){try{return this.setting[a]}catch(c){return null}};b.prototype.insertContentFor=
function(b){var c;c=this.getOpt("insertTpl");b=a.extend({},b.data("item-data"),{"atwho-at":this.at});return this.callbacks("tplEval").call(this,c,b,"onInsert")};b.prototype.renderView=function(a){var b;b=this.getOpt("searchKey");a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,1001),b);return this.view.render(a.slice(0,this.getOpt("limit")))};b.arrayToDefaultHash=function(b){var c,e,d,f;if(!a.isArray(b))return b;f=[];c=0;for(d=b.length;c<d;c++)e=b[c],a.isPlainObject(e)?f.push(e):f.push({name:e});
return f};b.prototype.lookUp=function(a){var b;if(!a||"click"!==a.type||this.getOpt("lookUpOnClick"))if(!this.getOpt("suspendOnComposing")||!this.app.isComposing){a=this.catchQuery(a);if(!a)return this.expectedQueryCBId=null,a;this.app.setContextFor(this.at);(b=this.getOpt("delay"))?this._delayLookUp(a,b):this._lookUp(a);return a}};b.prototype._delayLookUp=function(a,b){var c,e;c=Date.now?Date.now():(new Date).getTime();this.previousCallTime||(this.previousCallTime=c);e=b-(c-this.previousCallTime);
if(0<e&&e<b)return this.previousCallTime=c,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(b){return function(){b.previousCallTime=0;b.delayedCallTimeout=null;return b._lookUp(a)}}(this),b);this._stopDelayedCall();this.previousCallTime!==c&&(this.previousCallTime=0);return this._lookUp(a)};b.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null};b.prototype._generateQueryCBId=function(){return{}};
b.prototype._lookUp=function(b){this.expectedQueryCBId=this._generateQueryCBId();return this.model.query(b.text,a.proxy(function(a,b){if(a===this.expectedQueryCBId)return b&&0<b.length?this.renderView(this.constructor.arrayToDefaultHash(b)):this.view.hide()},this,this.expectedQueryCBId))};return b}();k=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}m(c,b);c.prototype.catchQuery=function(){var a,b,c;b=this.$inputor.val();a=this.$inputor.caret("pos",{iframe:this.app.iframe});
b=b.slice(0,a);b=this.callbacks("matcher").call(this,this.at,b,this.getOpt("startWithSpace"));c="string"===typeof b;if(!(c&&b.length<this.getOpt("minLen",0)))return c&&b.length<=this.getOpt("maxLen",20)?(c=a-b.length,a=c+b.length,this.pos=c,b={text:b,headPos:c,endPos:a},this.trigger("matched",[this.at,b.text])):(b=null,this.view.hide()),this.query=b};c.prototype.rect=function(){var b,c;if(b=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&
(c=a(this.app.iframe).offset(),b.left+=c.left,b.top+=c.top),c=this.app.document.selection?0:2,{left:b.left,top:b.top,bottom:b.top+b.height+c}};c.prototype.insert=function(a,b){var c,e,d,f;c=this.$inputor;e=c.val();d=e.slice(0,Math.max(this.query.headPos-this.at.length,0));f=""===(f=this.getOpt("suffix"))?f:f||" ";a+=f;e=""+d+a+e.slice(this.query.endPos||0);c.val(e);c.caret("pos",d.length+a.length,{iframe:this.app.iframe});c.is(":focus")||c.focus();return c.change()};return c}(b);e=function(b){function c(){return c.__super__.constructor.apply(this,
arguments)}m(c,b);c.prototype._getRange=function(){var a;a=this.app.window.getSelection();if(0<a.rangeCount)return a.getRangeAt(0)};c.prototype._setRange=function(b,c,e){null==e&&(e=this._getRange());if(e)return c=a(c)[0],"after"===b?(e.setEndAfter(c),e.setStartAfter(c)):(e.setEndBefore(c),e.setStartBefore(c)),e.collapse(!1),this._clearRange(e)};c.prototype._clearRange=function(a){var b;null==a&&(a=this._getRange());b=this.app.window.getSelection();if(null==this.ctrl_a_pressed)return b.removeAllRanges(),
b.addRange(a)};c.prototype._movingEvent=function(a){var b;return"click"===a.type||(b=a.which)===h.RIGHT||b===h.LEFT||b===h.UP||b===h.DOWN};c.prototype._unwrap=function(b){var c;b=a(b).unwrap().get(0);(c=b.nextSibling)&&c.nodeValue&&(b.nodeValue+=c.nodeValue,a(c).remove());return b};c.prototype.catchQuery=function(b){var c,e,d,f,g,k;if((k=this._getRange())&&k.collapsed)if(b.which===h.ENTER)(e=a(k.startContainer).closest(".atwho-query")).contents().unwrap(),e.is(":empty")&&e.remove(),(e=a(".atwho-query",
this.app.document)).text(e.text()).contents().last().unwrap(),this._clearRange();else{if(/firefox/i.test(navigator.userAgent)){if(a(k.startContainer).is(this.$inputor)){this._clearRange();return}b.which===h.BACKSPACE&&k.startContainer.nodeType===document.ELEMENT_NODE&&0<=(g=k.startOffset-1)?(c=k.cloneRange(),c.setStart(k.startContainer,g),a(c.cloneContents()).contents().last().is(".atwho-inserted")&&(c=a(k.startContainer).contents().get(g),this._setRange("after",a(c).contents().last()))):b.which===
h.LEFT&&k.startContainer.nodeType===document.TEXT_NODE&&(c=a(k.startContainer.previousSibling),c.is(".atwho-inserted")&&0===k.startOffset&&this._setRange("after",c.contents().last()))}a(k.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query");0<(e=a(".atwho-query",this.app.document)).length&&e.is(":empty")&&0===e.text().length&&e.remove();this._movingEvent(b)||e.removeClass("atwho-inserted");if(0<e.length)switch(b.which){case h.LEFT:this._setRange("before",
e.get(0),k);e.removeClass("atwho-query");return;case h.RIGHT:this._setRange("after",e.get(0).nextSibling,k);e.removeClass("atwho-query");return}0<e.length&&(f=e.attr("data-atwho-at-query"))&&(e.empty().html(f).attr("data-atwho-at-query",null),this._setRange("after",e.get(0),k));c=k.cloneRange();c.setStart(k.startContainer,0);c=this.callbacks("matcher").call(this,this.at,c.toString(),this.getOpt("startWithSpace"));f="string"===typeof c;0===e.length&&f&&0<=(d=k.startOffset-this.at.length-c.length)&&
(k.setStart(k.startContainer,d),e=a("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),k.surroundContents(e.get(0)),d=e.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(k.setStart(d,d.length),k.setEnd(d,d.length),this._clearRange(k)):this._setRange("after",d,k));if(!(f&&c.length<this.getOpt("minLen",0))){if(f&&c.length<=this.getOpt("maxLen",20))return b={text:c,el:e},this.trigger("matched",[this.at,b.text]),this.query=b;this.view.hide();
this.query={el:e};0<=e.text().indexOf(this.at)&&(this._movingEvent(b)&&e.hasClass("atwho-inserted")?e.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,e)&&this._setRange("after",this._unwrap(e.text(e.text()).contents().first())));return null}}};c.prototype.rect=function(){var b,c;c=this.query.el.offset();this.app.iframe&&!this.app.iframeAsRoot&&(b=a(this.app.iframe).offset(),c.left+=b.left-this.$inputor.scrollLeft(),c.top+=b.top-this.$inputor.scrollTop());c.bottom=
c.top+this.query.el.height();return c};c.prototype.insert=function(a,b){var c,e;e=""===(e=this.getOpt("suffix"))?e:e||"\u00a0";c=b.data("item-data");this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(a).attr("data-atwho-at-query",""+c["atwho-at"]+this.query.text);if(c=this._getRange())c.setEndAfter(this.query.el[0]),c.collapse(!1),c.insertNode(e=this.app.document.createTextNode("\u2060"+e)),this._setRange("after",e,c);this.$inputor.is(":focus")||this.$inputor.focus();return this.$inputor.change()};
return c}(b);f=function(){function b(a){this.context=a;this.at=this.context.at;this.storage=this.context.$inputor}b.prototype.destroy=function(){return this.storage.data(this.at,null)};b.prototype.saved=function(){return 0<this.fetch()};b.prototype.query=function(a,b){var c,e;e=this.fetch();c=this.context.getOpt("searchKey");e=this.context.callbacks("filter").call(this.context,a,e,c)||[];c=this.context.callbacks("remoteFilter");return 0<e.length||!c&&0===e.length?b(e):c.call(this.context,a,b)};b.prototype.fetch=
function(){return this.storage.data(this.at)||[]};b.prototype.save=function(a){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,a||[]))};b.prototype.load=function(a){if(!this.saved()&&a)return this._load(a)};b.prototype.reload=function(a){return this._load(a)};b.prototype._load=function(b){return"string"===typeof b?a.ajax(b,{dataType:"json"}).done(function(a){return function(b){return a.save(b)}}(this)):this.save(b)};return b}();l=function(){function b(c){this.context=
c;this.$el=a("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>");this.timeoutID=null;this.context.$el.append(this.$el);this.bindEvent()}b.prototype.init=function(){var a;a=this.context.getOpt("alias")||this.context.at.charCodeAt(0);return this.$el.attr({id:"at-view-"+a})};b.prototype.destroy=function(){return this.$el.remove()};b.prototype.bindEvent=function(){var b;b=this.$el.find("ul");return b.on("mouseenter.atwho-view","li",function(c){b.find(".cur").removeClass("cur");return a(c.currentTarget).addClass("cur")}).on("click.atwho-view",
"li",function(c){return function(e){b.find(".cur").removeClass("cur");a(e.currentTarget).addClass("cur");c.choose(e);return e.preventDefault()}}(this))};b.prototype.visible=function(){return this.$el.is(":visible")};b.prototype.highlighted=function(){return 0<this.$el.find(".cur").length};b.prototype.choose=function(a){var b,c;(b=this.$el.find(".cur")).length&&(c=this.context.insertContentFor(b),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,
c,b),b),this.context.trigger("inserted",[b,a]),this.hide(a));if(this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0};b.prototype.reposition=function(b){var c,e;c=this.context.app.iframeAsRoot?this.context.app.window:window;b.bottom+this.$el.height()-a(c).scrollTop()>a(c).height()&&(b.bottom=b.top-this.$el.height());b.left>(c=a(c).width()-this.$el.width()-5)&&(b.left=c);b={left:b.left,top:b.bottom};null!=(e=this.context.callbacks("beforeReposition"))&&e.call(this.context,b);this.$el.offset(b);
return this.context.trigger("reposition",[b])};b.prototype.next=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.next();b.length||(b=this.$el.find("li:first"));b.addClass("cur");return this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))};b.prototype.prev=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.prev();b.length||(b=this.$el.find("li:last"));b.addClass("cur");return this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))};
b.prototype.scrollTop=function(a){var b;return(b=this.context.getOpt("scrollDuration"))?this.$el.animate({scrollTop:a},b):this.$el.scrollTop(a)};b.prototype.show=function(){var a;if(this.stopShowing)this.stopShowing=!1;else if(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),a=this.context.rect())return this.reposition(a)};b.prototype.hide=function(a,b){var c;if(this.visible()){if(isNaN(b))return this.$el.hide(),this.context.trigger("hidden",[a]);c=function(a){return function(){return a.hide()}}(this);
clearTimeout(this.timeoutID);return this.timeoutID=setTimeout(c,b)}};b.prototype.render=function(b){var c,e,d,f,g,h;if(a.isArray(b)&&0<b.length){this.$el.find("ul").empty();e=this.$el.find("ul");h=this.context.getOpt("displayTpl");d=0;for(g=b.length;d<g;d++)f=b[d],f=a.extend({},f,{"atwho-at":this.context.at}),c=this.context.callbacks("tplEval").call(this.context,h,f,"onDisplay"),c=a(this.context.callbacks("highlighter").call(this.context,c,this.context.query.text)),c.data("item-data",f),e.append(c);
this.show();if(this.context.getOpt("highlightFirst"))return e.find("li:first").addClass("cur")}else this.hide()};return b}();h={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32};g={beforeSave:function(a){return b.arrayToDefaultHash(a)},matcher:function(a,b,c,e){var d;a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");c&&(a="(?:^|\\s)"+a);c=decodeURI("%C3%80");d=decodeURI("%C3%BF");return(a=(new RegExp(a+"([A-Za-z"+c+"-"+d+"0-9_"+
(e?" ":"")+"'.+-]*)$|"+a+"([^\\x00-\\xff]*)$","gi")).exec(b))?a[2]||a[1]:null},filter:function(a,b,c){var e,d,f,g;e=[];d=0;for(g=b.length;d<g;d++)f=b[d],~(new String(f[c])).toLowerCase().indexOf(a.toLowerCase())&&e.push(f);return e},remoteFilter:null,sorter:function(a,b,c){var e,d,f,g;if(!a)return b;e=[];d=0;for(g=b.length;d<g;d++)f=b[d],f.atwho_order=(new String(f[c])).toLowerCase().indexOf(a.toLowerCase()),-1<f.atwho_order&&e.push(f);return e.sort(function(a,b){return a.atwho_order-b.atwho_order})},
tplEval:function(a,b){var c;c=a;try{return"string"!==typeof a&&(c=a(b)),c.replace(/\$\{([^\}]*)\}/g,function(a,c,e){return b[c]})}catch(e){return""}},highlighter:function(a,b){var c;if(!b)return a;c=new RegExp(">\\s*(\\w*?)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig");return a.replace(c,function(a,b,c,e){return"> "+b+"<strong>"+c+"</strong>"+e+" <"})},beforeInsert:function(a,b){return a},beforeReposition:function(a){return a},afterMatchFailed:function(a,b){}};c={load:function(a,b){var c;if(c=this.controller(a))return c.model.load(b)},
isSelecting:function(){var a;return!(null==(a=this.controller())||!a.view.visible())},hide:function(){var a;return null!=(a=this.controller())?a.view.hide():void 0},reposition:function(){var a;if(a=this.controller())return a.view.reposition(a.rect())},setIframe:function(a,b){this.setupRootElement(a,b);return null},run:function(){return this.dispatch()},destroy:function(){this.shutdown();return this.$inputor.data("atwho",null)}};a.fn.atwho=function(b){var e,f;e=arguments;f=null;this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var g,
h;(h=(g=a(this)).data("atwho"))||g.data("atwho",h=new d(this));return"object"!==typeof b&&b?c[b]&&h?f=c[b].apply(h,Array.prototype.slice.call(e,1)):a.error("Method "+b+" does not exist on jQuery.atwho"):h.reg(b.at,b)});return null!=f?f:this};a.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:g,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,
delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0};a.fn.atwho.debug=!1});$(document).on("click",".atwho-container",function(a){a.stopPropagation()});
(function(a,c){"function"===typeof define&&define.amd?define(["jquery"],function(d){return a.returnExportsGlobal=c(d)}):"object"===typeof exports?module.exports=c(require("jquery")):c(jQuery)})(this,function(a){var c,d,b,g,e,h,f,k;c=function(){function b(a){this.$inputor=a;this.domInputor=this.$inputor[0]}b.prototype.setPos=function(a){return this.domInputor};b.prototype.getIEPosition=function(){return this.getPosition()};b.prototype.getPosition=function(){var a,b;b=this.getOffset();a=this.$inputor.offset();
b.left-=a.left;b.top-=a.top;return b};b.prototype.getOldIEPos=function(){var a,b;b=h.selection.createRange();a=h.body.createTextRange();a.moveToElementText(this.domInputor);a.setEndPoint("EndToEnd",b);return a.text.length};b.prototype.getPos=function(){var a,b;if(b=this.range())return a=b.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(b.endContainer,b.endOffset),b=a.toString().length,a.detach(),b;if(h.selection)return this.getOldIEPos()};b.prototype.getOldIEOffset=function(){var a;a=
h.selection.createRange().duplicate();a.moveStart("character",-1);a=a.getBoundingClientRect();return{height:a.bottom-a.top,left:a.left,top:a.top}};b.prototype.getOffset=function(b){var c,e;f.getSelection&&(e=this.range())?(0<e.endOffset-1&&e.endContainer===!this.domInputor&&(b=e.cloneRange(),b.setStart(e.endContainer,e.endOffset-1),b.setEnd(e.endContainer,e.endOffset),c=b.getBoundingClientRect(),c={height:c.height,left:c.left+c.width,top:c.top},b.detach()),c&&0!==(null!=c?c.height:void 0)||(b=e.cloneRange(),
e=a(h.createTextNode("|")),b.insertNode(e[0]),b.selectNode(e[0]),c=b.getBoundingClientRect(),c={height:c.height,left:c.left,top:c.top},e.remove(),b.detach())):h.selection&&(c=this.getOldIEOffset());c&&(c.top+=a(f).scrollTop(),c.left+=a(f).scrollLeft());return c};b.prototype.range=function(){var a;if(f.getSelection)return a=f.getSelection(),0<a.rangeCount?a.getRangeAt(0):null};return b}();d=function(){function c(a){this.$inputor=a;this.domInputor=this.$inputor[0]}c.prototype.getIEPos=function(){var a,
b,c,e;a=this.domInputor;c=h.selection.createRange();b=0;c&&c.parentElement()===a&&(b=a.value.replace(/\r\n/g,"\n"),b=b.length,e=a.createTextRange(),e.moveToBookmark(c.getBookmark()),a=a.createTextRange(),a.collapse(!1),b=-1<e.compareEndPoints("StartToEnd",a)?b:-e.moveStart("character",-b));return b};c.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart};c.prototype.setPos=function(a){var b,c;b=this.domInputor;h.selection?(c=b.createTextRange(),c.move("character",
a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a);return b};c.prototype.getIEOffset=function(a){var b;b=this.domInputor.createTextRange();a||(a=this.getPos());b.move("character",a);return{left:b.boundingLeft,top:b.boundingTop,height:b.boundingHeight}};c.prototype.getOffset=function(b){var c,e;c=this.$inputor;if(h.selection)return e=this.getIEOffset(b),e.top+=a(f).scrollTop()+c.scrollTop(),e.left+=a(f).scrollLeft()+c.scrollLeft(),e;e=c.offset();b=this.getPosition(b);return{left:e.left+b.left-
c.scrollLeft(),top:e.top+b.top-c.scrollTop(),height:b.height}};c.prototype.getPosition=function(a){var c,e,d;c=this.$inputor;e=function(a){a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>");/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\s/g,"&nbsp;"));return a};void 0===a&&(a=this.getPos());d=c.val().slice(0,a);a=c.val().slice(a);d="<span style='position: relative; display: inline;'>"+e(d)+"</span>";d=d+"<span id='caret' style='position: relative; display: inline;'>|</span>"+("<span style='position: relative; display: inline;'>"+
e(a)+"</span>");return(new b(c)).create(d).rect()};c.prototype.getIEPosition=function(a){var b;b=this.getIEOffset(a);a=this.$inputor.offset();return{left:b.left-a.left,top:b.top-a.top,height:b.height}};return c}();b=function(){function b(a){this.$inputor=a}b.prototype.css_attr="borderBottomWidth borderLeftWidth borderRightWidth borderTopStyle borderRightStyle borderBottomStyle borderLeftStyle borderTopWidth boxSizing fontFamily fontSize fontWeight height letterSpacing lineHeight marginBottom marginLeft marginRight marginTop outlineWidth overflow overflowX overflowY paddingBottom paddingLeft paddingRight paddingTop textAlign textOverflow textTransform whiteSpace wordBreak wordWrap".split(" ");
b.prototype.mirrorCss=function(){var b,c=this;b={position:"absolute",left:-9999,top:0,zIndex:-2E4};"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width");a.each(this.css_attr,function(a,e){return b[e]=c.$inputor.css(e)});return b};b.prototype.create=function(b){this.$mirror=a("<div></div>");this.$mirror.css(this.mirrorCss());this.$mirror.html(b);this.$inputor.after(this.$mirror);return this};b.prototype.rect=function(){var a,b;a=this.$mirror.find("#caret");b=a.position();a={left:b.left,
top:b.top,height:a.height()};this.$mirror.remove();return a};return b}();g={contentEditable:function(a){return!(!a[0].contentEditable||"true"!==a[0].contentEditable)}};e={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){return this.getOffset(a)}};f=h=null;k=function(a){if(a=null!=a?a.iframe:void 0)return f=a.contentWindow,h=a.contentDocument||f.document;f=window;return h=document};a.fn.caret=
function(b,f,h){return e[b]?(a.isPlainObject(f)?(k(f),f=void 0):k(h),h=g.contentEditable(this)?new c(this):new d(this),e[b].apply(h,[f])):a.error("Method "+b+" does not exist on jQuery.caret")};a.fn.caret.EditableCaret=c;a.fn.caret.InputCaret=d;a.fn.caret.Utils=g;a.fn.caret.apis=e});var Tracking=function(){this.charmander_sections_opened=this.annotations_opened=0;this.line_item_opens={};this.song_page_loaded_from_direct_link_to_un_annotated_line=this.enabled=!1};
Tracking.arrange_arguments=function(a){return function(c,d,b){"function"===typeof d&&(b=d,d={});return a.call(this,c,d,b)}};Tracking.if_enabled=function(a){return function(){var c=arguments[arguments.length-1];return this.enabled?a.apply(this,arguments):("function"===typeof c&&c(),!1)}};
Tracking.prototype={start_tracking:function(){if("undefined"===typeof mixpanel||"undefined"===typeof mixpanel.register)return!1;this.enabled=!0;var a;"undefined"!==typeof CURRENT_TAG&&CURRENT_TAG&&(a=CURRENT_TAG.tag.slug);mixpanel.register({"Logged In":!!CURRENT_USER,"Is Editor":CURRENT_USER&&CURRENT_USER.is_editor,"Is Moderator":CURRENT_USER&&CURRENT_USER.is_moderator,"Mobile Site":MOBILE_DEVICE,Channel:CURRENT_CHANNEL,Tag:a});CURRENT_USER&&mixpanel.identify(CURRENT_USER.id);app.is_on_song_page&&
app.is_on_song_page()&&this.track("Song Page Load");0<$("body.act-new.cont-users").length&&(a=$.deparam(location.search.substring(1)).from_question_email)&&this.track("Question email signup clicked",{question_id:a});mixpanel.track_links(".android_interstitial-download","clicked_download_from_android_interstitial",{"from url":document.location.href})},track:Tracking.arrange_arguments(Tracking.if_enabled(function(a,c,d){var b;-1<"Annotation Browser Navigation;play_song_media;opened_what_is_genius_dropdown;Song Page Open Edit Form;Charmander Section View;Scroll Depth;Tap Annotation Teaser;Mobile - Toggle Question View;Question email question clicked;Question email signup clicked;Metadata Edit".split(";").indexOf(a)?
b=c:"Song Page Load"===a?b={"Un-annotated direct link":!!this.song_page_loaded_from_direct_link_to_un_annotated_line,"Un-annotated line":this.song_page_loaded_from_direct_link_to_un_annotated_line}:"Wrapped Web Page Load"===a||"Annotated Web Page Load"==a?b={"Source location":c.source_location,script_source:c.script_source,script_source_version:c.script_source_version,"Host Page Referrer":c.referrer}:"Open Annotation"===a||"Engaged Annotation View"===a?(this.annotations_opened++,b={"Annotation ID":c.annotation_id,
"Annotator Login":c.annotator_login,"Annotatable Type":c.annotatable_type,script_source:c.script_source,script_source_version:c.script_source_version},c.skip_counters||$.extend(b,{"Cumulative Annos Opened":this.annotations_opened,"Anno Opened from Permalink":c.annotation_id===this.annotation_id_opened_from_permalink,"First Anno was Permalink":!!this.annotation_id_opened_from_permalink})):"Offsite Filter Selection"===a?b={"Filter Type":c.filter_type,"Filter Arguments":c.filter_args,"Filter Reason":c.reason,
script_source:c.script_source,script_source_version:c.script_source_version}:"Inbox Open"===a?b={"Inbox Name":c.inbox_name,"Unread Count When Opened":c.unread_count}:"Line Item Open"===a?("undefined"==typeof this.line_item_opens[c.inbox_name]&&(this.line_item_opens[c.inbox_name]=0),b={"Inbox Name":c.inbox_name,"Line Item Index":c.index,"Action Name":c.action_name,"Target Type":c.target_type,"Viewing Context":c.viewing_context,"Cumulative Line Items Opened":this.line_item_opens[c.inbox_name]++,"Line Item Strategy":c.strategy_name,
Bagon:!!c.bagon,iframe:!!c.iframe}):"Charmander Open Section Header"==a&&(this.charmander_sections_opened++,b={"Cumulative Sections Opened":this.charmander_sections_opened,Section:c.section});mixpanel.track(a,$.extend({},TRACKING_DATA,b,{genius_platform:"web",dfp_enabled:"googletag"in window}),d)})),track_with_timeout:Tracking.arrange_arguments(Tracking.if_enabled(function(a,c,d){var b=this.fetch_mixpanel_config("track_links_timeout",0);d=_.once(d);setTimeout(d,b);this.track(a,c,d)})),track_link_click:function(a){var c=
$(a.target).closest("a"),d=c.attr("href"),c=2===a.which||a.metaKey||a.ctrlKey||"_blank"===c.attr("target"),b=Array.prototype.slice.call(arguments,1);if(c)return this.track.apply(this,b);a.preventDefault();var g="function"===typeof b[b.length-1]?b.pop():null;return this.track_with_timeout.apply(this,b.concat(function(){g&&g();window.location.href=d}))},set_annotation_opened_from_permalink:function(a){this.annotation_id_opened_from_permalink=a},set_song_page_loaded_from_direct_link_to_un_annotated_line:function(a){this.song_page_loaded_from_direct_link_to_un_annotated_line=
a},fetch_mixpanel_config:function(a,c){return this.enabled&&"function"==typeof mixpanel.get_config?mixpanel.get_config(a):c}};$.extend(window.app,{tracking:new Tracking});$(function(){$(document.body).on("annotation:open","a[data-id]",function(){app.tracking.track("Open Annotation",{annotation_id:$(this).attr("data-id")})});$(document).on("click",".show_help:not(.pressed)",function(){app.tracking.track("opened_what_is_genius_dropdown",{standalone_annotation:0<$(this).closest(".stand_alone_annotation_container").length})})});
(function(){function a(a,b){b=b||"";"string"!==typeof a&&(a.global&&0>b.indexOf("g")&&(b+="g"),a.ignoreCase&&0>b.indexOf("i")&&(b+="i"),a.multiline&&0>b.indexOf("m")&&(b+="m"),a=a.source);return new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=e.txt.regexen[b]||"";"string"!==typeof c&&(c=c.source);return c}),b)}function c(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function d(a,b,c){var e=String.fromCharCode(b);c!==b&&(e+="-"+String.fromCharCode(c));a.push(e);return a}
function b(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function g(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"===typeof a&&a.match(b)&&RegExp["$&"]===a}if("undefined"===typeof e||null===e)var e={};e.txt={};e.txt.regexen={};var h={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};e.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return h[a]})};e.txt.regexSupplant=a;e.txt.stringSupplant=c;e.txt.addCharsToCharClass=d;var f=String.fromCharCode,
k=[f(32),f(133),f(160),f(5760),f(6158),f(8232),f(8233),f(8239),f(8287),f(12288)];d(k,9,13);d(k,8192,8202);var l=[f(65534),f(65279),f(65535)];d(l,8234,8238);e.txt.regexen.spaces_group=a(k.join(""));e.txt.regexen.spaces=a("["+k.join("")+"]");e.txt.regexen.invalid_chars_group=a(l.join(""));e.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;e.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;e.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;
k=[];d(k,192,214);d(k,216,246);d(k,248,255);d(k,256,591);d(k,595,596);d(k,598,599);d(k,601,601);d(k,603,603);d(k,611,611);d(k,616,616);d(k,623,623);d(k,626,626);d(k,649,649);d(k,651,651);d(k,699,699);d(k,768,879);d(k,7680,7935);e.txt.regexen.latinAccentChars=a(k.join(""));e.txt.regexen.hashSigns=/[#\uff03]/;e.txt.regexen.hashtagAlpha=/[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d]/;
e.txt.regexen.hashtagAlphaNumeric=/[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19_\u200c\u200d\ua67e\u05be\u05f3\u05f4\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u0f0d]/;
e.txt.regexen.endHashtagMatch=a(/^(?:#{hashSigns}|:\/\/)/);e.txt.regexen.hashtagBoundary=/(?:^|$|[^&A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19_\u200c\u200d\ua67e\u05be\u05f3\u05f4\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u0f0d])/;
e.txt.regexen.validHashtag=a(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);e.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|(?:rt|RT|rT|Rt):?)/;e.txt.regexen.atSigns=/[@\uff20]/;e.txt.regexen.validMentionOrList=a("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g");e.txt.regexen.validReply=a(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);e.txt.regexen.endMentionMatch=
a(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);e.txt.regexen.validUrlPrecedingChars=a(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;e.txt.regexen.invalidDomainChars=c("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen);e.txt.regexen.validDomainChars=a(/[^#{invalidDomainChars}]/);e.txt.regexen.validSubdomain=a(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);e.txt.regexen.validDomainName=
a(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);e.txt.regexen.validGTLD=a(/(?:(?:abogado|academy|accountants|active|actor|adult|aero|agency|airforce|allfinanz|alsace|android|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|care|career|careers|cartier|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|church|citic|city|claims|cleaning|click|clinic|clothing|club|coach|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cricket|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|delivery|democrat|dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|equipment|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|fail|farm|fashion|feedback|finance|financial|firmdale|fish|fishing|fitness|flights|florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|international|investments|irish|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|lacaixa|land|latrobe|lawyer|lds|lease|legal|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|luxury|madrid|maison|management|mango|market|marketing|media|meet|melbourne|meme|memorial|menu|miami|mil|mini|mobi|moda|moe|monash|money|mormon|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|partners|parts|party|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|realtor|recipes|red|rehab|reise|reisen|reit|ren|rentals|repair|report|republican|rest|restaurant|reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|samsung|sarl|sca|scb|schmidt|schule|science|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|sydney|systems|taipei|tatar|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|trust|tui|university|uno|uol|vacations|vegas|ventures|verm\u00f6gensberater|verm\u00f6gensberatung|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|youtube|zip|zone|\u0434\u0435\u0442\u0438|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u043e\u0440\u0433|\u0440\u0443\u0441|\u0441\u0430\u0439\u0442|\u0628\u0627\u0632\u0627\u0631|\u0634\u0628\u0643\u0629|\u0645\u0648\u0642\u0639|\u0938\u0902\u0917\u0920\u0928|\u307f\u3093\u306a|\u30b0\u30fc\u30b0\u30eb|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u6587\u7f51|\u4f01\u4e1a|\u4f5b\u5c71|\u516b\u5366|\u516c\u53f8|\u516c\u76ca|\u5546\u57ce|\u5546\u5e97|\u5546\u6807|\u5728\u7ebf|\u5e7f\u4e1c|\u6211\u7231\u4f60|\u624b\u673a|\u653f\u52a1|\u673a\u6784|\u6e38\u620f|\u79fb\u52a8|\u7ec4\u7ec7\u673a\u6784|\u7f51\u5740|\u7f51\u5e97|\u7f51\u7edc|\u8c37\u6b4c|\u96c6\u56e2|\uc0bc\uc131|onion)(?=[^0-9a-zA-Z@]|$))/);
e.txt.regexen.validCCTLD=a(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u0431\u0435\u043b|\u043c\u043a\u0434|\u043c\u043e\u043d|\u0440\u0444|\u0441\u0440\u0431|\u0443\u043a\u0440|\u049b\u0430\u0437|\u0570\u0561\u0575|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0628\u06be\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0639\u0631\u0627\u0642|\u0639\u0645\u0627\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0645\u0635\u0631|\u0645\u0644\u064a\u0633\u064a\u0627|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u092d\u093e\u0930\u0924|\u09ac\u09be\u0982\u09b2\u09be|\u09ad\u09be\u09b0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0dbd\u0d82\u0d9a\u0dcf|\u0e44\u0e17\u0e22|\u10d2\u10d4|\u4e2d\u56fd|\u4e2d\u570b|\u53f0\u6e7e|\u53f0\u7063|\u65b0\u52a0\u5761|\u9999\u6e2f|\ud55c\uad6d)(?=[^0-9a-zA-Z@]|$))/);
e.txt.regexen.validPunycode=a(/(?:xn--[0-9a-z]+)/);e.txt.regexen.validSpecialCCTLD=a(/(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/);e.txt.regexen.validDomain=a(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);e.txt.regexen.validAsciiDomain=a(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);e.txt.regexen.invalidShortDomain=a(/^#{validDomainName}#{validCCTLD}$/i);e.txt.regexen.validSpecialShortDomain=a(/^#{validDomainName}#{validSpecialCCTLD}$/i);
e.txt.regexen.validPortNumber=a(/[0-9]+/);e.txt.regexen.validGeneralUrlPathChars=a(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);e.txt.regexen.validUrlBalancedParens=a("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i");e.txt.regexen.validUrlPathEndingChars=a(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);e.txt.regexen.validUrlPath=a("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))",
"i");e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;e.txt.regexen.extractUrl=a("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");e.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;e.txt.regexen.urlHasProtocol=/^https?:\/\//i;e.txt.regexen.urlHasHttps=/^https:\/\//i;e.txt.regexen.cashtag=
/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;e.txt.regexen.validCashtag=a("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi");e.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;e.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;e.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;e.txt.regexen.validateUrlPchar=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");e.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;e.txt.regexen.validateUrlUserinfo=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*",
"i");e.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;e.txt.regexen.validateUrlIpv4=a(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);e.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;e.txt.regexen.validateUrlIp=a("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");e.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;e.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;e.txt.regexen.validateUrlDomainTld=
/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;e.txt.regexen.validateUrlDomain=a(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);e.txt.regexen.validateUrlHost=a("(?:#{validateUrlIp}|#{validateUrlDomain})","i");e.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;e.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
e.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;e.txt.regexen.validateUrlUnicodeDomain=a(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);e.txt.regexen.validateUrlUnicodeHost=a("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");e.txt.regexen.validateUrlPort=/[0-9]{1,5}/;e.txt.regexen.validateUrlUnicodeAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?",
"i");e.txt.regexen.validateUrlAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");e.txt.regexen.validateUrlPath=a(/(\/#{validateUrlPchar}*)*/i);e.txt.regexen.validateUrlQuery=a(/(#{validateUrlPchar}|\/|\?)*/i);e.txt.regexen.validateUrlFragment=a(/(#{validateUrlPchar}|\/|\?)*/i);e.txt.regexen.validateUrlUnencoded=a("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var n={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,
usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},m={disabled:!0,readonly:!0,multiple:!0,checked:!0};e.txt.tagAttrs=function(a){var b="",c;for(c in a){var d=a[c];
m[c]&&(d=d?c:null);null!=d&&(b+=" "+e.txt.htmlEscape(c)+'="'+e.txt.htmlEscape(d.toString())+'"')}return b};e.txt.linkToText=function(a,b,d,f){f.suppressNoFollow||(d.rel="nofollow");f.linkAttributeBlock&&f.linkAttributeBlock(a,d);f.linkTextBlock&&(b=f.linkTextBlock(a,b));a={text:b,attr:e.txt.tagAttrs(d)};return c("<a#{attr}>#{text}</a>",a)};e.txt.linkToTextWithSymbol=function(a,b,c,d,f){var g=f.symbolTag?"<"+f.symbolTag+">"+b+"</"+f.symbolTag+">":b;c=e.txt.htmlEscape(c);c=f.textWithSymbolTag?"<"+f.textWithSymbolTag+
">"+c+"</"+f.textWithSymbolTag+">":c;return f.usernameIncludeSymbol||!b.match(e.txt.regexen.atSigns)?e.txt.linkToText(a,g+c,d,f):g+e.txt.linkToText(a,c,d,f)};e.txt.linkToHashtag=function(a,c,d){c=c.substring(a.indices[0],a.indices[0]+1);var f=e.txt.htmlEscape(a.hashtag),g=b(d.htmlAttrs||{});g.href=d.hashtagUrlBase+f;g.title="#"+f;g["class"]=d.hashtagClass;f.charAt(0).match(e.txt.regexen.rtl_chars)&&(g["class"]+=" rtl");d.targetBlank&&(g.target="_blank");return e.txt.linkToTextWithSymbol(a,c,f,g,d)};
e.txt.linkToCashtag=function(a,c,d){c=e.txt.htmlEscape(a.cashtag);var f=b(d.htmlAttrs||{});f.href=d.cashtagUrlBase+c;f.title="$"+c;f["class"]=d.cashtagClass;d.targetBlank&&(f.target="_blank");return e.txt.linkToTextWithSymbol(a,"$",c,f,d)};e.txt.linkToMentionAndList=function(a,c,d){c=c.substring(a.indices[0],a.indices[0]+1);var f=e.txt.htmlEscape(a.screenName),g=e.txt.htmlEscape(a.listSlug),h=a.listSlug&&!d.suppressLists,k=b(d.htmlAttrs||{});k["class"]=h?d.listClass:d.usernameClass;k.href=h?d.listUrlBase+
f+g:d.usernameUrlBase+f;h||d.suppressDataScreenName||(k["data-screen-name"]=f);d.targetBlank&&(k.target="_blank");return e.txt.linkToTextWithSymbol(a,c,h?f+g:f,k,d)};e.txt.linkToUrl=function(a,c,d){c=a.url;var f=e.txt.htmlEscape(c),g=d.urlEntities&&d.urlEntities[c]||a;g.display_url&&(f=e.txt.linkTextWithEntity(g,d));var h=b(d.htmlAttrs||{});c.match(e.txt.regexen.urlHasProtocol)||(c="http://"+c);h.href=c;d.targetBlank&&(h.target="_blank");d.urlClass&&(h["class"]=d.urlClass);d.urlTarget&&(h.target=
d.urlTarget);!d.title&&g.display_url&&(h.title=g.expanded_url);return e.txt.linkToText(a,f,h,d)};e.txt.linkTextWithEntity=function(a,b){var d=a.display_url,f=a.expanded_url,g=d.replace(/\u2026/g,"");if(-1!=f.indexOf(g)){var h=f.indexOf(g),d={displayUrlSansEllipses:g,beforeDisplayUrl:f.substr(0,h),afterDisplayUrl:f.substr(h+g.length),precedingEllipsis:d.match(/^\u2026/)?"\u2026":"",followingEllipsis:d.match(/\u2026$/)?"\u2026":""},k;for(k in d)d.hasOwnProperty(k)&&(d[k]=e.txt.htmlEscape(d[k]));d.invisible=
b.invisibleTagAttrs;return c("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",d)}return d};e.txt.autoLinkEntities=function(a,c,d){d=b(d||{});d.hashtagClass=d.hashtagClass||"tweet-url hashtag";d.hashtagUrlBase=d.hashtagUrlBase||
"https://twitter.com/#!/search?q=%23";d.cashtagClass=d.cashtagClass||"tweet-url cashtag";d.cashtagUrlBase=d.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";d.listClass=d.listClass||"tweet-url list-slug";d.usernameClass=d.usernameClass||"tweet-url username";d.usernameUrlBase=d.usernameUrlBase||"https://twitter.com/";d.listUrlBase=d.listUrlBase||"https://twitter.com/";d.htmlAttrs=e.txt.extractHtmlAttrsFromOptions(d);d.invisibleTagAttrs=d.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";
var f,g,h;if(d.urlEntities){f={};g=0;for(h=d.urlEntities.length;g<h;g++)f[d.urlEntities[g].url]=d.urlEntities[g];d.urlEntities=f}f="";h=0;c.sort(function(a,b){return a.indices[0]-b.indices[0]});var k=d.htmlEscapeNonEntities?e.txt.htmlEscape:function(a){return a};for(g=0;g<c.length;g++){var l=c[g];f+=k(a.substring(h,l.indices[0]));l.url?f+=e.txt.linkToUrl(l,a,d):l.hashtag?f+=e.txt.linkToHashtag(l,a,d):l.screenName?f+=e.txt.linkToMentionAndList(l,a,d):l.cashtag&&(f+=e.txt.linkToCashtag(l,a,d));h=l.indices[1]}return f+=
k(a.substring(h,a.length))};e.txt.autoLinkWithJSON=function(a,b,c){if(b.user_mentions)for(var d=0;d<b.user_mentions.length;d++)b.user_mentions[d].screenName=b.user_mentions[d].screen_name;if(b.hashtags)for(d=0;d<b.hashtags.length;d++)b.hashtags[d].hashtag=b.hashtags[d].text;if(b.symbols)for(d=0;d<b.symbols.length;d++)b.symbols[d].cashtag=b.symbols[d].text;var d=[],f;for(f in b)d=d.concat(b[f]);e.txt.modifyIndicesFromUnicodeToUTF16(a,d);return e.txt.autoLinkEntities(a,d,c)};e.txt.extractHtmlAttrsFromOptions=
function(a){var b={},c;for(c in a){var e=a[c];n[c]||(m[c]&&(e=e?c:null),null!=e&&(b[c]=e))}return b};e.txt.autoLink=function(a,b){var c=e.txt.extractEntitiesWithIndices(a,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkUsernamesOrLists=function(a,b){var c=e.txt.extractMentionsOrListsWithIndices(a);return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkHashtags=function(a,b){var c=e.txt.extractHashtagsWithIndices(a);return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkCashtags=
function(a,b){var c=e.txt.extractCashtagsWithIndices(a);return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkUrlsCustom=function(a,b){var c=e.txt.extractUrlsWithIndices(a,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(a,c,b)};e.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]};e.txt.extractEntitiesWithIndices=function(a,b){var c=e.txt.extractUrlsWithIndices(a,
b).concat(e.txt.extractMentionsOrListsWithIndices(a)).concat(e.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(e.txt.extractCashtagsWithIndices(a));if(0==c.length)return[];e.txt.removeOverlappingEntities(c);return c};e.txt.extractMentions=function(a){var b=[];a=e.txt.extractMentionsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].screenName);return b};e.txt.extractMentionsWithIndices=function(a){for(var b=[],c=e.txt.extractMentionsOrListsWithIndices(a),d=0;d<c.length;d++)a=c[d],
""==a.listSlug&&b.push({screenName:a.screenName,indices:a.indices});return b};e.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(e.txt.regexen.atSigns))return[];var b=[];a.replace(e.txt.regexen.validMentionOrList,function(a,c,d,f,g,h,k){k.slice(h+a.length).match(e.txt.regexen.endMentionMatch)||(g=g||"",a=h+c.length,b.push({screenName:f,listSlug:g,indices:[a,a+f.length+g.length+1]}))});return b};e.txt.extractReplies=function(a){if(!a)return null;a=a.match(e.txt.regexen.validReply);
return!a||RegExp.rightContext.match(e.txt.regexen.endMentionMatch)?null:a[1]};e.txt.extractUrls=function(a,b){for(var c=[],d=e.txt.extractUrlsWithIndices(a,b),f=0;f<d.length;f++)c.push(d[f].url);return c};e.txt.extractUrlsWithIndices=function(a,b){b||(b={extractUrlsWithoutProtocol:!0});if(!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];for(var c=[];e.txt.regexen.extractUrl.exec(a);){var d=RegExp.$2,f=RegExp.$3,g=RegExp.$5,h=RegExp.$7,k=e.txt.regexen.extractUrl.lastIndex,l=
k-f.length;if(RegExp.$4)f.match(e.txt.regexen.validTcoUrl)&&(f=RegExp.lastMatch,k=l+f.length),c.push({url:f,indices:[l,k]});else if(b.extractUrlsWithoutProtocol&&!d.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var n=null,m=0;g.replace(e.txt.regexen.validAsciiDomain,function(a){var b=g.indexOf(a,m);m=b+a.length;n={url:a,indices:[l+b,l+m]};(h||a.match(e.txt.regexen.validSpecialShortDomain)||!a.match(e.txt.regexen.invalidShortDomain))&&c.push(n)});null!=n&&h&&(n.url=f.replace(g,n.url),
n.indices[1]=k)}}return c};e.txt.extractHashtags=function(a){var b=[];a=e.txt.extractHashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].hashtag);return b};e.txt.extractHashtagsWithIndices=function(a,b){b||(b={checkUrlOverlap:!0});if(!a||!a.match(e.txt.regexen.hashSigns))return[];var c=[];a.replace(e.txt.regexen.validHashtag,function(a,b,d,f,g,h){h.slice(g+a.length).match(e.txt.regexen.endHashtagMatch)||(a=g+b.length,c.push({hashtag:f,indices:[a,a+f.length+1]}))});if(b.checkUrlOverlap){var d=
e.txt.extractUrlsWithIndices(a);if(0<d.length){d=c.concat(d);e.txt.removeOverlappingEntities(d);for(var c=[],f=0;f<d.length;f++)d[f].hashtag&&c.push(d[f])}}return c};e.txt.extractCashtags=function(a){var b=[];a=e.txt.extractCashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].cashtag);return b};e.txt.extractCashtagsWithIndices=function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];a.replace(e.txt.regexen.validCashtag,function(a,c,e,d,f,g){a=f+c.length;b.push({cashtag:d,indices:[a,a+d.length+
1]})});return b};e.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){e.txt.convertUnicodeIndices(a,b,!1)};e.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){e.txt.convertUnicodeIndices(a,b,!0)};e.txt.getUnicodeTextLength=function(a){return a.replace(e.txt.regexen.non_bmp_code_pairs," ").length};e.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var e=0,d=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,g=b[0];e<a.length;){if(g.indices[0]==(c?e:d)){var h=g.indices[1]-
g.indices[0];g.indices[0]=c?d:e;g.indices[1]=g.indices[0]+h;f++;if(f==b.length)break;g=b[f]}h=a.charCodeAt(e);55296<=h&&56319>=h&&e<a.length-1&&(h=a.charCodeAt(e+1),56320<=h&&57343>=h&&e++);d++;e++}}};e.txt.splitTags=function(a){a=a.split("<");for(var b,c=[],e=0;e<a.length;e+=1)if(b=a[e]){b=b.split(">");for(var d=0;d<b.length;d+=1)c.push(b[d])}else c.push("");return c};e.txt.hitHighlight=function(a,b,c){b=b||[];c=c||{};if(0===b.length)return a;c=c.tag||"em";c=["<"+c+">","</"+c+">"];a=e.txt.splitTags(a);
var d,f,g="",h=0,k=a[0],l=0,n=0,m=!1,q=k,r=[],u;for(d=0;d<b.length;d+=1)for(f=0;f<b[d].length;f+=1)r.push(b[d][f]);for(b=0;b<r.length;b+=1){f=r[b];d=c[b%2];for(u=!1;null!=k&&f>=l+k.length;)g+=q.slice(n),m&&f===l+q.length&&(g+=d,u=!0),a[h+1]&&(g+="<"+a[h+1]+">"),l+=q.length,n=0,h+=2,q=k=a[h],m=!1;u||null==k?u||(g+=d):(m=f-l,g+=q.slice(n,m)+d,n=m,m=0===b%2?!0:!1)}if(null!=k)for(n<q.length&&(g+=q.slice(n)),b=h+1;b<a.length;b+=1)g+=0===b%2?a[b]:"<"+a[b]+">";return g};var q=[f(65534),f(65279),f(65535),
f(8234),f(8235),f(8236),f(8237),f(8238)];e.txt.getTweetLength=function(a,b){b||(b={short_url_length:22,short_url_length_https:23});var c=e.txt.getUnicodeTextLength(a),d=e.txt.extractUrlsWithIndices(a);e.txt.modifyIndicesFromUTF16ToUnicode(a,d);for(var f=0;f<d.length;f++)c+=d[f].indices[0]-d[f].indices[1],c=d[f].url.toLowerCase().match(e.txt.regexen.urlHasHttps)?c+b.short_url_length_https:c+b.short_url_length;return c};e.txt.isInvalidTweet=function(a){return a?140<e.txt.getTweetLength(a)?"too_long":
e.txt.hasInvalidCharacters(a)?"invalid_characters":!1:"empty"};e.txt.hasInvalidCharacters=function(a){for(var b=0;b<q.length;b++)if(0<=a.indexOf(q[b]))return!0;return!1};e.txt.isValidTweetText=function(a){return!e.txt.isInvalidTweet(a)};e.txt.isValidUsername=function(a){if(!a)return!1;var b=e.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var r=a(/^#{validMentionOrList}$/);e.txt.isValidList=function(a){a=a.match(r);return!(!a||""!=a[1]||!a[4])};e.txt.isValidHashtag=function(a){if(!a)return!1;
var b=e.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)};e.txt.isValidUrl=function(a,b,c){null==b&&(b=!0);null==c&&(c=!0);if(!a)return!1;var d=a.match(e.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;a=d[1];var f=d[2],h=d[3],k=d[4],d=d[5];return(!c||g(a,e.txt.regexen.validateUrlScheme)&&a.match(/^https?$/i))&&g(h,e.txt.regexen.validateUrlPath)&&g(k,e.txt.regexen.validateUrlQuery,!0)&&g(d,e.txt.regexen.validateUrlFragment,!0)?b&&g(f,e.txt.regexen.validateUrlUnicodeAuthority)||
!b&&g(f,e.txt.regexen.validateUrlAuthority):!1};"undefined"!=typeof module&&module.exports&&(module.exports=e.txt);"function"==typeof define&&define.amd&&define([],e.txt);if("undefined"!=typeof window)if(window.twttr)for(var u in e)window.twttr[u]=e[u];else window.twttr=e})();
$(function(){$(document).ajaxError(function(a,c,d){if(!1!==d.alert_on_error&&0!==c.readyState)app.on_ajax_error(c,d)}).ajaxComplete(app.on_ajax_complete).ajaxSend(function(a,c,d){c.setRequestHeader("Accept","application/x-javascript, text/javascript, text/html, application/xml, text/xml, */*");a=app.get_csrf_token();d.skip_csrf||d.type.match(/^get$/i)||!a||c.setRequestHeader("X-CSRF-Token",a)})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/annotation_filter":function(a,c,d){var b={all:function(){return function(){return!0}},featured:function(){return function(a){return a.featured}},annotator:function(a){return function(b){return b.annotator_login===a}}};a=function(a){this.filter_string=a;a=this.filter_args=a.split(":");var c=this.filter_type=a.shift();this.test=b[c].apply(null,a)};a.ALL=new a("all");d.exports=a}})})();window.app=window.app||{};
$.extend(window.app,{ajaxQueue:jQuery.manageAjax.create("queue",{queue:!0}),markdown_to_html:function(a,c,d){var b=function(a){var b=new Attacklab.showdown.converter;a=a.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(a){return"\n\n![]("+$.trim(a)+")"});a=b.makeHtml(a);return $("<div>").append(a).find("a").each(function(){var a=$(this);a.attr("href").match(/^\d+$/)&&a.attr("href","/"+a.attr("href"))}).end().html()};if(null==c)return b(a);
var g=c.attr("data-autolink-mentions")&&a.match(/@\S/);-1<a.indexOf("[[")||g||c.html(b(a));$.ajax_with_retry({url:"/utils/markdown_preview",type:"POST",data:{md:a,autolink_mentions:g},success:function(a){c.html(a);d=d||$.noop;d(c);app.setup_embedly()}});return c},get_csrf_token:function(){return $.cookie("_csrf_token")},setup_zeroclipboard:function(){var a;a="https://assets.genius.com/flash/ZeroClipboard.swf?1473794981".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:a});
$(document.body).on("click",".copy_to_clipboard",function(){return!1});$(document.body).on("click",".copy_content input, .embed_content input",function(){this.select()});var c=new ZeroClipboard;c.on("ready",function(){c.on("copy",function(a){a.clipboardData.setData("text/plain",$(a.target).attr("title"))});c.on("aftercopy",function(a){var b=$(a.target),c=b.text();b.text("Copied!").addClass("copied");setTimeout(function(){b.text(c).removeClass("copied")},500)})});$(document).on("mouseenter",".copy_to_clipboard.inactive",
function(){ZeroClipboard.focus(this);c.clip(this);$(this).removeClass("inactive")})},is_on_song_page:function(){return 0<$("body.act-show.cont-songs").length&&0<$(".lyrics").length},set_up_timeago:function(){var a=null,c=function(a){$(a||"body").find("[data-timeago]").each(function(){var a=$(this),c=a.data("timeago"),e=null;a.data("timeago-shortened")?(e=$.timeago.settings.strings,$.timeago.settings.strings={suffixAgo:"",seconds:"<1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",
month:"1 month",months:"%d months",year:"1 year",years:"%d years"},c=$.timeago(c),$.timeago.settings.strings=e,e=c):e=$.timeago(c).replace(/^about /,"");e!==a.text()&&a.text(e)})};return function(d){c(d);a||(a=setInterval(function(){c()},6E4))}}(),set_up_autogrow:function(){$(document).on("focus",".autogrow",function(){$(this).autosize({callback:function(){$(this).trigger("textarea:autogrown")}}).removeClass("autogrow")})},set_up_dirtyable_inputs:function(){$(document).on("focus","textarea:not([data-not-dirtyable])",
function(){$(this).dirtyable()})},delete_annotation:function(a){var c={_method:"delete"},d=$("#explain_as").attr("login");d&&(c.explain_as=d);app.ajaxQueue.add({type:"post",url:a,data:c})},set_up_disable_annotation_draft_status_button:function(){$(document).on("click",".disable_annotation_draft_status",function(){if(!confirm("Are you sure? This annotation will be publicly visible."))return!1;var a=$(this);$.post(a.attr("href"),{_method:"put"}).then(function(){a.prop("href","#").removeClass(".disable_annotation_draft_status").text("published!")});
return!1})},start_annotation_edit_mode:function(a,c){c||(c="");var d=a.closest(".annotation_container");a.hide().after($("#edit_annotation_form").html());d.addClass("editing_annotation");d=a.nextAll(".edit_annotation_form").addClass("editing_explanation");d.find("textarea").trigger("dirtyable:changed",!0);a.find(".edit_annotation").data("proposed_edit")&&(d.find(".submit_annotation").attr("data-proposed_edit",!0),d.find(".annotation_text_wrapper .edit_label").first().html("Propose an edit:"));""!==
$.trim(c)&&d.children(".edit_annotation_form-integration_notice").removeClass("hide");var b=$.trim(a.find(".markdown_version").val()+c);a.hasClass("description")&&"?"===b&&(b="");d.find(".annotation_text").focus().val(b).trigger("autosize.resize");app.set_up_vidyard_id_container(a);app.set_up_tooltip_lyric_editor();$("#explain_as").attr("login")&&$(".annotation_container").addClass("current_user_can_add_verified_to_this_song");return d},process_auto_load_containers:function(a){$(a||".auto_load_url:visible, .auto_load_url.load_if_not_visible").each(function(){var a=
$(this);$.ajax_with_retry({url:a.attr("data-url"),success:function(d){if(""==$.trim(d))return a.remove();a.html(d).removeClass("auto_load_url").trigger("auto_load_url:loaded");setTimeout(function(){app.activate_more_links(a)},250)}})})},activate_more_links:function(a){$(a||"body").find("a.more:visible:not(.loading, .no_auto_more a)").click()},angular_inject_get__deprecated:function(a){return angular.element(document.body).injector().get(a)}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/flash":function(a,c,d){d.exports={read:function(){var a=$.cookie("flash");if(!a)return{};this.clear();return JSON.parse(a)},clear:function(){$.removeCookie("flash",{path:"/"})}}}})})();
$(function(){$(document).on("click",".toggle_target",function(a){$(this).toggle_target();a.stopImmediatePropagation();return!1});$(document).on("click",".click_to_select_all",function(){$(this).select()});$(document).on("click",".click_to_toggle_hidden_radio_button",function(){var a=$(this).find('input[type="radio"]');a.prop("checked",!a.is(":checked"));return!1});$(document).on("click",".custom_share[data-service='facebook']",function(){FB.ui({method:"share",href:$(this).attr("href")},function(){});
return!1});$(document).on("click","[data-focuses-form-field]",function(){$("[data-focusable-form-field="+$(this).data("focuses-form-field")+"]").focus()});$(document).on("click",".custom_share[data-service='twitter']:not(.tweet_composer, .auth)",function(a){a.stopImmediatePropagation();return!1});$(document).on("focus",".condensed textarea, .condensed input",function(){$(this).closest(".condensed").removeClass("condensed");$(this).trigger("genius:resized")});$(document).on("click",'form.validate input[type="submit"], form[data-validate] input[type="submit"]',
function(a){var c=$(this.form).validate();if(!c.form())return c.showErrors(),a.stopImmediatePropagation(),!1}).on("click","[data-disable-with]",function(a){var c=$(this);if(!c.attr("disabled")){var d=c.data("disable-with"),b=c.is("button")?"html":"val";c.data("value-before-disabled",c.data("value-before-disabled")||c[b]());c[b](d);c.attr("disabled",!0);c.attr("href","#");a.preventDefault();this.form&&(a=$(this.form),a.trigger("submit"),a.one("ajax:complete",function(){c[b](c.data("value-before-disabled"));
c.removeAttr("disabled")}))}});$(document).on("click","[data-method]",function(){var a=$(this),c=a.attr("target"),a=$("<form>",{method:"post",action:a.attr("href")}).append($("<input>",{name:"_method",value:a.attr("data-method"),type:"hidden"})).append($("<input>",{name:"authenticity_token",value:app.get_csrf_token(),type:"hidden"}));c&&a.attr("target",c);a.hide().appendTo("body").submit();return!1});$(".header-primary").on("click",".create_account:not(.pressed)",function(){$.cookie("desired_location",
window.location.href,{path:"/"});$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1})});$(document).on("click",".edit_annotation",function(){if($(".edit_annotation_form:visible").length)return!1;app.start_annotation_edit_mode($(this).closest(".annotation_unit"));return!1});$(document).on("click",".report_annotation, .report_forum_post",function(){if(!confirm("Are you sure?"))return!1;var a=$(this);$.post(a.data("href")).done(function(){a.text("thanks, we\u2019ll notify the moderators").removeClass("report_annotation").removeClass("report_forum_post").removeAttr("href")});
return!1});$(document).on("click",".feature_annotation",function(){var a=$(this);$.post(a.attr("href")).done(function(){a.closest(".annotation_unit").trigger("annotation:featured");a.text("featured").addClass("unfeature_annotation").removeClass("feature_annotation");a.attr("href",a.attr("data-report-url"));setTimeout(function(){a.text("unfeature")},2E3)});return!1});$(document).on("click",".unfeature_annotation",function(){var a=$(this);$.post(a.attr("href")).done(function(){a.closest(".annotation_unit").trigger("annotation:unfeatured");
a.text("unfeatured").addClass("feature_annotation").removeClass("unfeature_annotation");a.attr("href",a.attr("data-feature-url"));setTimeout(function(){a.text("feature")},2E3)});return!1});$(document).on("click",".cancel_annotation",function(){var a=$(this),c=a.closest(".edit_annotation_form"),d=c.prev(".annotation_unit"),b=d.closest(".annotation_container"),a=a.closest(".qtip.explanation");a.length&&(a.qtip("api").beforeHide=function(){return!0},d.hasClass("un_edited")&&d.find(".delete_annotation").data("no-confirm",
!0).click());b.removeClass("editing_annotation");c.find("textarea").trigger("dirtyable:changed",!1);c.remove();d.hasClass("needs_exegesis")&&!d.hasClass("description")||d.show();a.length&&a.is(":visible")&&a.qtip("api").reposition();return!1});$(document).on("click",".submit_annotation",function(){var a=$(this),c=a.closest(".edit_annotation_form"),d=c.prev(".annotation_unit"),b=d.closest(".annotation_container"),g=d.attr("data-id"),e=b.attr("data-id"),h=!!d.closest(".stand_alone_annotation_container").length||
d.hasClass("description"),f=a.data("proposed_edit"),k=$.trim(c.find(".annotation_text").val()),l=$.trim(c.find(".video_id").val()),n=$.trim(c.find(".edit_annotation_note").val()),m=k||l||d.hasClass("video_processing");if(!m&&!d.hasClass("verified")&&!d.hasClass("description"))return!1;var g=a.attr("data-url")||"/annotations/"+g,q={_method:a.attr("data-method")||"put","annotation[body]":k};l&&(q["annotation[video_id]"]=l);n&&(q["annotation[edit_note]"]=n);if(l=$("#explain_as").attr("login"))q.explain_as=
l;(m||d.hasClass("description"))&&app.ajaxQueue.add({type:"post",url:g,data:q,success:function(a){h||app.update_editorial_state(e,a.editorial_state);a.user_can_clear_votes&&d.find(".footer .voting_links").addClass("user_can_clear_votes")}});d.find(".markdown_version").text(k);d.removeClass("being_created");d.hasClass("description")&&(k?d.removeClass("blank"):d.addClass("blank"),"?"==k?d.addClass("needs_exegesis"):d.removeClass("needs_exegesis"));if(0<c.find(".lyric_editor").length&&(n=c.find(".lyric_text").data("old-value"),
l=$.trim(c.find(".lyric_text").val()),""!=l&&l!=n&&(n=$("div.lyrics a[data-id='"+e+"']"),l=l.replace(/\n/gi,"<br>"),n.html().match(/<br[\s\/]?>$/i)&&(l+="<br>"),n.html(l),app.save_lyrics()),!m&&d.hasClass("verified")))return b.find("button.cancel_annotation").click(),!1;var r;h||(r=a.closest(".qtip"),r.qtip("api").beforeHide=function(){return!0},k.match(/^\?$/)?d.addClass("needs_exegesis"):d.removeClass("needs_exegesis"));c.find("textarea").trigger("dirtyable:changed",!1);b.removeClass("editing_annotation");
c.remove();f?(a=d.find(".editor_links .view_proposed_edits").closest("a"),$.facebox("Your edit has been proposed and will be reviewed!<br>"+$("<div>").append(a.clone()).html()),d.find(".view_proposed_edits_wrapper").addClass("has_pending_edits")):app.markdown_to_html(k,d.find(".annotation_body .body_text"),function(){h||(r.qtip("api").reposition(),app.update_bulk_loaded_annotation(r.find(".annotation_container")))});d.show().addClass("just_submitted_edit").removeClass("un_edited").closest(".annotation_container").addClass("just_submitted_edit");
!h&&r.qtip("api").reposition()});$(document).on("submit","form[data-submit-with-ajax-queue]",function(a){var c=$(this);c.find('input[type="submit"]').each(function(){var a=$(this);c.data("disable-with")&&a.prop("value",c.data("disable-with"));a.prop("disabled",!0)});c.submitWithAjaxQueue({dataType:c.data("ajax-data-type")||"script",success:function(a){c.trigger("submit_with_ajax_queue:success",a)},error:function(a){c.trigger("submit_with_ajax_queue:error",a)},complete:function(a){c.trigger("submit_with_ajax_queue:complete",
a)}});a.stopImmediatePropagation();return!1});$(document).on("click","[data-select-on-click]",function(){this.select()})});(function(){var a=$(document.documentElement);a.toggleClass("chrome",!!bowser.chrome);a.toggleClass("iphone",!!bowser.iphone);a.toggleClass("ios",!!bowser.ios);a.toggleClass("win",/Windows/i.test(navigator.userAgent));a.toggleClass("msie",!!bowser.msie);a.toggleClass("firefox",!!bowser.firefox)})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/jquery":function(a,c,d){d.exports=(window["com.genius.Genius"]||{}).jQuery||jQuery}})})();(function(){window["com.genius.Genius"].require.define({"shared/universal/keyboard_shortcuts":function(a,c,d){var b=c("shared/universal/jquery");d.exports={shortcut:function(a,c){b(window).bind("keydown",a,function(a){c(a);return!1})}}}})})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/lodash":function(a,c,d){d.exports=(window["com.genius.Genius"]||{}).lodash}})})();Modernizr.addTest("flash_enabled",function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){return navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/mutation_observer":function(a,c,d){d.exports=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}})})();(function(){window["com.genius.Genius"].require.define({"shared/universal/performance_mark_once":function(a,c,d){var b={};d.exports=function(a){if(!b.hasOwnProperty(a))return b[a]=!0,window.performance.mark("genius."+a)}}})})();
String.prototype.startsWith||(String.prototype.startsWith=function(a,c){c=c||0;return this.indexOf(a,c)===c});(function(){window["com.genius.Genius"].require.define({"shared/universal/promise_channel":function(a,c,d){var b=function(a){this.buffer=[];a.done(function(a){this.buffer.forEach(function(b){a[b.method].apply(a,b.arguments)})}.bind(this))};["bind","notify","call"].forEach(function(a){b.prototype[a]=function(){this.buffer.push({method:a,arguments:arguments})}});d.exports=b}})})();
$(function(){$(document).on("rg:toggled",".toggle_follow",function(){var a=$(this),c=a.hasClass("new_status_follow");a.removeClass("disabled");a.toggleClass("new_status_follow",!c);a.toggleClass("new_status_unfollow",c);a.find("span").text(c?"Following":"Follow")});$(document).on("click",".toggle_follow:not(.disabled)",function(a){a.preventDefault();a=$(this);var c=a.hasClass("new_status_follow");a.addClass("disabled");a.trigger("rg:toggled");$.ajax({type:c?"post":"delete",url:a.attr("href")})});
$(document).on("hover",".toggle_follow.new_status_unfollow",function(a){var c=$(this);"mouseenter"===a.type?c.find("span").text("Unfollow!"):"mouseleave"===a.type&&(a=c.hasClass("new_status_unfollow"),c.find("span").text(a?"Following":"Follow"))})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/tweet_composer":function(a,c,d){var b=c("shared/universal/jquery");a=function(a){var b=a.find(".twitter_button");b.attr({"data-href":b.attr("href"),href:"#"});this.$annotation=a;this.$compose_tweet_wrapper=this.$annotation.find(".compose_tweet_wrapper");this.attach_events()};a.prototype={show_tweet_composer:function(){this.$compose_tweet_wrapper.show();var a=this.$compose_tweet_wrapper.find("#tweet_text");a.focus();Modernizr.touch||
(a[0].selectionStart=0,a[0].selectionEnd=parseInt(a.attr("data-tweet-body-length"),10))},validate_tweet_text:function(){var a=this.$compose_tweet_wrapper.find("#tweet_text"),b=a.closest(".annotation_tweet_form"),c=a.closest(".compose_tweet_wrapper"),d=a.val(),k=b.find(".referent_image"),a=b.find(".characters_remaining"),b=b.find('input[type="submit"]');c.hasClass("has_image_attachment")&&(d=d+" "+(k.attr("src")||"http://www.example.com/image.png"));c=140-twttr.txt.getTweetLength(d);a.html(c);c=0>
c;a.toggleClass("warning",c);b.prop("disabled",c)},toggle_image_attachment:function(){var a=!this.$compose_tweet_wrapper.hasClass("has_image_attachment");this.$compose_tweet_wrapper.toggleClass("has_image_attachment",a);this.$compose_tweet_wrapper.find("#include_referent_image").val(a);this.$compose_tweet_wrapper.find("#tweet_text").focus();this.validate_tweet_text()},attach_events:function(){var a=this.$compose_tweet_wrapper;this.$annotation.find(".twitter_button.tweet_composer").on("click",function(){this.show_tweet_composer();
return!1}.bind(this));this.$annotation.find(".twitter_button.auth").on("click",function(){b.cookie("desired_location",b(this).closest(".embedded_annotation").attr("data-path"),{path:"/"});b.cookie("focus_tweet_text",!0,{path:"/",expires:1/24/60})});if(b.cookie("focus_tweet_text"))b(window).one("frame_visible",function(){this.show_tweet_composer();return!1}.bind(this));this.$annotation.find(".annotation_tweet_form").on("click","input[type='submit']",function(){b(this).val("Tweeting...")}).on("submit_with_ajax_queue:success",
function(b,c){a.html(c)}).on("submit_with_ajax_queue:error",function(){a.find("footer").html('<span class="tweet_composer_error"><em>Whoops!</em> Refresh the page to try again.</span>')}).on("submit_with_ajax_queue:complete",function(){a.find("#tweet_text").attr("disabled",!0)});a.on("click",".referent_image",function(){b(this).toggleClass("zoom")});this.$annotation.find("#tweet_text").on("input focus",this.validate_tweet_text.bind(this));this.$annotation.find(".toggle_attachment_label").on("click",
function(){this.toggle_image_attachment();return!1}.bind(this))}};d.exports=a}})})();
(function(a){function c(a,b){b=b||Error;return function(){var c=arguments,e=c[0],d="["+(a?a+":":"")+e+"] ",f,d=d+c[1].replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1)+2;return b<c.length?Ea(c[b]):a}),d=d+("\nhttp://errors.angularjs.org/1.5.5/"+(a?a+"/":"")+e);f=2;for(e="?";f<c.length;f++,e="&")d+=e+"p"+(f-2)+"="+encodeURIComponent(Ea(c[f]));return new b(d)}}function d(a){if(null==a||K(a))return!1;if(U(a)||D(a)||R&&a instanceof R)return!0;var b="length"in Object(a)&&a.length;return A(b)&&(0<=b&&
(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function b(a,c,e){var f,g;if(a)if(B(a))for(f in a)"prototype"==f||"length"==f||"name"==f||a.hasOwnProperty&&!a.hasOwnProperty(f)||c.call(e,a[f],f,a);else if(U(a)||d(a)){var h="object"!==typeof a;f=0;for(g=a.length;f<g;f++)(h||f in a)&&c.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==b)a.forEach(c,e,a);else if(J(a))for(f in a)c.call(e,a[f],f,a);else if("function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&c.call(e,a[f],f,a);
else for(f in a)fb.call(a,f)&&c.call(e,a[f],f,a);return a}function g(a,b,c){for(var e=Object.keys(a).sort(),d=0;d<e.length;d++)b.call(c,a[e[d]],e[d]);return e}function e(a){return function(b,c){a(c,b)}}function h(){return++yc}function f(a,b,c){for(var e=a.$$hashKey,d=0,g=b.length;d<g;++d){var h=b[d];if(x(h)||B(h))for(var k=Object.keys(h),l=0,n=k.length;l<n;l++){var m=k[l],q=h[m];c&&x(q)?z(q)?a[m]=new Date(q.valueOf()):C(q)?a[m]=new RegExp(q):q.nodeName?a[m]=q.cloneNode(!0):G(q)?a[m]=q.clone():(x(a[m])||
(a[m]=U(q)?[]:{}),f(a[m],[q],!0)):a[m]=q}}e?a.$$hashKey=e:delete a.$$hashKey;return a}function k(a){return f(a,lb.call(arguments,1),!1)}function l(a){return f(a,lb.call(arguments,1),!0)}function n(a){return parseInt(a,10)}function m(a,b){return k(Object.create(a),b)}function q(){}function r(a){return a}function u(a){return function(){return a}}function t(a){return B(a.toString)&&a.toString!==Ga}function v(a){return"undefined"===typeof a}function w(a){return"undefined"!==typeof a}function x(a){return null!==
a&&"object"===typeof a}function J(a){return null!==a&&"object"===typeof a&&!wd(a)}function D(a){return"string"===typeof a}function A(a){return"number"===typeof a}function z(a){return"[object Date]"===Ga.call(a)}function B(a){return"function"===typeof a}function C(a){return"[object RegExp]"===Ga.call(a)}function K(a){return a&&a.window===a}function M(a){return a&&a.$evalAsync&&a.$watch}function N(a){return"boolean"===typeof a}function y(a){return a&&A(a.length)&&De.test(Ga.call(a))}function G(a){return!(!a||
!(a.nodeName||a.prop&&a.attr&&a.find))}function V(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function p(a){return ha(a.nodeName||a[0]&&a[0].nodeName)}function P(a,b){var c=a.indexOf(b);0<=c&&a.splice(c,1);return c}function O(a,c){function e(a,b){var c=b.$$hashKey,f;if(U(a)){f=0;for(var g=a.length;f<g;f++)b.push(d(a[f]))}else if(J(a))for(f in a)b[f]=d(a[f]);else if(a&&"function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&(b[f]=d(a[f]));else for(f in a)fb.call(a,
f)&&(b[f]=d(a[f]));c?b.$$hashKey=c:delete b.$$hashKey;return b}function d(a){if(!x(a))return a;var b=g.indexOf(a);if(-1!==b)return h[b];if(K(a)||M(a))throw Eb("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var b=!1,c=f(a);void 0===c&&(c=U(a)?[]:Object.create(wd(a)),b=!0);g.push(a);h.push(c);return b?e(a,c):c}function f(a){switch(Ga.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(d(a.buffer));
case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(B(a.cloneNode))return a.cloneNode(!0)}var g=[],
h=[];if(c){if(y(c)||"[object ArrayBuffer]"===Ga.call(c))throw Eb("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===c)throw Eb("cpi","Can't copy! Source and destination are identical.");U(c)?c.length=0:b(c,function(a,b){"$$hashKey"!==b&&delete c[b]});g.push(a);h.push(c);return e(a,c)}return d(a)}function W(a,b){if(U(a)){b=b||[];for(var c=0,e=a.length;c<e;c++)b[c]=a[c]}else if(x(a))for(c in b=b||{},a)if("$"!==c.charAt(0)||"$"!==c.charAt(1))b[c]=a[c];return b||a}function Z(a,b){if(a===
b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,e;if(c==typeof b&&"object"==c)if(U(a)){if(!U(b))return!1;if((c=a.length)==b.length){for(e=0;e<c;e++)if(!Z(a[e],b[e]))return!1;return!0}}else{if(z(a))return z(b)?Z(a.getTime(),b.getTime()):!1;if(C(a))return C(b)?a.toString()==b.toString():!1;if(M(a)||M(b)||K(a)||K(b)||U(b)||z(b)||C(b))return!1;c=da();for(e in a)if("$"!==e.charAt(0)&&!B(a[e])){if(!Z(a[e],b[e]))return!1;c[e]=!0}for(e in b)if(!(e in c)&&"$"!==e.charAt(0)&&
w(b[e])&&!B(b[e]))return!1;return!0}return!1}function la(a,b,c){return a.concat(lb.call(b,c))}function ia(a,b){var c=2<arguments.length?lb.call(arguments,2):[];return!B(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,la(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function wa(b,c){var e=c;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?e=void 0:K(c)?e="$WINDOW":c&&a.document===c?e="$DOCUMENT":M(c)&&(e="$SCOPE");
return e}function aa(a,b){if(!v(a))return A(b)||(b=b?2:null),JSON.stringify(a,wa,b)}function ya(a){return D(a)?JSON.parse(a):a}function Ra(a,b){a=a.replace(Ee,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return isNaN(c)?b:c}function H(a,b,c){c=c?-1:1;var e=a.getTimezoneOffset();b=Ra(b,e);c*=b-e;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+c);return a}function na(a){a=R(a).clone();try{a.empty()}catch(b){}var c=R("<div>").append(a).html();try{return a[0].nodeType===Xb?ha(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,
function(a,b){return"<"+ha(b)})}catch(b){return ha(c)}}function Q(a){try{return decodeURIComponent(a)}catch(b){}}function S(a){var c={};b((a||"").split("&"),function(a){var b,e,d;a&&(e=a=a.replace(/\+/g,"%20"),b=a.indexOf("="),-1!==b&&(e=a.substring(0,b),d=a.substring(b+1)),e=Q(e),w(e)&&(d=w(d)?Q(d):!0,fb.call(c,e)?U(c[e])?c[e].push(d):c[e]=[c[e],d]:c[e]=d))});return c}function Sa(a){var c=[];b(a,function(a,e){U(a)?b(a,function(a){c.push(pa(e,!0)+(!0===a?"":"="+pa(a,!0)))}):c.push(pa(e,!0)+(!0===
a?"":"="+pa(a,!0)))});return c.length?c.join("&"):""}function ua(a){return pa(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function pa(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Ab(a,b){var c,e,d=Yb.length;for(e=0;e<d;++e)if(c=Yb[e]+b,D(c=a.getAttribute(c)))return c;return null}function Bb(a,c){var e,d,f={};b(Yb,function(b){b+="app";!e&&a.hasAttribute&&
a.hasAttribute(b)&&(e=a,d=a.getAttribute(b))});b(Yb,function(b){b+="app";var c;!e&&(c=a.querySelector("["+b.replace(":","\\:")+"]"))&&(e=c,d=c.getAttribute(b))});e&&(f.strictDi=null!==Ab(e,"strict-di"),c(e,d?[d]:[],f))}function pb(c,e,d){x(d)||(d={});d=k({strictDi:!1},d);var f=function(){c=R(c);if(c.injector()){var b=c[0]===a.document?"document":na(c);throw Eb("btstrpd","App already bootstrapped with this element '{0}'",b.replace(/</,"&lt;").replace(/>/,"&gt;"));}e=e||[];e.unshift(["$provide",function(a){a.value("$rootElement",
c)}]);d.debugInfoEnabled&&e.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);e.unshift("ng");b=Oa(e,d.strictDi);b.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,e){a.$apply(function(){b.data("$injector",e);c(b)(a)})}]);return b},g=/^NG_ENABLE_DEBUG_INFO!/,h=/^NG_DEFER_BOOTSTRAP!/;a&&g.test(a.name)&&(d.debugInfoEnabled=!0,a.name=a.name.replace(g,""));if(a&&!h.test(a.name))return f();a.name=a.name.replace(h,"");Ha.resumeBootstrap=function(a){b(a,function(a){e.push(a)});
return f()};B(Ha.resumeDeferredBootstrap)&&Ha.resumeDeferredBootstrap()}function qb(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name;a.location.reload()}function rb(a){a=Ha.element(a).injector();if(!a)throw Eb("test","no injector found for element argument to getTestability");return a.get("$$testability")}function Ob(a,b){b=b||"_";return a.replace(Fe,function(a,c){return(c?b:"")+a.toLowerCase()})}function Da(){var b;if(!xd){var c=Ac();(wb=v(c)?a.jQuery:c?a[c]:void 0)&&wb.fn.on?(R=wb,k(wb.fn,{scope:Zb.scope,
isolateScope:Zb.isolateScope,controller:Zb.controller,injector:Zb.injector,inheritedData:Zb.inheritedData}),b=wb.cleanData,wb.cleanData=function(a){for(var c,e=0,d;null!=(d=a[e]);e++)(c=wb._data(d,"events"))&&c.$destroy&&wb(d).triggerHandler("$destroy");b(a)}):R=Y;Ha.element=R;xd=!0}}function sb(a,b,c){if(!a)throw Eb("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function Ka(a,b,c){c&&U(a)&&(a=a[a.length-1]);sb(B(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||
"Object":typeof a));return a}function za(a,b){if("hasOwnProperty"===a)throw Eb("badname","hasOwnProperty is not a valid {0} name",b);}function gb(a,b,c){if(!b)return a;b=b.split(".");for(var e,d=a,f=b.length,g=0;g<f;g++)e=b[g],a&&(a=(d=a)[e]);return!c&&B(a)?ia(d,a):a}function La(a){for(var b=a[0],c=a[a.length-1],e,d=1;b!==c&&(b=b.nextSibling);d++)if(e||a[d]!==b)e||(e=R(lb.call(a,0,d))),e.push(b);return e||a}function da(){return Object.create(null)}function Aa(a){function b(a,c,e){return a[c]||(a[c]=
e())}var e=c("$injector"),d=c("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||c;return b(a,"module",function(){var a={};return function(c,f,g){if("hasOwnProperty"===c)throw d("badname","hasOwnProperty is not a valid {0} name","module");f&&a.hasOwnProperty(c)&&(a[c]=null);return b(a,c,function(){function a(b,c,e,f){f||(f=d);return function(){f[e||"push"]([b,c,arguments]);return L}}function b(a,e){return function(b,f){f&&B(f)&&(f.$$moduleName=c);d.push([a,e,arguments]);return L}}if(!f)throw e("nomod",
"Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",c);var d=[],h=[],k=[],l=a("$injector","invoke","push",h),L={_invokeQueue:d,_configBlocks:h,_runBlocks:k,requires:f,name:c,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),
animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:l,run:function(a){k.push(a);return this}};g&&l(g);return L})}})}function Kb(a){var b=[];return JSON.stringify(a,function(a,c){c=wa(a,c);if(x(c)){if(0<=b.indexOf(c))return"...";b.push(c)}return c})}function Ea(a){return"function"===typeof a?a.toString().replace(/ \{[\s\S]*$/,""):
v(a)?"undefined":"string"!==typeof a?Kb(a):a}function Cb(e){k(e,{bootstrap:pb,copy:O,extend:k,merge:l,equals:Z,element:R,forEach:b,injector:Oa,noop:q,bind:ia,toJson:aa,fromJson:ya,identity:r,isUndefined:v,isDefined:w,isString:D,isFunction:B,isObject:x,isNumber:A,isElement:G,isArray:U,version:Ie,isDate:z,lowercase:ha,uppercase:Bc,callbacks:{counter:0},getTestability:rb,$$minErr:c,$$csp:Fb,reloadWithDebugInfo:qb});Tc=Aa(a);Tc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:te});
a.provider("$compile",ec).directive({a:Je,input:yd,textarea:yd,form:Ke,script:Le,select:Me,style:Ne,option:Oe,ngBind:Pe,ngBindHtml:Qe,ngBindTemplate:Re,ngClass:Se,ngClassEven:Te,ngClassOdd:Ue,ngCloak:Ve,ngController:We,ngForm:Xe,ngHide:Ye,ngIf:Ze,ngInclude:$e,ngInit:af,ngNonBindable:bf,ngPluralize:cf,ngRepeat:df,ngShow:ef,ngStyle:ff,ngSwitch:gf,ngSwitchWhen:hf,ngSwitchDefault:jf,ngOptions:kf,ngTransclude:lf,ngModel:mf,ngList:nf,ngChange:of,pattern:zd,ngPattern:zd,required:Ad,ngRequired:Ad,minlength:Bd,
ngMinlength:Bd,maxlength:Cd,ngMaxlength:Cd,ngValue:pf,ngModelOptions:qf}).directive({ngInclude:rf}).directive(Cc).directive(Dd);a.provider({$anchorScroll:Pa,$animate:sf,$animateCss:tf,$$animateJs:uf,$$animateQueue:vf,$$AnimateRunner:wf,$$animateAsyncRun:xf,$browser:oc,$cacheFactory:Pc,$controller:Qc,$document:Vb,$exceptionHandler:gc,$filter:vd,$$forceReflow:yf,$interpolate:Rc,$interval:xc,$http:Wb,$httpParamSerializer:vb,$httpParamSerializerJQLike:bc,$httpBackend:Lb,$xhrFactory:Mb,$location:le,$log:me,
$parse:pe,$rootScope:se,$q:qe,$$q:ke,$sce:we,$sceDelegate:ve,$sniffer:xe,$templateCache:tc,$templateRequest:ye,$$testability:ze,$timeout:Ae,$window:Be,$$rAF:re,$$jqLite:dc,$$HashMap:zf,$$cookieReader:Ce})}])}function $a(a){return a.replace(Af,function(a,b,c,e){return e?c.toUpperCase():c}).replace(Bf,"Moz$1")}function ib(a){a=a.nodeType;return 1===a||!a||9===a}function Pb(a,c){var e,d,f=c.createDocumentFragment(),g=[];if(Uc.test(a)){e=e||f.appendChild(c.createElement("div"));d=(Cf.exec(a)||["",""])[1].toLowerCase();
d=Wa[d]||Wa._default;e.innerHTML=d[1]+a.replace(Df,"<$1></$2>")+d[2];for(d=d[0];d--;)e=e.lastChild;g=la(g,e.childNodes);e=f.firstChild;e.textContent=""}else g.push(c.createTextNode(a));f.textContent="";f.innerHTML="";b(g,function(a){f.appendChild(a)});return f}function Db(a,b){var c=a.parentNode;c&&c.replaceChild(b,a);b.appendChild(a)}function Y(b){if(b instanceof Y)return b;var c;D(b)&&(b=ka(b),c=!0);if(!(this instanceof Y)){if(c&&"<"!=b.charAt(0))throw Vc("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
return new Y(b)}if(c){c=a.document;var e;b=(e=Ef.exec(b))?[c.createElement(e[1])]:(e=Pb(b,c))?e.childNodes:[]}Qb(this,b)}function tb(a){return a.cloneNode(!0)}function Ta(a,b){b||Ma(a);if(a.querySelectorAll)for(var c=a.querySelectorAll("*"),e=0,d=c.length;e<d;e++)Ma(c[e])}function ab(a,c,e,d){if(w(d))throw Vc("offargs","jqLite#off() does not support the `selector` argument");var f=(d=bb(a))&&d.events,g=d&&d.handle;if(g)if(c){var h=function(b){var c=f[b];w(e)&&P(c||[],e);w(e)&&c&&0<c.length||(a.removeEventListener(b,
g,!1),delete f[b])};b(c.split(" "),function(a){h(a);Dc[a]&&h(Dc[a])})}else for(c in f)"$destroy"!==c&&a.removeEventListener(c,g,!1),delete f[c]}function Ma(a,b){var c=a.ng339,e=c&&ic[c];e&&(b?delete e.data[b]:(e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),ab(a)),delete ic[c],a.ng339=void 0))}function bb(a,b){var c=a.ng339,c=c&&ic[c];b&&!c&&(a.ng339=c=++Ff,c=ic[c]={events:{},data:{},handle:void 0});return c}function ja(a,b,c){if(ib(a)){var e=w(c),d=!e&&b&&!x(b),f=!b;a=(a=bb(a,!d))&&a.data;
if(e)a[b]=c;else{if(f)return a;if(d)return a&&a[b];k(a,b)}}}function F(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function cb(a,c){c&&a.setAttribute&&b(c.split(" "),function(b){a.setAttribute("class",ka((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ka(b)+" "," ")))})}function ba(a,c){if(c&&a.setAttribute){var e=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");b(c.split(" "),function(a){a=
ka(a);-1===e.indexOf(" "+a+" ")&&(e+=a+" ")});a.setAttribute("class",ka(e))}}function Qb(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"===typeof c&&b.window!==b){if(c)for(var e=0;e<c;e++)a[a.length++]=b[e]}else a[a.length++]=b}}function jb(a,b){return Ja(a,"$"+(b||"ngController")+"Controller")}function Ja(a,b,c){9==a.nodeType&&(a=a.documentElement);for(b=U(b)?b:[b];a;){for(var e=0,d=b.length;e<d;e++)if(w(c=R.data(a,b[e])))return c;a=a.parentNode||11===a.nodeType&&a.host}}
function Rb(a){for(Ta(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function ub(a,b){b||Ta(a);var c=a.parentNode;c&&c.removeChild(a)}function cc(b,c){c=c||a;if("complete"===c.document.readyState)c.setTimeout(b);else R(c).on("load",b)}function Ia(a,b){var c=Ec[b.toLowerCase()];return c&&Ed[p(a)]&&c}function Za(a,b){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var d=b[e||c.type],f=d?d.length:0;if(f){if(v(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;
c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var h=d.specialHandlerWrapper||Sb;1<f&&(d=W(d));for(var k=0;k<f;k++)c.isImmediatePropagationStopped()||h(a,c,d[k])}};c.elem=a;return c}function Sb(a,b,c){c.call(a,b)}function Tb(a,b,c){var e=b.relatedTarget;e&&(e===a||Gf.call(a,e))||c.call(a,b)}function dc(){this.$get=function(){return k(Y,{hasClass:function(a,
b){a.attr&&(a=a[0]);return F(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return ba(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return cb(a,b)}})}}function Qa(a,b){var c=a&&a.$$hashKey;if(c)return"function"===typeof c&&(c=a.$$hashKey()),c;c=typeof a;return c="function"==c||"object"==c&&null!==a?a.$$hashKey=c+":"+(b||h)():c+":"+a}function Na(a,c){if(c){var e=0;this.nextUid=function(){return++e}}b(a,this.put,this)}function Ub(a){a=Function.prototype.toString.call(a).replace(Hf,"");return a.match(If)||
a.match(Jf)}function Ua(a){return(a=Ub(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Oa(a,c){function d(a){return function(c,d){if(x(c))b(c,e(a));else return a(c,d)}}function f(a,b){za(a,"service");if(B(b)||U(b))b=p.instantiate(b);if(!b.$get)throw Gb("pget","Provider '{0}' must define $get factory method.",a);return r[a+"Provider"]=b}function g(a,b){return function(){var c=A.invoke(b,this);if(v(c))throw Gb("undef","Provider '{0}' must return a value from $get factory method.",
a);return c}}function h(a,b,c){return f(a,{$get:!1!==c?g(a,b):b})}function k(a){sb(v(a)||U(a),"modulesToLoad","not an array");var c=[],e;b(a,function(a){function b(a){var c,e;c=0;for(e=a.length;c<e;c++){var d=a[c],f=p.get(d[0]);f[d[1]].apply(f,d[2])}}if(!q.get(a)){q.put(a,!0);try{D(a)?(e=Tc(a),c=c.concat(k(e.requires)).concat(e._runBlocks),b(e._invokeQueue),b(e._configBlocks)):B(a)?c.push(p.invoke(a)):U(a)?c.push(p.invoke(a)):Ka(a,"module")}catch(d){throw U(a)&&(a=a[a.length-1]),d.message&&d.stack&&
-1==d.stack.indexOf(d.message)&&(d=d.message+"\n"+d.stack),Gb("modulerr","Failed to instantiate module {0} due to:\n{1}",a,d.stack||d.message||d);}}});return c}function l(a,b){function e(c,d){if(a.hasOwnProperty(c)){if(a[c]===n)throw Gb("cdep","Circular dependency found: {0}",c+" <- "+m.join(" <- "));return a[c]}try{return m.unshift(c),a[c]=n,a[c]=b(c,d)}catch(f){throw a[c]===n&&delete a[c],f;}finally{m.shift()}}function d(a,b,f){var g=[];a=Oa.$$annotate(a,c,f);for(var h=0,k=a.length;h<k;h++){var l=
a[h];if("string"!==typeof l)throw Gb("itkn","Incorrect injection token! Expected service name as string, got {0}",l);g.push(b&&b.hasOwnProperty(l)?b[l]:e(l,f))}return g}return{invoke:function(a,b,c,e){"string"===typeof c&&(e=c,c=null);c=d(a,c,e);U(a)&&(a=a[a.length-1]);e=11>=xb?!1:"function"===typeof a&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a));return e?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var e=U(a)?a[a.length-
1]:a;a=d(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(e,a))},get:e,annotate:Oa.$$annotate,has:function(b){return r.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}c=!0===c;var n={},m=[],q=new Na([],!0),r={$provide:{provider:d(f),factory:d(h),service:d(function(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return h(a,u(b),!1)}),constant:d(function(a,b){za(a,"constant");r[a]=b;t[a]=b}),decorator:function(a,b){var c=p.get(a+"Provider"),
e=c.$get;c.$get=function(){var a=A.invoke(e,c);return A.invoke(b,null,{$delegate:a})}}}},p=r.$injector=l(r,function(a,b){Ha.isString(b)&&m.push(b);throw Gb("unpr","Unknown provider: {0}",m.join(" <- "));}),t={},w=l(t,function(a,b){var c=p.get(a+"Provider",b);return A.invoke(c.$get,c,void 0,a)}),A=w;r.$injectorProvider={$get:u(w)};var y=k(a),A=w.get("$injector");A.strictDi=c;b(y,function(a){a&&A.invoke(a)});return A}function Pa(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window",
"$location","$rootScope",function(b,c,e){function d(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===p(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;B(c)?c=c():G(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):A(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=D(a)?a:c.hash();var b;a?(b=h.getElementById(a))?f(b):(b=d(h.getElementsByName(a)))?f(b):"top"===
a&&f(null):f(null)}var h=b.document;a&&e.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||cc(function(){e.$evalAsync(g)})});return g}]}function Va(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;U(a)&&(a=a.join(" "));U(b)&&(b=b.join(" "));return a+" "+b}function sc(a){D(a)&&(a=a.split(" "));var c=da();b(a,function(a){a.length&&(c[a]=!0)});return c}function kb(a){return x(a)?a:{}}function Oc(a,c,e,d){function f(a){try{a.apply(null,lb.call(arguments,1))}finally{if(u--,0===u)for(;w.length;)try{w.pop()()}catch(b){e.error(b)}}}
function g(){B=null;h();k()}function h(){A=C();A=v(A)?null:A;Z(A,G)&&(A=G);G=A}function k(){if(z!==l.url()||y!==A)z=l.url(),y=A,b(S,function(a){a(l.url(),A)})}var l=this,n=a.location,m=a.history,r=a.setTimeout,p=a.clearTimeout,t={};l.isMock=!1;var u=0,w=[];l.$$completeOutstandingRequest=f;l.$$incOutstandingRequestCount=function(){u++};l.notifyWhenNoOutstandingRequests=function(a){0===u?a():w.push(a)};var A,y,z=n.href,x=c.find("base"),B=null,C=d.history?function(){try{return m.state}catch(a){}}:q;
h();y=A;l.url=function(b,c,e){v(e)&&(e=null);n!==a.location&&(n=a.location);m!==a.history&&(m=a.history);if(b){var f=y===e;if(z===b&&(!d.history||f))return l;var g=z&&zb(z)===zb(b);z=b;y=e;if(!d.history||g&&f){if(!g||B)B=b;c?n.replace(b):g?(c=n,e=b.indexOf("#"),e=-1===e?"":b.substr(e),c.hash=e):n.href=b;n.href!==b&&(B=b)}else m[c?"replaceState":"pushState"](e,"",b),h(),y=A;return l}return B||n.href.replace(/%27/g,"'")};l.state=function(){return A};var S=[],H=!1,G=null;l.onUrlChange=function(b){if(!H){if(d.history)R(a).on("popstate",
g);R(a).on("hashchange",g);H=!0}S.push(b);return b};l.$$applicationDestroyed=function(){R(a).off("hashchange popstate",g)};l.$$checkUrlChange=k;l.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};l.defer=function(a,b){var c;u++;c=r(function(){delete t[c];f(a)},b||0);t[c]=!0;return c};l.defer.cancel=function(a){return t[a]?(delete t[a],p(a),f(q),!0):!1}}function oc(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,e){return new Oc(a,e,b,
c)}]}function Pc(){this.$get=function(){function a(b,d){function f(a){a!=q&&(r?r==a&&(r=a.n):r=a,g(a.n,a.p),g(a,q),q=a,q.n=null)}function g(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in e)throw c("$cacheFactory")("iid","CacheId '{0}' is already taken!",b);var h=0,l=k({},d,{id:b}),L=da(),n=d&&d.capacity||Number.MAX_VALUE,m=da(),q=null,r=null;return e[b]={put:function(a,b){if(!v(b)){if(n<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});f(c)}a in L||h++;L[a]=b;h>n&&this.remove(r.key);return b}},get:function(a){if(n<
Number.MAX_VALUE){var b=m[a];if(!b)return;f(b)}return L[a]},remove:function(a){if(n<Number.MAX_VALUE){var b=m[a];if(!b)return;b==q&&(q=b.p);b==r&&(r=b.n);g(b.n,b.p);delete m[a]}a in L&&(delete L[a],h--)},removeAll:function(){L=da();h=0;m=da();q=r=null},destroy:function(){m=l=L=null;delete e[b]},info:function(){return k({},l,{size:h})}}}var e={};a.info=function(){var a={};b(e,function(b,c){a[c]=b.info()});return a};a.get=function(a){return e[a]};return a}}function tc(){this.$get=["$cacheFactory",function(a){return a("templates")}]}
function ec(c,d){function f(a,c,e){var d=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,g=da();b(a,function(a,b){if(a in A)g[b]=A[a];else{var f=a.match(d);if(!f)throw va("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",c,b,a,e?"controller bindings definition":"isolate scope definition");g[b]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||b};f[4]&&(A[a]=g[b])}});return g}function g(a){var b=a.charAt(0);if(!b||b!==ha(b))throw va("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",
a);if(a!==a.trim())throw va("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a);}var h={},l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,n=/(([\w\-]+)(?:\:([^;]+))?;?)/,t=V("ngSrc,ngSrcset,src,srcset"),I=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,ca=/^(on[a-z]+|formaction)$/,A=da();this.directive=function Ge(a,d){za(a,"directive");D(a)?(g(a),sb(d,"directiveFactory"),h.hasOwnProperty(a)||(h[a]=[],c.factory(a+"Directive",["$injector","$exceptionHandler",
function(c,e){var d=[];b(h[a],function(b,f){try{var g=c.invoke(b);B(g)?g={compile:u(g)}:!g.compile&&g.link&&(g.compile=u(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"EA";g.$$moduleName=b.$$moduleName;d.push(g)}catch(h){e(h)}});return d}])),h[a].push(d)):b(a,e(Ge));return this};this.component=function(a,c){function e(a){function f(b){return B(b)||U(b)?function(c,e){return a.invoke(b,this,{$element:c,$attrs:e})}:b}var g=
c.template||c.templateUrl?c.template:"",h={controller:d,controllerAs:fc(c.controller)||c.controllerAs||"$ctrl",template:f(g),templateUrl:f(c.templateUrl),transclude:c.transclude,scope:{},bindToController:c.bindings||{},restrict:"E",require:c.require};b(c,function(a,b){"$"===b.charAt(0)&&(h[b]=a)});return h}var d=c.controller||function(){};b(c,function(a,b){"$"===b.charAt(0)&&(e[b]=a,B(d)&&(d[b]=a))});e.$inject=["$injector"];return this.directive(a,e)};this.aHrefSanitizationWhitelist=function(a){return w(a)?
(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(a){return w(a)?(y=a,this):y};var z=10;this.onChangesTtl=function(a){return arguments.length?(z=a,this):z};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(c,
e,d,g,L,T,X,u,A,w){function oa(){try{if(!--La)throw aa=void 0,va("infchng","{0} $onChanges() iterations reached. Aborting!\n",z);X.$apply(function(){for(var a=0,b=aa.length;a<b;++a)aa[a]();aa=void 0})}finally{La++}}function C(a,b){if(b){var c=Object.keys(b),e,d,f;e=0;for(d=c.length;e<d;e++)f=c[e],this[f]=b[f]}else this.$attr={};this.$$element=a}function S(a,b,c){ba.innerHTML="<span "+b+">";b=ba.firstChild.attributes;var e=b[0];b.removeNamedItem(e.name);e.value=c;a.attributes.setNamedItem(e)}function H(a,
b){try{a.addClass(b)}catch(c){}}function G(b,c,e,d,f){b instanceof R||(b=R(b));for(var g=/\S+/,h=0,k=b.length;h<k;h++){var l=b[h];l.nodeType===Xb&&l.nodeValue.match(g)&&Db(l,b[h]=a.document.createElement("span"))}var L=Q(b,c,b,e,d,f);G.$$addScopeClass(b);var n=null;return function(a,c,e){sb(a,"scope");f&&f.needsNewScope&&(a=a.$parent.$new());e=e||{};var d=e.parentBoundTranscludeFn,g=e.transcludeControllers;e=e.futureParentElement;d&&d.$$boundTransclude&&(d=d.$$boundTransclude);n||(n=(e=e&&e[0])?"foreignobject"!==
p(e)&&Ga.call(e).match(/SVG/)?"svg":"html":"html");e="html"!==n?R(la(n,R("<div>").append(b).html())):c?Zb.clone.call(b):b;if(g)for(var h in g)e.data("$"+h+"Controller",g[h].instance);G.$$addScopeInfo(e,a);c&&c(e,a);L&&L(a,e,e,d);return e}}function Q(a,b,c,e,d,f){function g(a,c,e,d){var f,k,l,L,n,q,r;if(m)for(r=Array(c.length),L=0;L<h.length;L+=3)f=h[L],r[f]=c[f];else r=c;L=0;for(n=h.length;L<n;)k=r[h[L++]],c=h[L++],f=h[L++],c?(c.scope?(l=a.$new(),G.$$addScopeInfo(R(k),l)):l=a,q=c.transcludeOnThisElement?
K(a,c.transclude,d):!c.templateOnThisElement&&d?d:!d&&b?K(a,b):null,c(f,l,k,e,q)):f&&f(a,k.childNodes,void 0,d)}for(var h=[],k,l,L,n,m,q=0;q<a.length;q++){k=new C;l=V(a[q],[],k,0===q?e:void 0,d);(f=l.length?E(l,a[q],k,b,c,null,[],[],f):null)&&f.scope&&G.$$addScopeClass(k.$$element);k=f&&f.terminal||!(L=a[q].childNodes)||!L.length?null:Q(L,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(q,f,k),n=!0,m=m||f;f=null}return n?g:null}function K(a,b,c){function e(d,
f,g,h,k){d||(d=a.$new(!1,k),d.$$transcluded=!0);return b(d,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var d=e.$$slots=da(),f;for(f in b.$$slots)d[f]=b.$$slots[f]?K(a,b.$$slots[f],c):null;return e}function V(a,b,c,e,d){var f=c.$attr,g;switch(a.nodeType){case 1:W(b,Fa(p(a)),"E",e,d);for(var h,k,L,m=a.attributes,q=0,r=m&&m.length;q<r;q++){var T=!1,X=!1;h=m[q];g=h.name;k=ka(h.value);h=Fa(g);if(L=sa.test(h))g=g.replace(Gd,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});
(h=h.match(ta))&&Ab(h[1])&&(T=g,X=g.substr(0,g.length-5)+"end",g=g.substr(0,g.length-6));h=Fa(g.toLowerCase());f[h]=g;if(L||!c.hasOwnProperty(h))c[h]=k,Ia(a,h)&&(c[h]=!0);Ka(a,b,k,h,L);W(b,h,"A",e,d,T,X)}a=a.className;x(a)&&(a=a.animVal);if(D(a)&&""!==a)for(;g=n.exec(a);)h=Fa(g[2]),W(b,h,"C",e,d)&&(c[h]=ka(g[3])),a=a.substr(g.index+g[0].length);break;case Xb:if(11===xb)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Xb;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);
gb(b,a.nodeValue);break;case 8:try{if(g=l.exec(a.nodeValue))h=Fa(g[1]),W(b,h,"M",e,d)&&(c[h]=ka(g[2]))}catch(ea){}}b.sort(Bb);return b}function Sa(a,b,c){var e=[],d=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw va("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&d++,a.hasAttribute(c)&&d--);e.push(a);a=a.nextSibling}while(0<d)}else e.push(a);return R(e)}function J(a,b,c){return function(e,d,f,g,h){d=Sa(d[0],b,c);return a(e,
d,f,g,h)}}function ua(a,b,c,e,d,f){var g;return a?G(b,c,e,d,f):function(){g||(g=G(b,c,e,d,f),b=c=f=null);return g.apply(this,arguments)}}function E(a,c,e,f,g,h,l,L,n){function m(a,b,c,e){if(a){c&&(a=J(a,c,e));a.require=I.require;a.directiveName=ca;if(ea===I||I.$$isolateScope)a=wa(a,{isolateScope:!0});l.push(a)}if(b){c&&(b=J(b,c,e));b.require=I.require;b.directiveName=ca;if(ea===I||I.$$isolateScope)b=wa(b,{isolateScope:!0});L.push(b)}}function q(a,d,f,g,h){function n(a,b,c,e){var d;M(a)||(e=c,c=b,
b=a,a=void 0);ra&&(d=u);c||(c=ra?I.parent():I);if(e){var f=h.$$slots[e];if(f)return f(a,b,d,c,w);if(v(f))throw va("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',e,na(I));}else return h(a,b,d,c,w)}var m,r,p,t,fa,u,ga,I;c===f?(g=e,I=e.$$element):(I=R(f),g=new C(I,e));fa=d;ea?t=d.$new(!0):T&&(fa=d.$parent);h&&(ga=n,ga.$$boundTransclude=h,ga.isSlotFilled=function(a){return!!h.$$slots[a]});X&&(u=F(I,g,ga,X,t,d,ea));ea&&(G.$$addScopeInfo(I,t,!0,!(qa&&(qa===
ea||qa===ea.$$originalDirective))),G.$$addScopeClass(I,!0),t.$$isolateBindings=ea.$$isolateBindings,r=Y(d,g,t,t.$$isolateBindings,ea),r.removeWatches&&t.$on("$destroy",r.removeWatches));for(m in u){r=X[m];p=u[m];var ca=r.$$bindings.bindToController;p.bindingInfo=p.identifier&&ca?Y(fa,g,p.instance,ca,r):{};var A=p();A!==p.instance&&(p.instance=A,I.data("$"+r.name+"Controller",A),p.bindingInfo.removeWatches&&p.bindingInfo.removeWatches(),p.bindingInfo=Y(fa,g,p.instance,ca,r))}b(X,function(a,b){var c=
a.require;a.bindToController&&!U(c)&&x(c)&&k(u[b].instance,O(b,c,I,u))});b(u,function(a){var b=a.instance;B(b.$onChanges)&&b.$onChanges(a.bindingInfo.initialChanges);B(b.$onInit)&&b.$onInit();B(b.$onDestroy)&&fa.$on("$destroy",function(){b.$onDestroy()})});m=0;for(r=l.length;m<r;m++)p=l[m],za(p,p.isolateScope?t:d,I,g,p.require&&O(p.directiveName,p.require,I,u),ga);var w=d;ea&&(ea.template||null===ea.templateUrl)&&(w=t);a&&a(w,f.childNodes,void 0,h);for(m=L.length-1;0<=m;m--)p=L[m],za(p,p.isolateScope?
t:d,I,g,p.require&&O(p.directiveName,p.require,I,u),ga);b(u,function(a){a=a.instance;B(a.$postLink)&&a.$postLink()})}n=n||{};for(var r=-Number.MAX_VALUE,T=n.newScopeDirective,X=n.controllerDirectives,ea=n.newIsolateScopeDirective,qa=n.templateDirective,t=n.nonTlbTranscludeDirective,fa=!1,u=!1,ra=n.hasElementTranscludeDirective,ga=e.$$element=R(c),I,ca,A,w=f,y,z=!1,zc=!1,oa,S=0,H=a.length;S<H;S++){I=a[S];var Q=I.$$start,D=I.$$end;Q&&(ga=Sa(c,Q,D));A=void 0;if(r>I.priority)break;if(oa=I.scope)I.templateUrl||
(x(oa)?(Da("new/isolated scope",ea||T,I,ga),ea=I):Da("new/isolated scope",ea,I,ga)),T=T||I;ca=I.name;if(!z&&(I.replace&&(I.templateUrl||I.template)||I.transclude&&!I.$$tlb)){for(oa=S+1;z=a[oa++];)if(z.transclude&&!z.$$tlb||z.replace&&(z.templateUrl||z.template)){zc=!0;break}z=!0}!I.templateUrl&&I.controller&&(oa=I.controller,X=X||da(),Da("'"+ca+"' controller",X[ca],I,ga),X[ca]=I);if(oa=I.transclude)if(fa=!0,I.$$tlb||(Da("transclusion",t,I,ga),t=I),"element"==oa)ra=!0,r=I.priority,A=ga,ga=e.$$element=
R(G.$$createComment(ca,e[ca])),c=ga[0],ia(g,lb.call(A,0),c),A[0].$$parentNode=A[0].parentNode,w=ua(zc,A,f,r,h&&h.name,{nonTlbTranscludeDirective:t});else{var K=da();A=R(tb(c)).contents();if(x(oa)){A=[];var Fd=da(),Sc=da();b(oa,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Fd[a]=b;K[b]=null;Sc[b]=c});b(ga.contents(),function(a){var b=Fd[Fa(p(a))];b?(Sc[b]=!0,K[b]=K[b]||[],K[b].push(a)):A.push(a)});b(Sc,function(a,b){if(!a)throw va("reqslot","Required transclusion slot `{0}` was not filled.",
b);});for(var N in K)K[N]&&(K[N]=ua(zc,K[N],f))}ga.empty();w=ua(zc,A,f,void 0,void 0,{needsNewScope:I.$$isolateScope||I.$$newScope});w.$$slots=K}if(I.template)if(u=!0,Da("template",qa,I,ga),qa=I,oa=B(I.template)?I.template(ga,e):I.template,oa=Ea(oa),I.replace){h=I;A=Uc.test(oa)?eb(la(I.templateNamespace,ka(oa))):[];c=A[0];if(1!=A.length||1!==c.nodeType)throw va("tplrt","Template for directive '{0}' must have exactly one root element. {1}",ca,"");ia(g,ga,c);H={$attr:{}};oa=V(c,[],H);var He=a.splice(S+
1,a.length-(S+1));(ea||T)&&pa(oa,ea,T);a=a.concat(oa).concat(He);rb(e,H);H=a.length}else ga.html(oa);if(I.templateUrl)u=!0,Da("template",qa,I,ga),qa=I,I.replace&&(h=I),q=qb(a.splice(S,a.length-S),ga,e,g,fa&&w,l,L,{controllerDirectives:X,newScopeDirective:T!==I&&T,newIsolateScopeDirective:ea,templateDirective:qa,nonTlbTranscludeDirective:t}),H=a.length;else if(I.compile)try{y=I.compile(ga,e,w),B(y)?m(null,y,Q,D):y&&m(y.pre,y.post,Q,D)}catch(Kf){d(Kf,na(ga))}I.terminal&&(q.terminal=!0,r=Math.max(r,
I.priority))}q.scope=T&&!0===T.scope;q.transcludeOnThisElement=fa;q.templateOnThisElement=u;q.transclude=w;n.hasElementTranscludeDirective=ra;return q}function O(a,c,e,d){var f;if(D(c)){var g=c.match(I);c=c.substring(g[0].length);var h=g[1]||g[3],g="?"===g[2];"^^"===h?e=e.parent():f=(f=d&&d[c])&&f.instance;if(!f){var k="$"+c+"Controller";f=h?e.inheritedData(k):e.data(k)}if(!f&&!g)throw va("ctreq","Controller '{0}', required by directive '{1}', can't be found!",c,a);}else if(U(c))for(f=[],h=0,g=c.length;h<
g;h++)f[h]=O(a,c[h],e,d);else x(c)&&(f={},b(c,function(b,c){f[c]=O(a,b,e,d)}));return f||null}function F(a,b,c,e,d,f,g){var h=da(),k;for(k in e){var l=e[k],L={$scope:l===g||l.$$isolateScope?d:f,$element:a,$attrs:b,$transclude:c},n=l.controller;"@"==n&&(n=b[l.name]);L=T(n,L,!0,l.controllerAs);h[l.name]=L;a.data("$"+l.name+"Controller",L.instance)}return h}function pa(a,b,c){for(var e=0,d=a.length;e<d;e++)a[e]=m(a[e],{$$isolateScope:b,$$newScope:c})}function W(a,b,e,g,k,l,L){if(b===k)return null;k=
null;if(h.hasOwnProperty(b)){var n;b=c.get(b+"Directive");for(var q=0,r=b.length;q<r;q++)try{if(n=b[q],(v(g)||g>n.priority)&&-1!=n.restrict.indexOf(e)){l&&(n=m(n,{$$start:l,$$end:L}));if(!n.$$bindings){var T=n,p=n,X=n.name,t={isolateScope:null,bindToController:null};x(p.scope)&&(!0===p.bindToController?(t.bindToController=f(p.scope,X,!0),t.isolateScope={}):t.isolateScope=f(p.scope,X,!1));x(p.bindToController)&&(t.bindToController=f(p.bindToController,X,!0));if(x(t.bindToController)){var fa=p.controller,
u=p.controllerAs;if(!fa)throw va("noctrl","Cannot bind to controller without directive '{0}'s controller.",X);if(!fc(fa,u))throw va("noident","Cannot bind to controller without identifier for directive '{0}'.",X);}var ra=T.$$bindings=t;x(ra.isolateScope)&&(n.$$isolateBindings=ra.isolateScope)}a.push(n);k=n}}catch(ga){d(ga)}}return k}function Ab(a){if(h.hasOwnProperty(a))for(var b=c.get(a+"Directive"),e=0,d=b.length;e<d;e++)if(a=b[e],a.multiElement)return!0;return!1}function rb(a,c){var e=c.$attr,
d=a.$attr,f=a.$$element;b(a,function(b,d){"$"!=d.charAt(0)&&(c[d]&&c[d]!==b&&(b+=("style"===d?";":" ")+c[d]),a.$set(d,b,!0,e[d]))});b(c,function(b,c){"class"==c?(H(f,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==c?(f.attr("style",f.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==c.charAt(0)||a.hasOwnProperty(c)||(a[c]=b,d[c]=e[c])})}function qb(a,c,e,d,f,h,k,l){var L=[],n,q,r=c[0],T=a.shift(),p=m(T,{templateUrl:null,transclude:null,replace:null,$$originalDirective:T}),X=B(T.templateUrl)?
T.templateUrl(c,e):T.templateUrl,ea=T.templateNamespace;c.empty();g(X).then(function(g){var m,qa;g=Ea(g);if(T.replace){g=Uc.test(g)?eb(la(ea,ka(g))):[];m=g[0];if(1!=g.length||1!==m.nodeType)throw va("tplrt","Template for directive '{0}' must have exactly one root element. {1}",T.name,X);g={$attr:{}};ia(d,c,m);var t=V(m,[],g);x(T.scope)&&pa(t,!0);a=t.concat(a);rb(e,g)}else m=r,c.html(g);a.unshift(p);n=E(a,m,e,f,c,T,h,k,l);b(d,function(a,b){a==m&&(d[b]=c[0])});for(q=Q(c[0].childNodes,f);L.length;){g=
L.shift();qa=L.shift();var fa=L.shift(),u=L.shift(),t=c[0];if(!g.$$destroyed){if(qa!==r){var ra=qa.className;l.hasElementTranscludeDirective&&T.replace||(t=tb(m));ia(fa,R(qa),t);H(R(t),ra)}qa=n.transcludeOnThisElement?K(g,n.transclude,u):u;n(q,g,t,d,qa)}}L=null});return function(a,b,c,e,d){a=d;b.$$destroyed||(L?L.push(b,c,e,a):(n.transcludeOnThisElement&&(a=K(b,n.transclude,d)),n(q,b,c,e,a)))}}function Bb(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}
function Da(a,b,c,e){function d(a){return a?" (module: "+a+")":""}if(b)throw va("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,d(b.$$moduleName),c.name,d(c.$$moduleName),a,na(e));}function gb(a,b){var c=e(b,!0);c&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&G.$$addBindingClass(a);return function(a,e){var d=e.parent();b||G.$$addBindingClass(d);G.$$addBindingInfo(d,c.expressions);a.$watch(c,function(a){e[0].nodeValue=a})}}})}function la(b,
c){b=ha(b||"html");switch(b){case "svg":case "math":var e=a.document.createElement("div");e.innerHTML="<"+b+">"+c+"</"+b+">";return e.childNodes[0].childNodes;default:return c}}function Aa(a,b){if("srcdoc"==b)return u.HTML;var c=p(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return u.RESOURCE_URL}function Ka(a,b,c,d,f){var g=Aa(a,d);f=t[d]||f;var h=e(c,!0,g,f);if(h){if("multiple"===d&&"select"===p(a))throw va("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",
na(a));b.push({priority:100,compile:function(){return{pre:function(a,b,k){b=k.$$observers||(k.$$observers=da());if(ca.test(d))throw va("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var l=k[d];l!==c&&(h=l&&e(l,!0,g,f),c=l);h&&(k[d]=h(a),(b[d]||(b[d]=[])).$$inter=!0,(k.$$observers&&k.$$observers[d].$$scope||a).$watch(h,function(a,b){"class"===d&&a!=b?k.$updateClass(a,b):k.$set(d,a)}))}}}})}}function ia(b,
c,e){var d=c[0],f=c.length,g=d.parentNode,h,k;if(b)for(h=0,k=b.length;h<k;h++)if(b[h]==d){b[h++]=e;k=h+f-1;for(var l=b.length;h<l;h++,k++)k<l?b[h]=b[k]:delete b[h];b.length-=f-1;b.context===d&&(b.context=e);break}g&&g.replaceChild(e,d);b=a.document.createDocumentFragment();for(h=0;h<f;h++)b.appendChild(c[h]);R.hasData(d)&&(R.data(e,R.data(d)),R(d).off("$destroy"));R.cleanData(b.querySelectorAll("*"));for(h=1;h<f;h++)delete c[h];c[0]=e;c.length=1}function wa(a,b){return k(function(){return a.apply(null,
arguments)},a,b)}function za(a,b,c,e,f,g){try{a(b,c,e,f,g)}catch(h){d(h,na(c))}}function Y(a,c,d,f,g){function h(b,c,e){B(d.$onChanges)&&c!==e&&(aa||(a.$$postDigest(oa),aa=[]),m||(m={},aa.push(k)),m[b]&&(e=m[b].previousValue),m[b]=new mb(e,c))}function k(){d.$onChanges(m);m=void 0}var l=[],n={},m;b(f,function(b,f){var k=b.attrName,m=b.optional,r,T,p,X;switch(b.mode){case "@":m||fb.call(c,k)||(d[f]=c[k]=void 0);c.$observe(k,function(a){if(D(a)||N(a))h(f,a,d[f]),d[f]=a});c.$$observers[k].$$scope=a;
r=c[k];D(r)?d[f]=e(r)(a):N(r)&&(d[f]=r);n[f]=new mb(Wc,d[f]);break;case "=":if(!fb.call(c,k)){if(m)break;c[k]=void 0}if(m&&!c[k])break;T=L(c[k]);X=T.literal?Z:function(a,b){return a===b||a!==a&&b!==b};p=T.assign||function(){r=d[f]=T(a);throw va("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",c[k],k,g.name);};r=d[f]=T(a);m=function(b){X(b,d[f])||(X(b,r)?p(a,b=d[f]):d[f]=b);return r=b};m.$stateful=!0;m=b.collection?a.$watchCollection(c[k],m):a.$watch(L(c[k],
m),null,T.literal);l.push(m);break;case "<":if(!fb.call(c,k)){if(m)break;c[k]=void 0}if(m&&!c[k])break;T=L(c[k]);d[f]=T(a);n[f]=new mb(Wc,d[f]);m=a.$watch(T,function(a,b){a===b&&(b=d[f]);h(f,a,b);d[f]=a},T.literal);l.push(m);break;case "&":T=c.hasOwnProperty(k)?L(c[k]):q;if(T===q&&m)break;d[f]=function(b){return T(a,b)}}});return{initialChanges:n,removeWatches:l.length&&function(){for(var a=0,b=l.length;a<b;++a)l[a]()}}}var pb=/^\w/,ba=a.document.createElement("div"),La=z,aa;C.prototype={$normalize:Fa,
$addClass:function(a){a&&0<a.length&&A.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&A.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=db(a,b);c&&c.length&&A.addClass(this.$$element,c);(c=db(b,a))&&c.length&&A.removeClass(this.$$element,c)},$set:function(a,c,e,f){var g=Ia(this.$$element[0],a),h=Hd[a],k=a;g?(this.$$element.prop(a,c),f=g):h&&(this[h]=c,k=h);this[a]=c;f?this.$attr[a]=f:(f=this.$attr[a])||(this.$attr[a]=f=Ob(a,"-"));g=p(this.$$element);if("a"===g&&
("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=c=w(c,"src"===a);else if("img"===g&&"srcset"===a){for(var g="",h=ka(c),l=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,l=/\s/.test(h)?l:/(,)/,h=h.split(l),l=Math.floor(h.length/2),L=0;L<l;L++)var n=2*L,g=g+w(ka(h[n]),!0),g=g+(" "+ka(h[n+1]));h=ka(h[2*L]).split(/\s/);g+=w(ka(h[0]),!0);2===h.length&&(g+=" "+ka(h[1]));this[a]=c=g}!1!==e&&(null===c||v(c)?this.$$element.removeAttr(f):pb.test(f)?this.$$element.attr(f,c):S(this.$$element[0],f,c));(a=this.$$observers)&&
b(a[k],function(a){try{a(c)}catch(b){d(b)}})},$observe:function(a,b){var c=this,e=c.$$observers||(c.$$observers=da()),d=e[a]||(e[a]=[]);d.push(b);X.$evalAsync(function(){d.$$inter||!c.hasOwnProperty(a)||v(c[a])||b(c[a])});return function(){P(d,b)}}};var ja=e.startSymbol(),ma=e.endSymbol(),Ea="{{"==ja&&"}}"==ma?r:function(a){return a.replace(/\{\{/g,ja).replace(/}}/g,ma)},sa=/^ngAttr[A-Z]/,ta=/^(.+)Start$/;G.$$addBindingInfo=y?function(a,b){var c=a.data("$binding")||[];U(b)?c=c.concat(b):c.push(b);
a.data("$binding",c)}:q;G.$$addBindingClass=y?function(a){H(a,"ng-binding")}:q;G.$$addScopeInfo=y?function(a,b,c,e){a.data(c?e?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:q;G.$$addScopeClass=y?function(a,b){H(a,b?"ng-isolate-scope":"ng-scope")}:q;G.$$createComment=function(b,c){var e="";y&&(e=" "+(b||"")+": "+(c||"")+" ");return a.document.createComment(e)};return G}]}function mb(a,b){this.previousValue=a;this.currentValue=b}function Fa(a){return $a(a.replace(Gd,""))}function db(a,b){var c=
"",e=a.split(/\s+/),d=b.split(/\s+/),f=0;a:for(;f<e.length;f++){for(var g=e[f],h=0;h<d.length;h++)if(g==d[h])continue a;c+=(0<c.length?" ":"")+g}return c}function eb(a){a=R(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&Lf.call(a,b,1);return a}function fc(a,b){if(b&&D(b))return b;if(D(a)){var c=Id.exec(a);if(c)return c[3]}}function Qc(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){za(b,"controller");x(b)?k(a,b):a[b]=c};this.allowGlobals=
function(){b=!0};this.$get=["$injector","$window",function(e,d){function f(a,b,e,d){if(!a||!x(a.$scope))throw c("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",d,b);a.$scope[b]=e}return function(c,g,h,l){var n,m,q;h=!0===h;l&&D(l)&&(q=l);if(D(c)){l=c.match(Id);if(!l)throw Mf("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",c);m=l[1];q=q||l[3];c=a.hasOwnProperty(m)?a[m]:gb(g.$scope,m,!0)||(b?gb(d,
m,!0):void 0);Ka(c,m,!0)}if(h)return h=(U(c)?c[c.length-1]:c).prototype,n=Object.create(h||null),q&&f(g,q,n,m||c.name),k(function(){var a=e.invoke(c,n,g,m);a!==n&&(x(a)||B(a))&&(n=a,q&&f(g,q,n,m||c.name));return n},{instance:n,identifier:q});n=e.instantiate(c,g,m);q&&f(g,q,n,m||c.name);return n}}]}function Vb(){this.$get=["$window",function(a){return R(a.document)}]}function gc(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function hc(a){return x(a)?z(a)?a.toISOString():
aa(a):a}function vb(){this.$get=function(){return function(a){if(!a)return"";var c=[];g(a,function(a,e){null===a||v(a)||(U(a)?b(a,function(a){c.push(pa(e)+"="+pa(hc(a)))}):c.push(pa(e)+"="+pa(hc(a))))});return c.join("&")}}}function bc(){this.$get=function(){return function(a){function c(a,d,f){null===a||v(a)||(U(a)?b(a,function(a,b){c(a,d+"["+(x(a)?b:"")+"]")}):x(a)&&!z(a)?g(a,function(a,b){c(a,d+(f?"":"[")+b+(f?"":"]"))}):e.push(pa(d)+"="+pa(hc(a))))}if(!a)return"";var e=[];c(a,"",!0);return e.join("&")}}}
function xa(a,b){if(D(a)){var c=a.replace(Nf,"").trim();if(c){var e=b("Content-Type");(e=e&&0===e.indexOf(Jd))||(e=(e=c.match(Of))&&Pf[e[0]].test(c));e&&(a=ya(c))}}return a}function hb(a){var c=da(),e;D(a)?b(a.split("\n"),function(a){e=a.indexOf(":");var b=ha(ka(a.substr(0,e)));a=ka(a.substr(e+1));b&&(c[b]=c[b]?c[b]+", "+a:a)}):x(a)&&b(a,function(a,b){var e=ha(b),d=ka(a);e&&(c[e]=c[e]?c[e]+", "+d:d)});return c}function uc(a){var b;return function(c){b||(b=hb(a));return c?(c=b[ha(c)],void 0===c&&(c=
null),c):b}}function vc(a,c,e,d){if(B(d))return d(a,c,e);b(d,function(b){a=b(a,c,e)});return a}function Wb(){var a=this.defaults={transformResponse:[xa],transformRequest:[function(a){return x(a)&&"[object File]"!==Ga.call(a)&&"[object Blob]"!==Ga.call(a)&&"[object FormData]"!==Ga.call(a)?aa(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:W(Xc),put:W(Xc),patch:W(Xc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},e=!1;this.useApplyAsync=
function(a){return w(a)?(e=!!a,this):e};var d=!0;this.useLegacyPromiseExtensions=function(a){return w(a)?(d=!!a,this):d};var f=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,l,n,m,q){function r(e){function f(a){var b=k({},a);b.data=vc(a.data,a.headers,a.status,h.transformResponse);a=a.status;return 200<=a&&300>a?b:m.reject(b)}function g(a,c){var e,d={};b(a,function(a,b){B(a)?(e=a(c),null!=e&&(d[b]=e)):d[b]=a});return d}if(!x(e))throw c("$http")("badreq",
"Http request configuration must be an object.  Received: {0}",e);if(!D(e.url))throw c("$http")("badreq","Http request configuration url must be a string.  Received: {0}",e.url);var h=k({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},e);h.headers=function(b){var c=a.headers,e=k({},b.headers),d,f,h,c=k({},c.common,c[ha(b.method)]);a:for(d in c){f=ha(d);for(h in e)if(ha(h)===f)continue a;e[d]=c[d]}return g(e,W(b))}(e);h.method=
Bc(h.method);h.paramSerializer=D(h.paramSerializer)?q.get(h.paramSerializer):h.paramSerializer;var l=[function(c){var e=c.headers,d=vc(c.data,uc(e),void 0,c.transformRequest);v(d)&&b(e,function(a,b){"content-type"===ha(b)&&delete e[b]});v(c.withCredentials)&&!v(a.withCredentials)&&(c.withCredentials=a.withCredentials);return p(c,d).then(f,f)},void 0],n=m.when(h);for(b(A,function(a){(a.request||a.requestError)&&l.unshift(a.request,a.requestError);(a.response||a.responseError)&&l.push(a.response,a.responseError)});l.length;){e=
l.shift();var T=l.shift(),n=n.then(e,T)}d?(n.success=function(a){Ka(a,"fn");n.then(function(b){a(b.data,b.status,b.headers,h)});return n},n.error=function(a){Ka(a,"fn");n.then(null,function(b){a(b.data,b.status,b.headers,h)});return n}):(n.success=Kd("success"),n.error=Kd("error"));return n}function p(c,d){function f(a){if(a){var c={};b(a,function(a,b){c[b]=function(b){function c(){a(b)}e?n.$applyAsync(c):n.$$phase?c():n.$apply(c)}});return c}}function k(a,b,c,d){function f(){l(b,a,c,d)}A&&(200<=
a&&300>a?A.put(z,[a,b,hb(c),d]):A.remove(z));e?n.$applyAsync(f):(f(),n.$$phase||n.$apply())}function l(a,b,e,d){b=-1<=b?b:0;(200<=b&&300>b?ea.resolve:ea.reject)({data:a,status:b,headers:uc(e),config:c,statusText:d})}function q(a){l(a.data,a.status,W(a.headers()),a.statusText)}function X(){var a=r.pendingRequests.indexOf(c);-1!==a&&r.pendingRequests.splice(a,1)}var ea=m.defer(),ra=ea.promise,A,ca,y=c.headers,z=t(c.url,c.paramSerializer(c.params));r.pendingRequests.push(c);ra.then(X,X);!c.cache&&!a.cache||
!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(A=x(c.cache)?c.cache:x(a.cache)?a.cache:u);A&&(ca=A.get(z),w(ca)?ca&&B(ca.then)?ca.then(q,q):U(ca)?l(ca[1],ca[0],W(ca[2]),ca[3]):l(ca,200,{},"OK"):A.put(z,ra));v(ca)&&((ca=td(c.url)?h()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(y[c.xsrfHeaderName||a.xsrfHeaderName]=ca),g(c.method,z,d,k,y,c.timeout,c.withCredentials,c.responseType,f(c.eventHandlers),f(c.uploadEventHandlers)));return ra}function t(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":
"&")+b);return a}var u=l("$http");a.paramSerializer=D(a.paramSerializer)?q.get(a.paramSerializer):a.paramSerializer;var A=[];b(f,function(a){A.unshift(D(a)?q.get(a):q.invoke(a))});r.pendingRequests=[];(function(a){b(arguments,function(a){r[a]=function(b,c){return r(k({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){b(arguments,function(a){r[a]=function(b,c,e){return r(k({},e||{},{method:a,url:b,data:c}))}})})("post","put","patch");r.defaults=a;return r}]}function Mb(){this.$get=
function(){return function(){return new a.XMLHttpRequest}}}function Lb(){this.$get=["$browser","$window","$document","$xhrFactory",function(a,b,c,e){return wc(a,e,a.defer,b.angular.callbacks,c[0])}]}function wc(a,c,e,d,f){function g(a,b,c){var e=f.createElement("script"),h=null;e.type="text/javascript";e.src=a;e.async=!0;h=function(a){e.removeEventListener("load",h,!1);e.removeEventListener("error",h,!1);f.body.removeChild(e);e=null;var g=-1,k="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),
k=a.type,g="error"===a.type?404:200);c&&c(g,k)};e.addEventListener("load",h,!1);e.addEventListener("error",h,!1);f.body.appendChild(e);return h}return function(f,h,k,l,n,m,r,p,t,qa){function u(){z&&z();x&&x.abort()}function A(b,c,d,f,g){w(S)&&e.cancel(S);z=x=null;b(c,d,f,g);a.$$completeOutstandingRequest(q)}a.$$incOutstandingRequestCount();h=h||a.url();if("jsonp"==ha(f)){var y="_"+(d.counter++).toString(36);d[y]=function(a){d[y].data=a;d[y].called=!0};var z=g(h.replace("JSON_CALLBACK","angular.callbacks."+
y),y,function(a,b){A(l,a,d[y].data,"",b);d[y]=q})}else{var x=c(f,h);x.open(f,h,!0);b(n,function(a,b){w(a)&&x.setRequestHeader(b,a)});x.onload=function(){var a=x.statusText||"",b="response"in x?x.response:x.responseText,c=1223===x.status?204:x.status;0===c&&(c=b?200:"file"==ob(h).protocol?404:0);A(l,c,b,x.getAllResponseHeaders(),a)};f=function(){A(l,-1,null,null,"")};x.onerror=f;x.onabort=f;b(t,function(a,b){x.addEventListener(b,a)});b(qa,function(a,b){x.upload.addEventListener(b,a)});r&&(x.withCredentials=
!0);if(p)try{x.responseType=p}catch(C){if("json"!==p)throw C;}x.send(v(k)?null:k)}if(0<m)var S=e(u,m);else m&&B(m.then)&&m.then(u)}}function Rc(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(c,e,d){function f(a){return"\\\\\\"+a}function g(c){return c.replace(q,a).replace(r,b)}function h(a,b,c,e){var d;return d=a.$watch(function(a){d();return e(a)},b,c)}function l(f,q,
r,p){function t(a){try{var b=a;a=r?d.getTrusted(r,b):d.valueOf(b);var c;if(p&&!w(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=aa(a)}c=a}return c}catch(g){e(Hb.interr(f,g))}}if(!f.length||-1===f.indexOf(a)){var fa;q||(q=g(f),fa=u(q),fa.exp=f,fa.expressions=[],fa.$$watchDelegate=h);return fa}p=!!p;var I,A,y=0,z=[],x=[];fa=f.length;for(var C=[],S=[];y<fa;)if(-1!=(I=f.indexOf(a,y))&&-1!=(A=f.indexOf(b,I+n)))y!==I&&C.push(g(f.substring(y,I))),
y=f.substring(I+n,A),z.push(y),x.push(c(y,t)),y=A+m,S.push(C.length),C.push("");else{y!==fa&&C.push(g(f.substring(y)));break}r&&1<C.length&&Hb.throwNoconcat(f);if(!q||z.length){var G=function(a){for(var b=0,c=z.length;b<c;b++){if(p&&v(a[b]))return;C[S[b]]=a[b]}return C.join("")};return k(function(a){var b=0,c=z.length,d=Array(c);try{for(;b<c;b++)d[b]=x[b](a);return G(d)}catch(g){e(Hb.interr(f,g))}},{exp:f,expressions:z,$$watchDelegate:function(a,b){var c;return a.$watchGroup(x,function(e,d){var f=
G(e);B(b)&&b.call(this,f,e!==d?c:f,a);c=f})}})}}var n=a.length,m=b.length,q=new RegExp(a.replace(/./g,f),"g"),r=new RegExp(b.replace(/./g,f),"g");l.startSymbol=function(){return a};l.endSymbol=function(){return b};return l}]}function xc(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,e,d){function f(h,k,l,n){function m(){q?h.apply(null,r):h(u)}var q=4<arguments.length,r=q?lb.call(arguments,4):[],p=b.setInterval,t=b.clearInterval,u=0,fa=w(n)&&!n,v=(fa?e:c).defer(),A=v.promise;
l=w(l)?l:0;A.$$intervalId=p(function(){fa?d.defer(m):a.$evalAsync(m);v.notify(u++);0<l&&u>=l&&(v.resolve(u),t(A.$$intervalId),delete g[A.$$intervalId]);fa||a.$apply()},k);g[A.$$intervalId]=v;return A}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function Ca(a){a=a.split("/");for(var b=a.length;b--;)a[b]=ua(a[b]);return a.join("/")}function fd(a,b){var c=ob(a);b.$$protocol=
c.protocol;b.$$host=c.hostname;b.$$port=n(c.port)||Qf[c.protocol]||null}function gd(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var e=ob(a);b.$$path=decodeURIComponent(c&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname);b.$$search=S(e.search);b.$$hash=decodeURIComponent(e.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Ya(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function zb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function ac(a){return a.replace(/(#.+)|#$/,
"$1")}function Lc(a,b,c){this.$$html5=!0;c=c||"";fd(a,this);this.$$parse=function(a){var c=Ya(b,a);if(!D(c))throw Fc("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);gd(c,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Sa(this.$$search),c=this.$$hash?"#"+ua(this.$$hash):"";this.$$url=Ca(this.$$path)+(a?"?"+a:"")+c;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(e,d){if(d&&"#"===d[0])return this.hash(d.slice(1)),!0;var f,g;w(f=
Ya(a,e))?(g=f,g=w(f=Ya(c,f))?b+(Ya("/",f)||f):a+g):w(f=Ya(b,e))?g=b+f:b==e+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function Mc(a,b,c){fd(a,this);this.$$parse=function(e){var d=Ya(a,e)||Ya(b,e),f;v(d)||"#"!==d.charAt(0)?this.$$html5?f=d:(f="",v(d)&&(a=e,this.replace())):(f=Ya(c,d),v(f)&&(f=d));gd(f,this);e=this.$$path;var d=a,g=/^\/[A-Z]:(\/.*)/;0===f.indexOf(d)&&(f=f.replace(d,""));g.exec(f)||(e=(f=g.exec(e))?f[1]:e);this.$$path=e;this.$$compose()};this.$$compose=function(){var b=Sa(this.$$search),
e=this.$$hash?"#"+ua(this.$$hash):"";this.$$url=Ca(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?c+this.$$url:"")};this.$$parseLinkUrl=function(b,c){return zb(a)==zb(b)?(this.$$parse(b),!0):!1}}function hd(a,b,c){this.$$html5=!0;Mc.apply(this,arguments);this.$$parseLinkUrl=function(e,d){if(d&&"#"===d[0])return this.hash(d.slice(1)),!0;var f,g;a==zb(e)?f=e:(g=Ya(b,e))?f=a+c+g:b===e+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=Sa(this.$$search),e=this.$$hash?"#"+
ua(this.$$hash):"";this.$$url=Ca(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+c+this.$$url}}function pc(a){return function(){return this[a]}}function jd(a,b){return function(c){if(v(c))return this[a];this[a]=b(c);this.$$compose();return this}}function le(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return w(b)?(a=b,this):a};this.html5Mode=function(a){return N(a)?(b.enabled=a,this):x(a)?(N(a.enabled)&&(b.enabled=a.enabled),N(a.requireBase)&&(b.requireBase=a.requireBase),
N(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,e,d,f,g){function h(a,b,c){var d=l.url(),f=l.$$state;try{e.url(a,b,c),l.$$state=e.state()}catch(g){throw l.url(d),l.$$state=f,g;}}function k(a,b){c.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,n;n=e.baseHref();var m=e.url(),q;if(b.enabled){if(!n&&b.requireBase)throw Fc("nobase","$location in HTML5 mode requires a <base> tag to be present!");
q=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(n||"/");n=d.history?Lc:hd}else q=zb(m),n=Mc;var r=q.substr(0,zb(q).lastIndexOf("/")+1);l=new n(q,r,"#"+a);l.$$parseLinkUrl(m,m);l.$$state=e.state();var t=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var d=R(a.target);"a"!==p(d[0]);)if(d[0]===f[0]||!(d=d.parent())[0])return;var h=d.prop("href"),k=d.attr("href")||d.attr("xlink:href");x(h)&&"[object SVGAnimatedString]"===
h.toString()&&(h=ob(h.animVal).href);t.test(h)||!h||d.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(h,k)||(a.preventDefault(),l.absUrl()!=e.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});ac(l.absUrl())!=ac(m)&&e.url(l.absUrl(),!0);var u=!0;e.onUrlChange(function(a,b){v(Ya(r,a))?g.location.href=a:(c.$evalAsync(function(){var e=l.absUrl(),d=l.$$state,f;a=ac(a);l.$$parse(a);l.$$state=b;f=c.$broadcast("$locationChangeStart",a,e,b,d).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(e),
l.$$state=d,h(e,!1,d)):(u=!1,k(e,d)))}),c.$$phase||c.$digest())});c.$watch(function(){var a=ac(e.url()),b=ac(l.absUrl()),f=e.state(),g=l.$$replace,n=a!==b||l.$$html5&&d.history&&f!==l.$$state;if(u||n)u=!1,c.$evalAsync(function(){var b=l.absUrl(),e=c.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(e?(l.$$parse(a),l.$$state=f):(n&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))});l.$$replace=!1});return l}]}function me(){var a=!0,c=this;this.debugEnabled=function(b){return w(b)?
(a=b,this):a};this.$get=["$window",function(e){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function f(a){var c=e.console||{},g=c[a]||c.log||q;a=!1;try{a=!!g.apply}catch(h){}return a?function(){var a=[];b(arguments,function(b){a.push(d(b))});return g.apply(c,a)}:function(a,b){g(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),
debug:function(){var b=f("debug");return function(){a&&b.apply(c,arguments)}}()}}]}function Nb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw Ba("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function ne(a){return a+""}function nb(a,b){if(a){if(a.constructor===a)throw Ba("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===
a)throw Ba("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw Ba("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw Ba("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b);}return a}function kd(a,b){if(a){if(a.constructor===a)throw Ba("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",
b);if(a===Rf||a===Sf||a===Tf)throw Ba("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b);}}function qc(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw Ba("isecaf","Assigning to a constructor is disallowed! Expression: {0}",b);}function oe(a,b){return"undefined"!==typeof a?a:b}function ld(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}
function ma(a,c){var e,d;switch(a.type){case E.Program:e=!0;b(a.body,function(a){ma(a.expression,c);e=e&&a.expression.constant});a.constant=e;break;case E.Literal:a.constant=!0;a.toWatch=[];break;case E.UnaryExpression:ma(a.argument,c);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case E.BinaryExpression:ma(a.left,c);ma(a.right,c);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case E.LogicalExpression:ma(a.left,c);ma(a.right,
c);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case E.ConditionalExpression:ma(a.test,c);ma(a.alternate,c);ma(a.consequent,c);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case E.Identifier:a.constant=!1;a.toWatch=[a];break;case E.MemberExpression:ma(a.object,c);a.computed&&ma(a.property,c);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case E.CallExpression:e=a.filter?
!c(a.callee.name).$stateful:!1;d=[];b(a.arguments,function(a){ma(a,c);e=e&&a.constant;a.constant||d.push.apply(d,a.toWatch)});a.constant=e;a.toWatch=a.filter&&!c(a.callee.name).$stateful?d:[a];break;case E.AssignmentExpression:ma(a.left,c);ma(a.right,c);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case E.ArrayExpression:e=!0;d=[];b(a.elements,function(a){ma(a,c);e=e&&a.constant;a.constant||d.push.apply(d,a.toWatch)});a.constant=e;a.toWatch=d;break;case E.ObjectExpression:e=!0;
d=[];b(a.properties,function(a){ma(a.value,c);e=e&&a.value.constant;a.value.constant||d.push.apply(d,a.value.toWatch)});a.constant=e;a.toWatch=d;break;case E.ThisExpression:a.constant=!1;a.toWatch=[];break;case E.LocalsExpression:a.constant=!1,a.toWatch=[]}}function md(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function nd(a){return a.type===E.Identifier||a.type===E.MemberExpression}function od(a){if(1===a.body.length&&nd(a.body[0].expression))return{type:E.AssignmentExpression,
left:a.body[0].expression,right:{type:E.NGValueParameter},operator:"="}}function pd(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===E.Literal||a.body[0].expression.type===E.ArrayExpression||a.body[0].expression.type===E.ObjectExpression)}function qd(a,b){this.astBuilder=a;this.$filter=b}function rd(a,b){this.astBuilder=a;this.$filter=b}function rc(a){return"constructor"==a}function Nc(a){return B(a.valueOf)?a.valueOf():Uf.call(a)}function pe(){var a=da(),c=da(),e={"true":!0,
"false":!1,"null":null,undefined:void 0},d,f;this.addLiteral=function(a,b){e[a]=b};this.setIdentifierFns=function(a,b){d=a;f=b;return this};this.$get=["$filter",function(g){function h(b,e,d){var f,l,X;d=d||y;switch(typeof b){case "string":X=b=b.trim();var ea=d?c:a;f=ea[X];if(!f){":"===b.charAt(0)&&":"===b.charAt(1)&&(l=!0,b=b.substring(2));f=d?A:v;var u=new Yc(f);f=(new Zc(u,g,f)).parse(b);f.constant?f.$$watchDelegate=p:l?f.$$watchDelegate=f.literal?r:m:f.inputs&&(f.$$watchDelegate=n);d&&(f=k(f));
ea[X]=f}return t(f,e);case "function":return t(b,e);default:return t(q,e)}}function k(a){function b(c,e,d,f){var g=y;y=!0;try{return a(c,e,d,f)}finally{y=g}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate;b.assign=k(a.assign);b.constant=a.constant;b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=k(a.inputs[c]);b.inputs=a.inputs;return b}function l(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=Nc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function n(a,
b,c,e,d){var f=e.inputs,g;if(1===f.length){var h=l,f=f[0];return a.$watch(function(a){var b=f(a);l(b,h)||(g=e(a,void 0,void 0,[b]),h=b&&Nc(b));return g},b,c,d)}for(var k=[],m=[],L=0,q=f.length;L<q;L++)k[L]=l,m[L]=null;return a.$watch(function(a){for(var b=!1,c=0,d=f.length;c<d;c++){var h=f[c](a);if(b||(b=!l(h,k[c])))m[c]=h,k[c]=h&&Nc(h)}b&&(g=e(a,void 0,void 0,m));return g},b,c,d)}function m(a,b,c,e){var d,f;return d=a.$watch(function(a){return e(a)},function(a,c,e){f=a;B(b)&&b.apply(this,arguments);
w(a)&&e.$$postDigest(function(){w(f)&&d()})},c)}function r(a,c,e,d){function f(a){var c=!0;b(a,function(a){w(a)||(c=!1)});return c}var g,h;return g=a.$watch(function(a){return d(a)},function(a,b,e){h=a;B(c)&&c.call(this,a,b,e);f(a)&&e.$$postDigest(function(){f(h)&&g()})},e)}function p(a,b,c,e){var d;return d=a.$watch(function(a){d();return e(a)},b,c)}function t(a,b){if(!b)return a;var c=a.$$watchDelegate,e=!1,c=c!==r&&c!==m?function(c,d,f,g){f=e&&g?g[0]:a(c,d,f,g);return b(f,c,d)}:function(c,e,d,
f){d=a(c,e,d,f);c=b(d,c,e);return w(d)?c:d};a.$$watchDelegate&&a.$$watchDelegate!==n?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=n,e=!a.inputs,c.inputs=a.inputs?a.inputs:[a]);return c}var u=Fb().noUnsafeEval,v={csp:u,expensiveChecks:!1,literals:O(e),isIdentifierStart:B(d)&&d,isIdentifierContinue:B(f)&&f},A={csp:u,expensiveChecks:!0,literals:O(e),isIdentifierStart:B(d)&&d,isIdentifierContinue:B(f)&&f},y=!1;h.$$runningExpensiveChecks=function(){return y};return h}]}function qe(){this.$get=
["$rootScope","$exceptionHandler",function(a,b){return id(function(b){a.$evalAsync(b)},b)}]}function ke(){this.$get=["$browser","$exceptionHandler",function(a,b){return id(function(b){a.defer(b)},b)}]}function id(a,e){function d(){this.$$state={status:0}}function f(a,b){return function(c){b.call(a,c)}}function g(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){var a,c,d;d=b.pending;b.processScheduled=!1;b.pending=void 0;for(var f=0,g=d.length;f<g;++f){c=d[f][0];a=d[f][b.status];
try{B(a)?c.resolve(a(b.value)):1===b.status?c.resolve(b.value):c.reject(b.value)}catch(h){c.reject(h),e(h)}}}))}function h(){this.promise=new d}var l=c("$q",TypeError);k(d.prototype,{then:function(a,b,c){if(v(a)&&v(b)&&v(c))return this;var e=new h;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([e,a,b,c]);0<this.$$state.status&&g(this.$$state);return e.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return m(b,!0,
a)},function(b){return m(b,!1,a)},b)}});k(h.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(l("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){function b(a){k||(k=!0,h.$$resolve(a))}function c(a){k||(k=!0,h.$$reject(a))}var d,h=this,k=!1;try{if(x(a)||B(a))d=a&&a.then;B(d)?(this.promise.$$state.status=-1,d.call(a,b,c,f(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=
1,g(this.promise.$$state))}catch(l){c(l),e(l)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;g(this.promise.$$state)},notify:function(b){var c=this.promise.$$state.pending;0>=this.promise.$$state.status&&c&&c.length&&a(function(){for(var a,d,f=0,g=c.length;f<g;f++){d=c[f][0];a=c[f][3];try{d.notify(B(a)?a(b):b)}catch(h){e(h)}}})}});var n=function(a,b){var c=new h;b?c.resolve(a):c.reject(a);return c.promise},
m=function(a,b,c){var e=null;try{B(c)&&(e=c())}catch(d){return n(d,!1)}return e&&B(e.then)?e.then(function(){return n(a,b)},function(a){return n(a,!1)}):n(a,b)},q=function(a,b,c,e){var d=new h;d.resolve(a);return d.promise.then(b,c,e)},r=function(a){if(!B(a))throw l("norslvr","Expected resolverFn, got '{0}'",a);var b=new h;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};r.prototype=d.prototype;r.defer=function(){var a=new h;a.resolve=f(a,a.resolve);a.reject=f(a,a.reject);a.notify=
f(a,a.notify);return a};r.reject=function(a){var b=new h;b.reject(a);return b.promise};r.when=q;r.resolve=q;r.all=function(a){var c=new h,e=0,d=U(a)?[]:{};b(a,function(a,b){e++;q(a).then(function(a){d.hasOwnProperty(b)||(d[b]=a,--e||c.resolve(d))},function(a){d.hasOwnProperty(b)||c.reject(a)})});0===e&&c.resolve(d);return c.promise};return r}function re(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,e=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||
a.webkitCancelRequestAnimationFrame,d=!!c,f=d?function(a){var b=c(a);return function(){e(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=d;return f}]}function se(){function a(b){function c(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++yc;this.$$ChildScope=null}c.prototype=b;return c}var e=10,f=c("$rootScope"),g=null,h=null;this.digestTtl=function(a){arguments.length&&
(e=a);return e};this.$get=["$exceptionHandler","$parse","$browser",function(c,k,l){function n(a){a.currentScope.$$destroyed=!0}function m(a){9===xb&&(a.$$childHead&&m(a.$$childHead),a.$$nextSibling&&m(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function r(){this.$id=++yc;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners=
{};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function p(a){if(z.$$phase)throw f("inprog","{0} already in progress",z.$$phase);z.$$phase=a}function t(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function u(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function A(){}function w(){for(;G.length;)try{G.shift()()}catch(a){c(a)}h=null}function y(){null===h&&(h=l.defer(function(){z.$apply(w)}))}r.prototype={constructor:r,
$new:function(b,c){var e;c=c||this;b?(e=new r,e.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),e=new this.$$ChildScope);e.$parent=c;e.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=e,c.$$childTail=e):c.$$childHead=c.$$childTail=e;(b||c!=this)&&e.$on("$destroy",n);return e},$watch:function(a,b,c,e){var d=k(a);if(d.$$watchDelegate)return d.$$watchDelegate(this,b,c,d,a);var f=this,h=f.$$watchers,l={fn:b,last:A,get:d,exp:e||a,eq:!!c};g=null;B(b)||(l.fn=q);h||
(h=f.$$watchers=[]);h.unshift(l);t(this,1);return function(){0<=P(h,l)&&t(f,-1);g=null}},$watchGroup:function(a,c){function e(){k=!1;l?(l=!1,c(f,f,h)):c(f,d,h)}var d=Array(a.length),f=Array(a.length),g=[],h=this,k=!1,l=!0;if(!a.length){var n=!0;h.$evalAsync(function(){n&&c(f,f,h)});return function(){n=!1}}if(1===a.length)return this.$watch(a[0],function(a,b,e){f[0]=a;d[0]=b;c(f,a===b?f:d,e)});b(a,function(a,b){var c=h.$watch(a,function(a,c){f[b]=a;d[b]=c;k||(k=!0,h.$evalAsync(e))});g.push(c)});return function(){for(;g.length;)g.shift()()}},
$watchCollection:function(a,b){function c(a){f=a;var b,e,h,k;if(!v(f)){if(x(f))if(d(f))for(g!==L&&(g=L,p=g.length=0,n++),a=f.length,p!==a&&(n++,g.length=p=a),b=0;b<a;b++)k=g[b],h=f[b],e=k!==k&&h!==h,e||k===h||(n++,g[b]=h);else{g!==q&&(g=q={},p=0,n++);a=0;for(b in f)fb.call(f,b)&&(a++,h=f[b],k=g[b],b in g?(e=k!==k&&h!==h,e||k===h||(n++,g[b]=h)):(p++,g[b]=h,n++));if(p>a)for(b in n++,g)fb.call(f,b)||(p--,delete g[b])}else g!==f&&(g=f,n++);return n}}c.$stateful=!0;var e=this,f,g,h,l=1<b.length,n=0,m=
k(a,c),L=[],q={},r=!0,p=0;return this.$watch(m,function(){r?(r=!1,b(f,f,e)):b(f,h,e);if(l)if(x(f))if(d(f)){h=Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else for(a in h={},f)fb.call(f,a)&&(h[a]=f[a]);else h=f})},$digest:function(){var a,b,d,k,n,m,L,q,r=e,t,u=[],ra,I;p("$digest");l.$$checkUrlChange();this===z&&null!==h&&(l.defer.cancel(h),w());g=null;do{q=!1;for(t=this;C.length;){try{I=C.shift(),I.scope.$eval(I.expression,I.locals)}catch(v){c(v)}g=null}a:do{if(m=t.$$watchers)for(L=m.length;L--;)try{if(a=
m[L])if(n=a.get,(b=n(t))!==(d=a.last)&&!(a.eq?Z(b,d):"number"===typeof b&&"number"===typeof d&&isNaN(b)&&isNaN(d)))q=!0,g=a,a.last=a.eq?O(b,null):b,k=a.fn,k(b,d===A?b:d,t),5>r&&(ra=4-r,u[ra]||(u[ra]=[]),u[ra].push({msg:B(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:b,oldVal:d}));else if(a===g){q=!1;break a}}catch(v){c(v)}if(!(m=t.$$watchersCount&&t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(m=t.$$nextSibling);)t=t.$parent}while(t=m);if((q||C.length)&&!r--)throw z.$$phase=
null,f("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,u);}while(q||C.length);for(z.$$phase=null;S.length;)try{S.shift()()}catch(v){c(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===z&&l.$$applicationDestroyed();t(this,-this.$$watchersCount);for(var b in this.$$listenerCount)u(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==
this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=q;this.$on=this.$watch=this.$watchGroup=function(){return q};this.$$listeners={};this.$$nextSibling=null;m(this)}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){z.$$phase||C.length||l.defer(function(){C.length&&z.$digest()});
C.push({scope:this,expression:k(a),locals:b})},$$postDigest:function(a){S.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{z.$$phase=null}}catch(b){c(b)}finally{try{z.$digest()}catch(b){throw c(b),b;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&G.push(b);a=k(a);y()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var e=this;do e.$$listenerCount[a]||(e.$$listenerCount[a]=0),e.$$listenerCount[a]++;while(e=e.$parent);
var d=this;return function(){var e=c.indexOf(b);-1!==e&&(c[e]=null,u(d,1,a))}},$emit:function(a,b){var e=[],d,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=la([h],arguments,1),l,n;do{d=f.$$listeners[a]||e;h.currentScope=f;l=0;for(n=d.length;l<n;l++)if(d[l])try{d[l].apply(null,k)}catch(m){c(m)}else d.splice(l,1),l--,n--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);h.currentScope=null;return h},
$broadcast:function(a,b){var e=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return f;for(var g=la([f],arguments,1),h,k;e=d;){f.currentScope=e;d=e.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){c(l)}else d.splice(h,1),h--,k--;if(!(d=e.$$listenerCount[a]&&e.$$childHead||e!==this&&e.$$nextSibling))for(;e!==this&&!(d=e.$$nextSibling);)e=e.$parent}f.currentScope=null;return f}};
var z=new r,C=z.$$asyncQueue=[],S=z.$$postDigestQueue=[],G=z.$$applyAsyncQueue=[];return z}]}function te(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return w(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(b=a,this):b};this.$get=function(){return function(c,e){var d=e?b:a,f;f=ob(c).href;return""===f||f.match(d)?c:"unsafe:"+f}}}function ue(a){if("self"===a)return a;if(D(a)){if(-1<a.indexOf("***"))throw yb("iwcard",
"Illegal sequence *** in string matcher.  String: {0}",a);a=Ld(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}if(C(a))return new RegExp("^"+a.source+"$");throw yb("imatcher",'Matchers may only be "self", string patterns or RegExp objects');}function sd(a){var c=[];w(a)&&b(a,function(a){c.push(ue(a))});return c}function ve(){this.SCE_CONTEXTS=Xa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=sd(b));return a};this.resourceUrlBlacklist=
function(a){arguments.length&&(b=sd(a));return b};this.$get=["$injector",function(c){function e(a,b){return"self"===a?td(b):!!a.exec(b.href)}function d(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw yb("unsafe","Attempting to use an unsafe value in a safe context.");};c.has("$sanitize")&&
(f=c.get("$sanitize"));var g=d(),h={};h[Xa.HTML]=d(g);h[Xa.CSS]=d(g);h[Xa.URL]=d(g);h[Xa.JS]=d(g);h[Xa.RESOURCE_URL]=d(h[Xa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw yb("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||v(b)||""===b)return b;if("string"!==typeof b)throw yb("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)},getTrusted:function(c,
d){if(null===d||v(d)||""===d)return d;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&d instanceof g)return d.$$unwrapTrustedValue();if(c===Xa.RESOURCE_URL){var g=ob(d.toString()),k,l,n=!1;k=0;for(l=a.length;k<l;k++)if(e(a[k],g)){n=!0;break}if(n)for(k=0,l=b.length;k<l;k++)if(e(b[k],g)){n=!1;break}if(n)return d;throw yb("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",d.toString());}if(c===Xa.HTML)return f(d);throw yb("unsafe","Attempting to use an unsafe value in a safe context.");
},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function we(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(c,e){if(a&&8>xb)throw yb("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=W(Xa);d.isEnabled=
function(){return a};d.trustAs=e.trustAs;d.getTrusted=e.getTrusted;d.valueOf=e.valueOf;a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=r);d.parseAs=function(a,b){var e=c(b);return e.literal&&e.constant?e:c(b,function(b){return d.getTrusted(a,b)})};var f=d.parseAs,g=d.getTrusted,h=d.trustAs;b(Xa,function(a,b){var c=ha(b);d[$a("parse_as_"+c)]=function(b){return f(a,b)};d[$a("get_trusted_"+c)]=function(b){return g(a,b)};d[$a("trust_as_"+c)]=function(b){return h(a,b)}});return d}]}function xe(){this.$get=
["$window","$document",function(a,b){var c={},e=!(a.chrome&&a.chrome.app&&a.chrome.app.runtime)&&a.history&&a.history.pushState,d=n((/android (\d+)/.exec(ha((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h,k=/^(Moz|webkit|ms)(?=[A-Z])/,l=g.body&&g.body.style,m=!1,q=!1;if(l){for(var r in l)if(m=k.exec(r)){h=m[0];h=h.substr(0,1).toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in l&&"webkit");m=!!("transition"in l||h+"Transition"in l);q=!!("animation"in
l||h+"Animation"in l);!d||m&&q||(m=D(l.webkitTransition),q=D(l.webkitAnimation))}return{history:!(!e||4>d||f),hasEvent:function(a){if("input"===a&&11>=xb)return!1;if(v(c[a])){var b=g.createElement("div");c[a]="on"+a in b}return c[a]},csp:Fb(),vendorPrefix:h,transitions:m,animations:q,android:d}}]}function ye(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,c,e,d){function f(g,h){f.totalPendingRequests++;D(g)&&b.get(g)||(g=d.getTrustedResourceUrl(g));
var l=c.defaults&&c.defaults.transformResponse;U(l)?l=l.filter(function(a){return a!==xa}):l===xa&&(l=null);return c.get(g,k({cache:b,transformResponse:l},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){b.put(g,a.data);return a.data},function(a){if(!h)throw Vf("tpload","Failed to load template: {0} (HTTP status: {1} {2})",g,a.status,a.statusText);return e.reject(a)})}f.totalPendingRequests=0;return f}]}function ze(){this.$get=["$rootScope","$browser","$location",function(a,c,
e){return{findBindings:function(a,c,e){a=a.getElementsByClassName("ng-binding");var d=[];b(a,function(a){var f=Ha.element(a).data("$binding");f&&b(f,function(b){e?(new RegExp("(^|\\s)"+Ld(c)+"(\\s|\\||$)")).test(b)&&d.push(a):-1!=b.indexOf(c)&&d.push(a)})});return d},findModels:function(a,b,c){for(var e=["ng-","data-ng-","ng\\:"],d=0;d<e.length;++d){var f=a.querySelectorAll("["+e[d]+"model"+(c?"=":"*=")+'"'+b+'"]');if(f.length)return f}},getLocation:function(){return e.url()},setLocation:function(b){b!==
e.url()&&(e.url(b),a.$digest())},whenStable:function(a){c.notifyWhenNoOutstandingRequests(a)}}}]}function Ae(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,e,d){function f(h,k,l){B(h)||(l=k,k=h,h=q);var n=lb.call(arguments,3),m=w(l)&&!l,r=(m?e:c).defer(),p=r.promise,t;t=b.defer(function(){try{r.resolve(h.apply(null,n))}catch(b){r.reject(b),d(b)}finally{delete g[p.$$timeoutId]}m||a.$apply()},k);p.$$timeoutId=t;g[t]=r;return p}var g={};f.cancel=function(a){return a&&
a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function ob(a){xb&&(sa.setAttribute("href",a),a=sa.href);sa.setAttribute("href",a);return{href:sa.href,protocol:sa.protocol?sa.protocol.replace(/:$/,""):"",host:sa.host,search:sa.search?sa.search.replace(/^\?/,""):"",hash:sa.hash?sa.hash.replace(/^#/,""):"",hostname:sa.hostname,port:sa.port,pathname:"/"===sa.pathname.charAt(0)?sa.pathname:"/"+sa.pathname}}function td(a){a=
D(a)?ob(a):a;return a.protocol===Md.protocol&&a.host===Md.host}function Be(){this.$get=u(a)}function ud(a){function b(a){try{return decodeURIComponent(a)}catch(c){return a}}var c=a[0]||{},e={},d="";return function(){var a,f,g,h,k;a=c.cookie||"";if(a!==d)for(d=a,a=d.split("; "),e={},g=0;g<a.length;g++)f=a[g],h=f.indexOf("="),0<h&&(k=b(f.substring(0,h)),v(e[k])&&(e[k]=b(f.substring(h+1))));return e}}function Ce(){this.$get=ud}function vd(a){function c(e,d){if(x(e)){var f={};b(e,function(a,b){f[b]=c(b,
a)});return f}return a.factory(e+"Filter",d)}this.register=c;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];c("currency",Nd);c("date",Od);c("filter",Wf);c("json",Xf);c("limitTo",Yf);c("lowercase",Zf);c("number",Pd);c("orderBy",Qd);c("uppercase",$f)}function Wf(){return function(a,b,e){if(!d(a)){if(null==a)return a;throw c("filter")("notarray","Expected array but received: {0}",a);}var f;switch($c(b)){case "function":break;case "boolean":case "null":case "number":case "string":f=
!0;case "object":b=ag(b,e,f);break;default:return a}return Array.prototype.filter.call(a,b)}}function ag(a,b,c){var e=x(a)&&"$"in a;!0===b?b=Z:B(b)||(b=function(a,b){if(v(a))return!1;if(null===a||null===b)return a===b;if(x(b)||x(a)&&!t(a))return!1;a=ha(""+a);b=ha(""+b);return-1!==a.indexOf(b)});return function(d){return e&&!x(d)?Ib(d,a.$,b,!1):Ib(d,a,b,c)}}function Ib(a,b,c,e,d){var f=$c(a),g=$c(b);if("string"===g&&"!"===b.charAt(0))return!Ib(a,b.substring(1),c,e);if(U(a))return a.some(function(a){return Ib(a,
b,c,e)});switch(f){case "object":var h;if(e){for(h in a)if("$"!==h.charAt(0)&&Ib(a[h],b,c,!0))return!0;return d?!1:Ib(a,b,c,!1)}if("object"===g){for(h in b)if(d=b[h],!B(d)&&!v(d)&&(f="$"===h,!Ib(f?a:a[h],d,c,f,f)))return!1;return!0}return c(a,b);case "function":return!1;default:return c(a,b)}}function $c(a){return null===a?"null":typeof a}function Nd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){v(c)&&(c=b.CURRENCY_SYM);v(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Rd(a,b.PATTERNS[1],b.GROUP_SEP,
b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Pd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Rd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function bg(a){var b=0,c,e,d,f,g;-1<(e=a.indexOf(Sd))&&(a=a.replace(Sd,""));0<(d=a.search(/e/i))?(0>e&&(e=d),e+=+a.slice(d+1),a=a.substring(0,d)):0>e&&(e=a.length);for(d=0;a.charAt(d)==ad;d++);if(d==(g=a.length))c=[0],e=1;else{for(g--;a.charAt(g)==ad;)g--;e-=d;c=[];for(f=0;d<=g;d++,f++)c[f]=+a.charAt(d)}e>Td&&(c=c.splice(0,Td-1),b=e-1,
e=1);return{d:c,e:b,i:e}}function cg(a,b,c,e){var d=a.d,f=d.length-a.i;b=v(b)?Math.min(Math.max(c,f),e):+b;c=b+a.i;e=d[c];if(0<c){d.splice(Math.max(a.i,c));for(var g=c;g<d.length;g++)d[g]=0}else for(f=Math.max(0,f),a.i=1,d.length=Math.max(1,c=b+1),d[0]=0,g=1;g<c;g++)d[g]=0;if(5<=e)if(0>c-1){for(e=0;e>c;e--)d.unshift(0),a.i++;d.unshift(1);a.i++}else d[c-1]++;for(;f<Math.max(0,b);f++)d.push(0);if(b=d.reduceRight(function(a,b,c,e){b+=a;e[c]=b%10;return Math.floor(b/10)},0))d.unshift(b),a.i++}function Rd(a,
b,c,e,d){if(!D(a)&&!A(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=bg(h);cg(g,d,b.minFrac,b.maxFrac);k=g.d;h=g.i;d=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize).join(""));k.length&&h.unshift(k.join(""));k=h.join(c);f.length&&(k+=e+f.join(""));d&&(k+="e+"+d)}return 0>a&&!g?b.negPre+
k+b.negSuf:b.posPre+k+b.posSuf}function Gc(a,b,c,e){var d="";if(0>a||e&&0>=a)e?a=-a+1:(a=-a,d="-");for(a=""+a;a.length<b;)a=ad+a;c&&(a=a.substr(a.length-b));return d+a}function ta(a,b,c,e,d){c=c||0;return function(f){f=f["get"+a]();if(0<c||f>-c)f+=c;0===f&&-12==c&&(f=12);return Gc(f,b,e,d)}}function jc(a,b,c){return function(e,d){var f=e["get"+a](),g=Bc((c?"STANDALONE":"")+(b?"SHORT":"")+a);return d[g][f]}}function Ud(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Vd(a){return function(b){var c=
Ud(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+c;return Gc(1+Math.round(b/6048E5),a)}}function bd(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Od(a){function c(a){var b;if(b=a.match(e)){a=new Date(0);var d=0,f=0,g=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(d=n(b[9]+b[10]),f=n(b[9]+b[11]));g.call(a,n(b[1]),n(b[2])-1,n(b[3]));d=n(b[4]||0)-d;f=n(b[5]||0)-f;g=n(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));
h.call(a,d,f,g,b)}return a}var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(e,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;D(e)&&(e=dg.test(e)?n(e):c(e));A(e)&&(e=new Date(e));if(!z(e)||!isFinite(e.getTime()))return e;for(;d;)(l=eg.exec(d))?(h=la(h,l,1),d=h.pop()):(h.push(d),d=null);var m=e.getTimezoneOffset();f&&(m=Ra(f,m),e=H(e,f,!0));b(h,function(b){k=fg[b];g+=k?k(e,a.DATETIME_FORMATS,m):"''"===b?
"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Xf(){return function(a,b){v(b)&&(b=2);return aa(a,b)}}function Yf(){return function(a,b,c){b=Infinity===Math.abs(Number(b))?Number(b):n(b);if(isNaN(b))return a;A(a)&&(a=a.toString());if(!U(a)&&!D(a))return a;c=!c||isNaN(c)?0:n(c);c=0>c?Math.max(0,a.length+c):c;return 0<=b?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)}}function Qd(a){function b(c,e){e=e?-1:1;return c.map(function(b){var c=1,d=r;if(B(b))d=b;else if(D(b)){if("+"==
b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var f=d(),d=function(a){return a[f]}}return{get:d,descending:c*e}})}function e(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}return function(a,f,g){if(null==a)return a;if(!d(a))throw c("orderBy")("notarray","Expected array but received: {0}",a);U(f)||(f=[f]);0===f.length&&(f=["+"]);var h=b(f,g);h.push({get:function(){return{}},descending:g?-1:1});a=Array.prototype.map.call(a,
function(a,b){return{value:a,predicateValues:h.map(function(c){var d=c.get(a);c=typeof d;if(null===d)c="string",d="null";else if("string"===c)d=d.toLowerCase();else if("object"===c)a:{if("function"===typeof d.valueOf&&(d=d.valueOf(),e(d)))break a;if(t(d)&&(d=d.toString(),e(d)))break a;d=b}return{value:d,type:c}})}});a.sort(function(a,b){for(var c=0,e=0,d=h.length;e<d;++e){var c=a.predicateValues[e],f=b.predicateValues[e],g=0;c.type===f.type?c.value!==f.value&&(g=c.value<f.value?-1:1):g=c.type<f.type?
-1:1;if(c=g*h[e].descending)break}return c});return a=a.map(function(a){return a.value})}}function Jb(a){B(a)&&(a={link:a});a.restrict=a.restrict||"AC";return u(a)}function Wd(a,c,e,d,f){var g=this,h=[];g.$error={};g.$$success={};g.$pending=void 0;g.$name=f(c.name||c.ngForm||"")(e);g.$dirty=!1;g.$pristine=!0;g.$valid=!0;g.$invalid=!1;g.$submitted=!1;g.$$parentForm=Hc;g.$rollbackViewValue=function(){b(h,function(a){a.$rollbackViewValue()})};g.$commitViewValue=function(){b(h,function(a){a.$commitViewValue()})};
g.$addControl=function(a){za(a.$name,"input");h.push(a);a.$name&&(g[a.$name]=a);a.$$parentForm=g};g.$$renameControl=function(a,b){var c=a.$name;g[c]===a&&delete g[c];g[b]=a;a.$name=b};g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name];b(g.$pending,function(b,c){g.$setValidity(c,null,a)});b(g.$error,function(b,c){g.$setValidity(c,null,a)});b(g.$$success,function(b,c){g.$setValidity(c,null,a)});P(h,a);a.$$parentForm=Hc};Xd({ctrl:this,$element:a,set:function(a,b,c){var e=a[b];e?
-1===e.indexOf(c)&&e.push(c):a[b]=[c]},unset:function(a,b,c){var e=a[b];e&&(P(e,c),0===e.length&&delete a[b])},$animate:d});g.$setDirty=function(){d.removeClass(a,$b);d.addClass(a,Ic);g.$dirty=!0;g.$pristine=!1;g.$$parentForm.$setDirty()};g.$setPristine=function(){d.setClass(a,$b,Ic+" ng-submitted");g.$dirty=!1;g.$pristine=!0;g.$submitted=!1;b(h,function(a){a.$setPristine()})};g.$setUntouched=function(){b(h,function(a){a.$setUntouched()})};g.$setSubmitted=function(){d.addClass(a,"ng-submitted");g.$submitted=
!0;g.$$parentForm.$setSubmitted()}}function cd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function kc(a,b,c,e,d,f){var g=ha(b[0].type);if(!d.android){var h=!1;b.on("compositionstart",function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var d=b.val();a=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(d=ka(d));(e.$viewValue!==d||""===d&&e.$$hasNativeValidators)&&e.$setViewValue(d,a)}};if(d.hasEvent("input"))b.on("input",
l);else{var n=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||n(a,this,this.value)});if(d.hasEvent("paste"))b.on("paste cut",n)}b.on("change",l);if(Yd[g]&&e.$$hasNativeValidators&&g===c.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,e=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&b.typeMismatch===e||l(a)})}});e.$render=function(){var a=e.$isEmpty(e.$viewValue)?
"":e.$viewValue;b.val()!==a&&b.val(a)}}function Jc(a,c){return function(e,d){var f,g;if(z(e))return e;if(D(e)){'"'==e.charAt(0)&&'"'==e.charAt(e.length-1)&&(e=e.substring(1,e.length-1));if(gg.test(e))return new Date(e);a.lastIndex=0;if(f=a.exec(e))return f.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},b(f,function(a,b){b<c.length&&(g[c[b]]=+a)}),new Date(g.yyyy,
g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1E3*g.sss||0)}return NaN}}function lc(a,b,c,e){return function(d,f,g,h,k,l,n){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return w(a)&&!z(a)?c(a)||void 0:a}Zd(d,f,g,h);kc(d,f,g,h,k,l);var r=h&&h.$options&&h.$options.timezone,p;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=c(a,p),r&&(a=H(a,r)),a});h.$formatters.push(function(a){if(a&&!z(a))throw mc("datefmt","Expected `{0}` to be a date",
a);if(m(a))return(p=a)&&r&&(p=H(p,r,!0)),n("date")(a,e,r);p=null;return""});if(w(g.min)||g.ngMin){var t;h.$validators.min=function(a){return!m(a)||v(t)||c(a)>=t};g.$observe("min",function(a){t=q(a);h.$validate()})}if(w(g.max)||g.ngMax){var u;h.$validators.max=function(a){return!m(a)||v(u)||c(a)<=u};g.$observe("max",function(a){u=q(a);h.$validate()})}}}function Zd(a,b,c,e){(e.$$hasNativeValidators=x(b[0].validity))&&e.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?
void 0:a})}function $d(a,b,c,e,d){if(w(e)){a=a(e);if(!a.constant)throw mc("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return a(b)}return d}function dd(a,c){a="ngClass"+a;return["$animate",function(e){function d(a,b){var c=[],e=0;a:for(;e<a.length;e++){for(var f=a[e],g=0;g<b.length;g++)if(f==b[g])continue a;c.push(f)}return c}function f(a){var c=[];return U(a)?(b(a,function(a){c=c.concat(f(a))}),c):D(a)?a.split(" "):x(a)?(b(a,function(a,b){a&&(c=c.concat(b.split(" ")))}),
c):a}return{restrict:"AC",link:function(g,h,k){function l(a){a=n(a,1);k.$addClass(a)}function n(a,c){var e=h.data("$classCounts")||da(),d=[];b(a,function(a){if(0<c||e[a])e[a]=(e[a]||0)+c,e[a]===+(0<c)&&d.push(a)});h.data("$classCounts",e);return d.join(" ")}function m(a,b){var c=d(b,a),f=d(a,b),c=n(c,1),f=n(f,-1);c&&c.length&&e.addClass(h,c);f&&f.length&&e.removeClass(h,f)}function q(a){if(!0===c||g.$index%2===c){var b=f(a||[]);if(!r)l(b);else if(!Z(a,r)){var e=f(r);m(e,b)}}r=U(a)?a.map(function(a){return W(a)}):
W(a)}var r;g.$watch(k[a],q,!0);k.$observe("class",function(b){q(g.$eval(k[a]))});"ngClass"!==a&&g.$watch("$index",function(b,e){var d=b&1;if(d!==(e&1)){var h=f(g.$eval(k[a]));d===c?l(h):(d=n(h,-1),k.$removeClass(d))}})}}}]}function Xd(a){function b(a,c){c&&!f[a]?(k.addClass(d,a),f[a]=!0):!c&&f[a]&&(k.removeClass(d,a),f[a]=!1)}function c(a,e){a=a?"-"+Ob(a,"-"):"";b(nc+a,!0===e);b(ae+a,!1===e)}var e=a.ctrl,d=a.$element,f={},g=a.set,h=a.unset,k=a.$animate;f[ae]=!(f[nc]=d.hasClass(nc));e.$setValidity=
function(a,d,f){v(d)?(e.$pending||(e.$pending={}),g(e.$pending,a,f)):(e.$pending&&h(e.$pending,a,f),be(e.$pending)&&(e.$pending=void 0));N(d)?d?(h(e.$error,a,f),g(e.$$success,a,f)):(g(e.$error,a,f),h(e.$$success,a,f)):(h(e.$error,a,f),h(e.$$success,a,f));e.$pending?(b(ce,!0),e.$valid=e.$invalid=void 0,c("",null)):(b(ce,!1),e.$valid=be(e.$error),e.$invalid=!e.$valid,c("",e.$valid));d=e.$pending&&e.$pending[a]?void 0:e.$error[a]?!1:e.$$success[a]?!0:null;c(a,d);e.$$parentForm.$setValidity(a,d,e)}}function be(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0}var hg=/^\/(.+)\/([a-z]*)$/,fb=Object.prototype.hasOwnProperty,ha=function(a){return D(a)?a.toLowerCase():a},Bc=function(a){return D(a)?a.toUpperCase():a},xb,R,wb,lb=[].slice,Lf=[].splice,ig=[].push,Ga=Object.prototype.toString,wd=Object.getPrototypeOf,Eb=c("ng"),Ha=a.angular||(a.angular={}),Tc,yc=0;xb=a.document.documentMode;q.$inject=[];r.$inject=[];var U=Array.isArray,De=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,ka=function(a){return D(a)?
a.trim():a},Ld=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Fb=function(){if(!w(Fb.rules)){var b=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(b){var c=b.getAttribute("ng-csp")||b.getAttribute("data-ng-csp");Fb.rules={noUnsafeEval:!c||-1!==c.indexOf("no-unsafe-eval"),noInlineStyle:!c||-1!==c.indexOf("no-inline-style")}}else{b=Fb;try{new Function(""),c=!1}catch(e){c=!0}b.rules={noUnsafeEval:c,noInlineStyle:!1}}}return Fb.rules},
Ac=function(){if(w(Ac.name_))return Ac.name_;var b,c,e=Yb.length,d,f;for(c=0;c<e;++c)if(d=Yb[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){f=b.getAttribute(d+"jq");break}return Ac.name_=f},Ee=/:/g,Yb=["ng-","data-ng-","ng:","x-ng-"],Fe=/[A-Z]/g,xd=!1,Xb=3,Ie={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};Y.expando="ng339";var ic=Y.cache={},Ff=1;Y._data=function(a){return this.cache[a[this.expando]]||{}};var Af=/([\:\-\_]+(.))/g,Bf=/^moz([A-Z])/,Dc={mouseleave:"mouseout",
mouseenter:"mouseover"},Vc=c("jqLite"),Ef=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Uc=/<|&#?\w+;/,Cf=/<([\w:-]+)/,Df=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Wa={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wa.optgroup=Wa.option;Wa.tbody=Wa.tfoot=Wa.colgroup=Wa.caption=Wa.thead;
Wa.th=Wa.td;var Gf=a.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Zb=Y.prototype={ready:function(b){function c(){e||(e=!0,b())}var e=!1;"complete"===a.document.readyState?a.setTimeout(c):(this.on("DOMContentLoaded",c),Y(a).on("load",c))},toString:function(){var a=[];b(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?R(this[a]):R(this[this.length+a])},length:0,push:ig,sort:[].sort,splice:[].splice},Ec={};b("multiple selected checked disabled readOnly required open".split(" "),
function(a){Ec[ha(a)]=a});var Ed={};b("input select option textarea button form details".split(" "),function(a){Ed[a]=!0});var Hd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};b({data:ja,removeData:Ma,hasData:function(a){for(var b in ic[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,c=a.length;b<c;b++)Ma(a[b])}},function(a,b){Y[b]=a});b({data:ja,inheritedData:Ja,scope:function(a){return R.data(a,"$scope")||Ja(a.parentNode||a,["$isolateScope",
"$scope"])},isolateScope:function(a){return R.data(a,"$isolateScope")||R.data(a,"$isolateScopeNoTemplate")},controller:jb,injector:function(a){return Ja(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:F,css:function(a,b,c){b=$a(b);if(w(c))a.style[b]=c;else return a.style[b]},attr:function(a,b,c){var e=a.nodeType;if(e!==Xb&&2!==e&&8!==e)if(e=ha(b),Ec[e])if(w(c))c?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e));else return a[b]||(a.attributes.getNamedItem(b)||q).specified?
e:void 0;else if(w(c))a.setAttribute(b,c);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?void 0:a},prop:function(a,b,c){if(w(c))a[b]=c;else return a[b]},text:function(){function a(b,c){if(v(c)){var e=b.nodeType;return 1===e||e===Xb?b.textContent:""}b.textContent=c}a.$dv="";return a}(),val:function(a,c){if(v(c)){if(a.multiple&&"select"===p(a)){var e=[];b(a.options,function(a){a.selected&&e.push(a.value||a.text)});return 0===e.length?null:e}return a.value}a.value=c},html:function(a,b){if(v(b))return a.innerHTML;
Ta(a,!0);a.innerHTML=b},empty:Rb},function(a,b){Y.prototype[b]=function(b,c){var e,d,f=this.length;if(a!==Rb&&v(2==a.length&&a!==F&&a!==jb?b:c)){if(x(b)){for(e=0;e<f;e++)if(a===ja)a(this[e],b);else for(d in b)a(this[e],d,b[d]);return this}e=a.$dv;f=v(e)?Math.min(f,1):f;for(d=0;d<f;d++){var g=a(this[d],b,c);e=e?e+g:g}return e}for(e=0;e<f;e++)a(this[e],b,c);return this}});b({removeData:Ma,on:function(a,b,c,e){if(w(e))throw Vc("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");
if(ib(a)){e=bb(a,!0);var d=e.events,f=e.handle;f||(f=e.handle=Za(a,d));e=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=e.length,h=function(b,e,g){var h=d[b];h||(h=d[b]=[],h.specialHandlerWrapper=e,"$destroy"===b||g||a.addEventListener(b,f,!1));h.push(c)};g--;)b=e[g],Dc[b]?(h(Dc[b],Tb),h(b,void 0,!0)):h(b)}},off:ab,one:function(a,b,c){a=R(a);a.on(b,function qa(){a.off(b,c);a.off(b,qa)});a.on(b,c)},replaceWith:function(a,c){var e,d=a.parentNode;Ta(a);b(new Y(c),function(b){e?d.insertBefore(b,e.nextSibling):
d.replaceChild(b,a);e=b})},children:function(a){var c=[];b(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(1===c||11===c){b=new Y(b);for(var c=0,e=b.length;c<e;c++)a.appendChild(b[c])}},prepend:function(a,c){if(1===a.nodeType){var e=a.firstChild;b(new Y(c),function(b){a.insertBefore(b,e)})}},wrap:function(a,b){Db(a,R(b).eq(0).clone()[0])},remove:ub,detach:function(a){ub(a,!0)},
after:function(a,b){var c=a,e=a.parentNode;b=new Y(b);for(var d=0,f=b.length;d<f;d++){var g=b[d];e.insertBefore(g,c.nextSibling);c=g}},addClass:ba,removeClass:cb,toggleClass:function(a,c,e){c&&b(c.split(" "),function(b){var c=e;v(c)&&(c=!F(a,b));(c?ba:cb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:tb,triggerHandler:function(a,c,e){var d,
f,g=c.type||c,h=bb(a);if(h=(h=h&&h.events)&&h[g])d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:q,type:g,target:a},c.type&&(d=k(d,c)),c=W(h),f=e?[d].concat(e):[d],b(c,function(b){d.isImmediatePropagationStopped()||b.apply(a,f)})}},function(a,b){Y.prototype[b]=
function(b,c,e){for(var d,f=0,g=this.length;f<g;f++)v(d)?(d=a(this[f],b,c,e),w(d)&&(d=R(d))):Qb(d,a(this[f],b,c,e));return w(d)?d:this};Y.prototype.bind=Y.prototype.on;Y.prototype.unbind=Y.prototype.off});Na.prototype={put:function(a,b){this[Qa(a,this.nextUid)]=b},get:function(a){return this[Qa(a,this.nextUid)]},remove:function(a){var b=this[a=Qa(a,this.nextUid)];delete this[a];return b}};var zf=[function(){this.$get=[function(){return Na}]}],If=/^([^\(]+?)=>/,Jf=/^[^\(]*\(\s*([^\)]*)\)/m,jg=/,/,
kg=/^\s*(_?)(\S+?)\1\s*$/,Hf=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Gb=c("$injector");Oa.$$annotate=function(a,c,e){var d;if("function"===typeof a){if(!(d=a.$inject)){d=[];if(a.length){if(c)throw D(e)&&e||(e=a.name||Ua(a)),Gb("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",e);c=Ub(a);b(c[1].split(jg),function(a){a.replace(kg,function(a,b,c){d.push(c)})})}a.$inject=d}}else U(a)?(c=a.length-1,Ka(a[c],"fn"),d=a.slice(0,c)):Ka(a,"fn",!0);return d};var de=c("$animate"),
uf=function(){this.$get=q},vf=function(){var a=new Na,c=[];this.$get=["$$AnimateRunner","$rootScope",function(e,d){function f(a,c,e){var d=!1;c&&(c=D(c)?c.split(" "):U(c)?c:[],b(c,function(b){b&&(d=!0,a[b]=e)}));return d}function g(){b(c,function(c){var e=a.get(c);if(e){var d=sc(c.attr("class")),f="",g="";b(e,function(a,b){a!==!!d[b]&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)});b(c,function(a){f&&ba(a,f);g&&cb(a,g)});a.remove(c)}});c.length=0}return{enabled:q,on:q,off:q,pin:q,push:function(b,
h,k,l){l&&l();k=k||{};k.from&&b.css(k.from);k.to&&b.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(b)||{},h=f(k,h,!0),l=f(k,l,!1),h||l)a.put(b,k),c.push(b),1===c.length&&d.$$postDigest(g);b=new e;b.complete();return b}}}]},sf=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null);this.register=function(c,e){if(c&&"."!==c.charAt(0))throw de("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var d=c+"-animation";b.$$registeredAnimations[c.substr(1)]=
d;a.factory(d,e)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw de("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,e){if(e){var d;a:{for(d=0;d<e.length;d++){var f=e[d];if(1===f.nodeType){d=
f;break a}}d=void 0}!d||d.parentNode||d.previousElementSibling||(e=null)}e?e.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,e,d,f){e=e&&R(e);d=d&&R(d);e=e||d.parent();b(c,e,d);return a.push(c,"enter",kb(f))},move:function(c,e,d,f){e=e&&R(e);d=d&&R(d);e=e||d.parent();b(c,e,d);return a.push(c,"move",kb(f))},leave:function(b,c){return a.push(b,"leave",kb(c),function(){b.remove()})},addClass:function(b,c,e){e=kb(e);e.addClass=
Va(e.addclass,c);return a.push(b,"addClass",e)},removeClass:function(b,c,e){e=kb(e);e.removeClass=Va(e.removeClass,c);return a.push(b,"removeClass",e)},setClass:function(b,c,e,d){d=kb(d);d.addClass=Va(d.addClass,c);d.removeClass=Va(d.removeClass,e);return a.push(b,"setClass",d)},animate:function(b,c,e,d,f){f=kb(f);f.from=f.from?k(f.from,c):c;f.to=f.to?k(f.to,e):e;f.tempClasses=Va(f.tempClasses,d||"ng-inline-animate");return a.push(b,"animate",f)}}}]}],xf=function(){this.$get=["$$rAF",function(a){function b(e){c.push(e);
1<c.length||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;b(function(){a=!0});return function(c){a?c():b(c)}}}]},wf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,c,e,d,f){function g(a){this.setHost(a);var b=e();this._doneCallbacks=[];this._tick=function(a){var c=d[0];c&&c.hidden?f(a,0,!1):b(a)};this._state=0}g.chain=function(a,b){function c(){if(e===a.length)b(!0);else a[e](function(a){!1===a?b(!1):(e++,c())})}
var e=0;c()};g.all=function(a,c){function e(b){f=f&&b;++d===a.length&&c(f)}var d=0,f=!0;b(a,function(a){a.done(e)})};g.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:q,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},
pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(b(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return g}]},tf=function(){this.$get=
["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,e){function d(){a(function(){f.addClass&&(b.addClass(f.addClass),f.addClass=null);f.removeClass&&(b.removeClass(f.removeClass),f.removeClass=null);f.to&&(b.css(f.to),f.to=null);g||h.complete();g=!0});return h}var f=e||{};f.$$prepared||(f=O(f));f.cleanupStyles&&(f.from=f.to=null);f.from&&(b.css(f.from),f.from=null);var g,h=new c;return{start:d,end:d}}}]},va=c("$compile"),Wc=new function(){};ec.$inject=["$provide","$$sanitizeUriProvider"];
mb.prototype.isFirstChange=function(){return this.previousValue===Wc};var Gd=/^((?:x|data)[\:\-_])/i,Mf=c("$controller"),Id=/^(\S+)(\s+as\s+([\w$]+))?$/,yf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof R&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},Jd="application/json",Xc={"Content-Type":Jd+";charset=utf-8"},Of=/^\[|^\{(?!\{)/,Pf={"[":/]$/,"{":/}$/},Nf=/^\)\]\}',?\n/,lg=c("$http"),Kd=function(a){return function(){throw lg("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",
a);}},Hb=Ha.$interpolateMinErr=c("$interpolate");Hb.throwNoconcat=function(a){throw Hb("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a);};Hb.interr=function(a,b){return Hb("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var mg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Qf={http:80,https:443,ftp:21},Fc=c("$location"),ng={$$html5:!1,$$replace:!1,
absUrl:pc("$$absUrl"),url:function(a){if(v(a))return this.$$url;var b=mg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:pc("$$protocol"),host:pc("$$host"),port:pc("$$port"),path:jd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(D(a)||A(a))a=a.toString(),this.$$search=S(a);else if(x(a))a=
O(a,{}),b(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Fc("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");break;default:v(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:jd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};b([hd,Mc,Lc],function(a){a.prototype=Object.create(ng);a.prototype.state=function(b){if(!arguments.length)return this.$$state;
if(a!==Lc||!this.$$html5)throw Fc("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");this.$$state=v(b)?null:b;return this}});var Ba=c("$parse"),Rf=Function.prototype.call,Sf=Function.prototype.apply,Tf=Function.prototype.bind,Kc=da();b("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Kc[a]=!0});var og={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Yc=function(a){this.options=a};Yc.prototype={constructor:Yc,
lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),c=b+this.peek(2),e=Kc[b],d=Kc[c];Kc[a]||
e||d?(a=d?c:e?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?
this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):
(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),e=b.charCodeAt(0);return 55296<=c&&56319>=c&&56320<=e&&57343>=e?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;b=w(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Ba("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,b,this.text);},readNumber:function(){for(var a=
"",b=this.index;this.index<this.text.length;){var c=ha(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var e=this.peek();if("e"==c&&this.isExpOperator(e))a+=c;else if(this.isExpOperator(c)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=c;else if(!this.isExpOperator(c)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;
for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",e=a,d=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),e=e+f;if(d)"u"===f?(d=this.text.substring(this.index+1,this.index+5),d.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+
d+"]"),this.index+=4,c+=String.fromCharCode(parseInt(d,16))):c+=og[f]||f,d=!1;else if("\\"===f)d=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:e,constant:!0,value:c});return}c+=f}this.index++}this.throwError("Unterminated quote",b)}};var E=function(a,b){this.lexer=a;this.options=b};E.Program="Program";E.ExpressionStatement="ExpressionStatement";E.AssignmentExpression="AssignmentExpression";E.ConditionalExpression="ConditionalExpression";E.LogicalExpression="LogicalExpression";E.BinaryExpression=
"BinaryExpression";E.UnaryExpression="UnaryExpression";E.CallExpression="CallExpression";E.MemberExpression="MemberExpression";E.Identifier="Identifier";E.Literal="Literal";E.ArrayExpression="ArrayExpression";E.Property="Property";E.ObjectExpression="ObjectExpression";E.ThisExpression="ThisExpression";E.LocalsExpression="LocalsExpression";E.NGValueParameter="NGValueParameter";E.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",
this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:E.Program,body:a}},expressionStatement:function(){return{type:E.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a=
{type:E.AssignmentExpression,left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,c;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(c=this.expression(),{type:E.ConditionalExpression,test:a,alternate:b,consequent:c}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:E.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a=
{type:E.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:E.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:E.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:E.BinaryExpression,
operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:E.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:E.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?
a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=O(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:E.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:E.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):
"["===b.text?(a={type:E.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:E.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:E.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());while(this.expect(","))
}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:E.Identifier,name:a.text}},constant:function(){return{type:E.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:E.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
b={type:E.Property,kind:"init"};this.peek().constant?b.key=this.constant():this.peek().identifier?b.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");b.value=this.expression();a.push(b)}while(this.expect(","))}this.consume("}");return{type:E.ObjectExpression,properties:a}},throwError:function(a,b){throw Ba("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===
this.tokens.length)throw Ba("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ba("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,e){return this.peekAhead(0,a,b,c,e)},peekAhead:function(a,b,c,e,d){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===c||f===e||f===d||!(b||c||e||d))return a}return!1},
expect:function(a,b,c,e){return(a=this.peek(a,b,c,e))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:E.ThisExpression},$locals:{type:E.LocalsExpression}}};qd.prototype={compile:function(a,c){var e=this,d=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:c,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};ma(d,e.$filter);var f="",g;this.stage="assign";if(g=od(d))this.state.computing="assign",f=this.nextId(),this.recurse(g,f),this.return_(f),f="fn.assign="+
this.generateFunction("assign","s,v,l");g=md(d.body);e.stage="inputs";b(g,function(a,b){var c="fn"+b;e.state[c]={vars:[],body:[],own:{}};e.state.computing=c;var d=e.nextId();e.recurse(a,d);e.return_(d);e.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(d);f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+f+this.watchFns()+"return fn;";f=(new Function("$filter","ensureSafeMemberName","ensureSafeObject",
"ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",f))(this.$filter,Nb,nb,kd,ne,qc,oe,ld,a);this.state=this.stage=void 0;f.literal=pd(d);f.constant=d.constant;return f},USE:"use",STRICT:"strict",watchFns:function(){var a=[],c=this.state.inputs,e=this;b(c,function(b){a.push("var "+b+"="+e.generateFunction(b,"s"))});c.length&&a.push("fn.inputs=["+c.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+
"};"},filterPrefix:function(){var a=[],c=this;b(this.state.filters,function(b,e){a.push(b+"=$filter("+c.escape(e)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,c,e,d,f,g){var h,k,l=this,n,m;d=d||q;if(!g&&w(a.watchId))c=c||this.nextId(),this.if_("i",this.lazyAssign(c,this.computedMember("i",a.watchId)),this.lazyRecurse(a,c,e,
d,f,!0));else switch(a.type){case E.Program:b(a.body,function(b,c){l.recurse(b.expression,void 0,void 0,function(a){k=a});c!==a.body.length-1?l.current().body.push(k,";"):l.return_(k)});break;case E.Literal:m=this.escape(a.value);this.assign(c,m);d(m);break;case E.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a});m=a.operator+"("+this.ifDefined(k,0)+")";this.assign(c,m);d(m);break;case E.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a});this.recurse(a.right,
void 0,void 0,function(a){k=a});m="+"===a.operator?this.plus(h,k):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(k,0):"("+h+")"+a.operator+"("+k+")";this.assign(c,m);d(m);break;case E.LogicalExpression:c=c||this.nextId();l.recurse(a.left,c);l.if_("&&"===a.operator?c:l.not(c),l.lazyRecurse(a.right,c));d(c);break;case E.ConditionalExpression:c=c||this.nextId();l.recurse(a.test,c);l.if_(c,l.lazyRecurse(a.alternate,c),l.lazyRecurse(a.consequent,c));d(c);break;case E.Identifier:c=c||this.nextId();
e&&(e.context="inputs"===l.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),e.computed=!1,e.name=a.name);Nb(a.name);l.if_("inputs"===l.stage||l.not(l.getHasOwnProperty("l",a.name)),function(){l.if_("inputs"===l.stage||"s",function(){f&&1!==f&&l.if_(l.not(l.nonComputedMember("s",a.name)),l.lazyAssign(l.nonComputedMember("s",a.name),"{}"));l.assign(c,l.nonComputedMember("s",a.name))})},c&&l.lazyAssign(c,l.nonComputedMember("l",a.name)));(l.state.expensiveChecks||rc(a.name))&&
l.addEnsureSafeObject(c);d(c);break;case E.MemberExpression:h=e&&(e.context=this.nextId())||this.nextId();c=c||this.nextId();l.recurse(a.object,h,void 0,function(){l.if_(l.notNull(h),function(){f&&1!==f&&l.addEnsureSafeAssignContext(h);if(a.computed)k=l.nextId(),l.recurse(a.property,k),l.getStringValue(k),l.addEnsureSafeMemberName(k),f&&1!==f&&l.if_(l.not(l.computedMember(h,k)),l.lazyAssign(l.computedMember(h,k),"{}")),m=l.ensureSafeObject(l.computedMember(h,k)),l.assign(c,m),e&&(e.computed=!0,e.name=
k);else{Nb(a.property.name);f&&1!==f&&l.if_(l.not(l.nonComputedMember(h,a.property.name)),l.lazyAssign(l.nonComputedMember(h,a.property.name),"{}"));m=l.nonComputedMember(h,a.property.name);if(l.state.expensiveChecks||rc(a.property.name))m=l.ensureSafeObject(m);l.assign(c,m);e&&(e.computed=!1,e.name=a.property.name)}},function(){l.assign(c,"undefined")});d(c)},!!f);break;case E.CallExpression:c=c||this.nextId();a.filter?(k=l.filter(a.callee.name),n=[],b(a.arguments,function(a){var b=l.nextId();l.recurse(a,
b);n.push(b)}),m=k+"("+n.join(",")+")",l.assign(c,m),d(c)):(k=l.nextId(),h={},n=[],l.recurse(a.callee,k,h,function(){l.if_(l.notNull(k),function(){l.addEnsureSafeFunction(k);b(a.arguments,function(a){l.recurse(a,l.nextId(),void 0,function(a){n.push(l.ensureSafeObject(a))})});h.name?(l.state.expensiveChecks||l.addEnsureSafeObject(h.context),m=l.member(h.context,h.name,h.computed)+"("+n.join(",")+")"):m=k+"("+n.join(",")+")";m=l.ensureSafeObject(m);l.assign(c,m)},function(){l.assign(c,"undefined")});
d(c)}));break;case E.AssignmentExpression:k=this.nextId();h={};if(!nd(a.left))throw Ba("lval","Trying to assign a value to a non l-value");this.recurse(a.left,void 0,h,function(){l.if_(l.notNull(h.context),function(){l.recurse(a.right,k);l.addEnsureSafeObject(l.member(h.context,h.name,h.computed));l.addEnsureSafeAssignContext(h.context);m=l.member(h.context,h.name,h.computed)+a.operator+k;l.assign(c,m);d(c||m)})},1);break;case E.ArrayExpression:n=[];b(a.elements,function(a){l.recurse(a,l.nextId(),
void 0,function(a){n.push(a)})});m="["+n.join(",")+"]";this.assign(c,m);d(m);break;case E.ObjectExpression:n=[];b(a.properties,function(a){l.recurse(a.value,l.nextId(),void 0,function(b){n.push(l.escape(a.key.type===E.Identifier?a.key.name:""+a.key.value)+":"+b)})});m="{"+n.join(",")+"}";this.assign(c,m);d(m);break;case E.ThisExpression:this.assign(c,"s");d("s");break;case E.LocalsExpression:this.assign(c,"l");d("l");break;case E.NGValueParameter:this.assign(c,"v"),d("v")}},getHasOwnProperty:function(a,
b){var c=a+"."+b,e=this.current().own;e.hasOwnProperty(c)||(e[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return e[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",
a,";")},if_:function(a,b,c){if(!0===a)b();else{var e=this.current().body;e.push("if(",a,"){");b();e.push("}");c&&(e.push("else{"),c(),e.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/[^$_a-zA-Z0-9]/g;return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(b)?a+"."+b:a+'["'+b.replace(c,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,
b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+
a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,c,e,d,f){var g=this;return function(){g.recurse(a,b,c,e,d,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},
escape:function(a){if(D(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(A(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Ba("esc","IMPOSSIBLE");},nextId:function(a,b){var c="v"+this.state.nextId++;a||this.current().vars.push(c+(b?"="+b:""));return c},current:function(){return this.state[this.state.computing]}};rd.prototype={compile:function(a,c){var e=this,d=this.astBuilder.ast(a);
this.expression=a;this.expensiveChecks=c;ma(d,e.$filter);var f,g;if(f=od(d))g=this.recurse(f);f=md(d.body);var h;f&&(h=[],b(f,function(a,b){var c=e.recurse(a);a.input=c;h.push(c);a.watchId=b}));var k=[];b(d.body,function(a){k.push(e.recurse(a.expression))});f=0===d.body.length?q:1===d.body.length?k[0]:function(a,c){var e;b(k,function(b){e=b(a,c)});return e};g&&(f.assign=function(a,b,c){return g(a,c,b)});h&&(f.inputs=h);f.literal=pd(d);f.constant=d.constant;return f},recurse:function(a,c,e){var d,
f,g=this,h;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case E.Literal:return this.value(a.value,c);case E.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,c);case E.BinaryExpression:return d=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](d,f,c);case E.LogicalExpression:return d=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](d,f,c);case E.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),
this.recurse(a.alternate),this.recurse(a.consequent),c);case E.Identifier:return Nb(a.name,g.expression),g.identifier(a.name,g.expensiveChecks||rc(a.name),c,e,g.expression);case E.MemberExpression:return d=this.recurse(a.object,!1,!!e),a.computed||(Nb(a.property.name,g.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(d,f,c,e,g.expression):this.nonComputedMember(d,f,g.expensiveChecks,c,e,g.expression);case E.CallExpression:return h=[],b(a.arguments,
function(a){h.push(g.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,b,e,d){for(var g=[],k=0;k<h.length;++k)g.push(h[k](a,b,e,d));a=f.apply(void 0,g,d);return c?{context:void 0,name:void 0,value:a}:a}:function(a,b,e,d){var k=f(a,b,e,d),l;if(null!=k.value){nb(k.context,g.expression);kd(k.value,g.expression);l=[];for(var n=0;n<h.length;++n)l.push(nb(h[n](a,b,e,d),g.expression));l=nb(k.value.apply(k.context,l),g.expression)}return c?
{value:l}:l};case E.AssignmentExpression:return d=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,b,e,h){var k=d(a,b,e,h);a=f(a,b,e,h);nb(k.value,g.expression);qc(k.context);k.context[k.name]=a;return c?{value:a}:a};case E.ArrayExpression:return h=[],b(a.elements,function(a){h.push(g.recurse(a))}),function(a,b,e,d){for(var f=[],g=0;g<h.length;++g)f.push(h[g](a,b,e,d));return c?{value:f}:f};case E.ObjectExpression:return h=[],b(a.properties,function(a){h.push({key:a.key.type===E.Identifier?
a.key.name:""+a.key.value,value:g.recurse(a.value)})}),function(a,b,e,d){for(var f={},g=0;g<h.length;++g)f[h[g].key]=h[g].value(a,b,e,d);return c?{value:f}:f};case E.ThisExpression:return function(a){return c?{value:a}:a};case E.LocalsExpression:return function(a,b){return c?{value:b}:b};case E.NGValueParameter:return function(a,b,e){return c?{value:e}:e}}},"unary+":function(a,b){return function(c,e,d,f){c=a(c,e,d,f);c=w(c)?+c:0;return b?{value:c}:c}},"unary-":function(a,b){return function(c,e,d,
f){c=a(c,e,d,f);c=w(c)?-c:0;return b?{value:c}:c}},"unary!":function(a,b){return function(c,e,d,f){c=!a(c,e,d,f);return b?{value:c}:c}},"binary+":function(a,b,c){return function(e,d,f,g){var h=a(e,d,f,g);e=b(e,d,f,g);h=ld(h,e);return c?{value:h}:h}},"binary-":function(a,b,c){return function(e,d,f,g){var h=a(e,d,f,g);e=b(e,d,f,g);h=(w(h)?h:0)-(w(e)?e:0);return c?{value:h}:h}},"binary*":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)*b(e,d,f,g);return c?{value:e}:e}},"binary/":function(a,b,c){return function(e,
d,f,g){e=a(e,d,f,g)/b(e,d,f,g);return c?{value:e}:e}},"binary%":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)%b(e,d,f,g);return c?{value:e}:e}},"binary===":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)===b(e,d,f,g);return c?{value:e}:e}},"binary!==":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)!==b(e,d,f,g);return c?{value:e}:e}},"binary==":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)==b(e,d,f,g);return c?{value:e}:e}},"binary!=":function(a,b,c){return function(e,
d,f,g){e=a(e,d,f,g)!=b(e,d,f,g);return c?{value:e}:e}},"binary<":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)<b(e,d,f,g);return c?{value:e}:e}},"binary>":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)>b(e,d,f,g);return c?{value:e}:e}},"binary<=":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)<=b(e,d,f,g);return c?{value:e}:e}},"binary>=":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)>=b(e,d,f,g);return c?{value:e}:e}},"binary&&":function(a,b,c){return function(e,d,f,g){e=
a(e,d,f,g)&&b(e,d,f,g);return c?{value:e}:e}},"binary||":function(a,b,c){return function(e,d,f,g){e=a(e,d,f,g)||b(e,d,f,g);return c?{value:e}:e}},"ternary?:":function(a,b,c,e){return function(d,f,g,h){d=a(d,f,g,h)?b(d,f,g,h):c(d,f,g,h);return e?{value:d}:d}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c,e,d){return function(f,g,h,k){f=g&&a in g?g:f;e&&1!==e&&f&&!f[a]&&(f[a]={});g=f?f[a]:void 0;b&&nb(g,d);return c?{context:f,name:a,
value:g}:g}},computedMember:function(a,b,c,e,d){return function(f,g,h,k){var l=a(f,g,h,k),n,m;null!=l&&(n=b(f,g,h,k),n+="",Nb(n,d),e&&1!==e&&(qc(l),l&&!l[n]&&(l[n]={})),m=l[n],nb(m,d));return c?{context:l,name:n,value:m}:m}},nonComputedMember:function(a,b,c,e,d,f){return function(g,h,k,l){g=a(g,h,k,l);d&&1!==d&&(qc(g),g&&!g[b]&&(g[b]={}));h=null!=g?g[b]:void 0;(c||rc(b))&&nb(h,f);return e?{context:g,name:b,value:h}:h}},inputs:function(a,b){return function(c,e,d,f){return f?f[b]:a(c,e,d)}}};var Zc=
function(a,b,c){this.lexer=a;this.$filter=b;this.options=c;this.ast=new E(a,c);this.astCompiler=c.csp?new rd(this.ast,b):new qd(this.ast,b)};Zc.prototype={constructor:Zc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var Uf=Object.prototype.valueOf,yb=c("$sce"),Xa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Vf=c("$compile"),sa=a.document.createElement("a"),Md=ob(a.location.href);ud.$inject=["$document"];vd.$inject=["$provide"];var Td=22,
Sd=".",ad="0";Nd.$inject=["$locale"];Pd.$inject=["$locale"];var fg={yyyy:ta("FullYear",4,0,!1,!0),yy:ta("FullYear",2,0,!0,!0),y:ta("FullYear",1,0,!1,!0),MMMM:jc("Month"),MMM:jc("Month",!0),MM:ta("Month",2,1),M:ta("Month",1,1),LLLL:jc("Month",!1,!0),dd:ta("Date",2),d:ta("Date",1),HH:ta("Hours",2),H:ta("Hours",1),hh:ta("Hours",2,-12),h:ta("Hours",1,-12),mm:ta("Minutes",2),m:ta("Minutes",1),ss:ta("Seconds",2),s:ta("Seconds",1),sss:ta("Milliseconds",3),EEEE:jc("Day"),EEE:jc("Day",!0),a:function(a,b){return 12>
a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,c){a=-1*c;return a=(0<=a?"+":"")+(Gc(Math[0<a?"floor":"ceil"](a/60),2)+Gc(Math.abs(a%60),2))},ww:Vd(2),w:Vd(1),G:bd,GG:bd,GGG:bd,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},eg=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,dg=/^\-?\d+$/;Od.$inject=["$locale"];var Zf=u(ha),$f=u(Bc);Qd.$inject=["$parse"];var Je=u({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,
b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Ga.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Cc={};b(Ec,function(a,b){function c(a,d,f){a.$watch(f[e],function(a){f.$set(b,!!a)})}if("multiple"!=a){var e=Fa("ng-"+b),d=c;"checked"===a&&(d=function(a,b,d){d.ngModel!==d[e]&&c(a,b,d)});Cc[e]=function(){return{restrict:"A",priority:100,link:d}}}});b(Hd,function(a,b){Cc[b]=function(){return{priority:100,link:function(a,
c,e){if("ngPattern"===b&&"/"==e.ngPattern.charAt(0)&&(c=e.ngPattern.match(hg))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});b(["src","srcset","href"],function(a){var b=Fa("ng-"+a);Cc[b]=function(){return{priority:99,link:function(c,e,d){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Ga.call(e.prop("href"))&&(g="xlinkHref",d.$attr[g]="xlink:href",f=null);d.$observe(b,function(b){b?(d.$set(g,b),xb&&f&&e.prop(f,d[g])):"href"===a&&d.$set(g,null)})}}}});
var Hc={$addControl:q,$$renameControl:function(a,b){a.$name=b},$removeControl:q,$setValidity:q,$setDirty:q,$setPristine:q,$setSubmitted:q};Wd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var ee=function(a){return["$timeout","$parse",function(b,c){function e(a){return""===a?c('this[""]').assign:c(a).assign||q}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Wd,compile:function(c,d){c.addClass($b).addClass(nc);var f=d.name?"name":a&&d.ngForm?"ngForm":
!1;return{pre:function(a,c,d,g){var h=g[0];if(!("action"in d)){var l=function(b){a.$apply(function(){h.$commitViewValue();h.$setSubmitted()});b.preventDefault()};c[0].addEventListener("submit",l,!1);c.on("$destroy",function(){b(function(){c[0].removeEventListener("submit",l,!1)},0,!1)})}(g[1]||h.$$parentForm).$addControl(h);var n=f?e(h.$name):q;f&&(n(a,h),d.$observe(f,function(b){h.$name!==b&&(n(a,void 0),h.$$parentForm.$$renameControl(h,b),n=e(h.$name),n(a,h))}));c.on("$destroy",function(){h.$$parentForm.$removeControl(h);
n(a,void 0);k(h,Hc)})}}}}}]},Ke=ee(),Xe=ee(!0),gg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,pg=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,qg=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,rg=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,fe=/^(\d{4,})-(\d{2})-(\d{2})$/,ge=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
ed=/^(\d{4,})-W(\d\d)$/,he=/^(\d{4,})-(\d\d)$/,ie=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Yd=da();b(["date","datetime-local","month","time","week"],function(a){Yd[a]=!0});var je={text:function(a,b,c,e,d,f){kc(a,b,c,e,d,f);cd(e)},date:lc("date",fe,Jc(fe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":lc("datetimelocal",ge,Jc(ge,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:lc("time",ie,Jc(ie,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:lc("week",ed,function(a,b){if(z(a))return a;
if(D(a)){ed.lastIndex=0;var c=ed.exec(a);if(c){var e=+c[1],d=+c[2],f=c=0,g=0,h=0,k=Ud(e),d=7*(d-1);b&&(c=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(e,0,k.getDate()+d,c,f,g,h)}}return NaN},"yyyy-Www"),month:lc("month",he,Jc(he,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,c,e,d,f){Zd(a,b,c,e);kc(a,b,c,e,d,f);e.$$parserName="number";e.$parsers.push(function(a){if(e.$isEmpty(a))return null;if(rg.test(a))return parseFloat(a)});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!A(a))throw mc("numfmt",
"Expected `{0}` to be a number",a);a=a.toString()}return a});if(w(c.min)||c.ngMin){var g;e.$validators.min=function(a){return e.$isEmpty(a)||v(g)||a>=g};c.$observe("min",function(a){w(a)&&!A(a)&&(a=parseFloat(a,10));g=A(a)&&!isNaN(a)?a:void 0;e.$validate()})}if(w(c.max)||c.ngMax){var h;e.$validators.max=function(a){return e.$isEmpty(a)||v(h)||a<=h};c.$observe("max",function(a){w(a)&&!A(a)&&(a=parseFloat(a,10));h=A(a)&&!isNaN(a)?a:void 0;e.$validate()})}},url:function(a,b,c,e,d,f){kc(a,b,c,e,d,f);
cd(e);e.$$parserName="url";e.$validators.url=function(a,b){var c=a||b;return e.$isEmpty(c)||pg.test(c)}},email:function(a,b,c,e,d,f){kc(a,b,c,e,d,f);cd(e);e.$$parserName="email";e.$validators.email=function(a,b){var c=a||b;return e.$isEmpty(c)||qg.test(c)}},radio:function(a,b,c,e){v(c.name)&&b.attr("name",++yc);b.on("click",function(a){b[0].checked&&e.$setViewValue(c.value,a&&a.type)});e.$render=function(){b[0].checked=c.value==e.$viewValue};c.$observe("value",e.$render)},checkbox:function(a,b,c,
e,d,f,g,h){var k=$d(h,a,"ngTrueValue",c.ngTrueValue,!0),l=$d(h,a,"ngFalseValue",c.ngFalseValue,!1);b.on("click",function(a){e.$setViewValue(b[0].checked,a&&a.type)});e.$render=function(){b[0].checked=e.$viewValue};e.$isEmpty=function(a){return!1===a};e.$formatters.push(function(a){return Z(a,k)});e.$parsers.push(function(a){return a?k:l})},hidden:q,button:q,submit:q,reset:q,file:q},yd=["$browser","$sniffer","$filter","$parse",function(a,b,c,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(d,
f,g,h){h[0]&&(je[ha(g.type)]||je.text)(d,f,g,h[0],b,a,c,e)}}}}],sg=/^(true|false|\d+)$/,pf=function(){return{restrict:"A",priority:100,compile:function(a,b){return sg.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Pe=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=
v(a)?"":a})}}}}],Re=["$interpolate","$compile",function(a,b){return{compile:function(c){b.$$addBindingClass(c);return function(c,e,d){c=a(e.attr(d.$attr.ngBindTemplate));b.$$addBindingInfo(e,c.expressions);e=e[0];d.$observe("ngBindTemplate",function(a){e.textContent=v(a)?"":a})}}}}],Qe=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(e,d){var f=b(d.ngBindHtml),g=b(d.ngBindHtml,function(a){return(a||"").toString()});c.$$addBindingClass(e);return function(b,e,d){c.$$addBindingInfo(e,
d.ngBindHtml);b.$watch(g,function(){e.html(a.getTrustedHtml(f(b))||"")})}}}}],of=u({restrict:"A",require:"ngModel",link:function(a,b,c,e){e.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Se=dd("",!0),Ue=dd("Odd",0),Te=dd("Even",1),Ve=Jb({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),We=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Dd={},tg={blur:!0,focus:!0};b("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=Fa("ng-"+a);Dd[b]=["$parse","$rootScope",function(c,e){return{restrict:"A",compile:function(d,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var d=function(){g(b,{$event:c})};tg[a]&&e.$$phase?b.$evalAsync(d):b.$apply(d)})}}}}]});var Ze=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,e,d,f,g){var h,k,l;c.$watch(d.ngIf,function(c){c?k||g(function(c,f){k=f;c[c.length++]=
b.$$createComment("end ngIf",d.ngIf);h={clone:c};a.enter(c,e.parent(),e)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=La(h.clone),a.leave(l).then(function(){l=null}),h=null))})}}}],$e=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ha.noop,compile:function(e,d){var f=d.ngInclude||d.src,g=d.onload||"",h=d.autoscroll;return function(e,d,k,l,n){var m=0,q,r,p,t=function(){r&&(r.remove(),r=null);q&&
(q.$destroy(),q=null);p&&(c.leave(p).then(function(){r=null}),r=p,p=null)};e.$watch(f,function(f){var k=function(){!w(h)||h&&!e.$eval(h)||b()},r=++m;f?(a(f,!0).then(function(a){if(!e.$$destroyed&&r===m){var b=e.$new();l.template=a;a=n(b,function(a){t();c.enter(a,null,d).then(k)});q=b;p=a;q.$emit("$includeContentLoaded",f);e.$eval(g)}},function(){e.$$destroyed||r!==m||(t(),e.$emit("$includeContentError",f))}),e.$emit("$includeContentRequested",f)):(t(),l.template=null)})}}}}],rf=["$compile",function(b){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(c,e,d,f){Ga.call(e[0]).match(/SVG/)?(e.empty(),b(Pb(f.template,a.document).childNodes)(c,function(a){e.append(a)},{futureParentElement:e})):(e.html(f.template),b(e.contents())(c))}}}],af=Jb({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),nf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,e,d){var f=c.attr(e.$attr.ngList)||", ",g="false"!==e.ngTrim,h=g?ka(f):f;d.$parsers.push(function(a){if(!v(a)){var c=
[];a&&b(a.split(h),function(a){a&&c.push(g?ka(a):a)});return c}});d.$formatters.push(function(a){if(U(a))return a.join(f)});d.$isEmpty=function(a){return!a||!a.length}}}},nc="ng-valid",ae="ng-invalid",$b="ng-pristine",Ic="ng-dirty",ce="ng-pending",mc=c("ngModel"),ug=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,e,d,f,g,h,k,l,n){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};
this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=n(e.name||"",!1)(a);this.$$parentForm=Hc;var m=f(e.ngModel),r=m.assign,p=m,t=r,u=null,y,z=this;this.$$setOptions=function(a){if((z.$options=a)&&a.getterSetter){var b=f(e.ngModel+"()"),c=f(e.ngModel+"($$$p)");p=function(a){var c=m(a);B(c)&&(c=b(a));
return c};t=function(a,b){B(m(a))?c(a,{$$$p:b}):r(a,b)}}else if(!m.assign)throw mc("nonassign","Expression '{0}' is non-assignable. Element: {1}",e.ngModel,na(d));};this.$render=q;this.$isEmpty=function(a){return v(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){z.$isEmpty(a)?(g.removeClass(d,"ng-not-empty"),g.addClass(d,"ng-empty")):(g.removeClass(d,"ng-empty"),g.addClass(d,"ng-not-empty"))};var x=0;Xd({ctrl:this,$element:d,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},
$animate:g});this.$setPristine=function(){z.$dirty=!1;z.$pristine=!0;g.removeClass(d,Ic);g.addClass(d,$b)};this.$setDirty=function(){z.$dirty=!0;z.$pristine=!1;g.removeClass(d,$b);g.addClass(d,Ic);z.$$parentForm.$setDirty()};this.$setUntouched=function(){z.$touched=!1;z.$untouched=!0;g.setClass(d,"ng-untouched","ng-touched")};this.$setTouched=function(){z.$touched=!0;z.$untouched=!1;g.setClass(d,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){h.cancel(u);z.$viewValue=z.$$lastCommittedViewValue;
z.$render()};this.$validate=function(){if(!A(z.$modelValue)||!isNaN(z.$modelValue)){var a=z.$$rawModelValue,b=z.$valid,c=z.$modelValue,e=z.$options&&z.$options.allowInvalid;z.$$runValidators(a,z.$$lastCommittedViewValue,function(d){e||b===d||(z.$modelValue=d?a:void 0,z.$modelValue!==c&&z.$$writeModelToScope())})}};this.$$runValidators=function(a,c,e){function d(){var e=!0;b(z.$validators,function(b,d){var f=b(a,c);e=e&&f;g(d,f)});return e?!0:(b(z.$asyncValidators,function(a,b){g(b,null)}),!1)}function f(){var e=
[],d=!0;b(z.$asyncValidators,function(b,f){var h=b(a,c);if(!h||!B(h.then))throw mc("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",h);g(f,void 0);e.push(h.then(function(){g(f,!0)},function(){d=!1;g(f,!1)}))});e.length?l.all(e).then(function(){h(d)},q):h(!0)}function g(a,b){k===x&&z.$setValidity(a,b)}function h(a){k===x&&e(a)}x++;var k=x;(function(){var a=z.$$parserName||"parse";if(v(y))g(a,null);else return y||(b(z.$validators,function(a,b){g(b,null)}),b(z.$asyncValidators,
function(a,b){g(b,null)})),g(a,y),y;return!0})()?d()?f():h(!1):h(!1)};this.$commitViewValue=function(){var a=z.$viewValue;h.cancel(u);if(z.$$lastCommittedViewValue!==a||""===a&&z.$$hasNativeValidators)z.$$updateEmptyClasses(a),z.$$lastCommittedViewValue=a,z.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=z.$$lastCommittedViewValue;if(y=v(b)?void 0:!0)for(var c=0;c<z.$parsers.length;c++)if(b=z.$parsers[c](b),v(b)){y=!1;break}A(z.$modelValue)&&isNaN(z.$modelValue)&&
(z.$modelValue=p(a));var e=z.$modelValue,d=z.$options&&z.$options.allowInvalid;z.$$rawModelValue=b;d&&(z.$modelValue=b,z.$modelValue!==e&&z.$$writeModelToScope());z.$$runValidators(b,z.$$lastCommittedViewValue,function(a){d||(z.$modelValue=a?b:void 0,z.$modelValue!==e&&z.$$writeModelToScope())})};this.$$writeModelToScope=function(){t(a,z.$modelValue);b(z.$viewChangeListeners,function(a){try{a()}catch(b){c(b)}})};this.$setViewValue=function(a,b){z.$viewValue=a;z.$options&&!z.$options.updateOnDefault||
z.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,e=z.$options;e&&w(e.debounce)&&(e=e.debounce,A(e)?c=e:A(e[b])?c=e[b]:A(e["default"])&&(c=e["default"]));h.cancel(u);c?u=h(function(){z.$commitViewValue()},c):k.$$phase?z.$commitViewValue():a.$apply(function(){z.$commitViewValue()})};a.$watch(function(){var b=p(a);if(b!==z.$modelValue&&(z.$modelValue===z.$modelValue||b===b)){z.$modelValue=z.$$rawModelValue=b;y=void 0;for(var c=z.$formatters,e=c.length,d=b;e--;)d=c[e](d);
z.$viewValue!==d&&(z.$$updateEmptyClasses(d),z.$viewValue=z.$$lastCommittedViewValue=d,z.$render(),z.$$runValidators(b,d,q))}return b})}],mf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ug,priority:1,compile:function(b){b.addClass($b).addClass("ng-untouched").addClass(nc);return{pre:function(a,b,c,e){var d=e[0];b=e[1]||d.$$parentForm;d.$$setOptions(e[2]&&e[2].$options);b.$addControl(d);c.$observe("name",function(a){d.$name!==a&&d.$$parentForm.$$renameControl(d,
a)});a.$on("$destroy",function(){d.$$parentForm.$removeControl(d)})},post:function(b,c,e,d){var f=d[0];if(f.$options&&f.$options.updateOn)c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],vg=/(\s+|^)default(\s+|$)/,qf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var c=this;this.$options=O(a.$eval(b.ngModelOptions));w(this.$options.updateOn)?
(this.$options.updateOnDefault=!1,this.$options.updateOn=ka(this.$options.updateOn.replace(vg,function(){c.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},bf=Jb({terminal:!0,priority:1E3}),wg=c("ngOptions"),xg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,kf=["$compile","$document",
"$parse",function(c,e,f){function g(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function h(a){var b;if(!n&&d(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var k=a.match(xg);if(!k)throw wg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,na(b));var l=k[5]||k[7],n=k[6];a=/ as /.test(k[0])&&k[1];var m=k[9];b=f(k[2]?
k[1]:l);var q=a&&f(a)||b,r=m&&f(m),p=m?function(a,b){return r(c,b)}:function(a){return Qa(a)},t=function(a,b){return p(a,y(a,b))},u=f(k[2]||k[1]),v=f(k[3]||""),z=f(k[4]||""),A=f(k[8]),w={},y=n?function(a,b){w[n]=b;w[l]=a;return w}:function(a){w[l]=a;return w};return{trackBy:m,getTrackByValue:t,getWatchables:f(A,function(a){var b=[];a=a||[];for(var e=h(a),d=e.length,f=0;f<d;f++){var g=a===e?f:e[f],l=a[g],g=y(l,g),l=p(l,g);b.push(l);if(k[2]||k[1])l=u(c,g),b.push(l);k[4]&&(g=z(c,g),b.push(g))}return b}),
getOptions:function(){for(var a=[],b={},d=A(c)||[],f=h(d),g=f.length,k=0;k<g;k++){var l=d===f?k:f[k],n=y(d[l],l),r=q(c,n),l=p(r,n),w=u(c,n),x=v(c,n),n=z(c,n),r=new e(l,r,w,x,n);a.push(r);b[l]=r}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[t(a)]},getViewValueFromOption:function(a){return m?Ha.copy(a.viewValue):a.viewValue}}}}}var h=a.document.createElement("option"),k=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,
b,c,e){e[0].registerOption=q},post:function(a,d,f,l){function n(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);a.value!==b.value&&(b.value=a.selectValue)}function m(){var a=y&&r.readValue();if(y)for(var b=y.items.length-1;0<=b;b--){var c=y.items[b];c.group?ub(c.element.parentNode):ub(c.element)}y=x.getOptions();var e={};z&&d.prepend(t);y.items.forEach(function(a){var b;if(w(a.group)){b=e[a.group];b||(b=k.cloneNode(!1),B.appendChild(b),b.label=a.group,
e[a.group]=b);var c=h.cloneNode(!1)}else b=B,c=h.cloneNode(!1);b.appendChild(c);n(a,c)});d[0].appendChild(B);q.$render();q.$isEmpty(a)||(b=r.readValue(),(x.trackBy||p?Z(a,b):a===b)||(q.$setViewValue(b),q.$render()))}var r=l[0],q=l[1],p=f.multiple,t;l=0;for(var u=d.children(),v=u.length;l<v;l++)if(""===u[l].value){t=u.eq(l);break}var z=!!t,A=R(h.cloneNode(!1));A.val("?");var y,x=g(f.ngOptions,d,a),B=e[0].createDocumentFragment();p?(q.$isEmpty=function(a){return!a||0===a.length},r.writeValue=function(a){y.items.forEach(function(a){a.element.selected=
!1});a&&a.forEach(function(a){if(a=y.getOptionFromViewValue(a))a.element.selected=!0})},r.readValue=function(){var a=d.val()||[],c=[];b(a,function(a){(a=y.selectValueMap[a])&&!a.disabled&&c.push(y.getViewValueFromOption(a))});return c},x.trackBy&&a.$watchCollection(function(){if(U(q.$viewValue))return q.$viewValue.map(function(a){return x.getTrackByValue(a)})},function(){q.$render()})):(r.writeValue=function(a){var b=y.getOptionFromViewValue(a);b?(d[0].value!==b.selectValue&&(A.remove(),z||t.remove(),
d[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||z?(A.remove(),z||d.prepend(t),d.val(""),t.prop("selected",!0),t.attr("selected",!0)):(z||t.remove(),d.prepend(A),d.val("?"),A.prop("selected",!0),A.attr("selected",!0))},r.readValue=function(){var a=y.selectValueMap[d.val()];return a&&!a.disabled?(z||t.remove(),A.remove(),y.getViewValueFromOption(a)):null},x.trackBy&&a.$watch(function(){return x.getTrackByValue(q.$viewValue)},function(){q.$render()}));
z?(t.remove(),c(t)(a),t.removeClass("ng-scope")):t=R(h.cloneNode(!1));d.empty();m();a.$watchCollection(x.getWatchables,m)}}}}],cf=["$locale","$interpolate","$log",function(a,c,e){var d=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,k){function l(a){h.text(a||"")}var n=k.count,m=k.$attr.when&&h.attr(k.$attr.when),r=k.offset||0,p=g.$eval(m)||{},t={},u=c.startSymbol(),z=c.endSymbol(),w=u+n+"-"+r+z,y=Ha.noop,x;b(k,function(a,b){var c=f.exec(b);c&&(c=(c[1]?"-":"")+ha(c[2]),p[c]=h.attr(k.$attr[b]))});
b(p,function(a,b){t[b]=c(a.replace(d,w))});g.$watch(n,function(b){var c=parseFloat(b),d=isNaN(c);d||c in p||(c=a.pluralCat(c-r));c===x||d&&A(x)&&isNaN(x)||(y(),d=t[c],v(d)?(null!=b&&e.debug("ngPluralize: no rule defined for '"+c+"' in "+m),y=q,l()):y=g.$watch(d,l),x=c)})}}}],df=["$parse","$animate","$compile",function(a,e,f){var g=c("ngRepeat"),h=function(a,b,c,e,d,f,g){a[c]=e;d&&(a[d]=f);a.$index=b;a.$first=0===b;a.$last=b===g-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",
multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(c,k){var l=k.ngRepeat,n=f.$$createComment("end ngRepeat",l),m=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw g("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",l);var r=m[1],q=m[2],p=m[3],t=m[4],m=r.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!m)throw g("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",
r);var u=m[3]||m[1],v=m[2];if(p&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(p)))throw g("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",p);var z,A,w,y,x={$id:Qa};t?z=a(t):(w=function(a,b){return Qa(b)},y=function(a){return a});return function(a,c,f,k,m){z&&(A=function(b,c,e){v&&(x[v]=b);x[u]=c;x.$index=e;return z(a,x)});var r=da();a.$watchCollection(q,function(f){var k,
q,t=c[0],z,x=da(),B,C,S,G,H,Q,D;p&&(a[p]=f);if(d(f))H=f,q=A||w;else for(D in q=A||y,H=[],f)fb.call(f,D)&&"$"!==D.charAt(0)&&H.push(D);B=H.length;D=Array(B);for(k=0;k<B;k++)if(C=f===H?k:H[k],S=f[C],G=q(C,S,k),r[G])Q=r[G],delete r[G],x[G]=Q,D[k]=Q;else{if(x[G])throw b(D,function(a){a&&a.scope&&(r[a.id]=a)}),g("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",l,G,S);D[k]={id:G,scope:void 0,clone:void 0};
x[G]=!0}for(z in r){Q=r[z];G=La(Q.clone);e.leave(G);if(G[0].parentNode)for(k=0,q=G.length;k<q;k++)G[k].$$NG_REMOVED=!0;Q.scope.$destroy()}for(k=0;k<B;k++)if(C=f===H?k:H[k],S=f[C],Q=D[k],Q.scope){z=t;do z=z.nextSibling;while(z&&z.$$NG_REMOVED);Q.clone[0]!=z&&e.move(La(Q.clone),null,t);t=Q.clone[Q.clone.length-1];h(Q.scope,k,u,S,v,C,B)}else m(function(a,b){Q.scope=b;var c=n.cloneNode(!1);a[a.length++]=c;e.enter(a,null,t);t=c;Q.clone=a;x[Q.id]=Q;h(Q.scope,k,u,S,v,C,B)});r=x})}}}}],ef=["$animate",function(a){return{restrict:"A",
multiElement:!0,link:function(b,c,e){b.$watch(e.ngShow,function(b){a[b?"removeClass":"addClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ye=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,e){b.$watch(e.ngHide,function(b){a[b?"addClass":"removeClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ff=Jb(function(a,c,e){a.$watch(e.ngStyle,function(a,e){e&&a!==e&&b(e,function(a,b){c.css(b,"")});a&&c.css(a)},!0)}),gf=["$animate","$compile",function(a,c){return{require:"ngSwitch",
controller:["$scope",function(){this.cases={}}],link:function(e,d,f,g){var h=[],k=[],l=[],n=[],m=function(a,b){return function(){a.splice(b,1)}};e.$watch(f.ngSwitch||f.on,function(e){var d,f;d=0;for(f=l.length;d<f;++d)a.cancel(l[d]);d=l.length=0;for(f=n.length;d<f;++d){var r=La(k[d].clone);n[d].$destroy();(l[d]=a.leave(r)).then(m(l,d))}k.length=0;n.length=0;(h=g.cases["!"+e]||g.cases["?"])&&b(h,function(b){b.transclude(function(e,d){n.push(d);var f=b.element;e[e.length++]=c.$$createComment("end ngSwitchWhen");
k.push({clone:e});a.enter(e,f.parent(),f)})})})}}}],hf=Jb({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,e,d){e.cases["!"+c.ngSwitchWhen]=e.cases["!"+c.ngSwitchWhen]||[];e.cases["!"+c.ngSwitchWhen].push({transclude:d,element:b})}}),jf=Jb({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,e,d){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:d,element:b})}}),yg=c("ngTransclude"),lf=Jb({restrict:"EAC",link:function(a,
b,c,e,d){c.ngTransclude===c.$attr.ngTransclude&&(c.ngTransclude="");if(!d)throw yg("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",na(b));d(function(a){a.length&&(b.empty(),b.append(a))},null,c.ngTransclude||c.ngTranscludeSlot)}}),Le=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"==c.type&&a.put(c.id,b[0].text)}}}],zg={$setViewValue:q,$render:q},Ag=["$element",
"$scope",function(b,c){var e=this,d=new Na;e.ngModelCtrl=zg;e.unknownOption=R(a.document.createElement("option"));e.renderUnknownOption=function(a){a="? "+Qa(a)+" ?";e.unknownOption.val(a);b.prepend(e.unknownOption);b.val(a)};c.$on("$destroy",function(){e.renderUnknownOption=q});e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.readValue=function(){e.removeUnknownOption();return b.val()};e.writeValue=function(a){e.hasOption(a)?(e.removeUnknownOption(),b.val(a),
""===a&&e.emptyOption.prop("selected",!0)):null==a&&e.emptyOption?(e.removeUnknownOption(),b.val("")):e.renderUnknownOption(a)};e.addOption=function(a,b){if(8!==b[0].nodeType){za(a,'"option value"');""===a&&(e.emptyOption=b);var c=d.get(a)||0;d.put(a,c+1);e.ngModelCtrl.$render();b[0].hasAttribute("selected")&&(b[0].selected=!0)}};e.removeOption=function(a){var b=d.get(a);b&&(1===b?(d.remove(a),""===a&&(e.emptyOption=void 0)):d.put(a,b-1))};e.hasOption=function(a){return!!d.get(a)};e.registerOption=
function(a,b,c,d,f){if(d){var g;c.$observe("value",function(a){w(g)&&e.removeOption(g);g=a;e.addOption(a,b)})}else f?a.$watch(f,function(a,d){c.$set("value",a);d!==a&&e.removeOption(d);e.addOption(a,b)}):e.addOption(c.value,b);b.on("$destroy",function(){e.removeOption(c.value);e.ngModelCtrl.$render()})}}],Me=function(){return{restrict:"E",require:["select","?ngModel"],controller:Ag,priority:1,link:{pre:function(a,c,e,d){var f=d[1];if(f){var g=d[0];g.ngModelCtrl=f;c.on("change",function(){a.$apply(function(){f.$setViewValue(g.readValue())})});
if(e.multiple){g.readValue=function(){var a=[];b(c.find("option"),function(b){b.selected&&a.push(b.value)});return a};g.writeValue=function(a){var e=new Na(a);b(c.find("option"),function(a){a.selected=w(e.get(a.value))})};var h,k=NaN;a.$watch(function(){k!==f.$viewValue||Z(h,f.$viewValue)||(h=W(f.$viewValue),f.$render());k=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}},post:function(a,b,c,e){var d=e[1];if(d){var f=e[0];d.$render=function(){f.writeValue(d.$viewValue)}}}}}},Oe=["$interpolate",
function(a){return{restrict:"E",priority:100,compile:function(b,c){if(w(c.value))var e=a(c.value,!0);else{var d=a(b.text(),!0);d||c.$set("value",b.text())}return function(a,b,c){var f=b.parent();(f=f.data("$selectController")||f.parent().data("$selectController"))&&f.registerOption(a,b,c,e,d)}}}}],Ne=u({restrict:"E",terminal:!1}),Ad=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,e){e&&(c.required=!0,e.$validators.required=function(a,b){return!c.required||!e.$isEmpty(b)},c.$observe("required",
function(){e.$validate()}))}}},zd=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,d){if(d){var f,g=e.ngPattern||e.pattern;e.$observe("pattern",function(a){D(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw c("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,na(b));f=a||void 0;d.$validate()});d.$validators.pattern=function(a,b){return d.$isEmpty(b)||v(f)||f.test(b)}}}}},Cd=function(){return{restrict:"A",require:"?ngModel",link:function(a,
b,c,e){if(e){var d=-1;c.$observe("maxlength",function(a){a=n(a);d=isNaN(a)?-1:a;e.$validate()});e.$validators.maxlength=function(a,b){return 0>d||e.$isEmpty(b)||b.length<=d}}}}},Bd=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,e){if(e){var d=0;c.$observe("minlength",function(a){d=n(a)||0;e.$validate()});e.$validators.minlength=function(a,b){return e.$isEmpty(b)||b.length>=d}}}}};a.angular.bootstrap?a.console&&console.log("WARNING: Tried to load angular more than once."):(Da(),
Cb(Ha),Ha.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var c=a.indexOf(".");return-1==c?0:a.length-c-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,
minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,d=c;void 0===d&&(d=Math.min(b(a),3));return 1==e&&0==d?"one":"other"}})}]),R(a.document).ready(function(){Bb(a.document,pb)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
(function(a,c){function d(a){var b=[];f(b,c.noop).chars(a);return b.join("")}function b(a,b){var e={},d=a.split(","),f;for(f=0;f<d.length;f++)e[b?c.lowercase(d[f]):d[f]]=!0;return e}function g(b,c){null===b||void 0===b?b="":"string"!==typeof b&&(b=""+b);A.innerHTML=b;var d=5;do{if(0===d)throw l("uinput","Failed to sanitize html because the input is unstable");d--;a.document.documentMode&&k(A);b=A.innerHTML;A.innerHTML=b}while(b!==A.innerHTML);for(d=A.firstChild;d;){switch(d.nodeType){case 1:c.start(d.nodeName.toLowerCase(),
e(d.attributes));break;case 3:c.chars(d.textContent)}var f;if(!(f=d.firstChild)&&(1==d.nodeType&&c.end(d.nodeName.toLowerCase()),f=d.nextSibling,!f))for(;null==f;){d=d.parentNode;if(d===A)break;f=d.nextSibling;1==d.nodeType&&c.end(d.nodeName.toLowerCase())}d=f}for(;d=A.firstChild;)A.removeChild(d)}function e(a){for(var b={},c=0,e=a.length;c<e;c++){var d=a[c];b[d.name]=d.value}return b}function h(a){return a.replace(/&/g,"&amp;").replace(n,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+
(1024*(b-55296)+(a-56320)+65536)+";"}).replace(m,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(a,b){var e=!1,d=c.bind(a,a.push);return{start:function(a,f){a=c.lowercase(a);!e&&w[a]&&(e=a);e||!0!==x[a]||(d("<"),d(a),c.forEach(f,function(e,f){var g=c.lowercase(f),k="img"===a&&"src"===g||"background"===g;!0!==D[g]||!0===J[g]&&!b(e,k)||(d(" "),d(f),d('="'),d(h(e)),d('"'))}),d(">"))},end:function(a){a=c.lowercase(a);e||!0!==x[a]||!0===q[a]||(d("</"),
d(a),d(">"));a==e&&(e=!1)},chars:function(a){e||d(h(a))}}}function k(b){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,e=0,d=c.length;e<d;e++){var f=c[e],g=f.name.toLowerCase();if("xmlns:ns1"===g||0===g.indexOf("ns1:"))b.removeAttributeNode(f),e--,d--}(c=b.firstChild)&&k(c);(c=b.nextSibling)&&k(c)}var l=c.$$minErr("$sanitize"),n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=/([^\#-~ |!])/g,q=b("area,br,col,hr,img,wbr"),r=b("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),u=b("rp,rt"),t=c.extend({},
u,r),r=c.extend({},r,b("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),u=c.extend({},u,b("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),v=b("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),
w=b("script,style"),x=c.extend({},q,r,u,t),J=b("background,cite,href,longdesc,src,xlink:href"),t=b("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),u=b("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),D=c.extend({},J,u,t),A;(function(a){if(a.document&&a.document.implementation)a=a.document.implementation.createHTMLDocument("inert");else throw l("noinert","Can't create an inert html document");var b=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===b.length?A=b[0]:(b=a.createElement("html"),A=a.createElement("body"),b.appendChild(A),a.appendChild(b))})(a);c.module("ngSanitize",[]).provider("$sanitize",function(){var a=!1;this.$get=["$$sanitizeUri",function(b){a&&c.extend(x,
v);return function(a){var c=[];g(a,f(c,function(a,c){return!/^unsafe:/.test(b(a,c))}));return c.join("")}}];this.enableSvg=function(b){return c.isDefined(b)?(a=b,this):a}});c.module("ngSanitize").filter("linky",["$sanitize",function(a){var b=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=c.$$minErr("linky"),g=c.isString;return function(h,k,l){function n(a){a&&q.push(d(a))}function m(a,b){var e;q.push("<a ");c.isFunction(l)&&(l=l(a));if(c.isObject(l))for(e in l)q.push(e+
'="'+l[e]+'" ');else l={};!c.isDefined(k)||"target"in l||q.push('target="',k,'" ');q.push('href="',a.replace(/"/g,"&quot;"),'">');n(b);q.push("</a>")}if(null==h||""===h)return h;if(!g(h))throw f("notstring","Expected string but received: {0}",h);for(var r=h,q=[],t,u;h=r.match(b);)t=h[0],h[2]||h[4]||(t=(h[3]?"http://":"mailto:")+t),u=h.index,n(r.substr(0,u)),m(t,h[0].replace(e,"")),r=r.substring(u+h[0].length);n(r);return a(q.join(""))}}])})(window,window.angular);
angular.module("genius",["ngSanitize"]).config(["$httpProvider",function(a){a.interceptors.push("OnsiteInterceptor");a.interceptors.push("RetryFailureInterceptor")}]);window.app=window.app||{};$.extend(window.app,{set_up_tooltip_lyric_editor:$.noop,set_up_vidyard_id_container:$.noop,update_editorial_state:$.noop,set_desired_location_cookie:function(a){var c;try{c=window.top.location.href,c.length}catch(d){c=document.referrer,a&&a.fallback&&(c=a.fallback)}$.cookie("desired_location",c,{path:"/"})}});
angular.module("genius").run(["$templateCache",function(a){a.put("authentication_form.html","<div></div>\n");a.put("fact_track_simulator.html",'<div class="fact_track_card fact_track_card-{{ current_annotation.content_type }}_card fact_track_card--front" ng-click="ctrl.card_clicked()">\n  <div class="fact_track_card-album_image" ng-show="!variants.alt_mode && album.images.length && current_annotation.content_type === \'intro\'" ng-attr-style="background-image: url(\'{{ album.images[0].url }}\')"></div>\n  <div class="fact_track_card-headline" ng-switch="current_annotation.content_type" ng-hide="variants.alt_mode">\n    <span ng-switch-when="lyrics">Lyrics</span>\n    <span ng-switch-when="verified">Lyrics</span>\n    <span ng-switch-when="verified_annotation">\n      <span class="fact_track_card-headline-artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span> Exclusive\n    </span>\n    <span ng-switch-when="annotation">Behind the Lyrics</span>\n    <span ng-switch-when="iq">Track Fact</span>\n    <span ng-switch-when="credits">Credits</span>\n  </div>\n  <div class="fact_track_card-body fact_track_card-body--{{ current_annotation.content_type }}">\n    <div class="fact_track_card-alt_mode_verified_annotation" ng-show="variants.alt_mode && current_annotation.content_type == \'verified_annotation\'">\n      <div class="clipped_avatar clipped_avatar--medium" ng-attr-style="background-image: url(\'{{ ((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url }}\')"></div>\n      <span class="fact_track_card-alt_mode_artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span>\n      <div class="fact_track_card-connect_button">Connect</div>\n    </div>\n    <span class="fact_track_card-body-highlight" ng-bind-html="current_annotation.content | highlight_braced:{class_name:\'fact_track_card-emphasis\'}"></span>\n  </div>\n  <div class="fact_track_card-verified_headline" ng-show="!variants.alt_mode && current_annotation.content_type == \'verified_annotation\'">\n    <div class="clipped_avatar clipped_avatar--medium" ng-attr-style="background-image: url(\'{{ ((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url }}\')"></div>\n  </div>\n  <div class="fact_track_card-countdown_timer">\n    <div class="fact_track_card-countdown_timer-time_remaining" style="width:{{ (ctrl.annotation_percentage() * 100).toFixed(3) }}%"></div>\n  </div>\n  <div class="fact_track_card-view_lyrics" ng-hide="current_annotation.content_type == \'verified\' || variants.fullscreen || variants.alt_mode">Tap for More</div>\n</div>\n\n<div class="fact_track_controls">\n  <div class="fact_track_controls-annotation_index" ng-show="variants.fullscreen">{{ current_annotation_index + 1 }}/{{ annotations.length }}</div>\n  <div class="fact_track_controls-title" ng-hide="variants.fullscreen || variants.alt_mode">{{ spotify_song.metadata.name }}</div>\n  <div class="fact_track_controls-artist" ng-hide="variants.fullscreen || variants.alt_mode">{{ spotify_song.metadata.artists[0].name }}</div>\n\n  <div class="fact_track_controls-time_elapsed">{{ time | timestamp_for_display:{skip_millis:true} }}</div>\n  <div class="fact_track_controls-time_remaining">-{{ (duration | minusModulo:1000) - time | timestamp_for_display:{skip_millis:true} }}</div>\n\n  <div class="fact_track_controls-timeline" scale="0.46" scrubber scrub-percentage="scrub_percentage" scrubbed="ctrl.seek_to_percentage(percentage)">\n    <div class="fact_track_controls-timeline-bar"></div>\n    <div class="fact_track_controls-scrubber" style="left:{{ ((scrub_percentage || (time / duration)) * 100).toFixed(3) }}%;"><div class="fact_track_controls-scrubber-contents"></div></div>\n  </div>\n\n  <div class="fact_track_controls-back" ng-click="ctrl.seek_to(0)"></div>\n  <div class="fact_track_controls-play_pause fact_track_controls-play_pause--{{ playing ? \'playing\' : \'paused\'}}" ng-click="ctrl.toggle_play_pause()"></div>\n</div>\n');
a.put("header_menu_item.html",'<li class="nav_menu-item" click-outside="opened = false" ng-if="!url">\n  <a ng-click="opened = !opened" class="nav_menu-link nav_menu-link--has_dropdown" ng-class="{pressed: opened}">{{ name }}</a>\n  <div ng-transclude ng-show="opened"></div>\n</li>\n\n<li class="nav_menu-item" ng-if="url">\n  <a class="nav_menu-link" ng-href="{{ url }}">{{ name }}</a>\n</li>\n');a.put("iq_header.html",'<div class="header-user_info header-user_info--user_badge">\n  <div\n    class="header-user_avatar"\n    clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n  ></div>\n  <div\n    class="header-user_iq"\n    ng-class="{\'header-user_iq--hide\': $ctrl.variants.hide_iq}"\n  >{{ $ctrl.user.iq | number:0 }} IQ</div>\n</div>\n');
a.put("notification_inbox.html",'<a href="#"\n   id="{{ inbox_name }}_icon"\n   class="header-inbox_icon header-inbox_icon--{{ inbox_name }} prevent_default"\n   ng-class="{active:inbox_tooltip_open,has_unread_items:unread_count && unread_count > 0}"\n   ng-click="go_to_full_page_if_mobile()"\n>\n  <span id="unread_{{ inbox_name }}_items_count" class="inbox_icon-inbox_count">{{ unread_count_for_display }}</span>\n</a>\n');a.put("search_form.html",'<form action="{{ path }}" method="get" class="global_search global_search--{{ style }}" ng-class="{\'global_search--focused\':focused}" click-outside="unfocus()">\n  <kb shortcut="/" action="focus()"></kb>\n  <input ng-model="search_text" ng-disabled="submitting" name="q" type="text" class="quick_search autocomplete search quick_search--{{ style }}" placeholder="Search lyrics &amp; more" ng-class="{\'quick_search--focused\':focused}" quick-search autofocus />\n  <div class="global_search-submit_button" ng-class="{\'global_search-submit_button--focused\':focused}" ng-click="submit_form()">\n    <svg src="magnifying_glass.svg" class="global_search-magnifying_glass"></svg>\n  </div>\n</form>\n')}]);
angular.module("genius").component("adminUserInfo",{templateUrl:"admin_user_info.html",bindings:{user:"<"}});angular.module("genius").component("adwordsAdForm",{templateUrl:"adwords_ad_form.html",bindings:{onSave:"&",onClose:"&",ad_group:"<adGroup"},controller:["AdwordsAdService",function(a){this.save=function(c){this.saving=!0;a.create(this.ad_group.id,c).then(function(){this.onSave();this.onClose()}.bind(this)).finally(function(){delete this.saving}.bind(this))}}]});
angular.module("genius").component("adwordsAdGroupForm",{templateUrl:"adwords_ad_group_form.html",bindings:{onSave:"&",onClose:"&",campaign:"<"},controller:["AdwordsAdGroupService",function(a){this.save=function(c){this.saving=!0;a.create(this.campaign.id,c).then(function(){this.onSave();this.onClose()}.bind(this)).finally(function(){delete this.saving}.bind(this))}}]});
angular.module("genius").component("adwordsAdGroupList",{templateUrl:"adwords_ad_group_list.html",bindings:{campaign:"<"},controller:["AdwordsAdGroupService","AdwordsAdService",function(a,c){this.change_ad_status=function(a,b){c.update(a.id,{status:b}).then(function(b){_.extend(a,b)})};this.load_ad_groups=function(){this.loading=!0;a.all(this.campaign.id).then(function(a){this.ad_groups=a}.bind(this)).finally(function(){delete this.loading}.bind(this))};this.$onChanges=function(a){a.campaign&&this.load_ad_groups()}}]});
angular.module("genius").component("adwordsCampaignForm",{templateUrl:"adwords_campaign_form.html",bindings:{onSave:"&",onClose:"&"},controller:["AdwordsNetworkService","AdwordsCampaignService",function(a,c){this.available_adwords_networks=[];this.save=function(a){this.saving=!0;return c.create(a).then(function(){this.onSave();this.onClose()}.bind(this)).finally(function(){delete this.saving}.bind(this))};a.all().then(function(a){this.available_adwords_networks=a}.bind(this))}]});
angular.module("genius").component("adwordsCampaignList",{templateUrl:"adwords_campaign_list.html",bindings:{onSelect:"&",selected_campaign:"<selectedCampaign"},controller:["AdwordsCampaignService",function(a){this.select=function(a){this.onSelect({campaign:a})};this.load_campaigns=function(){this.loading=!0;a.all().then(function(a){this.grouped_campaigns=_.values(_.groupBy(a,"network.id"))}.bind(this)).finally(function(){delete this.loading}.bind(this))};this.$onInit=function(){this.load_campaigns()}}]});
angular.module("genius").component("adwordsEditor",{templateUrl:"adwords_editor.html"});angular.module("genius").component("airbrakeErrors",{templateUrl:"airbrake_errors.html",bindings:{user:"<"},controller:["PagedScrollableDataFactory","UserService",function(a,c){this.infinite_scroll_data=new a(_.partial(c.airbrake_errors,this.user.id),"airbrake_errors")}]});
(function(){var a=["to identify songs on the go","to get lyrics to the songs you play","for a faster experience"];angular.module("genius").component("androidBanner",{templateUrl:"android_banner.html",controller:["Bowser","AppConfig",function(c,d){this.benefit=_.sample(a);this.is_android=c.android;this.play_store_url=d.play_store_url}]})})();
angular.module("genius").component("annotationPreview",{bindings:{annotation_preview:"<annotationPreview",click_handler:"&clickHandler",dismissal_handler:"&dismissalHandler",reactivation_handler:"&reactivationHandler",is_dismissed:"<isDismissed"},templateUrl:"annotation_preview.html",controller:["$scope",function(a){a.$watch("$ctrl.annotation_preview",function(){this.annotation_preview&&(this.annotation_content_switch=!this.annotation_content_switch)}.bind(this))}]});
angular.module("genius").component("annotationShareMenu",{templateUrl:"annotation_share_menu.html",bindings:{annotation:"<",variants:"<"}});
angular.module("genius").component("answer",{bindings:{answer:"<",question:"<",yieldsApi:"&"},templateUrl:"answer.html",controller:["Reversible","AnswerService","Session",function(a,c,d){this.user_signed_in=d.user_signed_in;this.source_form_open=this.answer&&this.answer.answer_source;this.can=function(a,c){return d.has_permission(a,c)};this.show_contributors=function(){if(_.get(this,"answer.answer_source.source_name")){if(this.can("update_answer_source",this.question))return this.question.contributors_count}else return this.question.contributors_count};
this.answer_is_unwritten=function(){return!_.get(this,"answer.body.html")}.bind(this);this.question_is_archived=function(){return"archived"===this.question.state}.bind(this);this.question_is_pinned=function(){return"pinned"===this.question.state}.bind(this);this.start_editing=function(a){this.answer||(this.answer={body:{}});this.answer._editing=_.defaults(this.answer._editing||{},{_form_active:!0,html:this.answer.body.html,markdown:this.answer.body.markdown})}.bind(this);this.cancel_editing=function(){delete this.answer._editing}.bind(this);
this.finish_editing=function(){if(!this.disable_saving_with){this.disable_saving_with="Saving";delete this.errors;var b=a.modify(this.answer,{"_editing._form_active":!1});!this.source_form_open&&this.answer.answer_source&&(this.answer.answer_source=null);c.save(this.answer,{question:this.question}).then(this.cancel_editing).catch(function(a){this.errors=a.errors;b()}.bind(this)).finally(function(){delete this.disable_saving_with}.bind(this))}}.bind(this);this.destroy=function(){var a=this.answer;
this.answer={body:{}};c.destroy(a,{question:this.question}).catch(function(){this.answer=a}.bind(this))}.bind(this);this.showing_contributors=!1;this.toggle_contributors=function(){this.showing_contributors=!this.showing_contributors};this.show_answer_form_by_default=function(){return this.can("add_answer",this.question)&&this.answer_is_unwritten()&&!this.question_is_archived()}.bind(this);this.show_answer_edit_form=function(){return _.get(this,"answer._editing._form_active")||this.show_answer_form_by_default()}.bind(this);
this.show_answer=function(){return!this.answer_is_unwritten()&&!_.get(this,"answer._editing._form_active")}.bind(this);this.show_blank_answer_message=function(){return this.answer_is_unwritten()&&!this.show_answer_form_by_default()&&!_.get(this,"answer._editing._form_active")}.bind(this);this.api=function(a){return{start_editing:function(){a.start_editing()},can_edit:function(){return a.can("edit",a.answer)},clear_answer:function(){a.destroy()},can_clear:function(){return a.can("destroy",a.answer)}}}(this);
this.yieldsApi({answerApi:this.api})}]});angular.module("genius").component("artistBadge",{bindings:{artist:"<"},templateUrl:"artist_badge.html"});
angular.module("genius").component("artistSongs",{templateUrl:"artist_songs.html",bindings:{artist:"<"},controller:["PagedScrollableDataFactory","SongService","Session","$debounce",function(a,c,d,b){this.search_text="";this.can=function(a,b){return d.has_permission(a,b)};var g=function(b){this.artist_song_infinite_scrollable_data=new a(_.partial(c.for_artist,this.artist.id),"songs",{sort:b})}.bind(this);this.sort_songs_by=function(a){this.sort_method!==a&&(this.search_text||g(a),this.sort_method=
a)};this.search=b(function(){this.search_text?this.artist_song_infinite_scrollable_data=new a(_.partial(c.search_with_artist,this.artist.id),"songs",{sort:this.sort_method,q:this.search_text}):g(this.sort_method)}.bind(this),200);this.sort_songs_by("popularity")}]});
angular.module("genius").component("artistSongsAndAlbums",{templateUrl:"artist_songs_and_albums.html",bindings:{artist:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",artist_has_more_songs:"<artistHasMoreSongs"},controller:["PagedScrollableDataFactory","ArtistService",function(a,c){this.artist&&(this.artist_album_scrollable_data=new a(_.partial(c.load_albums,this.artist.id),"albums"))}]});
angular.module("genius").component("artistTooltip",{bindings:{artist:"<"},templateUrl:"artist_tooltip.html",controller:["ArtistService",function(a){this.$onInit=function(){if(!this.artist.description){var c=this.artist;a.load(c.id).then(function(a){_.extend(c,a)})}}}]});
angular.module("genius").component("artistVerification",{templateUrl:"artist_verification.html",bindings:{user:"<",artist:"<",close:"&"},controller:["UserService","AppConfig",function(a,c){this.name=_.get(this.artist,"name");this.role=this.user.verification_role;this.user_verification_roles=c.user_verification_roles;this.updating=function(){return this.verifying||this.unverifying};this.verify=function(){this.updating()||(this.verifying=!0,delete this.errors,a.associate_with_artist(this.user.id,{name:this.name,
role:this.role}).then(function(a){_.extend(this.user,a.user);window.location.href=this.user.url}.bind(this)).catch(function(a){this.errors=a.errors;delete this.verifying}.bind(this)))}.bind(this);this.unverify=function(){this.updating()||(this.unverifying=!0,delete this.errors,a.dissociate_from_artist(this.user.id).then(function(a){_.extend(this.user,a.user);window.location.href=this.user.url}.bind(this)).catch(function(a){this.errors=a.errors;delete this.unverifying}.bind(this)))}.bind(this)}]});
angular.module("genius").component("collapsibleContent",{templateUrl:"collapsible_content.html",transclude:!0,bindings:{maxCollapsedHeight:"<",minExpansionHeight:"<",text:"@"},controller:function(){this.expand=function(){delete this.max_height};this.content_height_changed=function(a){a>this.maxCollapsedHeight+this.minExpansionHeight&&(this.max_height=this.maxCollapsedHeight)}}});angular.module("genius").component("deletedAnswer",{bindings:{answer:"<"},templateUrl:"deleted_answer.html"});
angular.module("genius").component("editArtistProfile",{templateUrl:"edit_artist_profile.html",bindings:{artist:"<",disable_image_edit:"<disableImageEdit",close:"&"},controller:["ArtistService","$location",function(a,c){this.editable_artist=angular.copy(this.artist);this.update_artist=function(){delete this.errors;this.saving||(this.saving=!0,a.update(this.editable_artist).then(function(d){_.extend(this.artist,d);this.close();delete this.errors;c.path(a.get_path(d));c.replace()}.bind(this)).catch(function(a){this.errors=
a.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))}.bind(this)}]});
angular.module("genius").component("editUserEmailPreferences",{templateUrl:"edit_user_email_preferences.html",bindings:{user:"<",close:"&"},controller:["UserService",function(a){this.editable_user=angular.copy(this.user);this.update_user=function(){this.saving||(this.saving=!0,delete this.errors,a.update(this.editable_user.id,{user:_.pick(this.editable_user,["preferences"])}).then(function(a){_.extend(this.user,a.user);this.close();delete this.errors}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))}.bind(this)}]});
angular.module("genius").component("editUserProfile",{templateUrl:"edit_user_profile.html",bindings:{user:"<",disable_image_edit:"<disableImageEdit",disable_user_bio_edit:"<disableUserBioEdit",close:"&"},controller:["UserService","Session","$location",function(a,c,d){this.editable_user=angular.copy(this.user);this.can=function(a){return c.has_permission(a,this.user)};this.update_user=function(){if(this.editable_user.password!=this.editable_user.confirm_password)this.errors=["Passwords do not match"];
else if(!this.saving){this.saving=!0;delete this.errors;var b=_.pick(this.editable_user,"login about_me email password photo_url custom_header_image_url".split(" "));b.about_me=b.about_me.markdown;a.update(this.editable_user.id,{user:b}).then(function(b){_.extend(this.user,b.user);this.close();delete this.errors;d.path(a.get_path(b.user));d.replace()}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving}.bind(this))}}.bind(this)}]});
angular.module("genius").component("expandableContainer",{templateUrl:"expandable_container.html",transclude:!0,bindings:{start_expanded:"<startExpanded",title:"@"},controller:function(){this.expanded=this.start_expanded;this.toggle_expand=function(){this.expanded=!this.expanded}.bind(this)}});
angular.module("genius").component("facebookShareButton",{templateUrl:"facebook_share_button.html",bindings:{url:"<",variants:"<"},controller:["Facebook","Tracking",function(a,c){this.share_on_facebook=function(){c.track("Bagon Facebook Share");a.share(this.url)}}]});angular.module("genius").component("hyperRelevantVideo",{bindings:{video:"<"},templateUrl:"hyper_relevant_video.html",controller:["Tracking",function(a){this.firstplay=function(c){a.track("Play Hyper Relevant Video",{video_id:c.id})}}]});
angular.module("genius").component("imageUploadButton",{templateUrl:"image_upload_button.html",bindings:{default_image:"<defaultImage",on_file_picked:"&onFilePicked",allow_crop_to_square:"<allowCropToSquare",variants:"<"},controller:["Filepicker",function(a){var c=new a;this.pick_image_for_artist=function(a){a={container:"modal",services:["COMPUTER","URL","FACEBOOK","INSTAGRAM","IMAGE_SEARCH"],openTo:a};this.allow_crop_to_square&&(a.services.unshift("CONVERT"),a.conversions=["crop"],a.cropRatio=1);
c.pick_and_store(a).then(function(a){this.on_file_picked({url:a})}.bind(this))}.bind(this)}]});
angular.module("genius").component("inboxLineItemDetail",{templateUrl:"inbox_line_item_detail.html",bindings:{detail:"<lineItemDetail"},controller:["ReferentRegistry",function(a){var c="user_pyonged_song user_followed_user user_de_modded_user user_made_an_editor_out_of_user user_made_a_moderator_out_of_user user_mediatored_user user_hit_pageview_threshold_song".split(" ");this.can_edit_annotation=function(){return this.detail&&"created"===this.detail.action_name};this.show_actors=function(){return this.detail.actors.length&&
!_.contains(c,this.detail.strategy)};this.detail.targets=_.map(this.detail.targets,function(c){return"referent"===c._type?a.update_if_present(c):c});this.is_forum_item=function(){return _.all(this.detail.targets,{_type:"forum_post"})}}]});angular.module("genius").component("inboxLineItemDetailForumPost",{bindings:{post:"<object"},templateUrl:"inbox_line_item_detail_forum_post.html"});angular.module("genius").component("inboxLineItemMessage",{bindings:{template:"<",key:"<",params:"<",state:"<"},template:'<ng-include src="$ctrl.template"></ng-include>'});
angular.module("genius").component("iqHeader",{bindings:{variants:"<"},templateUrl:"iq_header.html",controller:["Session",function(a){this.user=a.current_user}]});
angular.module("genius").component("iqNotificationList",{templateUrl:"iq_notification_list.html",controller:["LocalStorage","PageVisibility","Session","Pusher","$timeout",function(a,c,d,b,g){this.has_feature=d.has_feature;this.user=d.current_user;this.notifications=[];this.line_item_count=0;var e=function(a){_.isEmpty(this.notifications)&&this.notifications.unshift(this.user);this.line_item_count++;g(function(){this.notifications.unshift(a);this.user.iq+=a.iq_gained;g(function(){_.pull(this.notifications,
a);this.line_item_count--;0==this.line_item_count&&this.notifications.pop()}.bind(this),5E3)}.bind(this),200)}.bind(this);b.subscribe(d.current_user.pusher_channel,"iq_increment",function(b){c.when_visible(function(){if(a.is_available()){var c=a.getItem("newest_event_id")||0,d=_.max(b.event_ids);d>c&&(e(b),a.setItem("newest_event_id",d))}else e(b)})}.bind(this))}]});
angular.module("genius").component("lyricsSyncEditor",{bindings:{id:"<modelId",instructions_url:"@instructionsUrl",go_to_home:"&goToHome"},templateUrl:"lyrics_sync_editor.html",controller:["$scope","$q","$immediate","BeforeUnloadCheck","LyricsSynchronization","SpotifyPlayback","WebAudioPlayback","Session",function(a,c,d,b,g,e,h,f){this.position=0;this.current_line_index=-1;this.text_editing_enabled=!1;this.$onInit=function(){g.get(this.id).then(function(a){this.lyrics_synchronization=a;this.media_player=
a.track_url?new h(a):new e(a);this.media_player.$on("state",k);this.auto_advance=!this.can("edit")}.bind(this))};this.start_or_advance=function(){if(!this.media_player.state.is_playing)return this.media_player.api.play();if(!(this.current_line_index>=this.lyrics_synchronization.lines.length-1)){var a=this.current_line_index;this.current_line_index=this.lyrics_synchronization.next_visible_line_index_after_index(this.current_line_index);if(this.can("edit"))try{this.lyrics_synchronization.apply_timestamp_to_line_at_index(this.position,
this.current_line_index)}catch(b){this.error=b,this.current_line_index=a}}};this.seek_to_index=function(a){var b=this.lyrics_synchronization.timestamp_for_line_at_index(a);null!==b&&this.media_player.api.seek_to_position(b);this.auto_advance||(this.current_line_index=a)};this.seek_to_index_and_play=function(a){this.seek_to_index(a);this.media_player.api.play()};this.can=function(a){return this.lyrics_synchronization&&f.has_permission(a,this.lyrics_synchronization)};this.in_order_validator_for_index=
function(a){return function(b){return b||0===b?b>this.lyrics_synchronization.max_timestamp_before_index(a)&&b<this.lyrics_synchronization.min_timestamp_after_index(a+1):!0}.bind(this)};this.move_to_index_for_position=function(a){this.current_line_index=this.lyrics_synchronization.line_index_for_position(a)};this.current_line=function(){return this.lyrics_synchronization.lines[this.current_line_index]};this.after_edit_line_timestamp_at_index=function(a){this.lyrics_synchronization.lines[a]._editing_time=
!1;this.lyrics_synchronization.mark_dirty();this.seek_to_index_and_play(a)};var k=function(a,b){this.position=b.position;this.auto_advance&&this.move_to_index_for_position(this.position)}.bind(this);this.last_action=c.when();var l=function(a){return function(){this.saving=!0;var b=arguments;return this.last_action=this.last_action.finally(function(){return a.apply(this,b).then(function(a){delete this.error;delete this.lyrics_synchronization._dirty;_.extend(this.lyrics_synchronization,_.omit(a,"lines"));
a.lines.forEach(function(a,b){_.extend(this.lyrics_synchronization.lines[b],a)},this)}.bind(this)).catch(function(a){this.error=a;d(this.load.bind(this));return c.reject(a)}.bind(this)).finally(function(){this.saving=!1}.bind(this))}.bind(this))}.bind(this)}.bind(this);this.load=l(function(){return g.get(this.id)});this.submit=l(function(a,b){return g.submit(a,this.lyrics_synchronization,b)});this.submit_sync=l(function(){return g.submit_sync(this.lyrics_synchronization)});this.update_state=l(function(a){return g.update_state(a,
this.lyrics_synchronization)});this.save=l(function(){return g.save(this.lyrics_synchronization)});this.autosave=_.debounce(this.save.bind(this),1E3);this.revert_action=l(function(a){return g.revert_action(a,this.lyrics_synchronization)});this.skip=l(function(a){return g.skip(a,this.lyrics_synchronization)});var n=function(){return this.lyrics_synchronization._dirty}.bind(this);b.add(n);a.$on("$destroy",function(){b.remove(n)});g.$on("edit",function(){delete this.error;this.can("edit")&&(this.can("approve")||
this.can("staff_approve"))&&this.autosave()}.bind(this))}]});
angular.module("genius").component("lyricsSyncHome",{bindings:{instructions_url:"@instructionsUrl"},templateUrl:"lyrics_sync_home.html",controller:["$rootScope","$location","$window","LyricsSynchronization",function(a,c,d,b){a.$on("$locationChangeStart",function(){delete this.id;delete this.tasks;delete this.checked_out;this.navigating=!0}.bind(this));a.$on("$locationChangeSuccess",function(){if("/lyrics_synchronizations/home"===c.path())this.load();else{this.id=parseInt(c.path().replace(/^\/lyrics_synchronizations\//,
""));if(!this.id)return c.path("/lyrics_synchronizations/home");delete this.navigating}}.bind(this));this.load=function(){b.home().then(function(a){_.extend(this,a);delete this.navigating}.bind(this))};this.start=function(a){b.start(a).then(g)};this.check_out=function(a){b.submit("check_out",a).then(g)};this.check_in=function(a){b.submit("check_in",a).then(this.load.bind(this))};this.navigate_to=function(a){c.path("/lyrics_synchronizations/"+a)};var g=function(a){"pristine"===a.state&&d.open("/songs/"+
a.song_id);c.path("/lyrics_synchronization/"+a.id)}}]});
angular.module("genius").component("manageRoles",{templateUrl:"manage_roles.html",bindings:{user:"<"},controller:["Session","UserService","Reversible","AppConfig",function(a,c,d,b){this.user_authority_roles=b.user_authority_roles;this.can_toggle=function(b){return a.has_permission("toggle_"+b+"_status",this.user)};this.has_role=function(a){return _.contains(this.user.roles_for_display,a)};this.role_grant=function(a){return _.find(this.user.role_grants,function(b){return b.role==a})};this.errors={};
this.grant=function(a,b){this.errors={};var h,f;b?(h=this.user.roles_for_display.concat(a),f=c.add_role(this.user.id,a)):(h=_.without(this.user.roles_for_display,a),f=c.remove_role(this.user.id,a));var k=d.modify(this.user,{roles_for_display:h});f.then(function(a){_.extend(this.user,a.user)}.bind(this)).catch(function(b){k();this.errors[a]=b.errors}.bind(this))}}]});
angular.module("genius").component("mergeArtistForm",{templateUrl:"merge_artist_form.html",bindings:{artist:"<"},controller:["Session","ArtistService",function(a,c){this.artist_name_to_merge_with="";this.can=function(c,b){return a.has_permission(c,b)};this.merge_artist=function(){this.show_warning?(delete this.errors,delete this.artist_merge_complete,this.saving||(this.saving=!0,c.merge(this.artist.id,this.artist_name_to_merge_with).then(function(){this.artist_merge_complete=!0}.bind(this)).catch(function(a){this.errors=
a.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))):this.show_warning=!0}.bind(this)}]});angular.module("genius").component("miniAlbumCard",{bindings:{album:"<object",variants:"<"},templateUrl:"mini_album_card.html"});angular.module("genius").component("miniAnnotatableCard",{bindings:{object:"<",variants:"<"},templateUrl:"mini_annotatable_card.html"});
angular.module("genius").component("miniSongCard",{bindings:{song:"<object",artist:"<",variants:"<"},templateUrl:"mini_song_card.html",controller:function(){this.non_primary_artist_present=this.artist&&this.artist.id!==this.song.primary_artist.id}});
angular.module("genius").component("miniUserCard",{bindings:{user:"<object",variants:"<"},templateUrl:"mini_user_card.html",controller:["$scope","Session","UserService",function(a,c,d){this.user_signed_in=c.user_signed_in;this.current_user=c.current_user;a.$watch("$ctrl.user",function(a){if(!a.current_user_metadata){var c=this.user;d.load(c.id).then(function(a){_.extend(c,a)})}}.bind(this))}]});
angular.module("genius").component("paginatedAccomplishments",{bindings:{user:"<",managing:"<",on_empty:"&onEmpty"},templateUrl:"paginated_accomplishments.html",controller:["PagedScrollableDataFactory","AccomplishmentService","UserService","Reversible","$scope",function(a,c,d,b,g){g.$watch("$ctrl.managing",function(b){this.scrollable_data=new a(_.partial(d.accomplishments,this.user.id),"accomplishments",{include_hidden:b,per_page:10})}.bind(this));this.toggle=function(a){var d=b.modify(a,{hidden:!a.hidden});
c.update(a.id,{accomplishment:{hidden:a.hidden}}).then(function(b){_.extend(a,b.accomplishment)}).catch(function(){d()})}}]});angular.module("genius").component("paginatedLeaderboard",{bindings:{artist:"<",leaderboard_pagination_increment:"<leaderboardPaginationIncrement",on_empty:"&onEmpty"},templateUrl:"paginated_leaderboard.html",controller:["PagedScrollableDataFactory","ArtistService",function(a,c){this.scrollable_data=new a(_.partial(c.load_leaderboard,this.artist.id),"leaderboard",{per_page:this.leaderboard_pagination_increment})}]});
angular.module("genius").component("profileAdminPane",{bindings:{user:"<"},templateUrl:"profile_admin_pane.html",controller:["Session","PagedScrollableDataFactory","UserService",function(a,c,d){this.can=function(b){return a.has_permission(b,this.user)};this.can_moderate=this.can("toggle_penalty_status")||this.can("mark_spam")||this.can("mark_ham")||this.can("mass_delete_unreviewed_activity")||this.can("mass_delete_votes");this.can("view_admin_info")&&(this.other_users_with_ip_infinite_scroll_data=
new c(_.partial(d.other_users_with_ip,this.user.id),"other_users_with_ip"));this.managing_accomplishments=!1}]});
angular.module("genius").component("profileAllActivity",{templateUrl:"profile_all_activity.html",bindings:{user:"<",artist:"<"},controller:["UserService","ArtistService","PagedScrollableDataFactory","Session",function(a,c,d,b){this.activity_types=[];b.has_permission("view_activity_stream",this.user)&&this.activity_types.push({activity_type:"user",label:this.user.name+"'s Activity",profile_activity_scrollable_data:new d(_.partial(a.activity_line_items,this.user.id),"line_items",{text_format:"html"})});
b.has_permission("view_activity_stream",this.artist)&&this.activity_types.push({activity_type:"artist",label:"Activity on "+this.artist.name+"'s songs",profile_activity_scrollable_data:new d(_.partial(c.activity_line_items,this.artist.id),"line_items",{text_format:"html"})});this.activity_type=this.activity_types[0]}]});
angular.module("genius").component("profileAnnotation",{bindings:{annotation:"<",referent:"<",variants:"<"},templateUrl:"profile_annotation.html",controller:["$scope",function(a){a.$watchGroup(["$ctrl.annotation.community","$ctrl.annotation.cosigned_by"],function(){this.referent_display_mode=this.annotation.community&&0===this.annotation.cosigned_by.length?"default":"green"}.bind(this));a.$on("annotation_deleted",function(a,d,b){d==this.annotation&&b.then(function(){this.deleted=!0}.bind(this))}.bind(this))}]});
angular.module("genius").component("profileArtistDescriptionPreview",{templateUrl:"profile_artist_description_preview.html",bindings:{artist:"<",top_scholar:"<topScholar"}});
angular.module("genius").component("profileArtistPane",{bindings:{artist:"<"},templateUrl:"profile_artist_pane.html",controller:["Session",function(a){this.twitter_url="https://twitter.com/"+this.artist.twitter_name;this.facebook_url="http://www.facebook.com/"+this.artist.facebook_name;this.instagram_url="http://instagram.com/"+this.artist.instagram_name;this.user_signed_in=a.user_signed_in}]});
angular.module("genius").component("profileContributionsAnnotations",{templateUrl:"profile_contributions_annotations.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.limit=1;this.annotations=this.contributions_group.contributions}});angular.module("genius").component("profileContributionsAnswers",{templateUrl:"profile_contributions_answers.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.answers=this.contributions_group.contributions}});
angular.module("genius").component("profileContributionsArticles",{templateUrl:"profile_contributions_articles.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.article=this.contributions_group.contributions[0]}});
angular.module("genius").component("profileContributionsComments",{templateUrl:"profile_contributions_comments.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.limit=1;this.comments=this.contributions_group.contributions;this.commentable=this.comments[0].commentable}});angular.module("genius").component("profileContributionsGroup",{templateUrl:"profile_contributions_group.html",bindings:{user:"<",contributions_group:"<contributionsGroup"}});
angular.module("genius").component("profileContributionsPyongs",{templateUrl:"profile_contributions_pyongs.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.pyong=this.contributions_group.contributions[0]}});angular.module("genius").component("profileContributionsQuestions",{templateUrl:"profile_contributions_questions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.questions=this.contributions_group.contributions}});
angular.module("genius").component("profileContributionsTranscriptions",{templateUrl:"profile_contributions_transcriptions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.song=this.contributions_group.contributions[0]}});
angular.module("genius").component("profileFollowers",{bindings:{artist:"<",user:"<",follows:"<"},templateUrl:"profile_followers.html",controller:["PagedScrollableDataFactory","UserService",function(a,c){this.scrollable_data=this.user?this.follows?new a(_.partial(c.load_followed_users,this.user.id),"followed_users"):new a(_.partial(c.load_followers_by_user,this.user.id),"followers"):new a(_.partial(c.load_followers_by_artist,this.artist.id),"followers")}]});
angular.module("genius").component("profileIdentity",{templateUrl:"profile_identity.html",bindings:{artist:"<",user:"<"},controller:function(){this.alternate_name_limit=2;this.user_has_more_than_one_role=function(){return this.user&&1<this.user.roles_for_display.length};this.more_alternate_names_to_show=function(){return this.artist.alternate_names.length>this.alternate_name_limit};this.show_all_alternate_names=function(){this.alternate_name_limit=Infinity}}});
var USER_ACTIVITY_FILTER_OPTIONS=[{i18n_key:"contribution_type.all_activity.name",filter:null,sort:[]},{i18n_key:"contribution_type.annotations.name",filter:"annotations",sort:[{i18n_key:"contribution_type.annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.annotations.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.pyongs.name",filter:"pyongs",sort:[]},{i18n_key:"contribution_type.transcriptions.name",filter:"transcriptions",sort:[{i18n_key:"contribution_type.transcriptions.sort.popularity",
value:"popularity"},{i18n_key:"contribution_type.transcriptions.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.comments.name",filter:"comments",sort:[]},{i18n_key:"contribution_type.questions_and_answers.name",filter:"questions_and_answers",sort:[]},{i18n_key:"contribution_type.articles.name",filter:"articles",sort:[{i18n_key:"contribution_type.articles.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.articles.sort.chronologically",value:"chronologically"}]}];
angular.module("genius").component("profilePage",{templateUrl:"profile_page.html",bindings:{artist:"<",user:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",top_scholar:"<topScholar",top_accomplishment:"<topAccomplishment",pinned_annotations:"<pinnedAnnotations",artist_has_more_songs:"<artistHasMoreSongs",show_artist_pane:"<showArtistPane",preloaded_user_activity:"<preloadedUserActivity",initial_next_user_activity_timestamp:"<initialNextUserActivityTimestamp",$router:"<",diglett_discussion_url:"<diglettDiscussionUrl",
current_user_metadata:"<currentUserMetadata"},controller:["CursoredScrollableDataFactory","UserService","ArtistService","$rootRouter","Session","ScrollPoint","Tracking",function(a,c,d,b,g,e,h){h.track("Profile Page Load");this.scroll_to=e.scroll_to;this.user_activity_sort_options_by_filter=USER_ACTIVITY_FILTER_OPTIONS;this.logged_in=g.user_signed_in;this.can=function(a,b){return g.has_permission(a,b)};this.community_artist=this.artist&&this.user&&!this.user.is_verified;this.can_message_user=this.can("send_message",
this.user);this.can_view_activities_in_real_time=this.logged_in&&this.user;this.can_edit_artist_profile=this.can("edit",this.artist);this.can_edit_user_profile=this.can("edit",this.user);this.can_edit_profile=this.can_edit_artist_profile||this.can_edit_user_profile;this.can_view_admin_info=this.can("view_admin_info",this.user);this.can_view_roles=this.can("view_roles",this.user);this.can_verify=this.can("toggle_verification_status",this.user);this.can_moderate_user=this.can("toggle_penalty_status",
this.user)||this.can("mark_spam",this.user)||this.can("mark_ham",this.user)||this.can("mass_delete_unreviewed_activity",this.user)||this.can("mass_delete_votes",this.user);this.can_view_airbrake_errors=this.can("view_airbrake_errors",this.user);this.filter_activity_by=function(b,e){this.filter_by_contribution_type=b;b.filter?(this.filter_by_contribution_type_sort=e||b.sort[0],this.user_contributions_scrollable_data=new a(_.partial(c.load_contributions,this.user.id,b.filter),"contribution_groups",
{text_format:"html,markdown",sort:this.filter_by_contribution_type_sort&&this.filter_by_contribution_type_sort.value,per_page:8})):this.user_contributions_scrollable_data=new a(_.partial(c.load_contributions,this.user.id,!1),"contribution_groups",{text_format:"html,markdown",per_page:8},this.initial_next_user_activity_timestamp)}.bind(this);this.filter_activity_by_type=function(a){this.filter_activity_by(_.find(USER_ACTIVITY_FILTER_OPTIONS,{filter:a}));this.scroll_to("user_activity")};this.user&&
this.filter_activity_by(this.user_activity_sort_options_by_filter[0]);this.display_as_artist=function(){return!(!this.artist||this.user&&!this.user.is_verified)}.bind(this);this.display_as_user=function(){return!this.display_as_artist()}.bind(this);this.header_url=function(){return this.display_as_artist()?this.artist.header_image_url:this.user.header_image_url}.bind(this);this.avatar_url=function(){return this.display_as_artist()?this.artist.image_url:this.user.avatar.medium.url}.bind(this);var f=
function(a){this.display_as_artist()?b.navigate(["ArtistPage",{},a?"ProfileBioPage":"ProfilePage",{slug:d.get_slug(this.artist)}]):b.navigate([a?"UserBioPage":"UserPage",{slug:c.get_slug(this.user)}])}.bind(this);this.open_description=function(){f(!0)};this.close_description=function(){f(!1)};this.$onInit=function(){this.can("moderate_annotations",this)&&_(USER_ACTIVITY_FILTER_OPTIONS).find({filter:"annotations"}).sort.push({i18n_key:"contribution_type.annotations.sort.unreviewed",value:"unreviewed"})}}]});
angular.module("genius").component("profileUserDescriptionPreview",{templateUrl:"profile_user_description_preview.html",bindings:{user:"<",top_accomplishment:"<topAccomplishment"}});angular.module("genius").component("profileUserPane",{bindings:{user:"<",on_statistics_select:"&onStatisticsSelect"},templateUrl:"profile_user_pane.html",controller:["Session",function(a){this.can=function(c){return a.has_permission(c,this.user)}}]});
angular.module("genius").component("question",{bindings:{question:"<",variants:"<",move_question:"&?moveQuestion",featured:"<"},templateUrl:"question.html",controller:["Reversible","QuestionService","Session",function(a,c,d){this.can=function(a,c){return d.has_permission(a,c)};this.is_pinned=function(){return"pinned"===this.question.state};this.is_verified=function(){return this.question.answer&&this.question.answer.answer_source};this.archive=function(){this.question._deleted=!0;return this.change_state("archive").catch(function(){delete this.question._deleted}.bind(this))}.bind(this);
this.pin=function(){var b=a.modify(this.question,{state:"pinned"});return this.change_state("pin").catch(b)}.bind(this);this.unpin=function(){var b=a.modify(this.question,{state:"pending"});return this.change_state("unpin").catch(b)}.bind(this);this.change_state=function(a){return c.create_if_not_exists(this.question).then(function(){return c.change_state(this.question,a)}.bind(this))}.bind(this);this.start_editing=function(a){this.question._editing=_.defaults(this.question._editing||{},{_form_visible:!0,
body:this.question.body})}.bind(this);this.move=function(a){this.move_question({direction:a,question:this.question})};this.cancel_editing=function(){delete this.question._editing}.bind(this);this.finish_editing=function(){if(!this.disable_saving_with){this.disable_saving_with="Saving";var b=a.modify(this.question,{"_editing._form_visible":!1});c.update(this.question,{question:this.question._editing}).then(this.cancel_editing.bind(this)).catch(b).finally(function(){delete this.disable_saving_with}.bind(this))}}.bind(this)}]});
angular.module("genius").component("questionForm",{bindings:{song:"<",on_new_question:"&onNewQuestion"},templateUrl:"question_form.html",controller:["Session","$scope","QuestionService",function(a,c,d){this.user_signed_in=a.user_signed_in;var b=function(b){this.question={_new:!0,author:a.current_user,author_name:b&&b.author_name,author_email:b&&b.author_email,body:""}}.bind(this);this.save=function(){if(!this.saving){this.saving=!0;a.user_signed_in||(this.question.anonymous_user={name:this.question.name});
var g=this.question;b();c.question_form.$setPristine();d.create(this.song.id,g).then(function(){this.saving=!1;c.question_form.$setPristine();this.thank_you=!0;this.on_new_question({question:g});b(g);this.error={}}.bind(this)).catch(function(a){this.error=a;this.question=g;this.saving=!1}.bind(this))}}.bind(this)}]});
angular.module("genius").component("questionList",{bindings:{pinned_questions:"<pinnedQuestions",default_questions:"<defaultQuestions",featured_question:"<featuredQuestion",pending_question_count:"<pendingQuestionCount",variants:"<",song:"<"},templateUrl:"question_list.html",controller:["SongService","QuestionService","PagedScrollableDataFactory",function(a,c,d){this.questions=_([]).concat(this.default_questions,this.pinned_questions).compact().value();this.featured_question&&"pinned"!==this.featured_question.state&&
this.questions.push(this.featured_question);this.move_question=function(a,b){var d;"up"==a?d=_(this.questions).filter(function(a){return a.pin_order&&a.pin_order<b.pin_order}).sortBy("pin_order").reverse().take(2).thru(function(a){return[a[1],a[0]]}):"down"==a&&(d=_(this.questions).filter(function(a){return a.pin_order&&a.pin_order>b.pin_order}).sortBy("pin_order").take(2).thru(function(a){return[a[0],a[1]]}));d=this.move_question_between(b,d.get(0),d.get(1));c.move(b,a).catch(d)};this.move_question_between=
function(a,b,c){var d;b&&c?d=(b.pin_order+c.pin_order)/2:c?d=c.pin_order/2:b&&(d=b.pin_order+1);var g=a.pin_order;a.pin_order=d;return function(){a.pin_order=g}};this.sorting_predicates=[function(a){return["default","pinned","pending","archived"].indexOf(a.state)},"pin_order"];var b={state:"pending"};this.variants&&this.variants.answered&&(b.answered=this.variants.answered);var g=new d(_.partial(a.load_questions,this.song.id),"questions",b);this.has_next=this.pending_question_count?g.has_next:function(){return!1};
this.load_more=function(){this._loading=!0;g.next().then(function(a){a=_.reject(a,this.is_featured_question,this);this.pending_question_count-=a.length;Array.prototype.push.apply(this.questions,a)}.bind(this)).finally(function(){this._loading=!1}.bind(this))}.bind(this);this.is_featured_question=function(a){return this.featured_question&&this.featured_question.id===a.id}}]});
angular.module("genius").component("reasonsToggle",{bindings:{reasonChanged:"&"},templateUrl:"reasons_toggle.html",controller:["AppConfig",function(a){this.comment_reasons=a.comment_reasons;this.selectedReason="";this.change_reason=function(a){this.selectedReason===a?delete this.selectedReason:this.selectedReason=a;this.reasonChanged({reason:this.selectedReason})}}]});
angular.module("genius").component("recentSignupsPage",{templateUrl:"recent_signups_page.html",controller:["UserService","Attempt","TimestampedScrollableDataFactory","I18n",function(a,c,d,b){var g=function(b,c){c.marking_spam_state=!0;a.update_spam_state(c.user.id,{state:b}).then(function(){c.marked_spam_state=!0}.bind(this)).finally(function(){delete c.marking_spam_state})}.bind(this);this.mark=function(a,d){c.admin_action(function(){g(a,d)},b.t("mark_"+a+".confirm"))};this.filter_by_spam_state=
function(b){this.filtering_spam_state!==b&&(this.filtering_spam_state=b,this.recent_signups_scrollable_data=new d(_.partial(a.load_recent_signups,"unclassified_spam_state"===b?"":b),"user_spam_evaluations"))};this.filter_by_spam_state("unclassified_spam_state")}]});
angular.module("genius").component("relevantVideos",{bindings:{song:"<"},templateUrl:"relevant_videos.html",controller:["$scope","SongService","Tracking",function(a,c,d){this.firstplay=function(a){d.track("Play Related Video",{video_id:a.id})};a.$watch("$ctrl.song.id",function(a){delete this.videos;a&&c.videos(a,{per_page:1}).then(function(a){this.videos=a}.bind(this))}.bind(this))}]});
angular.module("genius").component("renderOnLoad",{template:'<ng-transclude ng-if="$ctrl.render"></ng-transclude>',transclude:!0,controller:["windowOnLoad",function(a){a.then(function(){this.render=!0}.bind(this))}]});
(function(a){var c="artist user artist_songs artist_albums top_scholar top_accomplishment pinned_annotations artist_has_more_songs preloaded_user_activity initial_next_user_activity_timestamp diglett_discussion_url current_user_metadata".split(" ");a.module("genius").component("routablePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/artists/...",name:"ArtistPage",component:"routableProfilePage"},{path:"/:slug",name:"UserPage",component:"routedPage",data:{component:"profilePage",includeFromCache:c,
include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"UserBioPage",component:"routedPage",data:{component:"profilePage",includeFromCache:c,include:{show_artist_pane:!0}}},{path:"/users/...",name:"UserRouter",component:"routableUserPage"}]})})(angular);
(function(a){var c="artist user artist_songs artist_albums top_scholar top_accomplishment pinned_annotations artist_has_more_songs preloaded_user_activity initial_next_user_activity_timestamp diglett_discussion_url current_user_metadata".split(" ");a.module("genius").component("routableProfilePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/:slug",name:"ProfilePage",component:"routedPage",data:{component:"profilePage",includeFromCache:c,include:{show_artist_pane:!1}}},{path:"/:slug/bio",
name:"ProfileBioPage",component:"routedPage",data:{component:"profilePage",includeFromCache:c,include:{show_artist_pane:!0}}}]})})(angular);(function(a){a.module("genius").component("routableUserPage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/recent_signups",name:"RecentSignupsPage",component:"routedPage",data:{component:"recentSignupsPage"}}]})})(angular);
angular.module("genius").component("routedPage",{template:["$rootRouter",function(a){for(var c=function(a){return a.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase().replace(/_/g,"-")},d=a._currentInstruction;null!=d.child;)d=d.child;var d=d.component.routeData.data,b=c(d.component),g=a._currentInstruction.component.params;return"<"+b+" "+_(d.includeFromCache).map(function(a){return c(a)+'="$ctrl.preloadedData.'+a+'"'}).join(" ")+" "+_(d.includeFromUrlParams).map(function(a){return c(a)+'="'+g[a]+
'"'}).join(" ")+" "+_(d.include||{}).map(function(a,b){return c(b)+'="'+a+'"'}).join(" ")+' $router="$ctrl.$router"></'+b+">"}],bindings:{$router:"<"},controller:["PreloadCache",function(a){this.preloadedData=a;this.$routerCanReuse=function(){return!1}}]});
angular.module("genius").component("selectDropdown",{templateUrl:"select_dropdown.html",require:{ngModel:"?ngModel"},bindings:{options:"<",on_select:"&onSelect",variants:"<",selection:"<"},controller:["$scope",function(a){a.$watch("$ctrl.options",function(){this.selected=this.options[0]}.bind(this));a.$watch("$ctrl.selected",function(a){this.ngModel&&this.ngModel.$setViewValue(a)}.bind(this));a.$watch("$ctrl.selection",function(a){a&&(this.selected=a)}.bind(this));this.is_clickable=function(){return 1<
this.options.length}}]});angular.module("genius").component("songAlbums",{bindings:{song:"<",primary_album_tracks:"<primaryAlbumTracks"},templateUrl:"song_albums.html",controller:function(){var a=!1;this.primary_album=function(){return this.song.album};this.other_albums=function(){return this.primary_album()?_.reject(this.song.albums,{id:this.primary_album().id}):this.song.albums};this.hidden_album_count=function(){return a?0:Math.max(0,this.other_albums().length-2)};this.show_all=function(){a=!0}}});
angular.module("genius").component("songMetadataSongRelationshipsInput",{templateUrl:"song_metadata_song_relationships_input.html",bindings:{song_relationships:"<songRelationships",isDisabled:"<"},controller:[function(){this.visible_relationships=_.filter(this.song_relationships,function(a){return a.songs.length});this.available_relationships=function(){return _.difference(this.song_relationships,this.visible_relationships)};this.change_relationship_to=function(a,c){c.songs=a.songs;a.songs=[];this.visible_relationships[this.visible_relationships.indexOf(a)]=
c};this.remove_song_relationship=function(a){a.songs=[];this.visible_relationships=_.without(this.visible_relationships,a)};this.add_new_song_relationship=function(){var a=this.available_relationships();a.length&&this.visible_relationships.push(a[0])}}]});
angular.module("genius").component("songMissingMetadata",{templateUrl:"song_missing_metadata.html",bindings:{song:"<",save:"&onSave"},controller:["Tracking","Reversible",function(a,c){this.editable_song=angular.copy(this.song);var d=["writer_artists","producer_artists","albums","release_date"];this.has_missing_info=function(){return _.any(d,this.missing_info)};this.missing_info=function(a){return _.isEmpty(this.song[a])}.bind(this);this.submit=function(b){delete this.error;b=_.pick(this.editable_song,
b);var d=c.modify(this.song,b);this.save({song:this.song}).then(function(){a.track("Metadata Edit",{Source:"Missing"})}.bind(this)).catch(function(a){d();this.error=a}.bind(this))}.bind(this)}]});angular.module("genius").component("songMissingMetadataForm",{templateUrl:"song_missing_metadata_form.html",bindings:{submit:"&onSubmit",cancel:"&onCancel",type:"@",errors:"<",item_count:"<itemCount"},transclude:!0});
angular.module("genius").component("songTopVerifiedArtist",{bindings:{contributors:"<verifiedContributors",on_clicked_verified_annotator:"&onClickedVerifiedAnnotator",on_clicked_verified_answer:"&onClickedVerifiedAnswer"},templateUrl:"song_top_verified_artist.html",controller:function(){var a=_.sortBy(this.contributors,function(a){return a.contributions.length});this.contributor=_.last(a);this.on_clicked=function(a){_.includes(this.contributor.contributions,"annotations")?(this.on_clicked_verified_annotator({user:this.contributor.user}),
a.preventDefault()):_.includes(this.contributor.contributions,"answers")&&(this.on_clicked_verified_answer({artist:this.contributor.artist}),a.preventDefault())}.bind(this)}});
angular.module("genius").component("songVerifiedArtists",{bindings:{verified_contributors:"<verifiedContributors"},templateUrl:"song_verified_artists.html",controller:function(){1===this.verified_contributors.length&&(this.featured=!0);this.commentary_and_lyrics_by=_.filter(this.verified_contributors,function(a){return _.includes(a.contributions,"lyrics")&&(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.commentary_by=_.filter(this.verified_contributors,function(a){return!_.includes(a.contributions,
"lyrics")&&(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.lyrics_by=_.filter(this.verified_contributors,function(a){return _.includes(a.contributions,"lyrics")&&!(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))})}});angular.module("genius").component("songVerifiedArtistsSection",{bindings:{contributors:"<",featured:"<",label:"@"},templateUrl:"song_verified_artists_section.html"});
angular.module("genius").component("songVerifiedArtistsSectionSingle",{bindings:{contributor:"<",featured:"<",label:"@",variants:"<"},templateUrl:"song_verified_artists_section_single.html",controller:function(){this.contributor.user?(this.url=this.contributor.user.url,this.image_url=this.contributor.user.avatar.medium.url,this.is_meme_verified=this.contributor.user.is_meme_verified,this.name=this.contributor.user.name):(this.url=this.contributor.artist.url,this.image_url=this.contributor.artist.image_url,
this.is_meme_verified=this.contributor.artist.is_meme_verified,this.name=this.contributor.artist.name)}});angular.module("genius").component("spamStatus",{templateUrl:"spam_status.html",bindings:{user:"<"},controller:["UserService",function(a){a.spam_status(this.user.id).then(function(a){this.user_spam_evaluation=a.user_spam_evaluation}.bind(this))}]});
angular.module("genius").component("squareItemAndIq",{bindings:{event_type:"@eventType",show_pill_initial:"<showPill",multiplier:"<",variants:"<"},templateUrl:"square_item_and_iq.html",transclude:!0,controller:["Iq","Session",function(a,c){this.show_pill=function(){return c.user_signed_in?_.isUndefined(this.show_pill_initial)?!0:this.show_pill_initial:!1};this.iq=function(){var c=_.isUndefined(this.multiplier)?1:this.multiplier;return a.for(this.event_type)*c}}]});
angular.module("genius").component("statisticsPanel",{bindings:{user:"<",on_select:"&onSelect"},templateUrl:"statistics_panel.html"});angular.module("genius").component("statisticsPanelItem",{bindings:{label:"@",value:"<",icon:"@"},templateUrl:"statistics_panel_item.html"});
angular.module("genius").component("twitterShareButton",{templateUrl:"twitter_share_button.html",bindings:{url:"<",message:"<",variants:"<"},controller:["Twitter","Tracking",function(a,c){this.share_on_twitter=function(){c.track("Bagon Twitter Share");a.share({url:this.url,message:this.message})}}]});angular.module("genius").component("userAttribution",{bindings:{object:"<",rank:"<"},templateUrl:"user_attribution.html"});
angular.module("genius").component("userIdentities",{templateUrl:"user_identities.html",bindings:{user:"<",editable:"<"},controller:["IdentityService","Session",function(a,c){this.can=function(a){return c.has_permission(a,this.user)};this.can_edit=function(){return this.editable&&this.can("manage_identities")};this.saving_identity={};this.unlink_identity=function(c){this.saving_identity[c.provider]||(this.saving_identity[c.provider]=!0,delete this.errors,a.destroy(c.id).then(function(a){_.extend(this.user,
a.user);delete this.errors}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving_identity[c.provider]}.bind(this)))};this.identity_auth_path=function(a){return"/auth/"+a}}]});
angular.module("genius").component("userModeration",{templateUrl:"user_moderation.html",bindings:{user:"<"},controller:["Session","UserService","Attempt","AppConfig",function(a,c,d,b){this.can=function(b){return a.has_permission(b,this.user)};this.clear=function(){delete this.errors;delete this.messages};this.toggle_penalty_status=function(){this.updating||(this.clear(),this.updating=!0,(this.user.penalty_box_until?c.unpenalty_box(this.user.id):c.penalty_box(this.user.id)).then(function(a){_.extend(this.user,
a.user)}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this)))};this.update_spam_state=function(a){this.updating||d.admin_action(function(){this.clear();this.updating=!0;c.update_spam_state(this.user.id,{state:a}).then(function(a){_.extend(this.user,a.user);this.messages=["Done! (But it'll take a few minutes to finish)"]}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this))}.bind(this),
I18n.t("mark_"+a+".confirm"))};this.mass_delete_unreviewed_activity=function(){this.updating||d.admin_action(function(){this.clear();this.updating=!0;c.mass_delete_unreviewed_activity(this.user.id).then(function(a){_.extend(this.user,a.user);this.messages=["Done! (But it'll take a few minutes to finish)"]}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this))}.bind(this),I18n.t("mass_delete_unreviewed_activity.confirm"))};this.vote_types=
b.user_vote_types_for_delete;this.mass_delete_votes=function(a){this.updating||d.admin_action(function(){this.clear();this.updating=!0;c.delete_votes(this.user.id,a).then(function(a){_.extend(this.user,a.user);this.messages=["Done! (But it'll take a few minutes to finish)"]}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this))}.bind(this),I18n.t("mass_delete_votes."+a+".confirm"))}}]});
angular.module("genius").component("verticalAlbumCard",{bindings:{album:"<object"},templateUrl:"vertical_album_card.html"});angular.module("genius").controller("ArticleCtrl",["$scope","Bowser","Tracking",function(a,c,d){d.track("Article Page Load");a.play_video=function(){a.article_ctrl.player_api.load_media()};a.$evalAsync(function(){a.video=_(a.article.media).find(function(a){return"video"===a.type})});a.autoplay=!c.mobile}]);angular.module("genius").controller("ArticleFormCtrl",function(){});
angular.module("genius").controller("CustomAppNotificationCtrl",["$scope","CustomAppNotificationService",function(a,c){a.send_preview_notification=function(){c.send_preview_notification(a.notification).then(function(){alert("sent a preview notification to your devices, take a look")})}}]);
angular.module("genius").controller("DevCtrl",["$window","$scope","$http","AppConfig",function(a,c,d,b){c.search={query:""};c.saving=!1;c.build_scenario=function(){if(!c.saving){c.saving=!0;var e=c.current_scenario.traits.filter(function(a){return a.enabled}).map(function(a){return a.name});d.post(b.api_root_url+"/scenarios?id="+c.current_scenario.id,{scenario:{traits:e}}).then(function(b){a.location.href=b.data.url;c.saving=!1})}};c.configure_scenario=function(a){c.current_scenario=a};c.clear_scenario=
function(){c.current_scenario=void 0};var g=_.once(function(){d.get(b.api_root_url+"/scenarios").then(function(a){c.results=a.data.scenarios})});c.open_search=function(){g();c.open=!0};c.close_search=function(){c.open=!1}}]);
angular.module("genius").controller("FactTrackAnnotationEditCtrl",["$scope",function(a){a.set_timestamp_to_now=function(){a.annotation.timestamp_in_ms=a.ctrl.time};a.annotation_duration=function(){var c=a.annotations.indexOf(a.annotation),c=a.annotations[c+1];return(c?c.timestamp_in_ms:a.duration)-a.annotation.timestamp_in_ms}}]);
angular.module("genius").controller("FactTrackSongEditCtrl",["$scope","$debounce","SpotifyAnnotationService","orderByFilter","SpotifyBridge","ScrollPoint",function(a,c,d,b,g,e){a.scroll_to=e.scroll_to;a.song_id=$("[data-song-id]").attr("data-song-id");g.$on("ready",function(){a.is_ready=!0});this.toggle_fullscreen=function(){this.alt_mode=!1;this.fullscreen=!this.fullscreen};this.toggle_alt_mode=function(){this.alt_mode=!this.alt_mode};a.remove_annotation=function(b){b=a.annotations.indexOf(b);a.annotations.splice(b,
1)};a.add_annotation=function(){a.annotations.push({content_type:"iq",timestamp_in_ms:this.time})}.bind(this);d.load_song(a.song_id).success(function(b){a.spotify_song=b.spotify_song;a.annotations=b.spotify_annotations;a.spotify_song.track_url&&(a.is_ready=!0);_.any(a.annotations,{content_type:"credits"})||a.annotations.push({content_type:"credits",content:"Check out the full lyrics and annotations on Genius for contributors, sources, and even more knowledge.",timestamp_in_ms:a.spotify_song.metadata.duration_ms-
3E3});k()});var h=!1,f=function(){a.saving_disabled?h=!0:(a.saving_disabled=!0,d.save_song(a.song_id,a.spotify_song,a.annotations).success(function(b){a.spotify_song.lock_version=b.spotify_song.lock_version;a.save_error=void 0}).error(function(b){a.save_error=b.message||"Failed to save";a.conflicted="conflict"===b.error;$.facebox("<div><img src='https://images.genius.com/5f38d92d0b29722104abd09aa01b1585.200x200x4.gif'></div><br><h1>Something went wrong!</h1><h2>Consider copy/pasting your work somewhere else before reloading the page</h2>")}).finally(function(){a.saving_disabled=
!1;h&&(h=!1,f())}))},k=function(){a.$watch("annotations",function(){a.annotations=b(a.annotations,["timestamp_in_ms","id"])},!0);var e=c(f,1E3);a.$watchGroup(["annotations","spotify_song.note","spotify_song.finalized"],function(){e()},!0)}}]);
angular.module("genius").controller("HeaderCtrl",["$scope","$window","UserService","TargetElementService",function(a,c,d,b){this.$onInit=function(){this.cloudflare_error=!!b.get_element("cloudflare_unavailable_alert").length};a.toggle_mobile_subnav_menu=function(){a.mobile_subnav_menu_open=!a.mobile_subnav_menu_open};a.close_mobile_subnav_menu=function(){a.mobile_subnav_menu_open=!1};a.impersonate_user=function(){var b=prompt("Enter the login of the user you want to sign in as");""!==$.trim(b)&&(a.impersonating=
!0,$.facebox&&$.facebox("<h1>Hang tight!</h1><h2>Once we log you in as <b>"+b+"</b> we'll refresh the page</h2>"),d.impersonate(b).then(function(){c.location.reload()}))}}]);angular.module("genius").controller("HomepageCtrl",["$scope","$interval",function(a,c){var d=0;c(function(){a.total_iq+=d;d=0},1E3);a.increment_iq=function(a){d+=a};a.details_expanded=!1;a.expand_details=function(){a.details_expanded=!0}}]);
angular.module("genius").controller("SongCtrl",["$scope","$window","$q","$location","$immediate","ReferentRegistry","ReferentService","SongService","Tracking","Session","currentFlashMessages","Reversible","Attempt","Pusher","I18n","ScrollPoint",function(a,c,d,b,g,e,h,f,k,l,n,m,q,r,u,t){var v=this;a.attempt_close=q.close_form;k.track("Song Page Load");var w=b.search().from_question_email;w&&k.track("Question email question clicked",{question_id:w});a.user_signed_in=l.user_signed_in;a.reference_elements=
{};this.annotation_preview_for=function(b){return _.find(a.annotation_previews,{referent_id:b})};this.set_annotation_preview=function(b,c){a.annotation_preview=b;a.active_fragment_id=c};this.clear_annotation_preview=function(b,c){a.annotation_preview===b&&(a.annotation_preview=null);a.active_fragment_id===c&&(a.active_fragment_id=null)}.bind(this);this.has_annotation_preview=function(b){if(a.active_fragment_id&&b)return a.active_fragment_id===b};this.dismiss_annotation_preview=function(){a.annotation_preview_dismissed=
!0;k.track("Dismiss Annotation Teaser")};this.reactivate_annotation_preview=function(){a.annotation_preview_dismissed=!1;k.track("Reactivate Annotation Teaser")};this.highlight_preview_referent=function(b){return this.has_annotation_preview(b)&&!a.annotation_preview_dismissed};this.show_preview_referent_indicator=function(b){return this.has_annotation_preview(b)&&a.annotation_preview_dismissed};e.register(a.song.description_annotation);a.preloaded_referents&&_.each(a.preloaded_referents,function(a){e.register(_.assign({fragments:[]},
a))});g(function(){f.count_view(a.song.id);e.preload_from_start(5)},!1);var x=function(b){for(var c=0;c<b.length;c++){var e=_(a.song.media).detect(function(a){return a.provider===b[c]});if(e)return e}return!1},J=function(){return _(a.song.media).detect(function(a){return"youtube"===a.provider&&a.cinema})};a.video_media=function(){return J()||a.song.featured_video&&x(["youtube"])};a.audio_media=function(){return x(a.song.featured_video?["soundcloud"]:["soundcloud","youtube"])};a.initial_sidebar_content_showing=
function(){return!a.current_referent&&!a.lyrics_ctrl.selection_range};a.open_song_description_pane=function(){k.track("Open Song Description Pane");a.current_referent=a.song.description_annotation};a.delete_song=function(){f.delete(a.song.id).then(function(){n.push({type:"notice",message:"Successfully deleted Song"});c.location.href="/"})};a.media_player_audio={};a.media_player_video={};if(J()){a.cinema_player={};var D=a.$watch("cinema_player.state.is_ready",function(b){b&&(a.cinema_player.api.load_media(),
D())})}this.media_is_stuck=!1;a.working_audio_present=function(){var b=_.get(_.find(a.song.media,{type:"audio",provider:"soundcloud"}),"url");return a.media_player_audio.state?b&&!a.media_player_audio.state.has_errored:b};a.open_docked_media_player=function(){k.track("Open Media Player");a.docked_media_player_open=!0;a.media_player_audio.api&&a.media_player_audio.api.load_media()};a.dismiss_docked_media_player=function(){k.track("Dismiss Media Player");a.docked_media_player_open=!1;a.media_player_audio.api&&
a.media_player_audio.api.pause()};a.open_docked_featured_video_player=function(){k.track("Play featured video");a.song_ctrl.featured_video_player_api.load_media();a.song_ctrl.docked_featured_video_expanded=!0;a.media_player_audio.api&&a.media_player_audio.api.pause()};a.dismiss_docked_featured_video_player=function(){k.track("Dismiss featured video");a.song_ctrl.featured_video_player_api.pause();a.song_ctrl.docked_featured_video_expanded=!1};a.$watch("media_player_audio.state.is_playing",function(b){b&&
(a.open_docked_media_player(),a.has_initiated_player=!0)});a.next_track=function(){var b=!1;return _.detect(a.primary_album_tracks,function(c){if(b)return!0;b=c.song.id===a.song.id})};a.open_first_verified_annotation=function(a){k.track("Tap Verified Callout");var b=e.first(function(b){return"verified"===b.classification&&_.include(b.verified_annotator_ids,a.id)});v.open_referent_by_id(b.id)};a.open_next_referent=function(a){k.track("Tap Next Verified");v.open_referent_by_id(a)};a.$watch("next_up_clicked",
function(a){a&&k.track("Next Song Tap")});var A=function(a){b.url()!=="/"+a&&b.url("/"+a)},z=function(b){k.track("Open Annotation",{annotation_id:b});a.highlighted_fragment_id=b;a.current_referent=e.get(b);e.preload_around(b,10);A(b)},B=!1;a.clear_current_referent=function(){delete a.highlighted_fragment_id;delete a.current_referent;b.url(a.song.path);b.replace()};var C=function(a){if(!a)return d.when();var b=d.defer();a=a.offset().top+a.height()/2-$(window).height()/2;$(c).scrollTop(a).promise().then(b.resolve);
return b.promise};a.open_referent=function(c){a.current_referent&&c===a.current_referent.id?a.clear_current_referent():(a.highlighted_fragment_id=c,g(function(){A(c);B?b.replace():B=!0}))};var K=function(b,c){return f.perform_action(a.song.id,b,c).then(function(b){a.song=b})};a.can_perform=function(b){return l.has_permission(b,a.song)};var M={hide:function(){this.hiding_prompt_visible=!0}.bind(this),destroy:function(){a.delete_song()},view_annotation_engagement_data:function(){a.toggle_engagement_data()},
edit_spotify_annotations_for:function(){c.open("/songs/"+a.song.id+"/edit-fact-track")},view_lyrics_synchronization:function(){c.open("/songs/"+a.song.id+"/lyrics_sync")}},N={view_annotation_engagement_data:!0,edit_spotify_annotations_for:!0,view_lyrics_synchronization:!0};a.attempt_admin_action=function(b,c){if(N[b])return a.perform_admin_action(b,c);q.admin_action(_.partial(a.perform_admin_action,b,c),u.lookup("song.action_confirmations."+b)||u.t("song.action_confirmations.admin_default"))};a.perform_admin_action=
function(a,b){if(M[a])return M[a]();K(a,b)};a.$on("editorial_action_count_changed",function(a,b){if(b.commentable.referent_id){var c=e.get(b.commentable.referent_id),d=_.chain(c.annotations).filter(function(a){return!a.verified}).sum(function(a){return a.comment_count+a.proposed_edit_count});c.pending_editorial_actions_count=d}});a.$on("annotation_deleted",function(b,c,d){a.lyrics_ctrl.edit_blocked=!0;var f=e.get(c.referent_id);f._deleted=_(f.annotations).all(function(a){return a._deleted||a.new});
d.then(function(){f._deleted?a.lyrics_ctrl.remove_referent(c.referent_id):(delete f._deleted,h.refresh(f))}).catch(function(){delete f._deleted}).finally(function(){delete a.lyrics_ctrl.edit_blocked})});a.$watch("current_referent._deleted",function(b){b&&a.clear_current_referent()});a.$on("clear_current_referent",a.clear_current_referent);var y=_.once(function(){f.load_annotation_open_data(a.song.id).then(function(b){a.open_data=b})});a.toggle_engagement_data=function(){a.showing_annotation_engagement_data=
!a.showing_annotation_engagement_data;y()};a.$on("$locationChangeSuccess",function(){var c=Number(b.search().referent_id);if(!c){var e=b.hash().match(/^note-(\d+)$/);e&&(c=e[1])}e=b.path();c?(k.set_annotation_opened_from_permalink(c),C(a.reference_elements[c]).then(function(){A(c);b.replace()})):e===a.song.path?delete a.current_referent:(e=Number(e.slice(1)),z(e))});a.set_current_hover_and_digest=function(b){a.hover_referent_id=b;a.$digest()};a.$on("annotation_created",function(a,b){z(b.referent_id)});
a.$on("referent_created",function(b,c){e.register(c);_.extend(a.song,c.annotatable.client_timestamps);A(c.id)});this.save=function(b){this.saving=!0;var c=m.modify(a.song,b);return f.save(b).then(function(b){return angular.extend(a.song,b)}).catch(function(a){c();return d.reject(a)}).finally(function(){delete this.saving}.bind(this))};this.show_metadata_form=function(a,b){this.show_metadata_form_sections={};this.show_metadata_form_sections[a]=!0;k.track("Song Page Open Edit Form",{section:a,keyboard_shortcut:!!b})};
this.has_track_info=function(){var b=a.song,c=_.toArray(arguments);return _(c).map(function(a){return b[a]&&b[a].length}).compact().some()};this.has_song_relationships=function(){return _(a.song.song_relationships).map(function(a){return a.songs}).flatten().some()};this.close=function(){delete this.show_metadata_form_sections}.bind(this);this.open_referent_by_id=function(a){b.path("/"+a)};this.open_referent_via_preview_by_id=function(a){k.track("Tap Annotation Teaser",{annotation_id:a});v.open_referent_by_id(a)};
this.featured_annotation_in_view=_.once(function(a){a&&k.track("Featured Annotation In View")});this.reload_song=function(){this.edit_blocked=!0;return f.load_song(a.song.id).then(function(b){delete this.edit_blocked;_.extend(a.song,_.omit(b,"description","description_annotation"))}.bind(this))}.bind(this);l.user_signed_in&&r.subscribe(a.song.pusher_channel,"song-updated",function(b){a.song.updated_by_human_at<b.updated_by_human_at&&this.reload_song();a.song.lyrics_updated_at<b.lyrics_updated_at&&
a.lyrics_ctrl.refresh_lyrics()}.bind(this));a.open_first_verified_answer=function(b){var c=_.find(a.pinned_questions,function(a){return _.get(a,"answer.answer_source.artist.id")===b.id});c?t.scroll_to("question_"+c.id):t.scroll_to("questions")}}]);angular.module("genius").controller("VideoCtrl",["VideoService","PagedScrollableDataFactory",function(a,c){this.infinite_scroll_data=new c(a.index,"videos",{},2)}]);
angular.module("genius").directive("addAnnotation",[function(){return{restrict:"E",templateUrl:"add_annotation.html",scope:{start_new_community_referent:"&startNewCommunityReferent",start_new_referent:"&startNewReferent",creating_referent:"<creatingReferent",can_add_community_annotation:"<canAddCommunityAnnotation",can_add_pinned_annotation:"<canAddPinnedAnnotation",annotation:"<",song:"<",enable_waiting_class:"<enableWaitingClass"},controllerAs:"ctrl",controller:["Session",function(a){this.user_signed_in=
a.user_signed_in}]}}]);
angular.module("genius").directive("annotatableImage",["$document",function(a){return{templateUrl:"annotatable_image.html",restrict:"E",scope:{src:"@",song:"<",on_image_referent_creation_started:"&onImageReferentCreationStarted",on_image_referent_created:"&onImageReferentCreated",on_image_referent_creation_failed:"&onImageReferentCreationFailed",can_perform:"<canPerform",lyrics_anchorer:"<lyricsAnchorer"},controller:["$scope",function(c){this.create_image_referent=function(d){var b=this.getImage(),
g=a[0].createRange();g.selectNodeContents(b);g.precomputed_client_rect=g.getBoundingClientRect();c.creating_image_referent=!0;c.on_image_referent_creation_started({selection_range:g});delete c.image_referent_creation_failed;c.lyrics_anchorer.create_image_referent(b,g,d).then(function(a){delete c.creating_image_referent;c.on_image_referent_created({referent:a,selection_range:g});c.image_referent_created=!0},function(a){delete c.creating_image_referent;c.on_image_referent_creation_failed({error:a});
c.image_referent_creation_failed=!0}.bind(this))};this.set_current_hover_and_digest=function(a){c.hovering_over_image=a;c.$digest()}}],controllerAs:"ctrl",link:{pre:function(a,d,b,g){g.getImage=function(){return d.find("img")[0]}}}}}]);
angular.module("genius").directive("annotation",["Session","Reversible","AnnotationService","ReferentRegistry","ReferentService","$immediate","$q","Bowser","I18n",function(a,c,d,b,g,e,h,f,k){return{restrict:"E",templateUrl:"annotation.html",scope:{annotation:"=object",referent:"<referent",variants:"<",annotatable_title:"<annotatableTitle",on_seek_to_next_card:"&onSeekToNextCard"},controllerAs:"ctrl",controller:["$scope","$filter",function(e,h){this.hiding_comments=e.variants&&e.variants.hideComments;
this.user_signed_in=a.user_signed_in;this.is_android=f.android;this.truncation_length=600;this.content_is_truncated=e.variants&&e.variants.truncate_content&&e.annotation.body.html.length>this.truncation_length;this.integrate_comment=function(a){e.start_editing({integration_body:a.body})};this.update_editorial_action_count=function(){e.annotation.proposed_edit_count=this.edits_to_show_count();e.$emit("editorial_action_count_changed",{commentable:e.annotation})};e.$watch("annotation.comment_count",
this.update_editorial_action_count.bind(this));this.comment_removed=function(){return c.modify(e.annotation,{comment_count:e.annotation.comment_count-1})};this.edits_to_show_count=function(){return e.annotation.edits?e.annotation.edits.filter(function(a){return!a._deleted&&!a._merged}).length:e.annotation.proposed_edit_count};e.next_referent=function(a){return b.first(function(b){return"verified"===b.classification&&_.include(b.verified_annotator_ids,a.id)},{after_referent_id:e.annotation.referent_id})};
this.seek_to_next_card=function(a){e.on_seek_to_next_card({referent_id:e.next_referent(a).id})};this.has_more_by_user=function(a){return!!e.next_referent(a)};e.finish_editing=function(){if(!e.disable_saving_with){e.disable_saving_with="Saving";var a;a=_.get(e,"annotation._editing.proposed_edit")?d.propose_edit(e.annotation).then(function(a){e.annotation.edits=e.annotation.edits||[];e.annotation.edits.unshift(a);this.showing_edits=!0}.bind(this)):d.save(e.annotation,{referent:e.referent}).then(function(){g.refresh(e.referent)});
var b=c.modify(e.annotation,{"_editing._form_visible":!e.annotation.referent_id});a.then(e.dismiss_editing).catch(b).finally(function(){delete e.disable_saving_with})}}.bind(this);e.cancel_editing=function(){e.dismiss_editing();delete e.referent.temporary_classification;e.annotation.new&&_.remove(e.referent.annotations,e.annotation);if(!e.referent.annotations.length){var a=d.safe_delete(e.annotation);e.$emit("annotation_deleted",e.annotation,a)}};e.dismiss_editing=function(){delete e.annotation._editing;
e.$emit("annotation_loaded")};this.report_as_abusive=function(){this.reported_abuse=!0;return d.report_as_abusive(e.annotation.id).catch(function(){this.reported_abuse=!1}.bind(this))};this.should_show_comments=function(){return!e.rejecting&&!this.hiding_comments&&!e.annotation.new&&(e.annotation.body.html||e.annotation.needs_exegesis)};this.annotation_is_unwritten=function(){return e.annotation.new||e.annotation.needs_exegesis||!_.get(e,"annotation.body.html")};this.show_annotation_label=function(){var a=
_.get(e,"annotation._editing._form_visible");return e.annotation.community&&!a&&!this.annotation_is_being_created_by_someone_else()};this.annotation_is_being_created_by_someone_else=function(){return e.annotation.being_created&&(!a.user_signed_in||a.current_user.id!==e.annotation.created_by.id)};this.annotation_title=function(){var a=e.variants&&e.variants.isDescription,b="pending"===e.annotation.state?"Unreviewed ":"",c="accepted"!==e.annotation.state||a?"":"Genius ",d=k.t(a?"sle.prependable_to_name":
"annotation.singular_noun_capitalized",{type_name:h("modelHumanName")(e.referent.annotatable._type)}),f=h("truncateToBoundary")(e.annotatable_title,100);return b+c+d+(a?" \u201c"+f+"\u201d":"")}}],link:function(b){b.annotation_directive=b;b.can=function(c){return a.has_permission(c,b.annotation)};var f=function(){b.annotation.cosigned_by.push(a.current_user)},g=function(){_.remove(b.annotation.cosigned_by,function(b){return b.id===a.current_user.id})};b.toggle_cosign=function(a){a?f():g();b.saving_cosign=
!0;d.toggle_cosign(b.annotation.id,a).then(function(a){_.extend(b.annotation,a.annotation);_.extend(b.referent,a.referent)}).catch(a?g:f).finally(function(){delete b.saving_cosign})};b.showing_contributors=a.has_permission("accept",b.annotation);b.clear_votes=function(){b.showing_voters=!1;var a=c.modify(b,{"annotation.votes_total":0,"annotation.current_user_metadata.interactions.vote":void 0});d.clear_votes(b.annotation.id).catch(a)};b.toggle_voters=function(){b.showing_voters=!b.showing_voters};
b.$on("images_loaded",function(){b.loaded=!0;b.$emit("annotation_loaded")});b.toggle_contributors=function(){b.showing_contributors=!b.showing_contributors};b.toggle_ellipsis_menu=function(){b.showing_ellipsis_menu=!b.showing_ellipsis_menu};b.start_editing=function(a){a=a||{};b.annotation._editing=_.defaults(b.annotation._editing||{},{_form_visible:!0,_has_source:!!b.annotation.source,source:angular.copy(b.annotation.source||{}),proposed_edit:a.proposed_edit,html:b.annotation.body.html,markdown:b.annotation.body.markdown});
a.integration_body&&(b.annotation._editing.html=_.compact([b.annotation._editing.html,"PROPOSED SUGGESTION: "+a.integration_body.html]).join("<br>"),b.annotation._editing.markdown=_.compact([b.annotation._editing.markdown,"PROPOSED SUGGESTION: "+a.integration_body.markdown]).join("\n\n"));b.annotation.verified&&(b.referent.temporary_classification="verified")};b.accept=function(){d.accept(b.annotation,{referent:b.referent}).then(function(){b.context_updated_at=Date.now()})};b.focus_comment_textarea=
function(){b.$broadcast("focus_comment_textarea",b.annotation)};b.begin_rejection=function(){b.rejecting=!0;e(b.focus_comment_textarea.bind(b))};b.reject_with_comment=function(a){b.rejecting=!1;a=d.safe_reject(b.annotation,{comment:a,referent:b.referent}).then(function(){b.context_updated_at=Date.now()}).catch(function(){b.rejecting=!0;return h.reject()});b.$emit("annotation_deleted",b.annotation,a);return a};b.delete=function(){var a=d.safe_delete(b.annotation);b.$emit("annotation_deleted",b.annotation,
a)};b.toggle_pin_status=function(){b.toggling_pin_status||(b.toggling_pin_status=!0,d[b.can("pin_to_profile")?"pin_to_profile":"unpin_from_profile"](b.annotation.id).then(function(a){_.extend(b.annotation,a.annotation)}).finally(function(){delete b.toggling_pin_status}))};b.$on("vote_submitted",function(a,c,e){"down"===e&&"annotation"===c&&b.focus_comment_textarea()});b.$on("vote_saved",function(a){b.$broadcast("update_voters")})}}}]);
angular.module("genius").directive("annotationEdit",["Session","AnnotationService",function(a,c){return{restrict:"E",templateUrl:"annotation_edit.html",scope:{edit:"<object",before_html:"<beforeHtml",on_merge:"&onMerge",on_resolution:"&onResolution"},controllerAs:"ctrl",controller:["$scope",function(d){this.can_moderate=a.has_permission("moderate",d.edit);this.merge=function(){this.working=!0;d.edit._merged=!0;c.merge_edit(d.edit.id).then(function(a){_.extend(d.edit,a);d.on_merge({edit:d.edit});d.on_resolution()}).catch(function(){delete d.edit._merged}).finally(function(){this.working=
!1}.bind(this))};this.reject=function(){this.working=!0;d.edit._deleted=!0;c.reject_edit(d.edit.id).then(d.on_resolution).catch(function(){delete d.edit._deleted}).finally(function(){this.working=!1}.bind(this))}}]}}]);
angular.module("genius").directive("annotationEdits",["AnnotationService","ReferentService","ReferentRegistry",function(a,c,d){return{scope:{annotation:"<object",context_updated_at:"<contextUpdatedAt",on_resolution:"&onResolution"},restrict:"E",templateUrl:"annotation_edits.html",controllerAs:"ctrl",controller:["$scope",function(b){this.on_merge=function(a){_.extend(b.annotation,a.annotation_after);g()};var g=function(){this.loading_edits||(this.loading_edits=!0,a.proposed_edits(b.annotation.id).then(function(a){b.annotation.edits=
a}.bind(this)).finally(function(){delete this.loading_edits}.bind(this)))}.bind(this);b.$watch("annotation.edits.length",function(a,g){if(a||g){var f=d.peek(b.annotation.referent_id);c.refresh(f)}});b.$watch("context_updated_at",function(a){a&&g()});g()}]}}]);
angular.module("genius").directive("annotationFragment",["ReferentHelper","ReferentRegistry","$compile","$templateCache",function(a,c,d,b){return{restrict:"A",scope:!0,link:function(g,e,h){g.fragment_id=g.$eval(h.annotationFragment);g.image=g.$eval(h.image);var f=function(){g.referent.display_mode=a.display_mode_by_classification(g.referent.temporary_classification||g.referent.classification)};g.$watch("referent.classification",f);g.$watch("referent.temporary_classification",f);g.referent=c.register({id:g.fragment_id,
classification:g.classification,stub:!0,fragments:[],is_image:g.image,pending_editorial_actions_count:Number(h.pendingEditorialActionsCount)});g.reference_elements[g.referent.id]=g.reference_elements[g.referent.id]||e;h.verifiedAnnotatorIds&&(g.referent.verified_annotator_ids=_.map(h.verifiedAnnotatorIds.split(" "),Number));g.referent.classification=h.classification;g.referent.fragments.push(e.text());g.referent.fragment=_.uniq(g.referent.fragments).join("\n");g.referent.fragment_from_lyrics=g.referent.fragment;
g.open=function(){g.reference_elements[g.fragment_id]=e;g.open_referent(g.fragment_id)};g.$watch("referent.id",function(a){g.fragment_id=a||g.fragment_id});var k;g.$watch("referent._deleted",function(a){a&&!k?(k=(a=e.find("img")[0])?$("<annotatable-image>").attr({src:a.src,song:"song","on-image-referent-created":"lyrics_ctrl.on_image_referent_created(selection_range, referent);","on-image-referent-creation-failed":"lyrics_ctrl.on_image_referent_creation_failed(error)","on-image-referent-creation-started":"lyrics_ctrl.on_image_referent_creation_started(selection_range)",
"can-perform":"can_perform",lyrics_anchorer:"lyrics_anchorer"}):$("<span>").html(e.html()),e.before(k).detach(),d(k.parent())(g)):!a&&k&&(k.replaceWith(e),k=void 0)});g.$watch("referent.display_mode",function(a,b){e.removeClass("referent--"+b||"default");e.addClass("referent--"+a||"default")});g.$watchGroup(["highlighted_fragment_id","hover_referent_id"],function(){e.toggleClass("referent--highlighted",g.highlighted_fragment_id===g.fragment_id||g.hover_referent_id===g.fragment_id)});g.$watchGroup(["showing_annotation_engagement_data",
"open_data"],function(){g.showing_annotation_engagement_data&&g.open_data?e.attr("data-annotation-views",g.open_data[g.fragment_id]?g.open_data[g.fragment_id]:"N/A"):e.removeAttr("data-annotation-views")});g.can_perform("see_editorial_indicators")&&d(b.get("referent_editorial_indicator.html"))(g).insertBefore(e)}}}]);
angular.module("genius").directive("annotationHistory",function(){return{restrict:"E",templateUrl:"annotation_history.html",scope:{annotation:"<",onRevert:"&"},controllerAs:"ctrl",controller:["$scope","AnnotationService","Session",function(a,c,d){this.can_revert=d.has_permission("edit",a.annotation);c.load_versions(a.annotation.id).then(function(b){a.versions=b});this.revert_to=function(b){a.reverting_to=b;c.revert_to_version(a.annotation.id,b).then(function(b){_.extend(a.annotation,b);a.onRevert()}).finally(function(){delete a.reverting_to})}}]}});
angular.module("genius").directive("annotationPlaceholder",function(){return{restrict:"E",templateUrl:"annotation_placeholder.html",scope:{showCondition:"<",onDarkBackground:"<",noLabel:"<",placeholder_title:"<placeholderTitle"}}});
angular.module("genius").directive("annotationSidebar",["$immediate",function(a){var c={verified:"add_pinned_annotation_to",community:"add_community_annotation_to"};return{templateUrl:"annotation_sidebar.html",controllerAs:"ctrl",scope:!0,link:function(c,b,g,e){var h=function(){if(c.referent){var a=c.referent.precomputed_client_rect||c.reference_elements[c.referent.id][0].getBoundingClientRect();c.positioning_rect=a}};c.$watch(g.referent,function(b){(c.referent=b)?(delete c.lyrics_ctrl.selection_range,
a(h)):c.positioning_rect=null});c.$watch("lyrics_ctrl.selection_range",function(b){b&&!c.referent&&(delete e.referent_creation_failed,a(function(){var a=b.getBoundingClientRect();c.positioning_rect=a}))});c.$on("annotation_loaded",h)},controller:["$scope","Session","ReferentHelper",function(a,b,g){this.user_signed_in=b.user_signed_in;this.can_create_referent_from_selection=function(){return a.lyrics_ctrl.can_create_anchor_from_selection()};this.media_exists=function(){return a.can_perform&&a.can_perform("watch_fact_track")||
a.video_media&&a.video_media()&&(!a.media_player_video.state||!a.media_player_video.state.has_errored)||a.audio_media&&a.audio_media()&&(!a.media_player_audio.state||!a.media_player_audio.state.has_errored)};this.start_new_referent_annotation=function(b){this.creating_referent=!0;a.lyrics_ctrl.edit_blocked=!0;a.lyrics_ctrl.lyrics_anchorer.create_referent(a.lyrics_ctrl.selection_range,b).then(function(b){delete a.lyrics_ctrl.selection_range;delete a.lyrics_ctrl.edit_blocked;a.$emit("referent_created",
b);a.referent=b},function(){this.referent_creation_failed=!0}.bind(this)).finally(function(){delete this.creating_referent}.bind(this))};this.add_pinned_annotation=function(){var b=g.create_verified_annotation_placeholder(a.referent);a.referent.annotations.unshift(b)};this.add_community_annotation=function(){var b=g.create_community_annotation_placeholder(a.referent);a.referent.annotations.push(b)};this.can_create_annotation_type_on_referent=function(e){return!a.referent||_.any(a.referent.annotations,
"new")?!1:b.has_permission(c[e],a.referent)};this.can_create_community_annotation_on_referent=function(){return this.can_create_annotation_type_on_referent("community")&&!_.any(a.referent.annotations,"needs_exegesis")};a.$watch("referent.id",function(a,b){a&&b&&a.id===b.id||delete this.referent_creation_failed}.bind(this))}]}}]);
angular.module("genius").directive("applyAnnotationArrowClass",["$immediate","MutationObserver",function(a,c){return{restrict:"A",link:function(d,b){var g=new c(function(c){a(function(){for(var a=0;a<c.length;a++){var d=c[a];"style"===d.attributeName&&(d=d.target.getBoundingClientRect(),d=!!$(document.elementFromPoint(d.right+1,d.top-1)).closest(".annotation_sidebar_unit--verified").length,b.toggleClass("annotation_sidebar_arrow--verified",d))}},!0)});g.observe(b[0],{attributes:!0});d.$on("destroy",
g.disconnect.bind(g))}}}]);angular.module("genius").directive("articleActions",function(){return{restrict:"E",templateUrl:"article_actions.html",scope:{article:"<",showVoting:"<"},controllerAs:"ctrl",controller:["$scope",function(a){this.toggle_voters=function(){this.showing_voters=!this.showing_voters};a.$on("vote_saved",function(c){a.$broadcast("update_voters")})}]}});
angular.module("genius").directive("authenticationForm",["$window","Authentication",function(a,c){return{scope:{variants:"<?",on_cancel:"&onCancel",user_session:"=?userSession",include_sign_in:"<?signIn",include_social:"<?social",show_email_fields:"=?showEmail",header_text:"<headerText",preamble_text:"<preambleText",init_signing_in:"<signingIn"},templateUrl:"authentication_form.html",controllerAs:"ctrl",controller:["$scope",function(d){this.show_email_fields=d.show_email_fields;this.signing_in=d.init_signing_in;
d.user_session=d.user_session||{};this.submit=function(){this.saving||(this.saving=!0,c[this.signing_in?"sign_in":"sign_up"](d.user_session).then(function(){a.location.reload()},function(a){this.error=a;this.saving=!1}.bind(this)))};this.toggle_signup_signin=function(){this.show_email_fields=!0;this.signing_in=!this.signing_in;delete this.error}}]}}]);
angular.module("genius").directive("autoResizeIframe",function(){return{restrict:"A",link:function(a,c,d){var b;d.autoResizeIframe&&(b=a.$eval(d.autoResizeIframe));c.iFrameResize(b)}}});
angular.module("genius").directive("autocompleteTagsInput",["AlbumService","ArtistService","TagService","SongService",function(a,c,d,b){var g={album:{autocomplete:a.autocomplete,persistence_property:"name",display_property:"name_with_artist"},artist:{autocomplete:c.autocomplete,display_property:"name"},tag:{autocomplete:d.autocomplete,display_property:"name"},song:{autocomplete:b.autocomplete,persistence_property:"id",display_property:"full_title"}};return{restrict:"E",scope:{bindTo:"=",disabled:"<ngDisabled",
name:"@",inputClasses:"@",autocompleteModel:"@",requireExisting:"<",excludeIf:"&"},templateUrl:"autocomplete_tags_input.html",link:{pre:function(a){var b=g[a.autocompleteModel];a.max_results=10;a.display_property=b.display_property;a.autocomplete=function(c){return b.autocomplete(c).then(function(d){d=_.reject(d,function(b){return a.excludeIf({result:b})});if(a.requireExisting||_.some(d,function(b){return b[a.display_property].toLowerCase()===c.toLowerCase()}))return d;var g={_new:!0};g[b.display_property]=
c;b.persistence_property&&(g[b.persistence_property]=c);return d=_.take(d,a.max_results-1).concat(g)})}},post:function(a,b,c){a.placeholder=function(){return a.bindTo&&0===a.bindTo.length?c.placeholder:""}}}}}]);
angular.module("genius").directive("autocompleteWith",["ArtistService","UserService","CustomPerformanceRoleService",function(a,c,d){var b={delay:250,scroll:!1,matchSubset:!1,max:20,minChars:4,dataType:"json",selectFirst:!1,resultsClass:"autocomplete-results"},g={user:c,customPerformanceRole:d,artist:a};return{restrict:"A",require:"ngModel",link:function(a,c,d,k){var l=d.displayField;a=g[d.autocompleteWith];var n={};l&&(k.$formatters.push(function(a){return a?_.get(a[0],l,""):""}),k.$parsers.push(function(a){n[a]=
n[a]||_.set({},l,a);return n[a]}));d=_.extend({},b,a.autocomplete_options);var m=d.parse;d.parse=function(a){a=m(a);_.each(a,function(a){n[a.data[0]]=a.value});return a};c.autocomplete(a.autocomplete_api_endpoint,d).result(function(a,b){k.$setViewValue(b[0]);k.$render()})}}}]);
angular.module("genius").directive("textarea",["Autosize","$immediate",function(a,c){return{restrict:"E",link:function(d,b,g){if(!("autosizeOff"in g)){var e=function(){a.update(b)},h=function(){a(b)};if("autosizeInitOnFocus"in g)b.on("focus",h);else c(h,!1);b.on("change",e);d.$watch(g.ngModel,function(a){a!==b.val()&&c(e,!1)});g.ngShow&&d.$watch(g.ngShow,function(a){a&&c(e,!1)})}}}}]);
angular.module("genius").directive("brightcove",["$window","Bindings","Brightcove",function(a,c,d){var b=c.resolver({video:"<object",on_ready:"&onReady",on_firstplay:"&onFirstplay",player_name:"@playerName"});return{restrict:"A",link:function(c,e,h){if(e[0].constructor!==a.HTMLVideoElement)throw Error("The 'brightcove' directive can only be used as an attribute on a <video> element");var f=b(c,h);h=d[f.player_name+"_player_id"];if(!h)throw Error("The 'brightcove' slot is not configured!");e.attr({"data-video-id":f.video.provider_id,
"data-account":d.account_id,"data-player":h,"data-embed":"default",controls:!0});c.player=d.load_api(h).then(function(a){var b=e[0];return/(?:^|\s)vjs-tech(?:\s|$)/.test(b.className)?a.videojs(b):a.bc(b)}).then(function(a){a.ready(function(){c.$apply(f.on_ready)});a.on("firstplay",function(){c.$apply(f.on_firstplay)});return a})}}}]);
angular.module("genius").directive("chat",["$interval","AppConfig",function(a,c){return{restrict:"E",templateUrl:"chat.html",controllerAs:"ctrl",controller:["$scope","SessionConfig",function(d,b){this.enabled=b.chat_enabled;var g=[];this.open=function(){d.loaded&&(this.chat_open=!0,g=[],delete d.message)};d.canonical_domain=c.canonical_domain;var e=0,h=a(function(){d.message=g[e%g.length];d.$digest();e+=1},3E3,0,!1);d.$on("$destroy",function(){a.cancel(h)});var f=function(a){switch(a.data.type){case "summary":d.loaded=
!0;d.visitors_count=a.data.visitors_count;d.$digest();break;case "closing":this.chat_open=!1;d.$digest();break;case "new_message":case "notification":case "invitation":this.chat_open||g.push({text:a.data.message,type:a.data.type})}}.bind(this);window.addEventListener("message",function(a){a.origin.replace(/https?:\/\//i,"")===window.location.host&&f(a)})}]}}]);
angular.module("genius").directive("classForDuration",["$timeout",function(a){return{restrict:"A",link:function(c,d,b){_.forIn(c.$eval(b.classForDuration),function(b,c){b&&(d.addClass(c),a(function(){d.removeClass(c)},b))})}}}]);
angular.module("genius").directive("clickOutside",["$document",function(a){return{restrict:"A",link:function(c,d,b){var g=b.hasOwnProperty("suppressClickOutsideIfHandled"),e=function(a){g&&a.originalEvent.defaultPrevented||document.body.contains(a.target)&&(d[0].contains(a.target)||c.$apply(function(){c.$eval(b.clickOutside,{$event:a})}))},h=d.closest("[click-outside-target]").length?d.closest("[click-outside-target]"):a;h.on("click",e);c.$on("$destroy",function(){h.off("click",e)})}}}]);
angular.module("genius").directive("clickToLoad",function(){return{scope:{message:"@"},restrict:"E",transclude:!0,templateUrl:"click_to_load.html",link:function(a){a.load=function(){a.loading=!0}}}});angular.module("genius").directive("clippedBackgroundImage",function(){return{link:function(a,c,d){a.$watch(d.clippedBackgroundImage,function(a){a&&c.addClass("clipped_background_image").css("background-image",'url("'+a+'")')})}}});
angular.module("genius").directive("comment",["Session","CommentService",function(a,c){return{restrict:"E",templateUrl:"comment.html",scope:{comment:"<object",variants:"<"},require:"?^^annotation",controllerAs:"ctrl",controller:function(){},link:function(d,b,g,e){var h=function(a){var b=e?e.comment_removed():void 0;d.comment._deleted=!0;a.catch(function(){b&&b();delete d.comment._deleted})};d.destroy=function(){h(c.destroy(d.comment.id))};d.integrate=function(){e.integrate_comment(d.comment);d.perform_action("integrate")};
d.perform_action=function(a){h(c.change_state(d.comment.id,a))};d.can_perform=function(b){return a.has_permission(b,d.comment)};d.toggle_voters=function(){d.showing_voters=!d.showing_voters};d.$on("vote_saved",function(a){d.$broadcast("update_voters")})}}}]);
angular.module("genius").directive("commentForm",function(){return{restrict:"E",templateUrl:"comment_form.html",scope:{commentable:"<",onSave:"&",allowReasons:"<",saveText:"@",savingText:"@",textareaPlaceholder:"@",showFullFormByDefault:"@"},controllerAs:"ctrl",controller:["Session","$scope","Reversible",function(a,c,d){this.user_signed_in=a.user_signed_in;this.showing_full_form=(this.show_full_form_by_default=c.showFullFormByDefault)||!1;this.current_user=a.current_user;this.show_full_form=function(){this.showing_full_form=
!0};var b=function(){c.comment={_new:!0,author:a.current_user,body:{}}};b();this.body_is_required=function(){return!c.comment.reason||c.comment.reason.requires_body};this.save=function(){if(!this.saving){a.user_signed_in||(c.comment.anonymous_user={name:c.comment.name});var g=c.comment,e=d.modify(this,{showing_full_form:!1,saving:!1});b();c.form.$setPristine();c.onSave({comment:g}).catch(function(){c.comment=g;e()})}}}],link:function(a,c){a.$on("focus_comment_textarea",function(d,b){b===a.commentable&&
c.find('textarea[ng-model="comment.body.markdown"]').focus()})}}});
angular.module("genius").directive("comments",["CommentService","Session",function(a,c){return{scope:{type:"@",commentable:"<",onDarkBackground:"<",allowReasons:"<",prevent_compose:"<preventCompose",areSuggestions:"<",context_updated_at:"<contextUpdatedAt",show_all_comments:"<showAllComments",auto:"<"},restrict:"E",templateUrl:"comments.html",link:function(d){var b,g=!1,e=function(){b=0;d.comments=d.commentable.top_comment?[d.commentable.top_comment]:[];d.has_more_pages=d.commentable.comment_count>
d.comments.length};e();d.can_create_comment=function(){return c.has_permission("create_comment",d.commentable)&&!d.prevent_compose};d.showing_all_comments=function(){return g||d.show_all_comments};d.is_loading=!1;d.load_next_page=function(){!d.is_loading&&d.commentable.comment_count&&d.has_more_pages&&(g=!0,d.is_loading=!0,a.load(d.type,d.commentable.id,{text_format:"html,markdown",page:b+1,per_page:10}).then(function(a){d.comments=_.uniq(d.comments.concat(a.comments),"id");d.is_loading=!1;d.has_more_pages=
d.comments.length<a.total_count;b+=1}))};d.$watch("commentable.top_comment._deleted",function(a){a&&(d.commentable.top_comment=_.find(d.comments,_.negate(_.property("_deleted"))))});d.visible_comments=function(){return _.reject(d.comments,"_deleted")};d.$watch("context_updated_at",function(a){a&&(e(),d.showing_all_comments()&&d.load_next_page())});d.save_comment=function(b){d.comments.unshift(b);return a.create(d.type,d.commentable.id,b).then(function(){d.commentable.comment_count+=1;d.$emit("comment_count_changed",
{commentable:d.commentable})})}}}}]);angular.module("genius").directive("commentsPlaceholder",function(){return{restrict:"E",templateUrl:"comments_placeholder.html",scope:{}}});
angular.module("genius").directive("composeMessage",function(){return{restrict:"E",scope:{recipient:"<",on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"compose_message.html",controller:["$scope","MessageService","Session",function(a,c,d){var b;a.recipient&&(b=a.recipient.id);var g=function(){a.message={recipient_id:b,body:""};a.ctrl.form&&a.ctrl.form.$setPristine()};g();this.new_message=!a.message.recipient_id;this.current_user=d.current_user;this.markdown_preview_initialized=this.showing_markdown_preview=
!1;this.show_markdown_preview=function(){this.markdown_preview_initialized=this.showing_markdown_preview=!0};this.hide_markdown_preview=function(){this.showing_markdown_preview=!1};this.send=function(){a.sending=!0;c.create(a.message).then(function(b){g();a.sending=!1;a.on_sent({message:b})})}}],controllerAs:"ctrl"}});
angular.module("genius").directive("confirm",["$window",function(a){return{priority:-1,restrict:"A",scope:{message:"@confirm"},link:function(c,d){d.on("click",function(b){c.message&&!a.confirm(c.message)&&(b.stopImmediatePropagation(),b.preventDefault())})}}}]);
angular.module("genius").directive("conversationMessages",function(){return{templateUrl:"conversation_messages.html",scope:{conversation:"<",yields_is_dirty:"&yieldsIsDirty"},controller:["$scope","MessageService","ConversationService",function(a,c,d){var b=1,g;a.finished_paginating=!1;a.messages=[];this.message_sent=function(b){a.messages.push(b);a.conversation.latest_message=b;a.conversation.latest_message_preview=b.body_preview};this.should_paginate=function(){return!g&&!a.finished_paginating};
this.load_next_page=function(){g||(g=c.for_conversation(a.conversation.id,{page:b}).then(function(c){a.messages.unshift.apply(a.messages,c.reverse());g=null;1===b&&d.mark_read(a.conversation.id);++b;a.finished_paginating=0===c.length}))};this.load_next_page()}],controllerAs:"ctrl"}});
angular.module("genius").directive("conversationWithUser",["ConversationService",function(a){return{restrict:"E",scope:{user:"<"},template:'<conversation-messages conversation="conversation" ng-if="conversation"></conversation-messages>',controller:["$scope",function(c){a.with_user(c.user.id).then(function(a){c.conversation=a})}]}}]);
angular.module("genius").directive("conversations",["ConversationService","Attempt",function(a,c){return{restrict:"E",scope:{visible:"<",refresh_at:"<refreshAt",on_conversation_read:"&onConversationRead"},templateUrl:"conversations.html",controller:["$scope",function(d){d.attempt_close=c.close_form;var b,g,e,h=function(){b=Date.now();d.conversations=[];this.all_pages_loaded=!1;g=1}.bind(this);h();this.should_paginate=function(){return!!d.visible&&!this.all_pages_loaded&&!e};this.load_page=function(){e||
(e=a.latest({page:g}).then(function(a){d.conversations.push.apply(d.conversations,a);this.all_pages_loaded=!a.length;++g;e=null}.bind(this)))};d.$watchCollection(function(){return _.pluck(d.conversations,"latest_message.sent_at")},function(){d.conversations.sort(function(a,b){return b.latest_message.sent_at-a.latest_message.sent_at})});d.$watch("visible",function(a){a||d.refresh_at&&d.refresh_at>b&&h()});this.open=function(a){d.open_conversation_id=a;a=_.find(d.conversations,{id:a});var b=a.unread,
c=a.unread_messages_count;a.unread=!1;a.unread_messages_count=0;if(b)d.on_conversation_read({conversation:a,unread_messages_count:c})};this.close=function(){delete d.open_conversation_id}}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("copyToClipboard",["ZeroClipboard","$timeout",function(a,c){var d=function(a,d){var e=a.text();a.text(d);c(function(){a.text(e)},750)};return{restrict:"A",link:function(b,c,e){var h=new a(c[0]);h.on("ready",function(){h.on("copy",function(a){a.clipboardData.setData("text/plain",b.$eval(e.copyToClipboard))});h.on("aftercopy",function(){e.textToShowAfterCopy&&d(c,e.textToShowAfterCopy)})});h.on("error",function(){c.remove();h.destroy()})}}}]);
angular.module("genius").directive("copyValueToScope",[function(){return{restrict:"A",link:{pre:function(a,c,d){c=a.$eval(d.copyValueToScope);a[c.key]=c.value}}}}]);angular.module("genius").directive("cosigns",function(){return{restrict:"E",templateUrl:"cosigns.html"}});angular.module("genius").directive("delayedHref",["$window","$immediate",function(a,c){return{restrict:"A",link:function(d,b,g){var e=g.delayedHref;b.on("click",function(b){b.preventDefault();c(function(){a.location.href=e},!1)})}}}]);
angular.module("genius").directive("delimitedKeys",function(){return{scope:{key:"@delimitedKeys"},restrict:"A",require:"ngModel",link:function(a,c,d,b){var g={};a.$watch(d.ngModel,function(b){b&&b.forEach(function(b){g[b[a.key]]=b})});b.$formatters.push(function(b){return _.pluck(b,a.key).join(", ")});b.$parsers.push(function(b){return b.split(/\s?,\s/).map(function(b){return g[b]||_.set({},a.key,b)})})}}});
angular.module("genius").directive("descriptionReferent",function(){return{scope:{referent:"<object",variants:"<"},templateUrl:"description_annotation.html"}});angular.module("genius").directive("detectImageDiffs",["$immediate",function(a){return{link:function(c,d,b){a(function(){d.find("img").each(function(){var a=-1!==c.$eval(b.left).indexOf(this.src),e=-1!==c.$eval(b.right).indexOf(this.src);a&&!e&&this.classList.add("del");!a&&e&&this.classList.add("ins")})},!1)}}}]);
angular.module("genius").directive("dirtyable",["BeforeUnloadCheck",function(a){return{restrict:"A",require:"form",link:function(c,d,b,g){var e=function(){c.$apply(function(){g.$commitViewValue()});return g.$dirty};c.$eval(b.yieldsIsDirty,{is_dirty:function(){g.$commitViewValue();return g.$dirty}});a.add(e);c.$on("$destroy",function(){a.remove(e)})}}}]);
angular.module("genius").directive("displayUnlessCookie",["Cookies","DateTools",function(a,c){var d=function(b,d){a.put(b,1,{expires:c.days_to_ms(d),path:"/"})};return{transclude:!0,scope:{name:"@",expiresInDays:"<",setCookieOnDisplay:"<"},template:'<ng-transclude ng-if="!hidden"></ng-transclude>',link:function(b){b.hidden=a.get(b.name);b.setCookieOnDisplay&&!a.get(b.name)&&d(b.name,b.expiresInDays)},controller:["$scope",function(a){this.set_cookie_and_close=function(){d(a.name,a.expiresInDays);a.hidden=
!0}}]}}]);angular.module("genius").directive("dockedMediaPlayer",function(){return{templateUrl:"docked_media_player.html"}});
angular.module("genius").directive("editableMarkdown",["$immediate","Filepicker","Autosize",function(a,c,d){return{restrict:"E",replace:!0,templateUrl:"editable_markdown.html",scope:{html:"=",markdown:"=",is_required:"<?isRequired",placeholder:"@"},controller:function(){var a=new c;this.pick_image=function(){a.pick_and_store().then(function(a){this.insert_at_markdown_cursor(a)}.bind(this))}},controllerAs:"ctrl",link:function(b,c){b.editable=b;b.resize_textarea=function(){b.$evalAsync(function(){var b=
c.find("textarea");d(b);a(b.focus.bind(b),!1)})}}}}]);
angular.module("genius").directive("embedly",["$document","getScript","querystring",function(a,c,d){var b=/^https?:\/\//i,g=function(a){return a.find("a").filter(function(){return b.test($.trim($(this).text()))})},e=_.template('<blockquote class="twitter-tweet"><a href="<%- tweet_url %>"></a></blockquote>'),h=_.template("<div class='embedly_preview u-vertical_margins'><div class='gray_container'><% if (embed.thumbnail_url) { %><div class='embedly_preview-thumb'><img src='<%- embed.thumbnail_url %>' style='<%- embed.style %>'/></div><% } %><div class='embedly_preview-text'><a href='<%- embed.original_url %>' class='embedly_preview-title'><%- embed.title %></a><% if (embed.provider_name) { %><a href='<%- embed.provider_url %>' class='embedly_preview-provider'><%- embed.provider_name %></a><% } %><% if (embed.description) { %><div class='embedly_preview-description'><%- embed.description %></div><% } %></div></div></div>"),f=
_.template('<div class="embedly_preview u-vertical_margins embedly_preview--<%- embed.provider_name %>"><%= embed.html %></div>'),k=_.template('<blockquote class="rg_standalone_container" data-src="//'+CANONICAL_DOMAIN+'/annotations/<%- annotation_id %>/standalone_embed"></blockquote>'),l=_.template('<div class="embedly_preview u-vertical_margins embedly_preview--YouTube"><iframe type="text/html" width="100%" height="480" src="https://www.youtube.com/embed/<%- video_id %>?origin='+encodeURIComponent(a[0].location.protocol+
"//"+CANONICAL_DOMAIN)+'&showinfo=0&modestbranding=1&start=<%- start %>" frameborder="0"></iframe></div>'),n=function(a){var b=$(a||".embedly:visible");g(b).each(function(){var a=$(this);if(app.youtubeURLre.test(this.href)){var b=new URL(this.href),g=d.parse(b.search.slice(1)),n=d.parse(b.hash.slice(1)),n=g.t||n.t||0;/\d+m|\d+s|\d+m\d+s/.test(n)&&(n=_(n.match(/^(\d+m)?(\d+s)?$/)).slice(1,3).values().map(function(a){return a?parseInt(a):0}).thru(function(a){return 60*a[0]+a[1]}).value());b=g.v||b.pathname.slice(1);
a.replaceWith(l({video_id:b,start:n}))}else if(app.twitterURLre.test(this.href))a.replaceWith(e({tweet_url:this.href})),c("//platform.twitter.com/widgets.js",{cache:!0});else if(app.rgURLre.test(this.href)&&this.href===a.text()&&!a.closest(".cont-annotations.act-standalone_embed").length)b=app.rgURLre.exec(this.href).pop(),a.replaceWith(k({annotation_id:b})),c("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",{cache:!0});else if(this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))a.embedly({addImageStyles:!1,
className:"embedly_preview embedly_preview--vidyard_embed_bug_workaround",secure:!0,query:{secure:"true"}});else if(app.embedlyURLre.test(this.href))a.embedly({addImageStyles:!1,className:"embedly_preview",secure:!0,query:{luxe:!MOBILE_DEVICE,secure:"true"},display:function(b){var c=b.html;/soundcloud\.com/.test(c)?(b.html=c.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),b.height=165):"video"==b.type?a.replaceWith(f({embed:b})):"photo"!==b.type&&"rich"!==b.type&&
a.replaceWith(h({embed:b}));b.display()}});else return;a.text("Loading embed...")});m(a)},m=function(a){a=$(a||".embedly_pro:visible");g(a).each(function(){if(app.embedlyURLre.test(this.href))return!0;var a=$(this);a.embedly({secure:!0,query:{secure:"true"},display:function(b){b.description&&_.trim(a.parent().text())===_.trim(a.text())?a.replaceWith(h({embed:b})):a.text(b.title)}});a.text("Loading embed...")})};return{restrict:"A",link:function(a,b,c){a.$watch(c.embedly||c.ngBindHtml,function(a){a&&
n(b)})}}}]);
!function(a,c){function d(a){return function(){var c={method:a},e=Array.prototype.slice.call(arguments);/^get/.test(a)?(b.assert(0<e.length,"Get methods require a callback."),e.unshift(c)):(/^set/.test(a)&&(b.assert(0!==e.length,"Set methods require a value."),c.value=e[0]),e=[c]);this.send.apply(this,e)}}var b={DEBUG:!1,VERSION:"0.0.10",CONTEXT:"player.js"};b.POST_MESSAGE=!!a.postMessage;b.ENABLE_CONTEXT=!1;b.origin=function(b){return"//"===b.substr(0,2)&&(b=a.location.protocol+b),b.split("/").slice(0,3).join("/")};
b.addEvent=function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)};b.log=function(){b.log.history=b.log.history||[];b.log.history.push(arguments);a.console&&b.DEBUG&&a.console.log(Array.prototype.slice.call(arguments))};b.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};b.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)};b.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};
b.isNone=function(a){return null===a||void 0===a};b.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.indexOf=function(a,b){if(null==a)return-1;var c=0,e=a.length;if(Array.prototype.IndexOf&&a.indexOf===Array.prototype.IndexOf)return a.indexOf(b);for(;e>c;c++)if(a[c]===b)return c;return-1};b.assert=function(a,b){if(!a)throw b||"Player.js Assert Failed";};b.Keeper=function(){this.init()};b.Keeper.prototype.init=function(){this.data={}};b.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,
function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})};b.Keeper.prototype.has=function(a,c){if(!this.data.hasOwnProperty(a))return!1;if(b.isNone(c))return!0;for(var e=this.data[a],d=0;d<e.length;d++)if(e[d].id===c)return!0;return!1};b.Keeper.prototype.add=function(a,b,c,e,d){a={id:a,event:b,cb:c,ctx:e,one:d};this.has(b)?this.data[b].push(a):this.data[b]=[a]};b.Keeper.prototype.execute=function(a,c,e,d){if(!this.has(a,c))return!1;for(var g=[],h=[],r=0;r<this.data[a].length;r++){var u=
this.data[a][r];b.isNone(c)||!b.isNone(c)&&u.id===c?(h.push({cb:u.cb,ctx:u.ctx?u.ctx:d,data:e}),!1===u.one&&g.push(u)):g.push(u)}0===g.length?delete this.data[a]:this.data[a]=g;for(a=0;a<h.length;a++)c=h[a],c.cb.call(c.ctx,c.data)};b.Keeper.prototype.on=function(a,b,c,e){this.add(a,b,c,e,!1)};b.Keeper.prototype.one=function(a,b,c,e){this.add(a,b,c,e,!0)};b.Keeper.prototype.off=function(a,c){var e=[];if(!this.data.hasOwnProperty(a))return e;for(var d=[],g=0;g<this.data[a].length;g++){var h=this.data[a][g];
b.isNone(c)||h.cb===c?b.isNone(h.id)||e.push(h.id):d.push(h)}return 0===d.length?delete this.data[a]:this.data[a]=d,e};b.Player=function(a,c){return this instanceof b.Player?void this.init(a,c):new b.Player(a,c)};b.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"};b.EVENTS.all=function(){var a=[],c;for(c in b.EVENTS)b.has(b.EVENTS,c)&&b.isString(b.EVENTS[c])&&a.push(b.EVENTS[c]);return a};b.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",
MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"};b.METHODS.all=function(){var a=[],c;for(c in b.METHODS)b.has(b.METHODS,c)&&b.isString(b.METHODS[c])&&a.push(b.METHODS[c]);return a};b.READIED=[];b.Player.prototype.init=function(e){var d=this;b.isString(e)&&
(e=c.getElementById(e));this.elem=e;this.origin=b.origin(e.src);this.keeper=new b.Keeper;this.isReady=!1;this.queue=[];this.events=b.EVENTS.all();this.methods=b.METHODS.all();b.POST_MESSAGE?b.addEvent(a,"message",function(a){d.receive(a)}):b.log("Post Message is not Available.");-1<b.indexOf(b.READIED,e.src)?d.loaded=!0:this.elem.onload=function(){d.loaded=!0}};b.Player.prototype.send=function(a,c,e){if(a.context=b.CONTEXT,a.version=b.VERSION,c){var d=this.keeper.getUUID();a.listener=d;this.keeper.one(d,
a.method,c,e)}return this.isReady||"ready"===a.value?(b.log("Player.send",a,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(a),this.origin),!0):(b.log("Player.queue",a),this.queue.push(a),!1)};b.Player.prototype.receive=function(a){if(b.log("Player.receive",a),a.origin!==this.origin)return!1;var c;try{c=JSON.parse(a.data)}catch(e){return!1}return b.ENABLE_CONTEXT&&c.context!==b.CONTEXT?!1:("ready"===c.event&&c.value&&c.value.src===this.elem.src&&this.ready(c),void(this.keeper.has(c.event,
c.listener)&&this.keeper.execute(c.event,c.listener,c.value,this)))};b.Player.prototype.ready=function(a){if(!0===this.isReady)return!1;a.value.events&&(this.events=a.value.events);a.value.methods&&(this.methods=a.value.methods);this.loaded=this.isReady=!0;for(var c=0;c<this.queue.length;c++){var e=this.queue[c];b.log("Player.dequeue",e);"ready"===a.event&&this.keeper.execute(e.event,e.listener,!0,this);this.send(e)}this.queue=[]};b.Player.prototype.on=function(a,b,c){var e=this.keeper.getUUID();
return"ready"===a?this.keeper.one(e,a,b,c):this.keeper.on(e,a,b,c),this.send({method:"addEventListener",value:a,listener:e}),!0};b.Player.prototype.off=function(a,c){var e=this.keeper.off(a,c);if(b.log("Player.off",e),0<e.length)for(var d in e)return this.send({method:"removeEventListener",value:a,listener:e[d]}),!0;return!1};b.Player.prototype.supports=function(a,c){b.assert(-1<b.indexOf(["method","event"],a),'evtOrMethod needs to be either "event" or "method" got '+a);c=b.isArray(c)?c:[c];for(var e=
"event"===a?this.events:this.methods,d=0;d<c.length;d++)if(-1===b.indexOf(e,c[d]))return!1;return!0};for(var g=0,e=b.METHODS.all().length;e>g;g++){var h=b.METHODS.all()[g];b.Player.prototype.hasOwnProperty(h)||(b.Player.prototype[h]=d(h))}a.playerjs=b;b.addEvent(a,"message",function(a){var c;try{c=JSON.parse(a.data)}catch(e){return!1}return b.ENABLE_CONTEXT&&c.context!==b.CONTEXT?!1:void("ready"===c.event&&c.value&&c.value.src&&b.READIED.push(c.value.src))});b.Receiver=function(a,b){this.init(a,b)};
b.Receiver.prototype.init=function(e,d){var g=this;this.isReady=!1;this.origin=b.origin(c.referrer);this.methods={};this.supported={events:e?e:b.EVENTS.all(),methods:d?d:b.METHODS.all()};this.eventListeners={};(this.reject=!(a.self!==a.top&&b.POST_MESSAGE))||b.addEvent(a,"message",function(a){g.receive(a)})};b.Receiver.prototype.receive=function(c){if(c.origin!==this.origin)return!1;var e={};if(b.isObject(c.data))e=c.data;else try{e=a.JSON.parse(c.data)}catch(d){b.log("JSON Parse Error",d)}if((b.log("Receiver.receive",
c,e),!e.method)||b.ENABLE_CONTEXT&&e.context!==b.CONTEXT)return!1;if(-1===b.indexOf(b.METHODS.all(),e.method))return this.emit("error",{code:2,msg:'Invalid Method "'+e.method+'"'}),!1;c=b.isNone(e.listener)?null:e.listener;"addEventListener"===e.method?(this.eventListeners.hasOwnProperty(e.value)?-1===b.indexOf(this.eventListeners[e.value],c)&&this.eventListeners[e.value].push(c):this.eventListeners[e.value]=[c],"ready"===e.value&&this.isReady&&this.ready()):"removeEventListener"===e.method?this.eventListeners.hasOwnProperty(e.value)&&
(c=b.indexOf(this.eventListeners[e.value],c),-1<c&&this.eventListeners[e.value].splice(c,1),0===this.eventListeners[e.value].length&&delete this.eventListeners[e.value]):this.get(e.method,e.value,c)};b.Receiver.prototype.get=function(a,b,c){var e=this;if(!this.methods.hasOwnProperty(a))return this.emit("error",{code:3,msg:'Method Not Supported"'+a+'"'}),!1;var d=this.methods[a];"get"===a.substr(0,3)?d.call(this,function(b){e.send(a,b,c)}):d.call(this,b)};b.Receiver.prototype.on=function(a,b){this.methods[a]=
b};b.Receiver.prototype.send=function(c,e,d){if(b.log("Receiver.send",c,e,d),this.reject)return b.log("Receiver.send.reject",c,e,d),!1;c={context:b.CONTEXT,version:b.VERSION,event:c};b.isNone(e)||(c.value=e);b.isNone(d)||(c.listener=d);e=JSON.stringify(c);a.parent.postMessage(e,""===this.origin?"*":this.origin)};b.Receiver.prototype.emit=function(a,c){if(!this.eventListeners.hasOwnProperty(a))return!1;b.log("Instance.emit",a,c,this.eventListeners[a]);for(var e=0;e<this.eventListeners[a].length;e++)this.send(a,
c,this.eventListeners[a][e]);return!0};b.Receiver.prototype.ready=function(){b.log("Receiver.ready");this.isReady=!0;var c={src:a.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",c)||this.send("ready",c)};b.HTML5Adapter=function(a){return this instanceof b.HTML5Adapter?void this.init(a):new b.HTML5Adapter(a)};b.HTML5Adapter.prototype.init=function(a){b.assert(a,"playerjs.VideoJSReceiver requires a video element");var c=this.receiver=new b.Receiver;
a.addEventListener("playing",function(){c.emit("play")});a.addEventListener("pause",function(){c.emit("pause")});a.addEventListener("ended",function(){c.emit("ended")});a.addEventListener("timeupdate",function(){c.emit("timeupdate",{seconds:a.currentTime,duration:a.duration})});a.addEventListener("progress",function(){c.emit("buffered",{percent:a.buffered.length})});c.on("play",function(){a.play()});c.on("pause",function(){a.pause()});c.on("getPaused",function(b){b(a.paused)});c.on("getCurrentTime",
function(b){b(a.currentTime)});c.on("setCurrentTime",function(b){a.currentTime=b});c.on("getDuration",function(b){b(a.duration)});c.on("getVolume",function(b){b(100*a.volume)});c.on("setVolume",function(b){a.volume=b/100});c.on("mute",function(){a.muted=!0});c.on("unmute",function(){a.muted=!1});c.on("getMuted",function(b){b(a.muted)});c.on("getLoop",function(b){b(a.loop)});c.on("setLoop",function(b){a.loop=b})};b.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};b.JWPlayerAdapter=function(a){return this instanceof
b.JWPlayerAdapter?void this.init(a):new b.JWPlayerAdapter(a)};b.JWPlayerAdapter.prototype.init=function(a){b.assert(a,"playerjs.JWPlayerAdapter requires a player object");var c=this.receiver=new b.Receiver;this.looped=!1;a.onPause(function(){c.emit("pause")});a.onPlay(function(){c.emit("play")});a.onTime(function(a){var b=a.position;a=a.duration;if(!b||!a)return!1;c.emit("timeupdate",{seconds:b,duration:a})});var e=this;a.onComplete(function(){!0===e.looped?a.seek(0):c.emit("ended")});a.onError(function(){c.emit("error")});
c.on("play",function(){a.play(!0)});c.on("pause",function(){a.pause(!0)});c.on("getPaused",function(b){b("PLAYING"!==a.getState())});c.on("getCurrentTime",function(b){b(a.getPosition())});c.on("setCurrentTime",function(b){a.seek(b)});c.on("getDuration",function(b){b(a.getDuration())});c.on("getVolume",function(b){b(a.getVolume())});c.on("setVolume",function(b){a.setVolume(b)});c.on("mute",function(){a.setMute(!0)});c.on("unmute",function(){a.setMute(!1)});c.on("getMuted",function(b){b(!0===a.getMute())});
c.on("getLoop",function(a){a(this.looped)},this);c.on("setLoop",function(a){this.looped=a},this)};b.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};b.MockAdapter=function(){return this instanceof b.MockAdapter?void this.init():new b.MockAdapter};b.MockAdapter.prototype.init=function(){var a={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){a.interval=setInterval(function(){a.currentTime+=.25;a.timeupdate({seconds:a.currentTime,
duration:a.duration})},250);a.playing=!0},pause:function(){clearInterval(a.interval);a.playing=!1}},c=this.receiver=new b.Receiver;c.on("play",function(){var b=this;a.play();this.emit("play");a.timeupdate=function(a){b.emit("timeupdate",a)}});c.on("pause",function(){a.pause();this.emit("pause")});c.on("getPaused",function(b){b(!a.playing)});c.on("getCurrentTime",function(b){b(a.currentTime)});c.on("setCurrentTime",function(b){a.currentTime=b});c.on("getDuration",function(b){b(a.duration)});c.on("getVolume",
function(b){b(a.volume)});c.on("setVolume",function(b){a.volume=b});c.on("mute",function(){a.mute=!0});c.on("unmute",function(){a.mute=!1});c.on("getMuted",function(b){b(a.mute)});c.on("getLoop",function(b){b(a.loop)});c.on("setLoop",function(b){a.loop=b})};b.MockAdapter.prototype.ready=function(){this.receiver.ready()};b.SublimeAdapter=function(a){return this instanceof b.SublimeAdapter?void this.init(a):new b.SublimeAdapter(a)};b.SublimeAdapter.prototype.events=[b.EVENTS.READY,b.EVENTS.PLAY,b.EVENTS.PAUSE,
b.EVENTS.ENDED,b.EVENTS.TIMEUPDATE,b.EVENTS.ERROR];b.SublimeAdapter.prototype.methods=[b.METHODS.PLAY,b.METHODS.PAUSE,b.METHODS.GETDURATION,b.METHODS.SETCURRENTTIME,b.METHODS.GETCURRENTTIME,b.METHODS.REMOVEEVENTLISTENER,b.METHODS.ADDEVENTLISTENER];b.SublimeAdapter.prototype.init=function(a){b.assert(a,"playerjs.SublimeAdapter requires a player object");var c=this.receiver=new b.Receiver(this.events,this.methods);a.on("pause",function(){c.emit("pause")});a.on("play",function(){c.emit("play")});a.on("timeUpdate",
function(a,b){var e=a.duration();if(!b||!e)return!1;c.emit("timeupdate",{seconds:b,duration:e})});a.on("end",function(){c.emit("ended")});c.on("play",function(){a.play()});c.on("pause",function(){a.pause()});c.on("getCurrentTime",function(b){b(a.playbackTime())});c.on("setCurrentTime",function(b){a.seekTo(b)});c.on("getDuration",function(b){b(a.duration())})};b.SublimeAdapter.prototype.ready=function(){this.receiver.ready()};b.VideoJSAdapter=function(a){return this instanceof b.VideoJSAdapter?void this.init(a):
new b.VideoJSAdapter(a)};b.VideoJSAdapter.prototype.init=function(a){b.assert(a,"playerjs.VideoJSReceiver requires a player object");var c=this.receiver=new b.Receiver;a.on("pause",function(){c.emit("pause")});a.on("play",function(){c.emit("play")});a.on("timeupdate",function(){var b=a.currentTime(),e=a.duration();if(!b||!e)return!1;c.emit("timeupdate",{seconds:b,duration:e})});a.on("ended",function(){c.emit("ended")});a.on("error",function(){c.emit("error")});c.on("play",function(){a.play()});c.on("pause",
function(){a.pause()});c.on("getPaused",function(b){b(a.paused())});c.on("getCurrentTime",function(b){b(a.currentTime())});c.on("setCurrentTime",function(b){a.currentTime(b)});c.on("getDuration",function(b){b(a.duration())});c.on("getVolume",function(b){b(100*a.volume())});c.on("setVolume",function(b){a.volume(b/100)});c.on("mute",function(){a.volume(0)});c.on("unmute",function(){a.volume(1)});c.on("getMuted",function(b){b(0===a.volume())});c.on("getLoop",function(b){b(a.loop())});c.on("setLoop",
function(b){a.loop(b)})};b.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document);
angular.module("genius").directive("embedlyPlayer",["$sce","$immediate","$q","Tracking","PlayerJS",function(a,c,d,b,g){return{restrict:"E",templateUrl:"embedly_player.html",transclude:!0,scope:{yieldsApi:"&",yieldsState:"&",media:"<",autoplay:"<?",controls:"<?",playerClass:"@"},link:function(e,h){var f=function(){n.has_errored=!0},k,l,n,m=function(){var a=g.Player(h.find("iframe")[0]);a.on("ready",function(){a.setVolume(100);k.resolve(a);e.$apply(function(){n.is_loaded=!0;n.is_loading=!1})});a.on("play",
function(){b.track("play_song_media",{playing:!0,first_interaction:!1});e.$apply(function(){n.is_playing=!0})});a.on("pause",function(){e.$apply(function(){n.is_playing=!1})});a.on("ended",function(){e.$apply(function(){n.is_playing=!1})});a.on("timeupdate",_.throttle(function(a){e.$apply(function(){n.percentage=a.seconds/a.duration;n.time_remaining=1E3*(a.duration-a.seconds)})},1E3));a.on("error",function(){e.$apply(f)})};e.load_media=function(){n.is_loading||n.is_loaded||(b.track("play_song_media",
{playing:!1,first_interaction:!0}),n.is_loading=!0,e.is_initialized=!0,c(m,!1))};var q={load_media:e.load_media,playpause:function(){n.is_playing?this.pause():this.play()},play:function(){l.then(function(a){a.play()})},pause:function(){l.then(function(a){a.pause()})},seek_to:function(a){l.then(function(b){b.getDuration(function(c){b.setCurrentTime(c*a)})})}};e.yieldsApi({api:q});var r={youtube:{youtube_controls:e.controls?2:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_rel:0,youtube_iv_load_policy:3,
youtube_start:e.media?e.media.start:void 0,youtube_fs:0}}[e.media?e.media.provider:void 0],u=function(a){var b=_.extend({},r,a);return d.resolve($.embedly.oembed(e.media.url,{query:b})).then(function(a){a=a[0];return"youtube"===e.media.provider&&!a.author_name||a.invalid||"error"===a.type||"link"===a.type?b.force?d.reject(Error("No embed found")):u({force:!0}):a})};e.$watch("state.is_playing",function(a){a&&(e.state.has_played=!0)});e.$watch("media.url",function(b){delete e.is_initialized;k=d.defer();
l=k.promise;n=e.state={};e.yieldsState({state:n});e.autoplay&&q.play();b?(delete e.media_html,u().then(function(b){n.placeholder=b.thumbnail_url;n.is_ready=!0;e.media_html=a.trustAsHtml(b.html)}).catch(f)):n.is_ready=!0});e.$on("$destroy",function(){e.yieldsState({state:void 0})})}}}]);
angular.module("genius").directive("emptyCopyContent",["$immediate","$window","$document",function(a,c,d){return{link:function(b,g,e){g.on("copy",function(){var g=b.$eval(e.emptyCopyContent),f=c.getSelection();if(!f.toString()){var k=$("<div>").html(g).css({position:"absolute",height:0,width:0}).appendTo(d.prop("body"));f.removeAllRanges();g=d[0].createRange();g.selectNodeContents(k[0]);f.addRange(g);a(function(){k.remove()},!1)}})}}}]);
angular.module("genius").directive("expandableAccordionSection",function(){return{restrict:"E",scope:{label:"@",expanded:"=",shortcut:"@"},templateUrl:"expandable_accordion_section.html",replace:!0,transclude:!0,link:function(a){a.expand_content=function(){a.expanded=!a.expanded}}}});
angular.module("genius").directive("expandableList",function(){return{restrict:"E",scope:{collection:"<",template:"<",limit:"<",label:"@"},templateUrl:function(a,c){return c.template+".html"},controllerAs:"ctrl",controller:["$scope",function(a){this.more_to_show=function(){return a.collection.length>a.limit};this.show_more=function(){delete a.limit}}]}});
angular.module("genius").directive("exportsFormApi",["$immediate",function(a){return{restrct:"A",require:"form",link:function(c,d,b,g){c.$eval(b.exportsFormApi,{api:_.extend(g,{submit:function(){a(function(){g.$commitViewValue();d.triggerHandler("submit")},!1)}})})}}}]);
angular.module("genius").directive("factTrackPrompt",["SpotifyAnnotationService","SpotifyRemote","Tracking",function(a,c,d){return{restrict:"E",templateUrl:"fact_track_prompt.html",controllerAs:"ctrl",controller:["$scope","$timeout","AppConfig",function(b,g,e){b.track_uuid=b.song.spotify_uuid;b.fact_track_launch_article_url=e.fact_track_launch_article_url;var h=!1,f=_.once(function(){a.load_song(b.song.id).then(function(a){a=a.data;b.spotify_song=a.spotify_song;b.annotations=a.spotify_annotations});
c.$on("ready",function(){h=!0;b.errored=!1});c.$on("error",function(){d.track("Errored Web Fact Track");b.error="Your Spotify app is beaming us messages of distress"})});this.is_ready_for_playing=function(){return h&&!b.errored&&b.spotify_song};this.close_fact_track=function(){this.player_api&&this.player_api.pause();this.opened=!1};this.open_fact_track=function(){d.track("Played Web Fact Track");f();this.opened=!0;g(function(){b.error=b.error||"We seem to be having some trouble"},5E3)}}]}}]);
angular.module("genius").directive("factTrackSimulator",function(){return{restrict:"E",templateUrl:"fact_track_simulator.html",scope:{annotations:"<",track_uuid:"<trackUuid",time:"=?",spotify_song:"<song",yields_api:"&yieldsApi",variants:"<",current_annotation_index:"=?currentAnnotationIndex",annotation_clicked:"&annotationClicked",autoplay:"<",default_playback_type:"@defaultPlaybackType"},controllerAs:"ctrl",controller:["$scope","SpotifyPlayback","WebAudioPlayback",function(a,c,d){this.initialize_playback=
function(b){var g=a.time,f=a.playing;b=b||{};f&&this.playback.api.pause();this.playback="web_audio"===b.type?new d(a.spotify_song):new c({spotify_uuid:a.track_uuid,duration:a.spotify_song.metadata.duration_ms});this.clear_playback_listener&&this.clear_playback_listener();this.clear_playback_listener=this.playback.$on("state",function(b,c){a.time=c.position;a.playing=c.is_playing});this.playback.api.seek_to_position(g)};this.annotation_percentage=function(){if(!a.current_annotation)return 0;var b=
a.annotations[a.current_annotation_index+1],b=b?b.timestamp_in_ms:a.duration;return(b-a.time)/(b-a.current_annotation.timestamp_in_ms)};this.seek_to=function(a){this.playback.api.seek_to_position(a)};this.seek_to_percentage=function(a){this.playback.api.seek_to(a)};this.toggle_play_pause=function(){this.playback.api.playpause()};this.card_clicked=function(){a.annotation_clicked({current_annotation:a.current_annotation})};var b={playback_type:function(){return this.playback.type}.bind(this),set_playback_options:function(a){this.initialize_playback(a)}.bind(this),
other_track_playing:function(){},use_current_track:function(){},pause:function(){a.is_playing&&a.ctrl.toggle_play_pause()},seek_to:function(b,c){c=c||{};a.ctrl.seek_to(b);c.play&&this.playback.api.play()}.bind(this)};a.time=0;a.duration=a.spotify_song.metadata.duration_ms;a.album=a.spotify_song.metadata.album;a.yields_api({api:b});this.initialize_playback({type:a.default_playback_type||(a.spotify_song.track_url?"web_audio":"spotify")});a.autoplay&&(this.playback.api.seek_to_position(0),this.playback.api.play());
var g={content_type:"intro",timestamp_in_ms:0};a.$watch("time",function(){var b=a.annotations.filter(function(b){return b.timestamp_in_ms<=a.time});a.current_annotation_index=b.length-1;a.current_annotation=a.annotations[a.current_annotation_index]||g})}]}});
angular.module("genius").directive("filepickerInput",["Filepicker",function(a){return{link:function(c,d,b){var g=new a({services:"COMPUTER"});d.on("click",function(){c.$eval(b.onFilepickerError,{error:null});g.pick().then(function(a){d.attr("value","");d.attr("placeholder","Saving image...");c.$eval(b.onFilepickerProgress,{uploading:!0});696<a.dimensions.width?g.store(a.blob).then(function(a){d.attr("value",a);c.$eval(b.onFilepickerProgress,{uploading:null})}):(d.attr("value",""),d.attr("placeholder",
"Please upload an image at least 696px wide"),c.$eval(b.onFilepickerError,{error:"must be wider than 696px"}))});return!1})}}}]);
angular.module("genius").directive("flashMessages",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"flash_messages.html",controllerAs:"ctrl",controller:["$scope","$sce","Cookies","currentFlashMessages",function(a,c,d,b){var g=d.getObject("flash")||{};_.each(g,function(a,d){b.push({message:c.trustAsHtml(a),type:d})});d.remove("flash",{path:"/"});a.flash_messages=b;this.close_message=function(b){_.pull(a.flash_messages,b)}}]}});
angular.module("genius").directive("focusOnChange",function(){return{restrict:"A",link:function(a,c,d){var b=!0;a.$watch(d.focusOnChange,function(){b?b=!1:c.focus()})}}});
angular.module("genius").directive("followButton",["FollowService","Session","Tracking","Reversible",function(a,c,d,b){return{restrict:"E",scope:{onUnauthorized:"&",object:"<",type:"@",variants:"<",disabled:"<"},templateUrl:"follow_button.html",link:function(g){var e;g.user_signed_in=c.user_signed_in;g.$watch("object.current_user_metadata.interactions.following",function(a){g.following=!!a});g.label=function(){return g.hoverLabel||(g.following?"Following":"Follow")};g.toggle_following=function(){if(!c.user_signed_in)return g.onUnauthorized();
if(!e){e=!0;var h={};h["object.current_user_metadata.interactions.following"]=!g.following;h=b.modify(g,h);d.track(g.following?"Follow Button":"Unfollow Button");a.set_following(g.type,g.object.id,!g.following).catch(h).finally(function(){g.hoverLabel=null;e=!1})}};g.can_follow=function(){return c.has_permission("follow",g.object)}}}}]);
angular.module("genius").directive("svg",["Bowser","ShimInnerHTMLProp","$templateCache","$immediate",function(a,c,d,b){var g=function(c,g){var f=$(d.get(g));c.html(f[0].innerHTML);_.each(f[0].attributes,function(a){c[0].setAttribute(a.name,a.value)});var k=c.get(0).getAttribute("viewBox");(a.msie||a.msedge)&&k&&b(function(){var a=k.split(" ");3<a.length&&c.width(c.height()*(parseInt(a[2])/parseInt(a[3])))},!1)};return{link:function(a,b,d){c();"src"in d&&g(b,d.src);"ngSrc"in d&&a.$watch(d.ngSrc,function(a){g(b,
a)})}}}]);angular.module("genius").directive("globalErrorMessage",function(){return{scope:{},templateUrl:"global_error_message.html",controllerAs:"ctrl",controller:["GlobalErrorBus","$sce",function(a,c){a.$on("global_error",function(a,b){this.message_html=c.trustAsHtml(b)}.bind(this))}]}});
angular.module("genius").directive("globalMessage",["$compile","$templateCache","TargetElementService",function(a,c,d){var b=c.get("global_message.html"),g=d.get_element("global_message");return{scope:!0,restrict:"E",transclude:!0,link:function(c,d,f,k,l){a(b)(c,function(a){g.append(a);c.$on("$destroy",function(){a.remove()})},{parentBoundTranscludeFn:l,futureParentElement:g})}}}]);
angular.module("genius").directive("handleIntraPageLinks",["ReferentRegistry","ModelRouter","$location",function(a,c,d){return{restrict:"A",link:function(b,g){g.on("click","a",function(){var e=$(this).attr("data-api_path");if(e&&(e=c.lookup(e))&&"referent"===e.type){var g=a.peek(e.id);if(g)return b.$apply(function(){d.url("?referent_id="+g.id)}),!1}})}}}]);
angular.module("genius").directive("hasPreview",["$window","Waypoint",function(a,c){return{restrict:"A",link:function(d,b){var g=function(a,e,g){return new c({element:b,offset:g,continuous:!1,enabled:!1,handler:function(b){b===e&&d.$apply(function(){a(h,d.$id)})}})},e=[g(d.song_ctrl.set_annotation_preview,"down",200),g(d.song_ctrl.set_annotation_preview,"up","15%"),g(d.song_ctrl.clear_annotation_preview,"down",-200),g(d.song_ctrl.clear_annotation_preview,"up","100%")],g=Number(b.attr("data-id")),
h=d.song_ctrl.annotation_preview_for(g);h&&(b.addClass("referent--linked_to_preview"),$(a).one("scroll",function(){_.each(e,function(a){a.enable()})}))}}}]);
angular.module("genius").directive("headerInbox",function(){return{restrict:"E",scope:{inbox_name:"@inboxName",human_name:"@humanName",abbreviate_after:"<abbreviateAfter",opened:"=",variants:"<"},templateUrl:"header_inbox.html",controller:["$scope","InboxService",function(a,c){var d,b,g;a.feed={url:"/"+a.inbox_name+"?hide_layout=true"};a.update_on="new-"+a.inbox_name.replace(/_/g,"-")+"-event";var e=function(){a.line_items=[];a.done_loading=!1;d=void 0;this.load_next_page()}.bind(this),h=function(b){c.mark_read(a.inbox_name,
_(b).filter("unread").map("event_ids").value())};a.$watch("opened",function(c,d){c&&!d?(this.opened_once=!0,a.unread_count=0,h(a.line_items)):d&&!c&&b&&b<Date.now()&&e()}.bind(this));this.close=function(){a.opened=!1};this.load_next_page=function(){g||(g=c.line_items(a.inbox_name,d).then(function(b){a.line_items.push.apply(a.line_items,b);g=null;b.length?d=b.timestamp_for_next_page:a.done_loading=!0;a.opened&&h(b)}))};this.should_paginate=function(){return a.opened&&!g&&!a.done_loading};e();a.refresh=
function(){a.opened?b=Date.now():e()}}],controllerAs:"ctrl",link:{pre:function(a,c,d){a.sync_count_to_title=d.hasOwnProperty("syncCountToTitle")}}}});
angular.module("genius").directive("headerInboxIcon",["Session","Pusher","TopBarIndicatorsLoader","Tracking","TitleService",function(a,c,d,b,g){return{restrict:"E",templateUrl:"header_inbox_icon.html",link:function(e){e.unread_count=a.current_user["unread_"+e.inbox_name+"_count"];e.$watch("opened",function(a,c){a&&!c&&b.track("Inbox Open",{inbox_name:e.inbox_name,unreadCount:e.unread_count})});d.listen_for(e.inbox_name,function(a){e.unread_count=a});e.update_on.split(",").forEach(function(b){c.subscribe(a.current_user.pusher_channel,
b,function(){d.refresh();e.refresh()})});c.subscribe(a.current_user.pusher_channel,"inbox-marked-read",function(a){a.inbox===e.inbox_name&&(0!==e.unread_count&&e.refresh(),e.unread_count=0)});e.$watch("unread_count",function(a){e.sync_count_to_title&&g.update_count(a)})}}}]);angular.module("genius").directive("headerInboxes",function(){return{scope:{open_inboxes:"<openInboxes"},templateUrl:"header_inboxes.html"}});
angular.module("genius").directive("headerMenuItem",function(){return{restrict:"E",transclude:!0,scope:{name:"@",url:"@"},templateUrl:"header_menu_item.html"}});
angular.module("genius").directive("headerMessagesInbox",["Attempt",function(a){return{restrict:"E",scope:{opened:"=",variants:"<"},bindToController:{opened:"="},templateUrl:"header_messages_inbox.html",controllerAs:"ctrl",controller:["$scope",function(c){c.attempt_close=a.close_form;c.inbox_name="messages";c.update_on="new-message";var d=c.$watch("opened",function(a){a&&(this.opened_once=!0,d())}.bind(this));c.refresh=function(){c.refresh_at=Date.now()};this.decrement_unread_count=function(a){c.unread_count-=
a};this.close=function(){delete this.composing}.bind(this)}]}}]);
angular.module("genius").directive("hideSongForm",function(){return{restrict:"E",scope:{song:"<",on_close:"&onClose"},templateUrl:"hide_song_form.html",controllerAs:"ctrl",controller:["$scope","SongService",function(a,c){this.save=function(d){this.saving=!0;c.perform_action(a.song.id,"hide",{viewable_by_roles:d}).then(function(b){_.extend(a.song,b);a.error=null;a.on_close()}).catch(function(b){a.error=b.message}).finally(function(){this.saving=!1}.bind(this))}}]}});
angular.module("genius").directive("httpMethod",function(){return{restrict:"A",link:function(a,c,d){var b=!1,g=d.action||d.href,e=d.httpMethod.toUpperCase();c.click(function(){if(!b)return b=!0,$("<form>",{action:g,method:e}).append($("<input>",{type:"hidden",name:"authenticity_token",value:$.cookie("_csrf_token")})).appendTo($("body")).submit(),!1})}}});
angular.module("genius").directive("inboxLineItem",["Tracking",function(a){var c="user_upvoted_annotation user_downvoted_annotation user_accepted_annotation user_rejected_annotation user_deleted_annotation user_created_annotation user_pyonged_annotation user_pyonged_song user_upvoted_forum_post user_downvoted_forum_post user_followed_user user_de_modded_user user_made_an_editor_out_of_user user_made_a_moderator_out_of_user user_mediatored_user user_created_question user_archived_question user_edited_question user_pinned_question user_unpinned_question user_created_answer user_deleted_answer user_upvoted_question user_downvoted_question user_upvoted_answer user_downvoted_answer user_hit_pageview_threshold_song".split(" "),d=
{"user.Pyong.song":"inbox_line_items/pyong.html","user.Pyong.annotation":"inbox_line_items/pyong.html","user.Pyong.article":"inbox_line_items/pyong.html"};return{scope:{inbox_name:"<inboxName",line_item:"<object",eager_load_details:"<eagerLoadDetails",variants:"<"},templateUrl:"inbox_line_item.html",controller:["$scope","querystring","InboxService",function(b,g,e){this.state={load_details:!1,show_details:!1};b.details_url="/activity_stream/show_details?"+g.stringify({id:b.line_item.event_ids});this.has_template=
_.contains(c,b.line_item.strategy);b.$watch("ctrl.state.load_details",function(a,c){this.has_template&&a&&!c&&e.get_line_item(b.inbox_name,b.line_item.event_ids.join(",")).then(function(a){this.line_item_detail=a}.bind(this))}.bind(this));b.$watch("eager_load_details",function(a){this.state.load_details=!(!this.state.load_details&&!a)}.bind(this));this.message_components=b.line_item.message_components;this.message_template=d[this.message_components.key]||"inbox_line_items/generic.html";var h=_.once(function(){a.track("Line Item Open",
{action_name:b.line_item.action_name,inbox_name:b.inbox_name,strategy_name:b.line_item.strategy,bagon:!0,iframe:!this.has_template})}.bind(this));this.toggle_visible=function(){this.state.load_details=!0;this.state.show_details=!this.state.show_details;this.state.show_details&&h();this.state.show_details&&b.line_item.unread&&(b.line_item.unread=!1,e.mark_read(b.inbox_name,[b.line_item.event_ids]))}}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("inboxLineItemActionIcon",function(){return{scope:{action_name:"<actionName"},templateUrl:"inbox_line_item_action_icon.html"}});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a:a(jQuery)})(function(a){function c(b){var c=b||window.event,g=e.call(arguments,1),k=0,u=0,t=0,v=0,w=0,x=0;b=a.event.fix(c);b.type="mousewheel";"detail"in c&&(t=-1*c.detail);"wheelDelta"in c&&(t=c.wheelDelta);"wheelDeltaY"in c&&(t=c.wheelDeltaY);"wheelDeltaX"in c&&(u=-1*c.wheelDeltaX);"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(u=-1*t,t=0);k=0===t?u:t;"deltaY"in c&&(k=t=-1*c.deltaY);"deltaX"in
c&&(u=c.deltaX,0===t&&(k=-1*u));if(0!==t||0!==u){1===c.deltaMode?(v=a.data(this,"mousewheel-line-height"),k*=v,t*=v,u*=v):2===c.deltaMode&&(v=a.data(this,"mousewheel-page-height"),k*=v,t*=v,u*=v);v=Math.max(Math.abs(t),Math.abs(u));if(!f||v<f)f=v,l.settings.adjustOldDeltas&&"mousewheel"===c.type&&0===v%120&&(f/=40);l.settings.adjustOldDeltas&&"mousewheel"===c.type&&0===v%120&&(k/=40,u/=40,t/=40);k=Math[1<=k?"floor":"ceil"](k/f);u=Math[1<=u?"floor":"ceil"](u/f);t=Math[1<=t?"floor":"ceil"](t/f);l.settings.normalizeOffset&&
this.getBoundingClientRect&&(c=this.getBoundingClientRect(),w=b.clientX-c.left,x=b.clientY-c.top);b.deltaX=u;b.deltaY=t;b.deltaFactor=f;b.offsetX=w;b.offsetY=x;b.deltaMode=0;g.unshift(b,k,u,t);h&&clearTimeout(h);h=setTimeout(d,200);return(a.event.dispatch||a.event.handle).apply(this,g)}}function d(){f=null}var b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],g="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],e=Array.prototype.slice,
h,f;if(a.event.fixHooks)for(var k=b.length;k;)a.event.fixHooks[b[--k]]=a.event.mouseHooks;var l=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=g.length;b;)this.addEventListener(g[--b],c,!1);else this.onmousewheel=c;a.data(this,"mousewheel-line-height",l.getLineHeight(this));a.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=g.length;b;)this.removeEventListener(g[--b],c,!1);else this.onmousewheel=
null;a.removeData(this,"mousewheel-line-height");a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){b=a(b);var c=b["offsetParent"in a.fn?"offsetParent":"parent"]();c.length||(c=a("body"));return parseInt(c.css("fontSize"),10)||parseInt(b.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})});
angular.module("genius").directive("infiniteScroll",["$window","$document","$immediate",function(a,c,d){return{link:function(b,g,e){var h=!1,f=$(a);"infiniteScrollDisabled"in e&&b.$watch(e.infiniteScrollDisabled,function(a){(h=a)||d(l,!1)});var k=function(){b.$apply(function(){b.$eval(e.infiniteScroll)})},l=function(a){if(!h){var b=c[0].documentElement.clientHeight;a&&(a=a.target,a.getBoundingClientRect&&(b=a.getBoundingClientRect().top+a.offsetHeight));a=g[0].getBoundingClientRect().top+g[0].offsetHeight;
b>=a&&k()}},n,m,q=!0,r=g.closest("[infinite-scroll-container]"),u=function(a){q&&(n=r.height(),m=g.get(0).scrollHeight);q=!1;r.scrollTop()>=m-n&&0>a.deltaY&&(k(),g.get(0).scrollHeight!==m&&(q=!0))},t=function(){$("body").addClass("u-noscroll")},v=function(){$("body").removeClass("u-noscroll")};"fixedPositionInfiniteScroll"in e?(g.bind("mousewheel",u),r.on("mouseover",t),r.on("mouseout",v)):(f.on("scroll",l),g.parents().on("scroll",l));b.$on("$destroy",function(){g.parents().off("scroll",l);return f.off("scroll",
l)})}}}]);
angular.module("genius").directive("insertableAtCursor",function(){return{restrict:"A",link:function(a,c,d){a.$eval(d.insertableAtCursor,{insertFn:function(a){c.each(function(){if(this.selectionStart||0===this.selectionStart){var c=this.selectionStart,e=this.selectionEnd,d=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(e,this.value.length);this.focus();this.selectionStart=c+a.length;this.selectionEnd=c+a.length;this.scrollTop=d}else this.value+=a,this.focus();$(this).trigger("input")})}})}}});
angular.module("genius").directive("kb",["$window",function(a){return{restrict:"E",link:function(c,d,b){var g=$(a),e=function(a){c.$apply(function(){c.$eval(b.action,{$event:a})});return!1};g.bind("keydown",b.shortcut,e);c.$on("$destroy",function(){g.unbind("keydown",e)})}}}]);
angular.module("genius").directive("keepInView",["$document","$window",function(a,c){return{link:function(d,b,g){var e=0;d.$watch(g.keepInView,function(d){if(d){var f=b[0].getBoundingClientRect();d=c.innerHeight;if(f.bottom>.95*d||f.top<.05*d)f=200>e-Date.now()?100:300,e=Date.now(),$(a.prop("body")).animate({scrollTop:$(b).offset().top-.05*d},f)}})}}}]);angular.module("genius").directive("leaderboard",function(){return{restrict:"E",templateUrl:"leaderboard.html",scope:{leaderboard_rows:"<collection"}}});
angular.module("genius").directive("lockScrollPositionOnIos",["$window","Bowser",function(a,c){return{link:function(d){if(c.ios){var b=$("body"),g=$(a).scrollTop();b.css("top",-g);d.$on("$destroy",function(){b.css("top","");$(a).scrollTop(g)})}}}}]);
angular.module("genius").directive("lyricSyncTimestampInput",["timestamp_for_displayFilter","parse_time_string","Mousetrap","$immediate",function(a,c,d,b){return{require:"ngModel",link:function(g,e,h,f){var k=new d(e[0],{stop_propagation:!0,prevent_default:!0});k.$bind("up",function(){n(c(f.$viewValue)+50)});k.$bind("down",function(){n(c(f.$viewValue)-50)});k.$bind("esc",function(){n(c(l));e.blur()});var l;b(function(){l=f.$viewValue});var n=function(b){var c=f.$viewValue;b=a(Math.round(b),{always_millis:!0});
f.$setViewValue(b);f.$valid?f.$render():f.$setViewValue(c)};e.bind("keyup",function(){f.$commitViewValue();g.$apply()});f.$parsers.push(c);f.$formatters.push(function(b){if(b||0===b)return a(b,{always_millis:!0})});g.$watch(h.ngModel,function(b,c){_.isUndefined(b)&&!_.isUndefined(c)&&(""!==f.$viewValue?f.$setViewValue(a(c,{always_millis:!0})):f.$setViewValue(null),f.$commitViewValue())});"validators"in h&&_.extend(f.$validators,g.$eval(h.validators))}}}]);
angular.module("genius").directive("lyrics",["$compile","SongService","LyricsEditingService","LyricsAnchorer","ReferentHelper","TextSelection","Tracking","Bindings",function(a,c,d,b,g,e,h,f){var k=f.resolver({yields_anchorer:"&yieldsAnchorer",canonical_lyrics_html:"<canonicalLyricsHtml"});return{restrict:"E",templateUrl:"lyrics.html",transclude:!0,controller:["$scope",function(a){this.set_editable=function(b){a.editable=b;this.editable_lyrics_stale=!1};this.start_editing=function(){this.set_editable(d.prepare_lyrics_for_editing(a.canonical_lyrics_html));
this.editing=!0};this.cancel_editing=function(){this.editing=!1;delete this.lyrics_errors;a.lyrics_ctrl.lyrics_form.$rollbackViewValue();a.lyrics_ctrl.lyrics_form.$setPristine()};this.finish_editing=function(){if(!this.saving){this.saving=!0;var e=a.lyrics_section_html();this.editing=!1;this.edit_blocked=!0;a.lyrics_section_html(d.backfill_angular_link_properties(d.lyrics_pseudo_markdown_to_html__deprecated(a.editable.markdown,a.editable.attr_hash)));delete this.lyrics_errors;return c.save_lyrics(a.song,
d.clean_up_lyrics__deprecated(d.lyrics_pseudo_markdown_to_html__deprecated(a.editable.markdown,a.editable.attr_hash))).then(function(c){b(c);this.editing=!1;delete this.edit_blocked;a.lyrics_ctrl.lyrics_form.$setPristine()}.bind(this)).catch(function(b){a.lyrics_section_html(e);409===b.meta.status?(this.refresh_lyrics(),this.editing=!0):(this.lyrics_errors=b.response.errors,this.lyrics_errors&&this.lyrics_errors.length||(this.lyrics_errors=[b.meta.message||"Unexpected error"]),this.editing=!0,delete this.edit_blocked)}.bind(this)).finally(function(){delete this.saving}.bind(this))}};
this.refresh_lyrics=function(){this.edit_blocked=!0;return c.load_lyrics(a.song.id).then(function(a){delete this.edit_blocked;b(a)}.bind(this))};this.remove_referent=function(b){a.canonical_lyrics_html=d.lyrics_html_without_referent(a.canonical_lyrics_html,b)};this.on_image_referent_created=function(b,c){this.edit_blocked=!1;c.precomputed_client_rect=b.precomputed_client_rect;a.current_referent=c;a.$emit("referent_created",c)};this.on_image_referent_creation_failed=function(){this.edit_blocked=!1};
this.on_image_referent_creation_started=function(){this.edit_blocked=!0};this.submit_correction=function(a){this.correction.replacement.markdown=a;this.edit_blocked=!0;return this.lyrics_anchorer.submit_correction(this.correction).then(function(){delete this.correction;h.track("Corrected Line")}.bind(this)).catch(function(){delete this.edit_blocked}.bind(this))};this.can_create_anchor_from_selection=function(a){var b,c=!1,e=!1;return function(){b!==a.selection_range&&(c=(b=a.selection_range)&&!g.range_or_contents_intersects_links(b),
e=b&&0==$(b.startContainer).find("img").length);return c&&e}}(this);var b=function(b){_.extend(a.song,b.client_timestamps);this.update_lyrics_selection_safe(b.body.html);e(a.canonical_lyrics_html)!==e(b.body.html)&&(a.canonical_lyrics_html=b.body.html,this.editable_lyrics_stale=!0);return b}.bind(this),e=function(a){return $("<div>").append($(a)).html()};a.$watch("lyrics_ctrl.correction",function(a,b){a&&h.track("Started Line Correction");b&&b.anchor.hasClass("line-correction")&&b.anchor.replaceWith(b.original.html)});
a.$watch("current_referent",function(a){a&&delete this.correction}.bind(this))}],controllerAs:"lyrics_ctrl",link:function(c,d,f,g){f=k(c,f);var h=d.find("section");g.lyrics_anchorer=new b({container:h,get_state:function(){return{range:g.selection_range,referent:c.current_referent,reference_element:c.current_referent?c.reference_elements[c.current_referent.id]:null}},scope:c,song:c.song});c.$watchGroup(["current_referent","lyrics_ctrl.correction","lyrics_ctrl.selection_range"],function(a){var b=a[0],
e=a[1];a=a[2];b?g.anchor_rect=c.reference_elements[b.id][0].getBoundingClientRect():e?g.anchor_rect=e.anchor[0].getBoundingClientRect():a?g.anchor_rect=a.getBoundingClientRect():delete g.anchor_rect});f.yields_anchorer({anchorer:g.lyrics_anchorer});g.update_lyrics_selection_safe=function(a){e.restore_selection_if_clobbered(h[0],function(){c.lyrics_section_html(a)})};c.lyrics_section_html=function(b){return b?(b=a(b.replace(/}}/g,"}\x3c!-- literal brace --\x3e}"))(c),h.html(b)):h.html()};c.canonical_lyrics_html=
f.canonical_lyrics_html}}}]);
angular.module("genius").directive("lyricsSyncKeyboard",["Mousetrap",function(a){return{scope:{showing:"<"},restrict:"E",require:"^lyricsSyncEditor",templateUrl:"lyrics_sync_keyboard.html",link:function(c,d,b,g){c.definitions=[{key:"?",label:"?",description:"Show/Hide Keyboard Shortcuts",action:function(){g.showing_keyboard_shortcuts=!g.showing_keyboard_shortcuts}},{key:"space",label:"Space",description:"Advance Line Selection and Set to Current Time",action:function(){g.can("edit")&&g.can("sync")&&
g.start_or_advance()}},{key:"enter",label:"&#x23ce;",description:"Seek to Current Line",action:function(){g.seek_to_index(g.current_line_index)}},{key:"up",label:"&darr;, &uarr;",description:"Move Line Selection, Adjust Time While Editing",action:function(){if(0!==g.current_line_index){do--g.current_line_index;while(g.current_line()&&g.current_line().hidden)}}},{key:"down",action:function(){if(g.current_line_index!==g.lyrics_synchronization.lines.length-1){do++g.current_line_index;while(g.current_line()&&
g.current_line().hidden)}}},{key:"left",label:"&larr;, &rarr;",description:"Seek Forwards and Backwards",action:function(){g.media_player.api.seek_to_position(g.position-200)}},{key:"right",action:function(){g.media_player.api.seek_to_position(g.position+150)}},{key:"e",label:"e",description:"Pause And Edit Timestamp",action:function(){g.can("edit")&&(g.media_player.api.pause(),g.current_line()._editing_time=!0)}}];_.each(c.definitions,function(b){a.$bind(b.key,b.action,{prevent_default:!0,stop_propagation:!0})});
c.$on("$destroy",function(){_.each(c.definitions,function(b){a.unbind(b.key)})})}}}]);angular.module("genius").directive("markdownPreview",function(){return{restrict:"E",scope:{markdown_content:"<markdownContent"},templateUrl:"markdown_preview.html",controller:["$scope","MarkdownPreviewService",function(a,c){a.$watch("markdown_content",_.throttle(function(){c.create_preview(a.markdown_content).then(function(c){a.html_content=c})},500,{leading:!0,trailing:!0}))}]}});
angular.module("genius").directive("mediaControls",function(){return{restrict:"E",scope:{media:"<mediaPlayer",hide_playpause:"<?hidePlaypause",variants:"<?"},templateUrl:"media_controls.html"}});angular.module("genius").directive("mentionable",["MentionService",function(a){return{restrict:"A",link:function(c,d){d.atwho({at:"@",displayTpl:"<li>${name}</li>",insertTpl:"@${value}",searchKey:"name",callbacks:{remoteFilter:function(b,c){a.autocomplete(b).then(function(a){c(a)})},sorter:function(a,c){return c}}})}}}]);
angular.module("genius").directive("modalWindow",["$compile","$document","$templateCache","Bowser",function(a,c,d,b){var g=d.get("modal_window.html");return{scope:{on_close:"&onClose",variants:"<",hidden:"<"},transclude:!0,link:function(e,d,f,k,l){d=a(g);var n=c.prop("body");e.is_ios=b.ios;d(e,function(a){$(n).append(a);e.close=function(a){e.on_close({reason:a})};e.$on("$destroy",function(){a.remove()})},{parentBoundTranscludeFn:l,futureParentElement:n})}}}]);
angular.module("genius").directive("mousetrapInput",function(){return{restrict:"A",link:function(a,c){c.addClass("mousetrap")}}});angular.module("genius").directive("mutuallyExclusiveSwitches",function(){return{restrict:"E",scope:!0,link:function(a,c,d){var b=d.property;a[b]={};a.$watch(b,function(c,e){1>=_(c).values().compact().size()||_.forEach(c,function(c,d){var g=e[d];c&&!g&&(a[b]=_.pick(a[b],d))})},!0)}}});
angular.module("genius").directive("navigateOnClick",["$window",function(a){return{restrict:"A",link:function(c,d,b){d.on("click",function(){a.location.href=b.navigateOnClick})}}}]);angular.module("genius").directive("newConversation",function(){return{scope:{on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"new_conversation.html",controller:["$scope","ConversationService",function(a,c){this.did_send=function(d){c.get(d.conversation_id).then(function(b){a.conversation=b})}}],controllerAs:"ctrl"}});
angular.module("genius").directive("ngAutofocus",["$immediate",function(a){return{restrict:"A",link:function(c,d,b){b.ngAutofocus?c.$watch(b.ngAutofocus,function(b){b&&a(d.focus.bind(d),!1)}):a(d.focus.bind(d),!1)}}}]);angular.module("genius").directive("ngBodyClass",function(){var a=$("body");return{restrict:"A",link:function(c,d,b){c.$watch(b.ngBodyClass,function(b){for(var c in b)a.toggleClass(c,!!b[c])},!0);c.$on("$destroy",function(){for(var d in c.$eval(b.ngBodyClass))a.removeClass(d)})}}});
angular.module("genius").directive("ngClickDisabled",function(){return{priority:-2,restrict:"A",link:function(a,c,d){c.on("click",function(b){if(a.$eval(d.ngClickDisabled))return b.stopImmediatePropagation(),!1})}}});
angular.module("genius").directive("notificationInbox",["$document","TopBarIndicatorsLoader","Pusher","Tracking","Session","Bowser","$window",function(a,c,d,b,g,e,h){var f=function(a,b){b.qtip({content:{prerender:!0,url:"/"+a.inbox_name,data:{event_id_to_expand:$.deparam(document.location.search.slice(1)).event_id_to_expand},text:$("<div>",{"class":"qtip-loading-bar",text:"Loading..."})},position:{target:$(".sub_header_content"),corner:{target:"bottomRight",tooltip:"topRight"}},hide:{effect:{length:0},
when:{event:"unfocus"}},show:{effect:{length:0},delay:0,when:{event:"click"}},style:{name:"light",tip:{corner:"topRight",size:{x:20,y:20}},width:{min:580,max:580},border:{width:0,color:"transparent"},classes:{tooltip:"activity_stream_tooltip mecha--deprecated",content:a.inbox_name+"_tooltip_content",tip:"activity_stream_tip"}},api:{onContentUpdate:a.mark_visible_as_read,onShow:a.$apply.bind(a,a.record_inbox_shown),onHide:a.$apply.bind(a,a.record_inbox_hidden)}})};return{scope:{inbox_name:"@inboxName",
abbreviate_after:"@abbreviateAfter",sync_count_to_title:"@syncCountToTitle"},restrict:"E",templateUrl:"notification_inbox.html",controller:["$scope",function(d){angular.extend(d,{reload_inbox_tooltip:function(){d.qtip_element.reloadTooltip()},record_inbox_shown:function(){b.track("Inbox Open",{inbox_name:d.inbox_name,unread_count:d.unread_count});d.unread_count=0;d.update_window_title_count();d.inbox_tooltip_open=!0;d.mark_visible_as_read()},record_inbox_hidden:function(){d.inbox_tooltip_open=!1;
d.new_events_available&&(d.reload_inbox_tooltip(),d.new_events_available=!1)},mark_visible_as_read:function(){var a=$("form#mark_"+d.inbox_name+"_read");a.length&&d.inbox_tooltip_open&&($.post(a.attr("action"),a.serialize()),a.remove())},notify_new_events:function(){c.refresh();d.inbox_tooltip_open?d.new_events_available=!0:d.reload_inbox_tooltip()},update_window_title_count:function(){d.sync_count_to_title&&(a[0].title=a[0].title.replace(/^(\(\d+\) )?/,0<d.unread_count?"("+d.unread_count+") ":""))},
go_to_full_page_if_mobile:function(){e.mobile&&(h.location="/inboxes/"+d.inbox_name)}})}],link:function(a,b){a.inbox_tooltip_open=!1;a.new_events_available=!1;a.qtip_element=b.find(".header-inbox_icon");e.mobile||f(a,a.qtip_element);c.listen_for(a.inbox_name,function(b){a.unread_count=b});a.$watch("unread_count",function(b){!b||1>b?a.unread_count_for_display=void 0:a.abbreviate_after&&b>parseInt(a.abbreviate_after,10)?a.unread_count_for_display=a.abbreviate_after+"+":a.unread_count_for_display=b;
a.update_window_title_count()});d.subscribe(g.current_user.pusher_channel,"new-"+a.inbox_name.replace(/_/g,"-")+"-event",function(){a.notify_new_events()});d.subscribe(g.current_user.pusher_channel,"inbox-marked-read",function(b){b.inbox===a.inbox_name&&a.notify_new_events()});$("."+a.inbox_name+"_tooltip_content").live("ajax:complete",a.mark_visible_as_read)}}}]);
angular.module("genius").directive("odometer",["Odometer",function(a){return{restrict:"E",scope:{value:"<",options:"<"},link:function(c,d){var b=new a(_.merge({el:d[0],value:c.value},c.options));c.$watch("value",function(a){b.update(a)})}}}]);angular.module("genius").directive("onHoverWithNoDigest",function(){return{restrict:"A",link:function(a,c,d){c.hover(function(){a.$eval(d.onHoverWithNoDigest,{hover:!0})},function(){a.$eval(d.onHoverWithNoDigest,{hover:!1})})}}});
angular.module("genius").directive("onInnerHeightChange",[function(){return{restrict:"A",link:function(a,c,d){a.$watch(function(){return c.innerHeight()},function(b){a.$eval(d.onInnerHeightChange,{height:b})})}}}]);angular.module("genius").directive("onLoad",function(){return{restrict:"A",link:function(a,c,d){c.on("load",function(){a.$apply(function(){a.$eval(d.onLoad)})})}}});
angular.module("genius").directive("openInApp",["$window","Tracking","Bowser","AppConfig",function(a,c,d,b){return{restrict:"E",templateUrl:"open_in_app.html",scope:{iosDeepLink:"<",placement:"@"},link:function(g,e){g.is_ios=d.ios;e.on("click",function(){g.hasTriedToOpenApp||(g.hasTriedToOpenApp=!0,c.track("Clicked Open in App"),a.location=g.iosDeepLink,g.appStoreUrl=b.app_store_url)})}}}]);
angular.module("genius").directive("openLinksInNewWindow",function(){return{restrict:"A",link:function(a,c){c.on("click","a:not([target])",function(){this.target="_blank"})}}});angular.module("genius").directive("placeholderSpinner",function(){return{restrict:"E",scope:{placeholderClasses:"@",variants:"<variants"},templateUrl:"placeholder_spinner.html"}});angular.module("genius").directive("placeholderText",function(){return{restrict:"E",templateUrl:"placeholder_text.html"}});
angular.module("genius").directive("placeholderUserBadge",function(){return{restrict:"E",scope:{size:"@"},templateUrl:"user_badge.html",link:function(a){a.user={name:"username",iq:"1738",avatar:{thumb:{url:""}}}}}});angular.module("genius").directive("playPauseButton",function(){return{restrict:"E",templateUrl:"play_pause_button.html",scope:{playing:"<",loading:"<"}}});
angular.module("genius").directive("positionBeside",["$window",function(a){var c=function(a,b,g){var e=a[0].getBoundingClientRect().left+a.width()/2,e=$(document.elementFromPoint(e,b));if(!e.length||a.is(e)||a.find(e).length)return b;b=e[0].getBoundingClientRect();return c(a,g?b.top-1:b.bottom+1,g)};return{restrict:"A",link:function(d,b,g){d.$watch(g.positionBeside,function(e){var h;var f=!!d.$eval(g.positionForMaximumVisibility);if(e){var k=b.offsetParent(),l=k[0].getBoundingClientRect(),n=b.height();
h=l.top;l=l.bottom;f&&(h=c(k,Math.max(h,0)),l=c(k,Math.min(l,a.innerHeight-1),!0));e=e.top+(e.height-n)/2;n=e+n-l;0<n&&(e-=n);h-=e;0<h&&(e+=h);h=e}else h=0;b.offset({top:h+$(a).scrollTop()})})}}}]);angular.module("genius").directive("preload",["PreloadCache",function(a){return{restrict:"E",priority:1E4,link:function(c,d){var b=JSON.parse(d.find("preload-content").attr("data-preload_data"));angular.forEach(b,function(b,e){a[e]=c[e]=b});d.remove()}}}]);
angular.module("genius").directive("preventDefaultClick",function(){return{priority:-1,restrict:"A",link:function(a,c){c.on("click",function(a){a.preventDefault();a.stopPropagation()})}}});angular.module("genius").directive("preventDefaultKeydown",function(){return{restrict:"A",link:function(a,c,d){var b=_.map(d.preventDefaultKeydown.split(" "),Number);c.on("keydown",function(a){_.includes(b,a.which)&&a.preventDefault()})}}});
angular.module("genius").directive("proxiedImage",function(){return{restrict:"A",require:"ngModel",link:function(a,c,d,b){b.$formatters.push(function(a){if(!a)return"";var b={};try{var c=new URL(a);c.hostname.match(/\.embed\.ly$/)&&_.each(c.search.substr(1).split("&"),function(a){a=a.split("=");b[decodeURIComponent(a[0])]=decodeURIComponent(a[1])});return b.url||a}catch(d){return a}})}}});
angular.module("genius").directive("pusher",["Pusher",function(a){return{scope:{channel:"@pusherChannel",event_name:"@pusherEventName",updateCallback:"&pusherUpdate",enabled:"="},link:function(c){var d=function(){a.subscribe(c.channel,c.event_name,function(a){c.updateCallback({value:a.value})})};void 0===c.enabled&&(c.enabled=!0);c.enabled&&d();c.$watch("enabled",function(a,c){a&&!c&&d()})}}}]);
angular.module("genius").directive("pyongButton",function(){return{restrict:"E",scope:{pyongable:"<object",type:"@",onUnauthorized:"&",variants:"<",icon_template:"@iconTemplate"},templateUrl:"pyong_button.html",controllerAs:"ctrl",controller:["$scope","PyongService","Session",function(a,c,d){var b=a.pyongable;this.pyonged=function(){return d.user_signed_in?b.current_user_metadata.interactions.pyong:!1};this.pyong=function(){if(!d.user_signed_in)return a.onUnauthorized();this.pyonged()||(this.show_pyong_form=
!0,b.pyonged=this.clicked_pyong=!0,b.pyongs_count+=1,c.pyong(a.type,b.id).then(function(a){b.current_user_metadata.interactions.pyong=a.current_user_metadata.interactions.pyong;b.pyongs_count=a.pyongs_count}).catch(function(){--b.pyongs_count;b.pyonged=!1}))}}]}});
angular.module("genius").directive("pyongForm",["PyongService",function(a){return{restrict:"E",scope:{id:"<",type:"<",onComplete:"&"},templateUrl:"pyong_form.html",link:function(c){c.submit=function(d){c.disabled=!0;a.finalizePyong(c.type,c.id,d).then(function(){c.onComplete()}).finally(function(){c.disabled=!1})}}}}]);$.browser={};
angular.module("genius").directive("quickSearch",["Tracking",function(a){return{restrict:"A",link:function(c,d){d.autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!1,resultsClass:"ac_results quick_search-results",formatResult:function(a){return a[1]?"Loading...":" "}}).result(function(b,c){c&&c[1]&&($("form.global_search :submit").attr("disabled","disabled"),a.track_with_timeout("Search Result Tap",function(){window.location.href=c[1]}))})}}}]);
angular.module("genius").directive("radioEdit",["Mousetrap","Session","AppConfig","$document",function(a,c,d,b){var g="!@#$%^*".split(""),e=new RegExp("\\b("+d.bad_words.map(_.escapeRegExp).join("|")+")\\b","ig"),h=function(a){return a[0]+_.chunk(a.slice(1).split(""),g.length).map(function(a){return _.shuffle(g).slice(0,a.length).join("")}).join("")},f=function(a){for(var c=b[0].createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);a=c.nextNode();)a.nodeValue=a.nodeValue.replace(e,function(a){return h(a)})};
return{restrict:"A",link:function(b,e){c.user_signed_in||a.bind("X X X",function(){f(e[0])})}}}]);angular.module("genius").directive("referentFragmentContainer",["ReferentHelper",function(a){return{templateUrl:"referent_fragment_container.html",restrict:"E",transclude:{referentHeader:"?referentHeader",referentFragment:"referentFragment"},scope:{referent:"<object"},link:function(c){c.$watch("referent.classification",function(d){c.referent.display_mode=a.display_mode_by_classification(d)})}}}]);
angular.module("genius").directive("releaseDate",function(){return{templateUrl:"release_date.html",restrict:"E",scope:{date:"<"}}});angular.module("genius").directive("removeClassOnAngularLoad",function(){return{restrict:"A",link:function(a,c,d){c.removeClass(d.removeClassOnAngularLoad)}}});angular.module("genius").directive("roleIcon",function(){return{scope:{role:"<",hasChecky:"<"},templateUrl:"role_icon.html"}});
angular.module("genius").directive("roleSelectionDialog",["AppConfig",function(a){return{restrict:"E",templateUrl:"role_selection_dialog.html",scope:{prompt:"@",save:"&",saving:"<",error:"<"},link:function(c){c.available_roles=a.available_roles;c.backing={};c.submit=function(){var a=_(c.backing).map(function(a,c){if(a)return c}).compact().value();c.save({selected_roles:a})}}}}]);
angular.module("genius").directive("scrollFromBottom",function(){return{restrict:"A",link:function(a,c){var d=new MutationObserver(function(){var a=c.prop("scrollHeight");c.scrollTop(c.scrollTop()+a-b);b=a}),b=c.prop("scrollHeight");d.observe(c[0],{childList:!0,subtree:!0});a.$on("$destroy",function(){d.disconnect()})}}});
angular.module("genius").directive("scrollPoint",["ScrollPoint",function(a){return{restrict:"A",link:function(c,d,b){var g=b.scrollPoint;a.register(g,d);c.$on("$destroy",function(){a.unregister(g,d)})}}}]);angular.module("genius").directive("scrollToBottomWhen",["$immediate",function(a){return{restrict:"A",link:function(c,d,b){c.$watch(b.scrollToBottomWhen,function(b,c){b&&!c&&a(function(){d.scrollTop(d.prop("scrollHeight"))},!1)})}}}]);
angular.module("genius").directive("scrollToTopOnChange",function(){return{restrict:"A",scope:{scrollToTopOnChange:"<"},link:function(a,c){a.$watch("scrollToTopOnChange",function(){c.scrollTop(0)})}}});
angular.module("genius").directive("scrollableData",function(){return{restrict:"E",templateUrl:"scrollable_data.html",transclude:!0,scope:!0,link:{pre:function(a,c,d,b){b.get_preloaded_data=function(){return a.$eval(d.preload)||[]};b.scroll_mechanism=d.scrollMechanism;b.repeat_with=d.repeatWith;b.on_scroll_complete=d.onScrollComplete;b.button_classes=d.buttonClasses?d.buttonClasses:"square_button";b.start_collapsed=a.$eval(d.startCollapsed);b.eval_on_empty=d.onEmpty;var g=a.$eval(d.autoReset);a.$watch(d.src,
function(a){b.src=a;g&&b.src.reset();b.reset()})}},controller:["$scope",function(a){this.reset=function(){var a=this.get_preloaded_data();this.models=_.clone(a);this.has_next=this.src.has_next;delete this.loading;!this.has_next()||a.length||this.start_collapsed||this.load_next()}.bind(this);this.load_next=function(){this.loading||(this.loading=!0,this.src.next().then(function(c){Array.prototype.push.apply(this.models_when_requested,c);a.$root.$$phase||a.$digest()}.bind({models_when_requested:this.models})).then(function(){this.loading=
!1;0!==this.models.length||this.has_next()||a.$eval(this.eval_on_empty)}.bind(this)))}.bind(this);a.$watch("$scrollable_data_ctrl.src.has_next()",function(c){c||a.$eval(this.on_scroll_complete)}.bind(this))}],controllerAs:"$scrollable_data_ctrl"}});
angular.module("genius").directive("scrubber",["$document","$timeout",function(a,c){var d="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints;return{scope:{scrubPercentage:"=",scrubbed:"&",scale:"@"},link:function(b,g){var e=parseFloat(b.scale||"1"),h=function(a){var c=g.width()*e;a=Math.max(0,Math.min(c,a-g.offset().left));b.scrubbed({percentage:a/c})};g.on("click",function(a){h(a.pageX);return!1});var f=d?{start:"touchstart",end:"touchend",move:"touchmove"}:{start:"mousedown",
end:"mouseup",move:"mousemove"},k=function(a){if(a.pageX)return a.pageX;a=a.originalEvent;return"touchend"===a.type?a.changedTouches[0].pageX:a.touches[0].pageX};g.on(f.start,function(){var d=g.width()*e,n=function(a){var c=Math.max(0,Math.min(d,k(a)-g.offset().left));b.$apply(function(){b.scrubPercentage=c/d})};a.on(f.move,n);a.one(f.end,function(e){e.originalEvent.defaultPrevented||(h(k(e)),a.off(f.move,n),c(function(){delete b.scrubPercentage},500,!1))})})}}}]);
angular.module("genius").directive("searchForm",["Tracking",function(a){return{restrict:"E",templateUrl:"search_form.html",scope:{style:"@searchStyle",path:"@"},link:function(c,d){var b=d.find("input");c.unfocus=function(){c.focused&&(a.track("Search Cancel"),c.focused=!1)};c.focus=function(){c.focused||(a.track("Search Page View"),c.focused=!0,b.focus())};d.on("click",function(){c.$apply(function(){c.focus()})});c.submit_form=function(){c.focused&&(c.submitting=!0,c.search_text="Loading...",a.track_with_timeout("Search More Results Page View",
function(){d.find("form").submit()}))}}}}]);angular.module("genius").directive("selectAllOnClick",function(){return{restrict:"A",link:function(a,c){c.on("click",function(){this.select()})}}});angular.module("genius").directive("setClassBeforeNavigate",["$immediate","Bowser","$window",function(a,c,d){return{restrict:"A",link:function(b,g,e){g.on("click",function(b){!e.href||b.metaKey||c.windows&&b.ctrlKey||(g.addClass(e.setClassBeforeNavigate),b.preventDefault(),a(function(){d.location=e.href}))})}}}]);
angular.module("genius").directive("setCookieAndCloseOnClick",["Tracking",function(a){return{require:"^displayUnlessCookie",link:function(c,d,b,g){d.on("click",function(){a.track(c.$parent.name);g.set_cookie_and_close();c.$apply();return!1})}}}]);angular.module("genius").directive("setDesiredLocation",["$window","Cookies",function(a,c){return{restrict:"A",link:function(d,b,g){b.click(function(){c.put("desired_location",a.location.href,{path:"/"})})}}}]);
angular.module("genius").directive("shareButtons",function(){return{scope:{song:"<"},templateUrl:"share_buttons.html",controllerAs:"ctrl",controller:function(){}}});angular.module("genius").directive("showArrowAtOffset",function(){return{restrict:"A",link:function(a,c){a.show_arrow_at_offset=function(a){return a>c.position().top}}}});angular.module("genius").directive("showIfBrowser",["Bowser",function(a){return{restrict:"A",link:function(c,d,b){a[b.showIfBrowser]||d.hide()}}}]);
angular.module("genius").directive("simpleDateInput",function(){return{scope:{ngModel:"=",disabled:"<"},restrict:"E",templateUrl:"simple_date_input.html",controllerAs:"ctrl",controller:["$scope",function(a){_.extend(this,{years:_.range(1,2018).reverse(),months:"January February March April May June July August September October November December".split(" ").map(function(a,b){return{name:a,number:b+1}}),days:_.range(1,32)});this.date_present=_.all;this.clear_date=function(){this.date={year:null,month:null,
day:null}};var c=function(a){return a&&this.date_present(a)?a.year+"-"+a.month+"-"+a.day:""}.bind(this);a.$watch("ngModel",function(a){a?(a=a.split("-").map(Number),this.date={year:a[0],month:a[1],day:a[2]}):this.date={year:null,month:null,day:null}}.bind(this));a.$watch("ctrl.date",function(d){a.ngModel=c(d)}.bind(this),!0)}]}});
angular.module("genius").directive("simpleDatetimeInput",["$filter",function(a){return{restrict:"E",scope:{},require:"ngModel",templateUrl:"simple_datetime_input.html",controller:["$scope",function(a){a.datetime={};var d=(new Date).getFullYear();_.extend(a,{years:_.range(1900,d+100).reverse(),months:"January February March April May June July August September October November December".split(" ").map(function(a,c){return{name:a,number:c+1}}),days:_.range(1,32),hours:_.range(0,24),minutes:_.range(0,
60)})}],link:function(c,d,b,g){var e=a("cast_to_date");g.$render=function(){var a=e(g.$modelValue)||new Date;c.datetime={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),minute:a.getMinutes()}};g.$render();c.$watch(function(){if(c.datetime&&!_.any(c.datetime,function(a){return void 0===a}))return c.datetime.year+"/"+c.datetime.month+"/"+c.datetime.day+" "+c.datetime.hour+":"+c.datetime.minute},function(a){a&&g.$setViewValue(a)})}}}]);
angular.module("genius").directive("slideDown",["$immediate",function(a){return{restrict:"A",link:function(c,d,b){d.hide();a(function(){d.slideDown(200,function(){"slideDownCallback"in b&&c.$apply(function(){c.$eval(b.slideDownCallback)})})},!1)}}}]);
angular.module("genius").directive("slideOverPane",function(){return{restrict:"E",templateUrl:"slide_over_pane.html",transclude:!0,scope:{condition:"<",closeOn:"&",darkBackground:"<",scrollToTopTrigger:"<"},controller:["$scope","Bowser",function(a,c){c.ios&&(a.is_ios=!0)}]}});angular.module("genius").directive("slideUpOn",["$immediate",function(a){return{restrict:"A",link:function(c,d,b){c.$watch(b.slideUpOn,function(b){b&&a(function(){d.slideUp(200)},!1)})}}}]);
angular.module("genius").directive("songActivity",["SongService",function(a){return{templateUrl:"song_activity.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope",function(c){var d=0,b=0;this.loading_iq_earners=this.loading_contributors=!0;this.load_contributors=function(){a.load_contributor_data(c.song.id).then(function(a){b+=a.iq_earners.length;c.contributors=a;c.has_more_iq_earners=b<a.iq_earners_total;d+=1}).finally(function(){c.ctrl.loading_contributors=!1;c.ctrl.loading_iq_earners=
!1})};this.load_more_iq_earners=function(){c.loading_contributors||(this.loading_iq_earners=!0,a.load_iq_earners(c.song.id,{page:d}).then(function(a){b+=a.iq_earners.length;c.contributors.iq_earners=_.uniq(c.contributors.iq_earners.concat(a.iq_earners),"user.id");c.has_more_iq_earners=b<a.iq_earners_total;d+=1}).finally(function(){c.ctrl.loading_iq_earners=!1}))};this.load_contributors();var g,e,h=function(){c.line_items=[];c.done_loading=!1;g=1;this.load_next_page()}.bind(this);this.load_next_page=
function(){e||(e=a.line_items(c.song.id,g).then(function(a){var b=a.line_items;c.line_items.push.apply(c.line_items,b);e=void 0;b.length?(g=a.next_page,g||(c.done_loading=!0)):c.done_loading=!0}))};this.should_paginate=function(){return!e&&!c.done_loading};h()}]}}]);
angular.module("genius").directive("songAdminMenu",function(){return{restrict:"E",templateUrl:"song_admin_menu.html",controller:["$scope",function(a){a.actions="publish unpublish hide unhide award_transcription_iq remove_transcription_iq reindex pin_to_homepage_hot_songs unpin_from_homepage_hot_songs pin_to_hot_songs unpin_from_hot_songs allow_in_hot_songs exclude_from_hot_songs view_annotation_engagement_data edit_spotify_annotations_for view_lyrics_synchronization destroy verify_lyrics disable_media enable_media".split(" ")}],link:function(a){a.$watch("song.current_user_metadata",
function(){a.has_admin_items=_(a.actions).some(function(c){return a.can_perform(c)})})}}});angular.module("genius").directive("songAlbum",function(){return{scope:{album:"<",tracks:"<",current_song:"<currentSong"},restrict:"E",templateUrl:"song_album.html"}});
angular.module("genius").directive("songMedia",function(){return{restrict:"E",scope:!0,templateUrl:"song_media.html",controllerAs:"song_media_ctrl",controller:["$scope","Tracking",function(a,c){this.audio_exists=function(){return a.audio_media()&&(!a.media_player_audio.state||!a.media_player_audio.state.has_errored)};this.video_exists=function(){return a.video_media()&&(!a.media_player_video.state||!a.media_player_video.state.has_errored)};this.fact_track_exists=function(){return a.can_perform("watch_fact_track")};
this.no_media_exists=function(){return!this.fact_track_exists()&&!this.video_exists()&&!this.audio_exists()};this.only_one_playable_media_exists=function(){return 1===_.compact([this.fact_track_exists(),this.video_exists(),this.audio_exists()]).length};this.only_fact_track_exists=function(){return this.fact_track_exists()&&!this.video_exists()&&!this.audio_exists()};this.set_default_media=function(){this.video_exists()?this.active_media="video":this.audio_exists()&&(this.active_media="audio")};this.set_default_media();
a.$watchGroup(["media_player_audio.state.has_errored","media_player_video.state.has_errored","video_media()","audio_media()"],this.set_default_media.bind(this));this.is_audio_active=function(){return"audio"===this.active_media}.bind(this);this.is_video_active=function(){return"video"===this.active_media}.bind(this);this.has_initiated_audio_play=this.has_initiated_video_play=!1;this.play_video=function(){a.media_player_video.api.load_media();a.media_player_video.api.playpause();this.has_initiated_video_play||
(c.track("Play featured video"),this.has_initiated_video_play=!0)};this.play_audio=function(){a.media_player_audio.api.load_media();a.media_player_audio.api.playpause();this.has_initiated_audio_play||(c.track("Play audio"),this.has_initiated_audio_play=!0)};this.activate_video=function(){c.track("Switch media to video");this.active_media="video";this.play_video();a.media_player_audio.api&&a.media_player_audio.api.pause()};this.activate_audio=function(){c.track("Switch media to audio");this.active_media=
"audio";this.play_audio();a.media_player_video.api&&a.media_player_video.api.pause()}}],link:function(a){a.play_video_fullscreen=function(){var a=$(".song_art_and_video-video-iframe").find("iframe")[0],d=a.requestFullScreen||a.mozRequestFullScreen||a.webkitRequestFullScreen;d&&d.bind(a)()}}}});angular.module("genius").directive("songMediaControlsSelector",function(){return{restrict:"E",templateUrl:"song_media_controls_selector.html"}});
angular.module("genius").directive("songMetadata",function(){return{templateUrl:"song_metadata.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl"}});
angular.module("genius").directive("songMetadataCustomPerformanceRoleInput",function(){return{restrict:"E",templateUrl:"song_metadata_custom_performance_role_input.html",scope:{customPerformanceRoles:"<",isDisabled:"<"},controllerAs:"ctrl",controller:["$scope",function(a){this.remove_custom_performance=function(c){_.pull(a.customPerformanceRoles,c)};this.add_new_custom_performance=function(){a.customPerformanceRoles.push({label:"",artists:[]})}}]}});
angular.module("genius").directive("songMetadataForm",["$window","Session","TagService","I18n",function(a,c,d,b){return{scope:{save:"&onSave",song_was:"<object",expanded_sections:"=expandedSections",yields_is_dirty:"&yieldsIsDirty"},restrict:"E",templateUrl:"song_metadata_form.html",controllerAs:"ctrl",controller:["Tracking","$scope",function(g,e){this.close=function(){!e.expanded_sections||this.song_form.$dirty&&!a.confirm(b.t("song.action_confirmations.dismiss_dirty"))||delete e.expanded_sections};
this.has_permission=function(a){return c.has_permission(a,e.song)};this.submit=function(){e.save({song:e.song}).then(function(){g.track("Metadata Edit",{Source:"Edit"});delete e.expanded_sections}).catch(function(a){this.error=a}.bind(this))};e.song=angular.copy(e.song_was);e.$watch("song_was.updated_by_human_at",function(a,b){a>b&&(this.editable_metadata_stale=!0)}.bind(this));e.available_primary_tags=[];d.primary().then(function(a){e.available_primary_tags=a.map(function(a){return a.id===e.song.primary_tag.id?
e.song.primary_tag:a})})}]}}]);angular.module("genius").directive("songMetadataInputAndLabel",function(){return{restrict:"E",templateUrl:"song_metadata_input_and_label.html",replace:!0,transclude:!0,scope:{label:"@",errors:"<",full:"<",is_disabled:"<isDisabled"}}});angular.module("genius").directive("songPrimaryAlbum",function(){return{restrict:"E",templateUrl:"song_primary_album.html",scope:{album:"<"}}});
angular.module("genius").directive("soundcloud",["$sce","$q","querystring","Tracking","getScript",function(a,c,d,b,g){return{restrict:"E",templateUrl:"soundcloud.html",replace:!0,scope:{yieldsApi:"&",yieldsState:"&",src:"<"},link:function(e,h){var f={auto_play:!1,buying:!1,liking:!1,download:!1,sharing:!1,show_artwork:!1,show_comments:!1,show_playcount:!1,show_user:!1,hide_related:!0,visual:!1,url:e.src},k={};e.yieldsState({state:k});e.soundcloud_player_url=a.trustAsResourceUrl("https://w.soundcloud.com/player/?"+
d.stringify(f));var l=function(a,b,c){a.bind(b,function(){e.$apply(c)})},n=c.defer(),m=n.promise;g("https://w.soundcloud.com/player/api.js",{cache:!0}).then(function(){var a=SC.Widget(h[0]);a.bind(SC.Widget.Events.READY,function(){a.getDuration(function(b){b?(n.resolve(a),e.duration=b):k.has_errored=!0;e.$apply()})})});var q=_.once(function(){b.track("Soundcloud play")});m.then(function(a){k.is_loaded=!0;l(a,SC.Widget.Events.ERROR,function(){k.has_errored=!0});l(a,SC.Widget.Events.PAUSE,function(){k.is_loaded=
!0;k.is_playing=!1});l(a,SC.Widget.Events.PLAY,function(){q();k.is_loaded=!1;k.is_playing=!0});a.bind(SC.Widget.Events.PLAY_PROGRESS,_.throttle(function(a){e.$apply(function(){k.is_loaded=!0;k.percentage=a.relativePosition;k.time_remaining=e.duration-a.currentPosition})},100))});e.yieldsApi({api:{load_media:function(){},playpause:function(){m.then(function(a){k.is_playing?a.pause():a.play()})},pause:function(){m.then(function(a){a.pause()})},seek_to:function(a){k.percentage=a;m.then(function(b){b.seekTo(e.duration*
a)})}}})}}}]);angular.module("genius").directive("spotifyOnboarding",["Cookies",function(a){return{link:function(c,d){a.put("has_hidden_open_in_app_button",1,{path:"/"});c.jump_below_onboarding=function(){var a=d.position().top+d.outerHeight();$("html, body").animate({scrollTop:a},150)}}}}]);
angular.module("genius").directive("standaloneReferent",function(){return{templateUrl:"standalone_referent.html",restrict:"E",scope:{referent:"<object",variants:"<"},controller:["$scope",function(a){this.disables_user_tooltips=a.variants.disableTooltips}]}});
angular.module("genius").directive("standardRichContent",function(){return{restrict:"E",scope:{html:"<",variants:"<"},templateUrl:"standard_rich_content.html",controller:["$scope","$sce",function(a,c){a.$watch("html",function(d){d?a.trusted_html=c.trustAsHtml(d):delete a.trusted_html})}]}});
angular.module("genius").directive("sticky",["Waypoint","$immediate","Bindings",function(a,c,d){var b=d.resolver({yields_stuck:"&yieldsStuck",sticky:"<"});return{restrict:"A",link:function(d,e,h){var f=b(d,h),k=h.stickyClass,l;l="stickyUseParentAsWrapper"in h?!1:'<div class="'+(h.stickyWrapperClass||"sticky_wrapper")+'">';d.$watch(h.refreshStickyPoints,function(){c(a.refreshAll,!1)});var n=!1,m=function(){n=!n;d.$apply(function(){f.yields_stuck({stuck:n})})};c(function(){var b="undefined"!==typeof f.sticky,
c=new a.Sticky({element:e,wrapper:l,stuckClass:k,offset:h.stickyOffset||"0",handler:m,enabled:!b});b&&d.$watch(function(){return f.sticky},function(){f.sticky?c.waypoint.enable():c.waypoint.disable()})},!1)}}}]);angular.module("genius").directive("stopPropagation",function(){return{restrict:"A",link:function(a,c,d){c.on(d.stopPropagation,function(a){a.stopPropagation()})}}});
angular.module("genius").directive("submitOnCmdEnter",function(){return{restrict:"A",require:"form",link:function(a,c,d,b){c.on("keydown",function(d){13===d.keyCode&&(d.metaKey||d.shiftKey)&&(a.$apply(function(){b.$commitViewValue()}),c.triggerHandler("submit"),d.preventDefault())})}}});
angular.module("genius").directive("tetherDrop",["$immediate","TetherDrop",function(a,c){return{restrict:"E",scope:{containerClasses:"@",position:"@",showOn:"@",visible:"<?",yieldsApi:"&?"},transclude:"true",link:function(d,b,g,e,h){var f,k=new c({content:f||"",target:b.closest("[tether-drop-target]")[0],position:d.position||"right middle",openOn:d.showOn,remove:!0,loadContentOnDemand:!0,hoverOpenDelay:250,tetherOptions:{constraints:[{to:"window",attachment:"together element",pin:!0}],classes:{element:d.containerClasses}}});
k.once("open",function(){h(function(b){var c=$(k.content);c.hide();f=$("<div>").append(b)[0];c.append(f);a(function(){c.show();k.position()})})});"visible"in g&&d.$watch("!!visible",function(a){a?k.open():k.close()});d.$watch(function(){k.position()});d.$on("$destroy",function(){k.destroy()});b={hide:function(){k.close()},show:function(){k.open()}};"yieldsApi"in g&&d.yieldsApi({tetherApi:b})}}}]);
angular.module("genius").component("textCorrector",{bindings:{text:"<",cancel:"&",submit:"&",yields_text_corrector:"&yieldsTextCorrector"},templateUrl:"text_corrector.html",controller:["$q","$window","I18n",function(a,c,d){this.submit_form=function(){this.saving=!0;return a.when(this.submit({corrected:this.text})).finally(function(){delete this.saving;this.correction_form.$setPristine()}.bind(this))};this.cancel_correction=function(){if(!this.is_dirty()||c.confirm(d.t("editing.dirty_unload_confirm_box")))this.correction_form.$rollbackViewValue(),
this.correction_form.$setPristine(),this.cancel()};this.yields_text_corrector({text_corrector:{cancel:this.cancel_correction.bind(this)}})}]});
angular.module("genius").directive("textSelectionChanged",["TextSelection",function(a){var c=function(a){for(a=a.commonAncestorContainer;a.nodeType!==Node.ELEMENT_NODE;)a=a.parentNode;return a};return{restrict:"A",scope:{textSelectionChanged:"&"},link:function(d,b){a.$on("selection",function(a,e){var h=e.ranges.filter(function(a){return b[0].contains(c(a))});d.textSelectionChanged({ranges:h})})}}}]);
angular.module("genius").directive("timeAgo",function(){return{restrict:"E",templateUrl:"time_ago.html",scope:{time:"<"}}});
angular.module("genius").directive("timestampInput",["timestamp_for_displayFilter",function(a){return{scope:{timestamp:"=ngModel",ngDisabled:"<"},template:'<input ng-model="string" ng-disabled="ngDisabled" type="text"/>',link:function(c,d){c.$watch("timestamp",function(b){c.string=a(b)});d.find("input").on("blur",function(){var a;(a=c.string)?(a=a.split(":"),a=Math.floor(1E3*(60*parseInt(a[0]||"0",10)+parseFloat(a[1]||"0")))):a=null;c.timestamp=a;c.$apply()})}}}]);
angular.module("genius").directive("tracking",["Tracking","Waypoint",function(a,c){return{restrict:"A",link:function(d,b,g){var e=function(){a.track(g.trackingEvent,d.$eval(g.trackingOptions))};switch(g.tracking){case "scroll_into_view":new c({element:b,handler:function(){e();this.destroy()}});break;default:b.bind(g.tracking,e)}}}}]);
angular.module("genius").directive("tracksLinkWithClass",["$document",function(a){return{restrict:"A",link:function(c,d,b){void 0!==window.mixpanel&&(d.addClass(b.tracksLinkWithClass),mixpanel.track_links("."+b.tracksLinkWithClass,b.withEventName||"clicked_"+b.tracksLinkWithClass,{"from url":a[0].location.href}))}}}]);
angular.module("genius").directive("transcludeInjectingLocalScope",function(){return{restrict:"E",link:function(a,c,d,b,g){if(!g)throw{message:"Illegal use of transcludeInjectingLocalScope directive in the template! No parent directive that requires a transclusion found.",element:c};var e=a.$new();g(e,function(a){c.empty();c.append(a);c.on("$destroy",function(){e.$destroy()})})}}});
angular.module("genius").directive("upwardsInfiniteScroll",["$throttle",function(a){return{restrict:"A",link:function(c,d,b){var g=b.upwardsInfiniteScroll,e=!1;b.infiniteScrollDisabled&&c.$watch(b.infiniteScrollDisabled,function(a){e=a;h()});var h=function(){e||d.scrollTop()<.1*d.height()&&c.$eval(g)};h();d.on("scroll",a(h,250,{leading:!1}))}}}]);
angular.module("genius").directive("userBadge",function(){return{restrict:"E",templateUrl:"user_badge.html",scope:{user:"<object",size:"@",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",sponsor:"<",variants:"<"},require:"^?standaloneAnnotation",link:function(a,c,d,b){a.disables_user_tooltips=b&&b.disables_user_tooltips;c=!_.contains(["small","x_small"],a.size);a.is_two_lines=c;a.user&&(a.avatar_url=c?a.user.avatar.small.url:a.user.avatar.thumb.url)}}});
angular.module("genius").directive("userBadgeAndTimestamp",function(){return{restrict:"E",templateUrl:"user_badge_and_timestamp.html",scope:{size:"@",user:"<",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",time:"<",sponsor:"<",variants:"<"}}});angular.module("genius").directive("userTooltip",function(){return{restrict:"E",templateUrl:"user_tooltip.html",scope:{user:"<"}}});
angular.module("genius").directive("voters",["VoteService",function(a){return{restrict:"E",templateUrl:"voters.html",scope:{type:"@",object:"<"},link:function(c){c.load=function(){a.load_voters(c.type,c.object.id).then(function(a){c.loaded_voters=!0;c.voters=a;c.object.votes_total=a.votes_total})};c.$on("update_voters",function(a){c.loaded_voters=!1;c.load()});c.load()}}}]);
angular.module("genius").directive("voting",function(){var a={down:-1,up:1};return{restrict:"E",templateUrl:"voting.html",scope:{voteTotalClicked:"&",voteable:"<object",type:"@",onUnauthorized:"&",variants:"<"},controllerAs:"ctrl",controller:["$scope","Session","Tracking","VoteService","Reversible",function(c,d,b,g,e){var h=function(b,d){var h={votes_total:c.voteable.votes_total+((a[b]||0)-(a[d]||0))};c.voteable.has_voters||(h.has_voters=!0);var n=e.modify(c.voteable,h);g.submit_vote(c.type,c.voteable.id,
b).then(function(){c.$emit("vote_saved")}).catch(function(){n();c.voteable.current_user_metadata.interactions.vote=d})};this.submit_vote=function(a){var e=c.voteable.current_user_metadata.interactions.vote;a===e&&(a=void 0);if(!d.user_signed_in)return b.track("Logged out vote attempt"),c.onUnauthorized({vote:a});d.has_permission("vote",c.voteable)&&(c.voteable.current_user_metadata.interactions.vote=a,h(a,e),c.$emit("vote_submitted",c.type,a))}}]}});
angular.module("genius").directive("watchImagesLoaded",["$immediate",function(a){return{restrict:"A",link:function(c,d,b){c.$watch(b.watchImagesLoaded||"ngBindHtml",function(b){b?a(function(){d.waitForImages(function(){c.$apply(function(){c.$emit("images_loaded")})})},!1):c.$emit("images_loaded")})}}}]);
angular.module("genius").directive("yieldsBoundingBoxHeight",["$immediate",function(a){return{restrict:"A",scope:{yieldsBoundingBoxHeight:"&"},link:function(c,d){a(function(){var a=d[0].getBoundingClientRect().height;c.yieldsBoundingBoxHeight({height:a})})}}}]);
angular.module("genius").directive("youtubePlayer",["$document","YouTube",function(a,c){var d=/http:\/\/www\.youtube\.com\/watch\?v=(.*)/i;return{restrict:"E",scope:{src:"<?",start:"<?",controls:"<?",yields_api:"&yieldsApi",yields_state:"&yieldsState",eager_load:"<?eagerLoad",autoplay:"<?"},link:function(b,g){b.state={};var e=a[0].createElement("div");g[0].appendChild(e);var h=new c(e,{controls:b.controls});b.$watch("src",function(a){a=a.match(d)[1];h.cue_video_by_id(a,b.start||0);b.eager_load&&(h.api.load_media(),
b.autoplay&&(h.api.mute(),h.api.playpause()))});b.yields_api({api:h.api});b.yields_state({state:h.state})}}}]);angular.module("genius").factory("Airbrake",["$window","AppConfig",function(a,c){var d=a.Airbrake;d.setProject(c.airbrake_project_id,c.airbrake_key);d.setEnvironmentName(c.env);c.airbrake_development_mode&&d.addFilter(function(){return null});return d}]);angular.module("genius").constant("AppConfig",window.APP_CONFIG);
angular.module("genius").factory("Bindings",[function(){var a=function(a,d){var b=a[0],g=a.slice(1)||d,b={"@":function(){return this.attrs[g]},"<":function(){return this.scope.$eval.call(this.scope,this.attrs[g])},"&":function(){return this.scope.$eval.bind(this.scope,this.attrs[g])}}[b];if(!b)throw Error("invalid attribute specification passed to Bindings service: '"+g+"'");return b};return{resolver:function(c){var d=function(a,c){this.scope=a;this.attrs=c};_.each(c,function(b,c){Object.defineProperty(d.prototype,
c,{get:a(b,c)})});return function(a,c){return new d(a,c)}}}}]);angular.module("genius").factory("Cookies",function(){return{get:function(a){return $.cookie(a)},getObject:function(a){if(a=$.cookie(a))return JSON.parse(a)},getAll:function(){return $.cookie()},put:function(a,c,d){return $.cookie(a,c,d)},putObject:function(a,c,d){return $.cookie(a,JSON.stringify(c),d)},remove:function(a,c){return $.removeCookie(a,c)}}});
angular.module("genius").factory("CursoredScrollableDataFactory",function(){return function(a,c,d,b,g){this.cursor_name=g||"cursor";this.next_cursor=b;this.params=_.clone(d)||{};this.next=function(){var b={};b[this.cursor_name]=this.next_cursor;return a(_.extend(b,this.params)).then(function(a){this.next_cursor=a[this.cursor_name];return a[c]}.bind(this))}.bind(this);this.has_next=function(){return this.next_cursor||"undefined"===typeof this.next_cursor}.bind(this);this.reset=function(){this.next_cursor=
b}.bind(this)}});angular.module("genius").factory("$debounce",["$timeout",function(a){return function(c,d){var b;return function(){a.cancel(b);b=a(c,d)}}}]);
angular.module("genius").factory("Filepicker",["$window","AppConfig","$q",function(a,c,d){var b=a.filepicker;b.setKey(c.filepicker_api_key);var g=["image/jpeg","image/png","image/gif"],e={policy:c.filepicker_policy,signature:c.filepicker_signature},h=["IMAGE_SEARCH","COMPUTER","URL"];a=function(a){a=a||{};this.allowed_mime_types=a.allowed_mime_types||g;this.services=a.services||h;this.open_to=a.open_to||"IMAGE_SEARCH"};a.prototype={allows_mime_type:function(a){return 0<=this.allowed_mime_types.indexOf((a||
"").toLowerCase())},_store:function(a,c){var g=angular.extend(angular.copy(e),c);g.container=a.container;var h=d.defer();b.store(a,g,function(a){h.resolve(this._construct_s3_url(a.key))}.bind(this),function(a){h.reject(a)},function(a){h.notify(a)});return h.promise},_read_blob:function(a){var b=d.defer(),c=new FileReader;c.onloadend=function(){b.resolve(c.result)};c.readAsBinaryString(a);return b.promise},_construct_s3_url:function(a){return"https://s3.amazonaws.com/"+c.filepicker_s3_image_bucket+
"/"+encodeURIComponent(a)},store:function(a,b){return a instanceof Blob?this._read_blob(a).then(function(a){return this._store(btoa(a),angular.extend(b,{base64decode:!0}))}.bind(this)):this._store(a,b)},pick:function(a){var c=d.defer();a=angular.extend(angular.copy(e),{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},a);b.pick(a,function(a){b.stat(a.url,angular.extend(angular.copy(e),{width:!0,height:!0}),function(b){c.resolve({blob:a,dimensions:b})})}.bind(this));return c.promise},
pick_and_store:function(a){var c=d.defer();a=angular.extend(e,{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},a);b.pickAndStore(a,{},function(a){c.resolve(this._construct_s3_url(a[0].key))}.bind(this));return c.promise}};return a}]);angular.module("genius").factory("GlobalErrorBus",["$rootScope",function(a){return a.$new("isolate")}]);
angular.module("genius").factory("GlobalErrorInterceptor",["GlobalErrorBus","$q",function(a,c){return{responseError:function(d){if(429===d.status){var b=_.get(d,"data.response.message.html")||"<h1>You hit a rate limit!</h1>";a.$emit("global_error",b)}return c.reject(d)}}}]);angular.module("genius").factory("$immediate",["$timeout",function(a){return function(c,d){a(c,0,d)}}]);
angular.module("genius").factory("OnsiteInterceptor",function(){return{request:function(a){var c;c=a.url;var d=document.createElement("a");d.href=c;c=d.hostname;c&&c!=window.location.hostname||(a.headers["X-Requested-With"]="XMLHttpRequest","GET"!==a.method&&(a.headers["X-CSRF-Token"]=$.cookie("_csrf_token")));return a}}});
angular.module("genius").factory("PagedScrollableDataFactory",function(){return function(a,c,d,b){this.next_page=b||1;this.params=_.clone(d)||{};this.next=function(){return a(_.extend({page:this.next_page},this.params)).then(function(a){this.next_page=a.next_page;return a[c]}.bind(this))}.bind(this);this.has_next=function(){return this.next_page}.bind(this);this.reset=function(){this.next_page=1}.bind(this)}});
angular.module("genius").factory("parse_time_string",function(){return function(a){if(!a)return null;a=a.split(/\D/);var c=a[2]?parseInt((a[2]+"000").slice(0,3)):0;return 6E4*parseInt(a[0])+1E3*parseInt(a[1])+c}});
angular.module("genius").factory("Preloader",["$q",function(a){var c=function(a){this.bulk_load_function=a};c.prototype={cache:{},insert:function(c,b){this.cache[c]=a.when(b)},load:function(a){this.bulk_load([a]);return this.cache[a]},filter_unloaded:function(a){var b=this.cache;return a.filter(function(a){return!b[a]})},bulk_load:function(a){var b=this.cache;a=this.filter_unloaded(a);var c=a.length?this.bulk_load_function(a):void 0;a.forEach(function(a){b[a]=c.then(function(b){return b[a]})})}};
return c}]);
angular.module("genius").factory("ReferentLocator",["$document","AppConfig",function(a,c){var d=c.annotator_context_length,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\u0000-\uFFFF]/g,g=function(b){var c=a[0].createRange();c.selectNodeContents(b);return c};return{calculate_referent_location:function(a,c){var f=g(c);f.setEnd(a.startContainer,a.startOffset);f=f.cloneContents();$(f).find("[avoid-selection]").remove();var f=g(f).toString().replace(/\s+/g,"").match(b)||[],k=f.slice(-d),l=g(c);l.setStart(a.endContainer,a.endOffset);
l=(l.toString().replace(/\s+/g,"").match(b)||[]).slice(0,d);return{previous_context:k.join(""),text:a.toString(),next_context:l.join(""),total_offset:f.length}},calculate_image_location:function(a,b){return{image_url:b.src,occurrence:$(a).find('img[src="'+b.src+'"]').index(b)+1}}}}]);angular.module("genius").factory("RetryFailureInterceptor",["$injector","$q",function(a,c){return{responseError:function(d){var b=d.config;return b.retries&&0<b.retries?(--b.retries,a.get("$http")(b)):c.reject(d)}}}]);
angular.module("genius").factory("SessionConfig",["$window",function(a){return a.SESSION_CONFIG}]);
angular.module("genius").factory("TextSelection",["$window","$document","$rootScope","$immediate","XpathRange",function(a,c,d,b,g){var e=d.$new(),h=function(a,b){return a&&b&&a.length===b.length?_.all(_.zip(a,b),function(a){var b=a[0];a=a[1];return b.startOffset===a.startOffset&&b.endOffset===a.endOffset&&b.startContainer.isEqualNode(a.startContainer)&&b.endContainer.isEqualNode(a.endContainer)}):!1},f=function(){var b;b=(a.getSelection||c[0].getSelection||$.noop)();b=void 0===b||!b.rangeCount||b.isCollapsed?
void 0:b;if(!b)return[];for(var e=[],d=0;d<b.rangeCount;d++){var f=b.getRangeAt(d);.1<f.getBoundingClientRect().width&&e.push(f)}return e},k=[],l=function(){var a=f();h(a,k)||(k=a,e.$emit("selection",{ranges:a}))};e.restore_selection_if_clobbered=function(a,b){var c=f(),e;c.length&&(e=g.fromRange(c[0],a));c=b();if(e&&!f().length){e=g.toRange(e.start,e.startOffset,e.end,e.endOffset,a);var d=getSelection();d.removeAllRanges();d.addRange(e);l()}return c};c.on("mouseup keyup",function(a){(!a.keyCode||
37<=a.keyCode&&40>=a.keyCode)&&b(l)});return e}]);angular.module("genius").factory("$throttle",["$rootScope",function(a){return function(c,d,b){return _.throttle(function(){var b=arguments;a.$apply(function(){c.apply(null,b)})},d,b)}}]);
angular.module("genius").factory("TimestampedScrollableDataFactory",function(){return function(a,c,d,b){this.reset=function(){this.timestamp_for_next_page=b||Math.floor((new Date).getTime()/1E3)}.bind(this);this.reset();this.params=_.clone(d)||{};this.next=function(){return a(_.extend({timestamp_for_next_page:this.timestamp_for_next_page},this.params)).then(function(a){this.timestamp_for_next_page=a.timestamp_for_next_page;return a[c]}.bind(this))}.bind(this);this.has_next=function(){return this.timestamp_for_next_page}.bind(this)}});
angular.module("genius").factory("TwoStepScrollableDataFactory",[function(){return function(a,c){this.reset=function(){this.state=0===a.length?3:1}.bind(this);this.reset();this.models=a;this.next=function(){switch(this.state){case 1:return this.state=c<this.models.length?2:3,Promise.resolve(this.models.slice(0,Math.min(this.models.length,c)));case 2:return this.state=3,Promise.resolve(this.models.slice(Math.min(c,this.models.length),this.models.length));case 3:return Promise.resolve([])}}.bind(this);
this.has_next=function(){return 3!=this.state}.bind(this)}}]);
angular.module("genius").factory("YouTube",["$rootScope","$q","$timeout","$window","getScript","wait_for_global",function(a,c,d,b,g,e){var h={controls:0,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0},f=c.defer(),k=f.promise.then(function(){return g("https://www.youtube.com/player_api",{cache:!0})}).then(function(){return e("YT.Player")}),l=function(b,e){this.state={};this.deferred_load=c.defer();this.player=this.deferred_load.promise.then(function(){f.resolve();return k}).then(function(d){return c(function(c){var f=
new d(b,{height:"100%",width:"100%",playerVars:_.defaults({controls:e.controls?2:0},h),events:{onReady:function(){c(f)},onStateChange:function(){a.$apply(this.update_state.bind(this))}.bind(this),onError:function(){a.$apply(function(){this.state.has_errored=!0}.bind(this))}.bind(this)}})}.bind(this))}.bind(this))};Object.defineProperties(l.prototype,{load:{value:function(){this.deferred_load.resolve();return this.player}},cue_video_by_id:{value:function(a,b){this.player.then(function(c){c.cueVideoById(a,
b);this.state.placeholder="https://i.ytimg.com/vi/"+a+"/sddefault.jpg"}.bind(this))}},update_state:{value:function(){this.player.then(function(a){var c=a.getDuration(),e=a.getCurrentTime(),f=0<c?c-e:c;_.extend(this.state,{is_playing:a.getPlayerState()===b.YT.PlayerState.PLAYING,percentage:e/c,time_elapsed:1E3*e,time_remaining:1E3*f});this.state.is_playing&&(this.state.is_loaded=!0,this.state.is_loading=!1,d(this.update_state.bind(this),500))}.bind(this))}},api:{get:function(){return this._api?this._api:
this._api={load_media:function(){this.state.is_loading=!0;return this.load().then(function(){this.state.is_loading=!1;this.state.is_loaded=!0}.bind(this))}.bind(this),seek_to:function(a){return this.player.then(function(b){b.seekTo(a*b.getDuration())})}.bind(this),pause:function(){return this.player.then(function(a){a.pauseVideo()})}.bind(this),playpause:function(){return this.player.then(function(a){a.getPlayerState()!==b.YT.PlayerState.PLAYING?(this.state.has_played=!0,a.playVideo()):a.pauseVideo()}.bind(this))}.bind(this),
mute:function(){return this.player.then(function(a){a.mute()})}.bind(this)}}}});return l}]);angular.module("genius").filter("abbreviateBigNumber",function(){return function(a){return 1E6<a?Math.round(a/1E5)/10+"M":1E3<a?Math.round(a/100)/10+"K":a}});angular.module("genius").filter("andMore",function(){return function(a){return"(and "+a+" more)"}});angular.module("genius").filter("boundedCount",function(){return function(a,c){if(a)return c?Number(a)>=Number(c)?c+"+":a.toString():a.toString()}});
angular.module("genius").filter("cast_to_date",function(){return function(a){return _.isNumber(a)?new Date(1E3*a):_.isString(a)?new Date(a):_.isDate(a)?a:null}});angular.module("genius").filter("drop",function(){return function(a,c){if(a)return 0<=c?_.drop(a,c):_.dropRight(a,-c)}});
angular.module("genius").filter("genericLineItemMessage",["i18nFilter",function(a){return function(c,d){var b=_.extend({scope:"activemodel.activity_stream_line_item_message.message",defaultKey:"default"},d);return a(c,b)}}]);angular.module("genius").filter("highlight_braced",["$sce","$sanitize",function(a,c){var d=/\[(.+?)\]/g;return function(b,g){g=g||{};var e=g.class_name,h=c(b);return a.trustAsHtml(h.replace(d,'<span class="'+e+'">$1</span>'))}}]);
angular.module("genius").filter("human_readable_datetime",["$filter",function(a){return function(c,d){var b=a("cast_to_date")(c);d=d||{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"};return b.toLocaleTimeString("en-US",d)}}]);
angular.module("genius").filter("i18n",["I18n","AppConfig","Airbrake",function(a,c,d){return function(b,g){g&&g.defaultKey&&(g=_.extend(g,{defaultValue:a.t(g.defaultKey,g)}));"object"===typeof b&&(b=_.findKey(b));b=b||"__not_found";if(!a.lookup(b,g)){var e="Missing translation for "+b+"!!!";d.push(Error(e));if("development"===c.env)throw alert(e),Error(e);return""}return a.t(b,g)}}]);angular.module("genius").filter("millisecondsToSeconds",function(){return function(a){return 1E3*a}});
angular.module("genius").filter("min",function(){return function(a){return Math.min.apply(Math,a)}});angular.module("genius").filter("minBy",["$parse",function(a){return function(c,d){var b=a(d);return _.min(c,function(a){return b(a)})}}]);angular.module("genius").filter("minimum_readable_time",["$window",function(a){var c=245;(a=a.location.search.match(/wpm=(\d+)/))&&(c=Number(a[1]));var d=6E4/c;return function(a){return(a?a.split(/\s+/).length:0)*d}}]);
angular.module("genius").filter("minusModulo",function(){return function(a,c){return a-a%c}});angular.module("genius").filter("modelHumanName",["I18n",function(a){return function(c){return a.t("activerecord.models."+c.toLowerCase())}}]);angular.module("genius").filter("richContentPreview",["truncateToBoundaryFilter",function(a){return function(c){if(c)return(c=c.replace(/<[^>]+>/gm,"").trim())?a(c,75,{with_ellipsis:!0}):"[\u2026]"}}]);
angular.module("genius").filter("roleHumanName",["I18n",function(a){return function(c){return a.t("role.types."+c+".one")}}]);angular.module("genius").filter("signed_number",function(){return function(a){return a&&0<a?"+"+a.toString():a.toString()}});angular.module("genius").filter("snakeCase",function(){return function(a){return _.snakeCase(a)}});
angular.module("genius").filter("spotify_artist_metadata",["SpotifyService",function(a){var c={};return function(d){if(!d)return{};var b=c[d];if(b)return b;c[d]={};a.load_artist_metadata(d).then(function(a){c[d]=a})}}]);angular.module("genius").filter("svg",function(){return function(a){return a+".svg"}});
angular.module("genius").filter("timestamp_for_display",function(){var a=function(a,d){return"0000".substring(0,d-a.toString().length)+a};return function(c,d){if(!c&&0!==c)return"";var b=d&&d.skip_millis,g=d&&d.always_millis,e=c/1E3,e=Math.floor(e/60)+":"+a(Math.floor(e%60),2),h=Math.floor(c%1E3);if(g||h&&!b)e+="."+a(h,3);return e}});angular.module("genius").filter("to_utc",["$filter",function(a){return function(c){return a("cast_to_date")(c).toISOString()}}]);
angular.module("genius").filter("truncateToBoundary",function(){return function(a,c,d){if(a){c=d&&d.with_ellipsis?c-1:c;var b=a.substr(0,c);a[c]&&" "!==a[c]&&(c=b.lastIndexOf(" "),-1!==c&&(b=b.substr(0,c)));d&&d.with_ellipsis&&b.length<a.length&&(b+="\u2026");return b}}});angular.module("genius").filter("withIndefiniteArticle",function(){var a=/^[aeiou]/i;return function(c){return(a.test(c)?"an":"a")+" "+c}});
angular.module("genius").provider("windowOnLoad",function(){return{$get:["$window","$q",function(a,c){return new c(function(c){$(a).one("load",c)})}]}});angular.module("genius").service("AccomplishmentService",["$http","AppConfig","$q",function(a,c,d){return{update:function(b,g){return a.put(c.api_root_url+"/accomplishments/"+b,g).then(function(a){return a.data.response}).catch(function(a){var b=Error(a.data.meta.message);_.extend(b,_.pick(a,"status","statusText"));return d.reject(_.extend(b,a.data.response))})}}}]);
angular.module("genius").service("AdwordsAdGroupService",["AppConfig","$http",function(a,c){return{all:function(d){return c.get(a.api_root_url+"/adwords_ad_groups?adwords_campaign_id="+d).then(function(a){return a.data.response.ad_groups})},create:function(d,b){return c.post(a.api_root_url+"/adwords_ad_groups",{ad_group:b,adwords_campaign_id:d}).then(function(a){return a.data.response.ad_group})}}}]);
angular.module("genius").service("AdwordsAdService",["AppConfig","$http",function(a,c){return{all:function(d){return c.get(a.api_root_url+"/adwords_ads?adwords_ad_group_id="+d).then(function(a){return a.data.response.ads})},create:function(d,b){return c.post(a.api_root_url+"/adwords_ads",{ad:b,adwords_ad_group_id:d}).then(function(a){return a.data.response.ad})},update:function(d,b){return c.put(a.api_root_url+"/adwords_ads/"+d,{ad:b}).then(function(a){return a.data.response.ad})}}}]);
angular.module("genius").service("AdwordsCampaignService",["AppConfig","$http",function(a,c){return{all:function(){return c.get(a.api_root_url+"/adwords_campaigns").then(function(a){return a.data.response.campaigns})},create:function(d){return c.post(a.api_root_url+"/adwords_campaigns",{campaign:d}).then(function(a){return a.data.response.campaign})}}}]);angular.module("genius").service("AdwordsNetworkService",["$http","AppConfig",function(a,c){return{all:function(){return a.get(c.api_root_url+"/adwords_networks").then(function(a){return a.data.response.networks})}}}]);
angular.module("genius").service("AlbumService",["$http","AppConfig",function(a,c){return{autocomplete:function(d){return a.get(c.api_root_url+"/albums/autocomplete",{params:{q:d}}).then(function(a){return a.data.response.albums})}}}]);
angular.module("genius").service("AnnotationService",["$q","$http","AppConfig","Session","Reversible","Markdown",function(a,c,d,b,g,e){var h=function(a,b){a._deleted=!0;return b.catch(function(){delete a._deleted})},f=function(a,e){return c.post(d.api_root_url+"/annotation_edits/"+e+"/"+a,{text_format:b.user_signed_in?"html,markdown":"html"}).then(function(a){return a.data.response.annotation_edit})},k=function(a,e){return c.put(d.api_root_url+"/annotations/"+a,e,{params:{text_format:b.user_signed_in?
"html,markdown":"html"}}).then(function(a){return a.data.response})},l=function(a,e){return c.post(d.api_root_url+"/referents/"+a+"/annotations",e,{params:{text_format:b.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response})};return{save:function(b,c){var d={body:{markdown:b._editing.markdown},edit_note:b._editing.edit_note};b._editing._has_source&&(d.source=b._editing.source);var f;f=b.id?k(b.id,{annotation:d}):l(c.referent.id,{annotation:d});var h=g.modify(b,{"body.html":e.to_html(b._editing.markdown),
new:!1,source:d.source});return f.then(function(a){_.extend(c.referent,a.referent);return _.extend(b,a.annotation)}).catch(function(){h();return a.reject()})},safe_delete:function(a){return h(a,this.delete(a.id))},delete:function(a){return c.delete(d.api_root_url+"/annotations/"+a)},accept:function(e,f){var h=f.referent,k=g.modify(h,{classification:"unreviewed"===h.classification?"accepted":h.classification}),l=g.modify(e,{state:"accepted",accepted_by:b.current_user,"current_user_metadata.permissions":["edit"]});
return c.post(d.api_root_url+"/annotations/"+e.id+"/accept",{text_format:b.user_signed_in?"html,markdown":"html"}).then(function(a){return _.extend(e,a.data.response.annotation)}).catch(function(){k();l();return a.reject()})},safe_reject:function(c,e){var d=_.noop,f=e.comment,f=_.extend({},f,{body:f.body.markdown,reason:f.reason?f.reason.raw_name:void 0});0===c.comment_count&&(d=g.modify(c,{_deleted:!0}));return this.reject(c.id,{comment:f,text_format:b.user_signed_in?"html,markdown":"html"}).then(function(a){a=
a.data.response||{};_.extend(c,a.annotation||{_deleted:!0});_.extend(e.referent,a.referent||{_deleted:!0})}).catch(function(){d();return a.reject()})},reject:function(a,b){return c.post(d.api_root_url+"/annotations/"+a+"/reject",b)},pin_to_profile:function(a){return c.put(d.api_root_url+"/annotations/"+a+"/pin_to_profile?text_format=html,markdown").then(function(a){return a.data.response})},unpin_from_profile:function(a){return c.put(d.api_root_url+"/annotations/"+a+"/unpin_from_profile?text_format=html,markdown").then(function(a){return a.data.response})},
toggle_cosign:function(a,e){return c.put(d.api_root_url+"/annotations/"+a+"/"+(e?"":"un")+"cosign?text_format="+(b.user_signed_in?"html,markdown":"html")).then(function(a){return a.data.response})},clear_votes:function(a){return c.delete(d.api_root_url+"/votes",{params:{annotation_id:a}})},report_as_abusive:function(a){return c.post(d.api_root_url+"/annotations/"+a+"/report_as_abusive")},load_versions:function(a){return c.get(d.api_root_url+"/annotations/"+a+"/versions?text_format=html").then(function(a){return a.data.response.versions})},
revert_to_version:function(a,e){return c.put(d.api_root_url+"/annotations/"+a+"/version",{version_id:e,text_format:b.user_signed_in?"html,markdown":"html"}).then(function(a){return a.data.response.annotation})},propose_edit:function(a){return c.post(d.api_root_url+"/annotations/"+a.id+"/edits",{annotation:{body:{markdown:a._editing.markdown},edit_note:a._editing.edit_note},text_format:b.user_signed_in?"html,markdown":"html"}).then(function(a){return a.data.response.annotation_edit})},proposed_edits:function(a){return c.get(d.api_root_url+
"/annotations/"+a+"/edits",{params:{text_format:"html"}}).then(function(a){return a.data.response.annotation_edits})},merge_edit:function(a){return f("merge",a)},reject_edit:function(a){return f("reject",a)},load_by_user:function(a,b){return c.get(d.api_root_url+"/users/"+a+"/annotations",{params:b}).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("AnswerService",["$http","$q","AppConfig","Session","Reversible","Markdown",function(a,c,d,b,g,e){var h=function(a){var b=Error(a.data.meta.message);_.extend(b,_.pick(a,"status","statusText"));return c.reject(_.extend(b,a.data.response))},f=function(c,e){return a.put(d.api_root_url+"/answers/"+c,e,{params:{text_format:b.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response}).catch(function(a){return h(a)})},k=function(c,e){var f={text_format:b.user_signed_in?
"html,markdown":"html"};return a.post(d.api_root_url+"/answers",_.extend(e,{question:_.pick(c,["body","song_id","default_key","state"])}),{params:f}).then(function(a){return a.data.response}).catch(function(a){return h(a)})},l=function(c,e){return a.post(d.api_root_url+"/questions/"+c+"/answers",e,{params:{text_format:b.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response}).catch(function(a){return h(a)})};return{save:function(a,d){var h={body:{markdown:a._editing.markdown},
pin_question:a._editing.pin_question};b.has_permission("update_answer_source",d.question)&&(h.answer_source=a.answer_source);var r;r=a.id?f(a.id,{answer:h}):d.question.id?l(d.question.id,{answer:h}):k(d.question,{answer:h});var u=g.modify(a,{"body.html":e.to_html(a._editing.markdown),new:!1}),t={};h.pin_question&&(t.state="pinned");var v=g.modify(d.question,t);return r.then(function(b){_.extend(d.question,_.omit(b.question,"answer"));return _.extend(a,b.answer)}).catch(function(a){u();v();return c.reject(a)})},
destroy:function(b,e){var f=b.id;if(!f)return c.reject(Error("Answer hasn't been saved yet."));var k=g.modify(e.question.current_user_metadata,{permissions:e.question.current_user_metadata.permissions.concat("add_answer")});return a.delete(d.api_root_url+"/answers/"+f).then(function(a){_.extend(e.question,_.omit(a.question,"answer"));return a.data.response}).catch(function(a){k();return h(a)})}}}]);
angular.module("genius").service("ArtistService",["$http","AppConfig",function(a,c){var d={autocomplete_api_endpoint:c.api_root_url+"/artists/autocomplete",autocomplete:function(b){return a.get(d.autocomplete_api_endpoint,{params:{q:b}}).then(function(a){return a.data.response.artists})},autocomplete_options:{minChars:2,parse:function(a){return _.map(a.response.artists,function(a){return{data:[a.name,a],value:a,result:a}})}},load:function(b){return a.get(c.api_root_url+"/artists/"+b).then(function(a){return a.data.response.artist})},
update:function(b){return a.put(c.api_root_url+"/artists/"+b.id,{artist:_.pick(b,"name alternate_names image_url header_image_url instagram_name twitter_name facebook_name".split(" "))}).then(function(a){return a.data.response.artist})},load_albums:function(b,d){return a.get(c.api_root_url+"/artists/"+b+"/albums",{params:d}).then(function(a){return a.data.response})},load_leaderboard:function(b,d){return a.get(c.api_root_url+"/artists/"+b+"/leaderboard",{params:d}).then(function(a){return a.data.response})},
merge:function(b,d){return a.put(c.api_root_url+"/artists/"+b+"/merge",{target:{name:d}}).then(function(a){return a.data.response})},get_slug:function(a){return _(this.get_path(a).split("/")).last()},get_path:function(a){return(new URL(a.url)).pathname},activity_line_items:function(b,d){return a.get(c.api_root_url+"/artists/"+b+"/activity_stream/line_items",{params:d}).then(function(a){return a.data.response})}};return d}]);
angular.module("genius").service("Attempt",["$window","I18n",function(a,c){return{close_form:function(d,b){d?b():a.confirm(c.t("editing.dirty_unload_confirm_box"))&&b()},admin_action:function(c,b){a.confirm(b)&&c()}}}]);
angular.module("genius").service("Authentication",["$q","$http","AppConfig","signed_out_created_content",function(a,c,d,b){return{sign_in:function(b){return c.post(d.api_root_url+"/sessions",{user:b}).catch(function(b){return a.reject(_.set(b.data.response,"message",b.data.meta.message))})},sign_up:function(g){return c.post(d.api_root_url+"/users",{user:g,signed_out_created_content:b.get()}).then(function(){b.clear()}).catch(function(b){return a.reject(_.set(b.data.response,"message",b.data.meta.message))})}}}]);
(function(a,c){if("function"===typeof define&&define.amd)define(["exports","module"],c);else if("undefined"!==typeof exports&&"undefined"!==typeof module)c(exports,module);else{var d={exports:{}};c(d.exports,d);a.autosize=d.exports}})(this,function(a,c){function d(a,b){function c(){var b=window.getComputedStyle(a,null);x=b.overflowY;"vertical"===b.resize?a.style.resize="none":"both"===b.resize&&(a.style.resize="horizontal");w="content-box"===b.boxSizing?-(parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)):
parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth);isNaN(w)&&(w=0);g()}function d(b){var c=a.style.width;a.style.width="0px";a.offsetWidth;a.style.width=c;x=b;v&&(a.style.overflowY=b);f()}function f(){var b=window.pageYOffset,c=document.body.scrollTop,e=a.style.height;a.style.height="auto";var d=a.scrollHeight+w;0===a.scrollHeight?a.style.height=e:(a.style.height=d+"px",J=a.clientWidth,document.documentElement.scrollTop=b,document.body.scrollTop=c)}function g(){var b=a.style.height;f();
window.getComputedStyle(a,null).height!==a.style.height?"visible"!==x&&d("visible"):"hidden"!==x&&d("hidden");b!==a.style.height&&(b=h("autosize:resized"),a.dispatchEvent(b))}var u=void 0===b?{}:b,t=u.setOverflowX,t=void 0===t?!0:t,u=u.setOverflowY,v=void 0===u?!0:u;if(a&&a.nodeName&&"TEXTAREA"===a.nodeName&&!e.has(a)){var w=null,x=null,J=a.clientWidth,D=function(){a.clientWidth!==J&&g()},A=function(b){window.removeEventListener("resize",D,!1);a.removeEventListener("input",g,!1);a.removeEventListener("keyup",
g,!1);a.removeEventListener("autosize:destroy",A,!1);a.removeEventListener("autosize:update",g,!1);e["delete"](a);Object.keys(b).forEach(function(c){a.style[c]=b[c]})}.bind(a,{height:a.style.height,resize:a.style.resize,overflowY:a.style.overflowY,overflowX:a.style.overflowX,wordWrap:a.style.wordWrap});a.addEventListener("autosize:destroy",A,!1);"onpropertychange"in a&&"oninput"in a&&a.addEventListener("keyup",g,!1);window.addEventListener("resize",D,!1);a.addEventListener("input",g,!1);a.addEventListener("autosize:update",
g,!1);e.add(a);t&&(a.style.overflowX="hidden",a.style.wordWrap="break-word");c()}}function b(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=h("autosize:destroy");a.dispatchEvent(b)}}function g(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=h("autosize:update");a.dispatchEvent(b)}}var e="function"===typeof Set?new Set:function(){var a=[];return{has:function(b){return Boolean(-1<a.indexOf(b))},add:function(b){a.push(b)},"delete":function(b){a.splice(a.indexOf(b),1)}}}(),h=function(a){return new Event(a)};
try{new Event("test")}catch(k){h=function(a){var b=document.createEvent("Event");b.initEvent(a,!0,!1);return b}}var f=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?(f=function(a){return a},f.destroy=function(a){return a},f.update=function(a){return a}):(f=function(a,b){a&&Array.prototype.forEach.call(a.length?a:[a],function(a){return d(a,b)});return a},f.destroy=function(a){a&&Array.prototype.forEach.call(a.length?a:[a],b);return a},f.update=function(a){a&&Array.prototype.forEach.call(a.length?
a:[a],g);return a});c.exports=f});angular.module("genius").service("Autosize",["$window",function(a){return a.autosize}]);angular.module("genius").service("BeforeUnloadCheck",["$window","I18n",function(a,c){var d=[];a.onbeforeunload=function(){if(_.any(d,function(a){return a()}))return c.t("editing.dirty_unload")};return{add:function(a){d.push(a)},remove:function(a){_.remove(d,function(c){return c===a})}}}]);angular.module("genius").service("Bowser",["$window",function(a){return a.bowser}]);
angular.module("genius").service("Brightcove",["$q","AppConfig","getScript","wait_for_global",function(a,c,d,b){var g=a.defer(),e=function(e){return g.promise.then(function(){return d("//players.brightcove.net/"+c.brightcove_account_id+"/"+e+"_default/index.min.js",{cache:!0})}).then(function(){return a.all({videojs:b("videojs"),bc:b("bc")})})};return{account_id:c.brightcove_account_id,p_relevant_player_id:c.brightcove_p_relevant_web_player_id,hyper_relevant_player_id:c.brightcove_hyper_relevant_web_player_id,
load_api:function(a){g.resolve();return e(a)}}}]);
angular.module("genius").service("CommentService",["$http","$q","AppConfig","Markdown","signed_out_created_content",function(a,c,d,b,g){return{load:function(b,c,f){return a.get(d.api_root_url+"/"+b+"/"+c+"/comments",{params:f}).then(function(a){return a.data.response})},destroy:function(b){return a.delete(d.api_root_url+"/comments/"+b)},create:function(e,h,f){delete f._deleted;var k=_.extend({},f,{body:f.body.markdown,reason:f.reason?f.reason.raw_name:void 0});f.body.html=b.to_html(k.body);return a.post(d.api_root_url+
"/"+e+"/"+h+"/comments?text_format=html",{comment:k}).then(function(a){_.extend(f,a.data.response.comment);g.add("comments",f.id);f.anonymous_author&&(f.anonymous_author.email=f.email);return f}).catch(function(){f._deleted=!0;return c.reject()})},change_state:function(b,c){return a.put(d.api_root_url+"/comments/"+b+"/change_state",{state_event:c})}}}]);
angular.module("genius").service("ConversationService",["$http","AppConfig","querystring",function(a,c,d){return{latest:function(b){b=b||{};b=d.stringify({text_format:"html",page:b.page||1});return a.get(c.api_root_url+"/conversations?"+b).then(function(a){return a.data.response.conversations})},get:function(b){return a.get(c.api_root_url+"/conversations/"+b,{params:{text_format:"html"}}).then(function(a){return a.data.response.conversation})},mark_read:function(b){return a.post(c.api_root_url+"/conversations/"+
b+"/mark_read").then(function(a){return a.data.response.conversation})},with_user:function(b){return a.put(c.api_root_url+"/conversations/with_user",{text_format:"html",user_id:b}).then(function(a){return a.data.response.conversation})}}}]);angular.module("genius").service("CustomAppNotificationService",["$http",function(a){return{send_preview_notification:function(c){return a.post("/custom_app_notifications",{custom_app_notification:_.extend(c,{preview:!0})})}}}]);
angular.module("genius").service("CustomPerformanceRoleService",["$http","AppConfig",function(a,c){return{autocomplete_api_endpoint:c.api_root_url+"/custom_performance_roles/autocomplete",autocomplete:function(c){return a.get(this.autocomplete_api_endpoint,{params:{q:c}}).then(function(a){return a.data.response})},autocomplete_options:{minChars:2,parse:function(a){return _.map(a.response.custom_performance_roles,function(a){a=a.label;return{data:[a],value:a,result:a}})}}}}]);
angular.module("genius").service("DateTools",function(){return{days_to_ms:function(a){var c=new Date;c.setTime(c.getTime()+864E5*a);return c}}});
angular.module("genius").factory("EagerLoader",function(){var a=function(){this.data={};this.listeners={}};a.prototype={loaded:function(a,d){this.listeners[a]?this.listeners[a].forEach(function(a){a(d)}):this.data[a]=d},listen_for:function(a,d){this.listeners[a]=this.listeners[a]||[];this.listeners[a].push(d);this.data[a]&&(d(this.data[a]),delete this.data[a])}};return a});
angular.module("genius").service("Facebook",["AppConfig","$window","$q","getScript",function(a,c,d,b){var g=_.once(function(){var e=d.defer();c.fbAsyncInit=function(){c.FB.init({appId:a.facebook_app_id,version:"v"+a.facebook_opengraph_api_version});e.resolve(c.FB)};b("//connect.facebook.net/en_US/sdk.js",{cache:!0});return e.promise});$(g);return{share:function(a){g().then(function(b){b.ui({method:"share",href:a})})}}}]);
angular.module("genius").service("FollowService",["AppConfig","$http",function(a,c){return{set_following:function(d,b,g){return c.post(a.api_root_url+"/"+d+"s/"+b+"/"+(g?"follow":"unfollow")).then(function(a){return a.data.response})}}}]);angular.module("genius").service("getScript",["$q",function(a){return function(c,d){return a.when($.ajax(_.extend({url:c,type:"GET",dataType:"script"},d)))}}]);
angular.module("genius").factory("HtmlService",["$window",function(a){a={top_level_block_containers:a.TOP_LEVEL_BLOCK_CONTAINERS,top_level_stand_alone_blocks:a.TOP_LEVEL_STANDALONE_BLOCKS};a.top_level_block_containers_regexp=new RegExp("</("+a.top_level_block_containers.join("|")+")>\\s*","gi");a.top_level_stand_alone_blocks_regexp=new RegExp("</("+a.top_level_stand_alone_blocks.join("|")+")>\\s*","gi");return a}]);angular.module("genius").service("I18n",["$window",function(a){return a.I18n}]);
angular.module("genius").service("IdentityService",["$http","AppConfig","$q",function(a,c,d){return{destroy:function(b){return a.delete(c.api_root_url+"/identities/"+b,{},{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response}).catch(function(a){var b=Error(a.data.meta.message);_.extend(b,_.pick(a,"status","statusText"));return d.reject(_.extend(b,a.data.response))})}}}]);
angular.module("genius").service("InboxService",["$http","AppConfig","Session",function(a,c,d){return{get_line_item:function(b,g){return a.get(c.api_root_url+(b?"/inboxes/"+b:"")+"/line_items/"+g,{params:{text_format:d.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response.line_item})},line_items:function(b,d){return a.get(c.api_root_url+"/inboxes/"+b+"/line_items",{params:{text_format:"html",timestamp_for_next_page:d}}).then(function(a){a=a.data.response;var b=a.line_items;
b.timestamp_for_next_page=a.timestamp_for_next_page;return b})},mark_read:function(b,d){var e=c.api_root_url+"/inboxes/"+b+"/line_items/mark_read",h;if(d){h={};for(var f=0;f<d.length;f++)h[f+1]=d[f]}return a.post(e,{event_ids:h})}}}]);
angular.module("genius").service("Iq",["PreloadCache","Session",function(a,c){var d={};_.each(a.iq_event_types,function(a){d[a.name]=a.value});return{for:function(a){var g=c.current_user.virtual_iq_event_type_map;g&&_.has(g,a)&&(a=g[a]);if(_.has(d,a))return d[a];throw Error("Invalid iq event type: "+a);}}}]);
angular.module("genius").service("LocalStorage",["$window",function(a){return{is_available:function(){try{return a.localStorage.setItem("__storage_test__","__storage_test__"),a.localStorage.removeItem("__storage_test__"),!0}catch(c){return!1}},setItem:a.localStorage.setItem.bind(a.localStorage),getItem:a.localStorage.getItem.bind(a.localStorage),removeItem:a.localStorage.removeItem.bind(a.localStorage)}}]);
angular.module("genius").factory("LyricsAnchorer",["$compile","ReferentLocator","ReferentRegistry","ReferentService","LyricsEditingService","SongService",function(a,c,d,b,g,e){var h=function(a){this.container=a.container;this.get_state=a.get_state;this.scope=a.scope;this.song=a.song};h.prototype={construct_referent:function(c,e,g){e=e||{};return b.create_referent({song:_.pick(this.song,["id","updated_by_human_at"]),referent:g,community:!!e.community}).then(function(b){_.extend(b.annotations[0],{new:!0,
_editing:{_form_visible:!0}});d.preload_insert(b);var e;e=b.id;e=$("<a>").attr("href","#").attr("class","referent").attr("ng-click","open()").attr("prevent-default-click","").attr("data-id","new").attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)").attr("annotation-fragment","'"+e+"'").attr("classification","new");e.html(c.extractContents());c.insertNode(e[0]);a(e)(this.scope);d.register(b);return b}.bind(this))},create_referent:function(a,b){return this.construct_referent(a,
b,this.calculate_referent_location(a))},create_image_referent:function(a,b,c){var e=a.src;return this.construct_referent(b,c,{image_url:e,occurrence:this.get_occurrence_in_container_among('img[src="'+e+'"]',a)})},build_correction:function(){var a,b,c=this.get_state();c.referent?(b=this.get_occurrence_in_container_among("[annotation-fragment="+c.referent.id+"]",c.reference_element),a=c.reference_element,b={id:c.referent.id,occurrence:b}):(a=$("<span>").attr("class","line-correction"),b=this.calculate_referent_location(c.range),
a.html(c.range.extractContents()),c.range.insertNode(a[0]));var c=a.html(),e=g.prepare_lyrics_for_editing(c);return{anchor:a,payload:{referent:b},replacement:e,original:{html:c}}},submit_correction:function(a){a.payload.replacement={html:g.lyrics_pseudo_markdown_to_html__deprecated(a.replacement.markdown,{})};a.anchor.html(a.payload.replacement.html);return e.correct_lyrics(this.song,a.payload).catch(function(){a.anchor.html(a.original.html)})},calculate_referent_location:function(a){return c.calculate_referent_location(a,
this.container[0])},get_occurrence_in_container_among:function(a,b){return this.container.find(a).index(b)+1}};return h}]);
(function(a){function c(a){var b=e.call(arguments,1);return function(){return a.apply(this,b.concat(e.call(arguments)))}}function d(a,b){return this.filter(":"+a+(b?"("+b+")":""))}function b(a,b,c,e){return(c=e[3]||l()[(b.nodeName||"").toLowerCase()]||"")?!!a(b.getAttribute(c)):!1}"$:nomunge";var g=window.location,e=Array.prototype.slice,h=g.href.match(/^((https?:\/\/.*?\/)?[^#]*)#?.*$/),f=h[1]+"#",k=h[2],l,n,m,q,r,u={};a.isUrlInternal=m=function(a){return!a||q(a)?void 0:r.test(a)?!0:/^(?:https?:)?\/\//i.test(a)?
!1:/^[a-z\d.-]+:/i.test(a)?void 0:!0};a.isUrlExternal=h=function(a){a=m(a);return"boolean"===typeof a?!a:a};a.isUrlFragment=q=function(b){var c=(b||"").match(/^([^#]?)([^#]*#).*$/);return!!c&&("#"===c[2]||0===b.indexOf(f)||("/"===c[1]?k+c[2]===f:!/^https?:\/\//i.test(b)&&0===a('<a href="'+b+'"/>')[0].href.indexOf(f)))};a.fn.urlInternal=c(d,"urlInternal");a.fn.urlExternal=c(d,"urlExternal");a.fn.urlFragment=c(d,"urlFragment");a.expr[":"].urlInternal=c(b,m);a.expr[":"].urlExternal=c(b,h);a.expr[":"].urlFragment=
c(b,q);a.elemUrlAttr||(a.elemUrlAttr=function(b){return a.extend(u,b)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"});l=a.elemUrlAttr;a.urlInternalHost=h=function(a){a=a?"(?:(?:"+Array.prototype.join.call(arguments,"|")+")\\.)?":"";var b=g.hostname.split(".");b.length>CANONICAL_DOMAIN_PARTS_LENGTH&&b.shift();var b=b.join("."),c=new RegExp("^"+a+"(.*)","i"),b="^(?:https?:)?//(?:(?:"+VALID_SUBDOMAINS.join("|")+").)?"+b.replace(c,a+"$1").replace(/\\?\./g,
"\\.")+(g.port?":"+g.port:"")+"/";return n(b)};a.urlInternalRegExp=n=function(a){a&&(r="string"===typeof a?new RegExp(a,"i"):a);return r};h("www")})(jQuery);
angular.module("genius").service("LyricsEditingService",["AppConfig","HtmlService","MarkdownHelpersService","ReferentRegistry",function(a,c,d,b){return{lyrics_html_without_referent:function(a,b){var c=$("<div>").append($(a));c.find("[data-id='"+b+"']").each(function(a,b){var c=$(b),e=c.find("img")[0]||c.text();c.replaceWith(e)});return c.html()},prepare_lyrics_for_editing:function(a){return this.lyrics_html_to_pseudo_markdown__deprecated(this.clean_up_lyrics__deprecated(a))},clean_up_lyrics__deprecated:function(a){return $.trim($("<div>").append(a).find("a").each(function(){var a=
$(this);if(!a.attr("data-id")&&!a.data("real-link")&&!a.hasClass("referent"))throw a=Error("Error processing lyrics for editing: detected non-referent link ("+a[0].outerHTML+")"),a.human_readable_message="Your browser's copy of the lyrics is out of sync. Try reloading the page",a;a.html().match(/<br[\s\/]?>$/i)&&(a.find("br:last").remove(),a.after("<br>"))}).end().find("#annotation_prompt").remove().end().html().replace(/<p( [^>]*)?>/gi,"").replace(/<\/p>\s*/gi,"\n\n").replace(c.top_level_block_containers_regexp,
"$&\n\n").replace(c.top_level_stand_alone_blocks_regexp,"$&\n\n").replace(/\s*<br[\s\/]?>([ \t]*)\s*/gi,"\n$1"))},lyrics_html_to_pseudo_markdown__deprecated:function(a){var b={attr_hash:{}};a=$("<div>").append(a).find("a").each(function(){var a=$(this);a.find(".referent-vote_total").remove();var c=a.attr("data-id");_.isUndefined(c)?a.data("real-link")?a.replaceWith("["+a.html()+"]("+a.attr("href")+")"):a.replaceWith(a.html()):(_.set(b.attr_hash,c,{"class":a.attr("class"),"data-editorial-state":a.attr("data-editorial-state")}),
a.replaceWith("["+a.html()+"]("+c+")"))}).end();b.markdown=a.find("annotatable-image").each(function(){var a=$(this),b=a.attr("src");a.replaceWith($("<img>").attr("src",b))}).end().html();return b},lyrics_pseudo_markdown_to_html__deprecated:function(b,c){c||(c={});b=b.replace(/\n/gi,"<br>");var h=$("<div>").append(d.convert_markdown_anchors(b)).find("a").each(function(){var b=$(this);b.attr("href",$.trim(b.attr("href")));if(b.attr("href").match(/^\d+$/))b.attr("data-id",b.attr("href")).attr("href",
"/"+b.attr("data-id")).attr(_.get(c,b.attr("data-id"),{}));else{var d=(b.attr("href")||"").trim();"/"===d[0]||0===d.indexOf("http")||0<=d.indexOf(a.canonical_domain)?b.attr("target",$.isUrlInternal(b.attr("href"))?"_self":"_blank").attr("data-real-link",!0):b.replaceWith("["+b.html()+"]("+b.attr("href")+")")}}).end().html();return d.unescape_special_characters_escaped_by_markdown_anchor_converter(h)},backfill_angular_link_properties:function(a){a=$("<div>").append(a).find("a[data-id]").each(function(){var a=
$(this),c=Number(a.attr("data-id")),d=b.peek(c);d&&(a.attr("annotation-fragment",c),a.attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)"),a.attr("ng-click","open()"),a.attr("prevent-default-click",""),a.attr("classification",d.classification),a.attr("image",d.is_image),a.attr("pending-editorial-actions-count",d.pending_editorial_actions_count))}).end();return $("<div>").append(a).html()}}}]);
angular.module("genius").service("LyricsSynchronization",["$rootScope","$q","$http","AppConfig",function(a,c,d,b){var g=a.$new(),e=function(a){return _.isNumber(a)&&(a||0===a)},h=function(a,c){return _.compact([b.api_root_url,"lyrics_synchronizations",a,c]).join("/")},f=function(a){return new l(a.data.response.lyrics_synchronization)},k=function(a){var b=Error(a.data.meta.message);_.extend(b,_.pick(a,"status","statusText"));return c.reject(_.extend(b,a.data.response))};a=function(a){return function(){this._dirty=
!0;return _.tap(a.apply(this,arguments),function(){g.$emit("edit")})}};var l=function(a){_.extend(this,a)};Object.defineProperties(l.prototype,{mark_dirty:{value:a(_.noop)},apply_timestamp_to_line_at_index:{value:a(function(a,b){if(a<this.max_timestamp_before_index(b))throw Error("Can't set time to earlier than a previous line");this.lines[b].timestamp=a;this.lines.slice(b).forEach(function(b){b.timestamp<a&&(b.timestamp=null)});return c.when(this.lines[b])})},set_line_at_index_hidden:{value:a(function(a,
b){_.extend(this.lines[a],{hidden:b,timestamp:null})})},set_line_at_index_marked:{value:a(function(a,b){delete this.lines[a].fixed;this.lines[a].marked=b})},set_line_at_index_fixed:{value:a(function(a){delete this.lines[a].marked;this.lines[a].fixed=!0})},add_line_at_index:{value:a(function(a,b){this.lines.splice(a,0,_.defaults(b||{},{added:!0,lyrics:"[Instrumental Break]",timestamp:null}))})},remove_line_at_index:{value:a(function(a){this.lines.splice(a,1)})},max_timestamp_before_index:{value:function(a){return _(this.lines.slice(0,
a)).map("timestamp").max()}},min_timestamp_after_index:{value:function(a){return _(this.lines.slice(a)).map("timestamp").compact().min()}},timestamp_for_line_at_index:{value:function(a){return-1===a?0:this.lines[a].timestamp}},line_index_for_position:{value:function(a){return _.findLastIndex(this.lines,function(b){return e(b.timestamp)&&b.timestamp<a})}},next_visible_line_index_after_index:{value:function(a){return _.findIndex(this.lines,function(b,c){return c>a&&!b.hidden})}},all_lines_timestamped:{get:function(){return _.all(this.lines,
function(a){return a.hidden||e(a.timestamp)})}},all_timestamps_in_order:{get:function(){return _(this.lines).map("timestamp").compact().all(function(a,b,c){return 0===b||a>c[b-1]})}}});return{$on:g.$on.bind(g),get:function(a){return d.get(h(a)).then(f)},home:function(){return d.get(h("home")).then(function(a){a=a.data.response.lyrics_synchronization_home;a.checked_out=a.checked_out.map(function(a){return new l(a)});return a})},submit:function(a,b,e){return(b._dirty?this.save(b):c.when(b)).then(function(b){return d.post(h(b.id,
a),_.extend(e||{},_.pick(b,"lock_version"))).then(f,k)})},submit_sync:function(a){return _.any(a.lines,"marked")?c.reject(Error("Can't submit lyrcis with lines still marked as incorrect")):this.submit("sync",a)},update_state:function(a,b){return d.put(h(b.id,"state"),{state:a}).then(f,k)},save:function(a){if(!a.all_timestamps_in_order)return c.reject(Error("Can't save lyrics with timestamps out of order"));var b={lyrics_synchronization:a};return d.put(h(a.id),b).then(f,k)},revert_action:function(a,
b){return d.post(h(b.id,"revert_action"),{action_id:a.id}).then(f,k)},skip:function(a,b){return d.post(h(b.id,"skip"),a).then(f,k)},start:function(a){return d.post(h("start"),{verb:a}).then(f,k)},set_finalized:function(a,b){return d[b?"put":"delete"](h(a)+"/finalized").then(f,k)}}}]);
angular.module("genius").service("Markdown",["$window",function(a){var c=angular.element;return{to_html:function(d){if(!d)return d;var b=new a.Attacklab.showdown.converter;d=d.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(a){return"\n\n![]("+c.trim(a)+")"});d=b.makeHtml(d);return c("<div>").append(d).find("a").each(function(){var a=c(this);a.attr("href").match(/^\d+$/)&&a.attr("href","/"+a.attr("href"))}).end().html()}}}]);
angular.module("genius").factory("MarkdownHelpersService",function(){var a=function(a,d,b,g,e,h,f,k){void 0==k&&(k="");a=g.toLowerCase();if(""==e)if(""==a&&b.toLowerCase().replace(/ ?\n/g," "),-1<d.search(/\(\s*\)$/m))e="";else return d;d='<a href="'+e+'"';""!=k&&(k=k.replace(/"/g,"&quot;"),d+=' title="'+k+'"');return d+(">"+b+"</a>")};return{unescape_special_characters_escaped_by_markdown_anchor_converter:function(a){return a.replace(/~E(\d+)E/,function(a,b){return String.fromCharCode(b)})},convert_markdown_anchors:function(c){return c.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
a)}}});angular.module("genius").service("MarkdownPreviewService",["$http","AppConfig",function(a,c){return{create_preview:function(d){return a.post(c.api_root_url+"/markdown_preview",{markdown:d}).then(function(a){return a.data.response.html})}}}]);angular.module("genius").service("MentionService",["$http","AppConfig",function(a,c){return{autocomplete:function(d){return a.get(c.api_root_url+"/mentions",{params:{q:d}}).then(function(a){return a.data.response.mentions})}}}]);
angular.module("genius").service("MessageService",["$http","AppConfig",function(a,c){return{for_conversation:function(d,b){b=b||{};return a.get(c.api_root_url+"/conversations/"+d+"/messages",{params:{text_format:"html",page:b.page||1}}).then(function(a){return a.data.response.messages})},create:function(d){return a.post(c.api_root_url+"/messages",{message:d},{params:{text_format:"html"}}).then(function(a){return a.data.response.message})}}}]);
angular.module("genius").service("ModelRouter",function(){return{lookup:function(a){if(!_.isString(a))throw Error("URL must be a string");if(a=a.match(/^\/referents\/(\d+)$/))return{type:"referent",id:Number(a[1])}}}});
(function(a,c,d){function b(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function g(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return n[a.which]?n[a.which]:m[a.which]?m[a.which]:String.fromCharCode(a.which).toLowerCase()}function e(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function h(a){return"shift"==a||"ctrl"==a||"alt"==a||
"meta"==a}function f(a,b){var c,e,d,f=[];c=a;"+"===c?c=["+"]:(c=c.replace(/\+{2}/g,"+plus"),c=c.split("+"));for(d=0;d<c.length;++d)e=c[d],r[e]&&(e=r[e]),b&&"keypress"!=b&&q[e]&&(e=q[e],f.push("shift")),h(e)&&f.push(e);c=e;d=b;if(!d){if(!u){u={};for(var g in n)95<g&&112>g||n.hasOwnProperty(g)&&(u[n[g]]=g)}d=u[c]?"keydown":"keypress"}"keypress"==d&&f.length&&(d="keydown");return{key:e,modifiers:f,action:d}}function k(a,b){return null===a||a===c?!1:a===b?!0:k(a.parentNode,b)}function l(a){function d(a){a=
a||{};var b=!1,c;for(c in B)a[c]?b=!0:B[c]=0;b||(N=!1)}function k(a,b,c,e,d,f){var g,l,m=[],n=c.type;if(!u._callbacks[a])return[];"keyup"==n&&h(a)&&(b=[a]);for(g=0;g<u._callbacks[a].length;++g)if(l=u._callbacks[a][g],(e||!l.seq||B[l.seq]==l.level)&&n==l.action){var r;(r="keypress"==n&&!c.metaKey&&!c.ctrlKey)||(r=l.modifiers,r=b.sort().join(",")===r.sort().join(","));r&&(r=e&&l.seq==e&&l.level==f,(!e&&l.combo==d||r)&&u._callbacks[a].splice(g,1),m.push(l))}return m}function m(a,b,c,e){u.stopCallback(b,
b.target||b.srcElement,c,e)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function n(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=g(a);b&&("keyup"==a.type&&K===b?K=!1:u.handleKey(b,e(a),a))}function r(a,b,c,e){function h(b){return function(){N=b;++B[a];clearTimeout(C);C=setTimeout(d,1E3)}}function k(b){m(c,b,a);"keyup"!==e&&(K=g(b));setTimeout(d,10)}for(var l=B[a]=0;l<b.length;++l){var n=l+1===b.length?k:h(e||
f(b[l+1]).action);q(b[l],n,e,a,l)}}function q(a,b,c,e,d){u._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var g=a.split(" ");1<g.length?r(a,g,b,c):(c=f(a,c),u._callbacks[c.key]=u._callbacks[c.key]||[],k(c.key,c.modifiers,{type:c.action},e,a,d),u._callbacks[c.key][e?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:e,level:d,combo:a}))}var u=this;a=a||c;if(!(u instanceof l))return new l(a);u.target=a;u._callbacks={};u._directMap={};var B={},C,K=!1,M=!1,N=!1;u._handleKey=function(a,
b,c){var e=k(a,b,c),f;b={};var g=0,l=!1;for(f=0;f<e.length;++f)e[f].seq&&(g=Math.max(g,e[f].level));for(f=0;f<e.length;++f)e[f].seq?e[f].level==g&&(l=!0,b[e[f].seq]=1,m(e[f].callback,c,e[f].combo,e[f].seq)):l||m(e[f].callback,c,e[f].combo);e="keypress"==c.type&&M;c.type!=N||h(a)||e||d(b);M=l&&"keydown"==c.type};u._bindMultiple=function(a,b,c){for(var e=0;e<a.length;++e)q(a[e],b,c)};b(a,"keypress",n);b(a,"keydown",n);b(a,"keyup",n)}var n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",
20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},m={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},q={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},r={option:"alt",command:"meta","return":"enter",
escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u;for(d=1;20>d;++d)n[111+d]="f"+d;for(d=0;9>=d;++d)n[d+96]=d;l.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};l.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};l.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};l.prototype.reset=function(){this._callbacks={};this._directMap=
{};return this};l.prototype.stopCallback=function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")||k(b,this.target)?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};l.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};l.init=function(){var a=l(c),b;for(b in a)"_"!==b.charAt(0)&&(l[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};l.init();a.Mousetrap=l;"undefined"!==typeof module&&module.exports&&(module.exports=
l);"function"===typeof define&&define.amd&&define(function(){return l})})(window,document);
angular.module("genius").service("Mousetrap",["$window","$rootScope",function(a,c){var d=function(a,b){b=b||{};return function(d){b.prevent_default&&d.preventDefault();b.stop_propagation&&d.stopPropagation();c.$apply(function(){a.call(this,d)}.bind(this))}},b=function(b,c){this.default_options=c||{};this.mousetrap=new a.Mousetrap(b)};b.prototype.bind=function(a,b){this.mousetrap.bind(a,b)};b.prototype.$bind=function(a,b,c){c=_.extend({},this.default_options,c);this.bind(a,d(b,c))};return _.extend(b,
{$bind:function(a,b,c){this.bind(a,d(b,c))},bind:a.Mousetrap.bind.bind(a.Mousetrap),unbind:a.Mousetrap.unbind.bind(a.Mousetrap),trigger:a.Mousetrap.trigger.bind(a.Mousetrap)})}]);angular.module("genius").service("MutationObserver",["$window",function(a){return a.MutationObserver}]);
angular.module("genius").service("NewRelic",["$window","$rootScope","Session",function(a,c,d){var b=a.newrelic,g=function(a){var d=0,f=c.$watch(function(){d+=1;d===a&&(b.finished(),b.addPageAction("secondApply"),f())})};return{init:function(a){b&&(b.setCustomAttribute("signedIn",d.user_signed_in),a&&b.setPageViewName(a,"resource.path"),g(2))}}}]);
(function(){var a,c,d,b,g,e,h,f,k,l,n,m,q,r,u,t,v,w,x,J=[].slice;a=/^\(?([^)]*)\)?(?:(.)(d+))?$/;c=1E3/30;q=document.createElement("div").style;g=null!=q.transition||null!=q.webkitTransition||null!=q.mozTransition||null!=q.oTransition;n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;h=function(a){var b;b=document.createElement("div");
b.innerHTML=a;return b.children[0]};l=function(a,b){return a.className=a.className.replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")};e=function(a,b){l(a,b);return a.className+=" "+b};r=function(a,b){var c;if(null!=document.createEvent)return c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c)};k=function(){var a,b;return null!=(a=null!=(b=window.performance)?"function"===typeof b.now?b.now():void 0:void 0)?a:+new Date};m=function(a,b){null==b&&(b=0);if(!b)return Math.round(a);
a*=Math.pow(10,b);a=Math.floor(a+.5);return a/Math.pow(10,b)};u=function(a){return 0>a?Math.ceil(a):Math.floor(a)};f=function(a){return a-m(a)};t=!1;(q=function(){var a,b,c,e,d;if(!t&&null!=window.jQuery){t=!0;e=["html","text"];d=[];b=0;for(c=e.length;b<c;b++)a=e[b],d.push(function(a){var b;b=window.jQuery.fn[a];return window.jQuery.fn[a]=function(a){var c;return null==a||null==(null!=(c=this[0])?c.odometer:void 0)?b.apply(this,arguments):this[0].odometer.update(a)}}(a));return d}})();setTimeout(q,
0);b=function(){function b(a){var e,d,f,g,h,k,l,m=this;this.options=a;this.el=this.options.el;if(null!=this.el.odometer)return this.el.odometer;this.el.odometer=this;h=b.options;for(e in h)a=h[e],null==this.options[e]&&(this.options[e]=a);null==(e=this.options).duration&&(e.duration=2E3);this.MAX_VALUES=this.options.duration/c/2|0;this.resetFormat();this.value=this.cleanValue(null!=(k=this.options.value)?k:"");this.renderInside();this.render();try{for(l=["innerHTML","innerText","textContent"],f=0,
g=l.length;f<g;f++)d=l[f],null!=this.el[d]&&function(a){return Object.defineProperty(m.el,a,{get:function(){var b;return"innerHTML"===a?m.inside.outerHTML:null!=(b=m.inside.innerText)?b:m.inside.textContent},set:function(a){return m.update(a)}})}(d)}catch(n){this.watchForMutations()}this}b.prototype.renderInside=function(){this.inside=document.createElement("div");this.inside.className="odometer-inside";this.el.innerHTML="";return this.el.appendChild(this.inside)};b.prototype.watchForMutations=function(){var a=
this;if(null!=d)try{return null==this.observer&&(this.observer=new d(function(b){b=a.el.innerText;a.renderInside();a.render(a.value);return a.update(b)})),this.watchMutations=!0,this.startWatchingMutations()}catch(b){}};b.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})};b.prototype.stopWatchingMutations=function(){var a;return null!=(a=this.observer)?a.disconnect():void 0};b.prototype.cleanValue=function(a){var b;"string"===typeof a&&
(a=a.replace(null!=(b=this.format.radix)?b:".","<radix>"),a=a.replace(/[.,]/g,""),a=a.replace("<radix>","."),a=parseFloat(a,10)||0);return m(a,this.format.precision)};b.prototype.bindTransitionEnd=function(){var a,b,c,e,d,f,g=this;if(!this.transitionEndBound){this.transitionEndBound=!0;b=!1;d=["transitionend","webkitTransitionEnd","oTransitionEnd","otransitionend","MSTransitionEnd"];f=[];c=0;for(e=d.length;c<e;c++)a=d[c],f.push(this.el.addEventListener(a,function(){if(b)return!0;b=!0;setTimeout(function(){g.render();
b=!1;return r(g.el,"odometerdone")},0);return!0},!1));return f}};b.prototype.resetFormat=function(){var b,c,e;(b=null!=(e=this.options.format)?e:"(,ddd).dd")||(b="d");b=a.exec(b);if(!b)throw Error("Odometer: Unparsable digit format");c=b.slice(1,4);e=c[0];b=c[1];c=c[2];return this.format={repeating:e,radix:b,precision:(null!=c?c.length:void 0)||0}};b.prototype.render=function(a){var b,c,e,d,f,h,k;null==a&&(a=this.value);this.stopWatchingMutations();this.resetFormat();this.inside.innerHTML="";f=this.options.theme;
b=this.el.className.split(" ");d=[];h=0;for(k=b.length;h<k;h++)c=b[h],c.length&&((e=/^odometer-theme-(.+)$/.exec(c))?f=e[1]:/^odometer(-|$)/.test(c)||d.push(c));d.push("odometer");g||d.push("odometer-no-transitions");f?d.push("odometer-theme-"+f):d.push("odometer-auto-theme");this.el.className=d.join(" ");this.ribbons={};this.formatDigits(a);return this.startWatchingMutations()};b.prototype.formatDigits=function(a){var b,c,e,d;this.digits=[];if(this.options.formatFunction)for(a=this.options.formatFunction(a),
d=a.split("").reverse(),c=0,e=d.length;c<e;c++)b=d[c],b.match(/0-9/)?(a=this.renderDigit(),a.querySelector(".odometer-value").innerHTML=b,this.digits.push(a),this.insertDigit(a)):this.addSpacer(b);else for(b=!this.format.precision||!f(a)||!1,d=a.toString().split("").reverse(),c=0,e=d.length;c<e;c++)a=d[c],"."===a&&(b=!0),this.addDigit(a,b)};b.prototype.update=function(a){var b,c=this;a=this.cleanValue(a);if(b=a-this.value)return l(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),
0<b?e(this.el,"odometer-animating-up"):e(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(a),this.startWatchingMutations(),setTimeout(function(){c.el.offsetHeight;return e(c.el,"odometer-animating")},0),this.value=a};b.prototype.renderDigit=function(){return h('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')};
b.prototype.insertDigit=function(a,b){return null!=b?this.inside.insertBefore(a,b):this.inside.children.length?this.inside.insertBefore(a,this.inside.children[0]):this.inside.appendChild(a)};b.prototype.addSpacer=function(a,b,c){var d;d=h('<span class="odometer-formatting-mark"></span>');d.innerHTML=a;c&&e(d,c);return this.insertDigit(d,b)};b.prototype.addDigit=function(a,b){var c,e;null==b&&(b=!0);if("-"===a)return this.addSpacer(a,null,"odometer-negation-mark");if("."===a)return this.addSpacer(null!=
(c=this.format.radix)?c:".",null,"odometer-radix-mark");if(b)for(e=!1;;){if(!this.format.repeating.length){if(e)throw Error("Bad odometer format without digits");this.resetFormat();e=!0}c=this.format.repeating[this.format.repeating.length-1];this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1);if("d"===c)break;this.addSpacer(c)}c=this.renderDigit();c.querySelector(".odometer-value").innerHTML=a;this.digits.push(c);return this.insertDigit(c)};b.prototype.animate=
function(a){return g&&"count"!==this.options.animation?this.animateSlide(a):this.animateCount(a)};b.prototype.animateCount=function(a){var b,c,e,d,f,g=this;if(c=+a-this.value)return d=e=k(),b=this.value,(f=function(){var h;if(k()-d>g.options.duration)g.value=a,g.render(),r(g.el,"odometerdone");else return h=k()-e,50<h&&(e=k(),h/=g.options.duration,h*=c,b+=h,g.render(Math.round(b))),null!=n?n(f):setTimeout(f,50)})()};b.prototype.getDigitCount=function(){var a,b,c,e,d;c=1<=arguments.length?J.call(arguments,
0):[];a=e=0;for(d=c.length;e<d;a=++e)b=c[a],c[a]=Math.abs(b);a=Math.max.apply(Math,c);return Math.ceil(Math.log(a+1)/Math.log(10))};b.prototype.getFractionalDigitCount=function(){var a,b,c,e,d,f;e=1<=arguments.length?J.call(arguments,0):[];b=/^\-?\d*\.(\d*?)0*$/;a=d=0;for(f=e.length;d<f;a=++d)c=e[a],e[a]=c.toString(),c=b.exec(e[a]),e[a]=null==c?0:c[1].length;return Math.max.apply(Math,e)};b.prototype.resetDigits=function(){this.digits=[];this.ribbons=[];this.inside.innerHTML="";return this.resetFormat()};
b.prototype.animateSlide=function(a){var b,c,d,f,g,h,k,l,m,n,r,q,t,v,w,x;r=this.value;if(l=this.getFractionalDigitCount(r,a))a*=Math.pow(10,l),r*=Math.pow(10,l);if(d=a-r){this.bindTransitionEnd();f=this.getDigitCount(r,a);g=[];for(h=v=b=0;0<=f?v<f:v>f;h=0<=f?++v:--v){q=u(r/Math.pow(10,f-h-1));k=u(a/Math.pow(10,f-h-1));h=k-q;if(Math.abs(h)>this.MAX_VALUES){m=[];n=h/(this.MAX_VALUES+this.MAX_VALUES*b*.5);for(c=q;0<h&&c<k||0>h&&c>k;)m.push(Math.round(c)),c+=n;m[m.length-1]!==k&&m.push(k);b++}else m=
function(){x=[];for(var a=q;q<=k?a<=k:a>=k;q<=k?a++:a--)x.push(a);return x}.apply(this);h=n=0;for(w=m.length;n<w;h=++n)c=m[h],m[h]=Math.abs(c%10);g.push(m)}this.resetDigits();n=g.reverse();h=f=0;for(g=n.length;f<g;h=++f)for(m=n[h],this.digits[h]||this.addDigit(" ",h>=l),null==(t=this.ribbons)[h]&&(t[h]=this.digits[h].querySelector(".odometer-ribbon-inner")),this.ribbons[h].innerHTML="",0>d&&(m=m.reverse()),a=v=0,r=m.length;v<r;a=++v)c=m[a],b=document.createElement("div"),b.className="odometer-value",
b.innerHTML=c,this.ribbons[h].appendChild(b),a===m.length-1&&e(b,"odometer-last-value"),0===a&&e(b,"odometer-first-value");0>q&&this.addDigit("-");d=this.inside.querySelector(".odometer-radix-mark");null!=d&&d.parent.removeChild(d);if(l)return this.addSpacer(this.format.radix,this.digits[l-1],"odometer-radix-mark")}};return b}();b.options=null!=(w=window.odometerOptions)?w:{};setTimeout(function(){var a,c,e,d,f;if(window.odometerOptions){d=window.odometerOptions;f=[];for(a in d)c=d[a],f.push(null!=
(e=b.options)[a]?(e=b.options)[a]:e[a]=c);return f}},0);b.init=function(){var a,c,e,d,f,g;if(null!=document.querySelectorAll){c=document.querySelectorAll(b.options.selector||".odometer");g=[];e=0;for(d=c.length;e<d;e++)a=c[e],g.push(a.odometer=new b({el:a,value:null!=(f=a.innerText)?f:a.textContent}));return g}};null!=(null!=(x=document.documentElement)?x.doScroll:void 0)&&null!=document.createEventObject?(v=document.onreadystatechange,document.onreadystatechange=function(){"complete"===document.readyState&&
!1!==b.options.auto&&b.init();return null!=v?v.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==b.options.auto)return b.init()},!1);"function"===typeof define&&define.amd?define(["jquery"],function(){return b}):"undefined"!==typeof exports&&null!==exports?module.exports=b:window.Odometer=b}).call(this);angular.module("genius").service("Odometer",["$window",function(a){return a.Odometer}]);
angular.module("genius").service("PageVisibility",["$document","$rootScope",function(a,c){var d,b;_.isUndefined(a[0].hidden)?_.isUndefined(a[0].mozHidden)?_.isUndefined(a[0].msHidden)?_.isUndefined(a[0].webkitHidden)||(d="webkitHidden",b="webkitvisibilitychange"):(d="msHidden",b="msvisibilitychange"):(d="mozHidden",b="mozvisibilitychange"):(d="hidden",b="visibilitychange");var g=!_.isUndefined(d);if(g){var e=[];a[0].addEventListener(b,function(){if(!_.isEmpty(e)){for(;_.any(e);)e.shift()();c.$apply()}})}return{is_visible:function(){return!a[0][d]},
is_hidden:function(){return a[0][d]},when_visible:function(b,c){b=c?b.bind(c):b;g&&a[0][d]?e.push(b):b()}}}]);angular.module("genius").service("PlayerJS",["$window",function(a){return a.playerjs}]);
angular.module("genius").service("Pusher",["$window","$rootScope","AppConfig",function(a,c,d){var b={},g,e=function(){g||(g=new a.Pusher(d.pusher_app_key));return g};return{pusher:e,subscribe:function(a,d,g){b[a]||(b[a]={},e().subscribe(a).bind_all(function(e,d){var f=b[a][e];f&&c.$applyAsync(function(){f.forEach(function(a){a(d)})})}));b[a][d]=b[a][d]||[];b[a][d].push(g)}}}]);
angular.module("genius").service("PyongService",["AppConfig","$http",function(a,c){var d=function(b,d,e,h){h=_.set(h||{},d+"_id",e);return c.post(a.api_root_url+b,h).then(function(a){return a.data.response[d]})};return{pyong:function(a,c){return d("/pyongs",a,c,{note_may_follow:!0})},finalizePyong:function(a,c,e){return d("/pyongs/finalize",a,c,{pyong_note:e})}}}]);
(function(a){if("function"===typeof require&&"object"===typeof exports&&"object"===typeof module){try{var c=require("jquery")}catch(b){}module.exports=a(c)}else if("function"===typeof define&&define.amd)define(["jquery"],function(b){return a(b)});else{var d;try{d=(0,eval)("this")}catch(b){d=window}d.deparam=a(d.jQuery)}})(function(a){var c=function(a,b){var c={},e={"true":!0,"false":!1,"null":null};a.replace(/\+/g," ").split("&").forEach(function(a){var d=a.split("=");a=decodeURIComponent(d[0]);var k=
c,l=0,n=a.split("]["),m=n.length-1;/\[/.test(n[0])&&/\]$/.test(n[m])?(n[m]=n[m].replace(/\]$/,""),n=n.shift().split("[").concat(n),m=n.length-1):m=0;if(2===d.length)if(d=decodeURIComponent(d[1]),b&&(d=d&&!isNaN(d)&&+d+""===d?+d:"undefined"===d?void 0:void 0!==e[d]?e[d]:d),m)for(;l<=m;l++)a=""===n[l]?k.length:n[l],k=k[a]=l<m?k[a]||(n[l+1]&&isNaN(n[l+1])?{}:[]):d;else"[object Array]"===Object.prototype.toString.call(c[a])?c[a].push(d):{}.hasOwnProperty.call(c,a)?c[a]=[c[a],d]:c[a]=d;else a&&(c[a]=b?
void 0:"")});return c};a&&(a.prototype.deparam=a.deparam=c);return c});angular.module("genius").service("querystring",function(){return{stringify:function(a){return $.param(a)},parse:function(a){return $.deparam(a)}}});
angular.module("genius").service("QuestionService",["$http","$q","AppConfig","Reversible",function(a,c,d,b){return{create_if_not_exists:function(a){return a.id?c.resolve(a):this.create(a.song_id,a)},create:function(b,e){var h=_.extend({},e,{body:e.body});return a.post(d.api_root_url+"/songs/"+b+"/questions?text_format=plain",{question:h}).then(function(a){_.extend(e,a.data.response.question);return e}).catch(function(a){return c.reject(_.set(a.data.response,"message",a.data.meta.message))})},update:function(g,
e){var h=b.modify(g,e.question);return a.put(d.api_root_url+"/questions/"+g.id,e,{params:{text_format:"html,markdown"}}).then(function(a){_.extend(g,a.data.response.question)}).catch(function(a){h();return c.reject(Error(a.data.meta.message))})},move:function(b,e){return a.put(d.api_root_url+"/questions/"+b.id+"/move",{direction:e},{params:{text_format:"html,markdown"}}).then(function(a){_.extend(b,a.data.response.question)}).catch(function(a){return c.reject(Error(a.data.meta.message))})},change_state:function(b,
e){return a.put(d.api_root_url+"/questions/"+b.id+"/change_state",{state_event:e},{params:{text_format:"html,markdown"}}).then(function(a){_.extend(b,a.data.response.question)}).catch(function(a){return c.reject(Error(a.data.meta.message))})}}}]);
angular.module("genius").service("ReferentService",["$http","AppConfig","Session","querystring",function(a,c,d,b){return{refresh:function(a){return this.get(a.id).then(function(b){_.extend(a,_.omit(b,"annotations"));_.each(a.annotations,function(a){_.each(b.annotations,function(b){b.id===a.id&&_.extend(a,b)})});return a})},get:function(b){return a.get(c.api_root_url+"/referents/"+b,{params:{text_format:d.user_signed_in?"html,markdown,plain":"html,plain"}}).then(function(a){return a.data.response.referent})},
bulk_load:function(g){g=b.stringify({text_format:d.user_signed_in?"html,markdown,plain":"html,plain",ids:g});return a.get(c.api_root_url+"/referents/multi?"+g).then(function(a){Object.keys(a.data.response.referents).forEach(function(b){a.data.response.referents[b]=a.data.response.referents[b]});return a.data.response.referents})},create_referent:function(d){var e=b.stringify({text_format:"html"});return a.post(c.api_root_url+"/songs/"+d.song.id+"/referents?"+e,d).then(function(a){return a.data.response.referent})}}}]);
angular.module("genius").service("ReferentHelper",["Session",function(a){var c=function(c){return{_editing:{_form_visible:!0},new:!0,referent_id:c.id,body:{markdown:"",html:""},authors:[{user:a.current_user,pinned_role:c.current_user_metadata.relationships.pinned_role}],created_at:parseInt(Date.now()/1E3),needs_exegesis:0===c.annotations.length}};return{display_mode_by_classification:function(c){return _.include(["verified","cosigned"],c)?"green":"unreviewed"===c&&a.has_permission("see_unreviewed_referents",
a.current_user)?"red":"yellow"},create_verified_annotation_placeholder:function(a){return _.extend(c(a),{verified:!0})},create_community_annotation_placeholder:function(a){return _.extend(c(a),{id:a.id})},range_or_contents_intersects_links:function(a){return!!(a.cloneContents().querySelectorAll("a").length||$(a.startContainer).closest("a").length||$(a.endContainer).closest("a").length)}}}]);
angular.module("genius").service("ReferentRegistry",["Preloader","ReferentService",function(a,c){var d=new a(function(a){return c.bulk_load(a)}),b={},g=[];return{get:function(a){var c=this.peek(a);c&&c.stub&&d.load(a).then(function(a){var c=b[a.id];delete c.stub;_.extend(c,a)});return c},peek:function(a){return b[a]},first:function(a,c){var d=g.indexOf(c&&c.after_referent_id);return b[_.find(g,function(c,g){return g>d&&a(b[c])})]},register:function(a){if(b[a.id])return b[a.id];b[a.id]=a;g.push(a.id);
return a},bulk_preload:function(a){d.bulk_load(a)},preload_insert:function(a){d.insert(a.id,a)},preload_from_start:function(a){this.preload_around(g[0],a)},preload_around:function(a,b){var c=g.indexOf(a),k=_(g).sortBy(function(a,b){return Math.abs(b-c)}).value(),k=d.filter_unloaded(k).slice(0,b);d.bulk_load(k)},update_if_present:function(a){var b=this.peek(a.id);return b?(b.stub&&_.extend(b,a),b):a}}}]);
angular.module("genius").service("Reversible",["$parse",function(a){return{modify:function(c,d){var b,g={},e={};for(b in d)g[b]=a(b),_.has(c,b)&&(e[b]=g[b](c)),g[b].assign(c,d[b]);return function(){for(b in d)_.has(e,b)?g[b].assign(c,e[b]):b.split(".").reduce(function(a,b,c,e){if(a)return c===e.length-1?delete a[b]:a[b]},c)}}}}]);
angular.module("genius").service("ScrollPoint",function(){var a={},c={};a.register=function(d,b){a.has_point(d)&&c[d].push(b);c[d]=[b]};a.unregister=function(d,b){a.has_point(d)&&(c[d]=_.without(c[d],b),c[d].length||delete c[d])};a.scroll_to=function(d){return a.has_point(d)?($("html, body").animate({scrollTop:c[d][0].offset().top}),!0):!1};a.has_point=function(a){return!!c[a]};return a});
angular.module("genius").factory("Session",["SessionConfig",function(a){return Object.create(Object.prototype,{has_permission:{value:function(a,d){return _.includes(_.get(d,"current_user_metadata.permissions"),a)}},has_feature:{value:function(c){return _.includes(_.get(a.current_user,"current_user_metadata.features"),c)}},user_signed_in:{get:function(){return!!this.current_user}},current_user:{get:function(){return a.current_user},set:function(c){a.current_user=c}}})}]);
angular.module("genius").service("ShimInnerHTMLProp",["$window",function(a){return _.once(function(){var c=document.createElementNS("http://www.w3.org/2000/svg","svg");_.isUndefined(c.innerHTML)&&a.GeniusShimInnerHtml()})}]);
angular.module("genius").factory("signed_out_created_content",["$window","Session",function(a,c){var d=a.sessionStorage,b={};return{add:function(a,b){if(!c.user_signed_in){var h=this.get();h[a]=h[a]||[];h[a].push(b);if(d)try{d.setItem("signed_out_created_content",JSON.stringify(h))}catch(f){if("QuotaExceededError"!==f.name)throw f;}}},get:function(){return d?JSON.parse(d.getItem("signed_out_created_content")||"{}"):b},clear:function(){b={};d.removeItem("signed_out_created_content")}}}]);
angular.module("genius").service("SongService",["$q","$http","AppConfig","Session","querystring",function(a,c,d,b,g){var e=function(a){return _(a).pick("id title updated_by_human_at spotify_uuid youtube_url soundcloud_url custom_header_image_url release_date albums tags featured_video youtube_start custom_song_art_image_url recording_location custom_performances".split(" ")).merge(["producer_artists","featured_artists","writer_artists"].reduce(function(b,c){return _.set(b,c,_.pluck(a[c],"name").join(","))},
{})).tap(function(b){b.primary_artist=a.primary_artist.name;a.primary_tag&&(b.primary_tag_id=a.primary_tag.id);b.song_relationships_by_id=[];_.each(a.song_relationships,function(a){b.song_relationships_by_id.push({type:a.type,song_ids:_.compact(_.map(a.songs,"id"))})})}).omit(_.isUndefined).value()};return{autocomplete:function(a){return c.get(d.api_root_url+"/search/song",{params:{q:a}}).then(function(a){return _.map(_.get(a,"data.response.sections[0].hits",[]),"result")})},count_view:function(a){return c.post(d.api_root_url+
"/songs/"+a+"/count_view")},load_contributor_data:function(a){return c.get(d.api_root_url+"/songs/"+a+"/contributors").then(function(a){return a.data.response.contributors})},load_iq_earners:function(a,b){var e=g.stringify(b);return c.get(d.api_root_url+"/songs/"+a+"/iq_earners?"+e).then(function(a){return a.data.response.contributors})},load_annotation_open_data:function(a){return c.get(d.api_root_url+"/songs/"+a+"/annotation_open_data").then(function(a){return a.data.response.annotation_open_data})},
load_song:function(a){return c.get(d.api_root_url+"/songs/"+a,{params:{no_lyrics:!0,text_format:"html,markdown"}}).then(function(a){return a.data.response.song})},load_lyrics:function(a){return c.get(d.api_root_url+"/songs/"+a+"/lyrics").then(function(a){return a.data.response.song_lyrics})},load_questions:function(a,b){return c.get(d.api_root_url+"/songs/"+a+"/questions",{params:_.extend(b,{text_format:"html,markdown"})}).then(function(a){return a.data.response})},videos:function(a,b){return c.get(d.api_root_url+
"/songs/"+a+"/videos",{params:b}).then(function(a){return a.data.response.videos})},perform_action:function(e,f,g){return c.put(d.api_root_url+"/songs/"+e+"/"+f,g,{params:{text_format:b.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response.song},function(b){return a.reject(Error(b.data.meta.message))})},delete:function(a){return c.delete(d.api_root_url+"/songs/"+a)},save:function(b){var f=e(b);return c.put(d.api_root_url+"/songs/"+b.id,{song:f},{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response.song},
function(b){return a.reject(_.set(b.data.response,"message",b.data.meta.message))})},save_lyrics:function(b,e){return c.put(d.api_root_url+"/songs/"+b.id+"/lyrics",{lyrics:{body:{html:e}},client_timestamps:_.pick(b,["updated_by_human_at","lyrics_updated_at"])}).then(function(a){return a.data.response.song_lyrics},function(b){return a.reject(b.data)})},correct_lyrics:function(b,e){return c.post(d.api_root_url+"/songs/"+b.id+"/correction",{correction:e}).then(function(a){return a.data.response.song_lyrics},
function(b){return a.reject(b.data.meta)})},line_items:function(a,b){return c.get(d.api_root_url+"/songs/"+a+"/activity_stream/line_items",{params:{text_format:"html",page:b}}).then(function(a){return a.data.response})},for_artist:function(a,b){return c.get(d.api_root_url+"/artists/"+a+"/songs",{params:b}).then(function(a){return a.data.response})},search_with_artist:function(a,b){return c.get(d.api_root_url+"/artists/"+a+"/songs/search",{params:b||{}}).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("SpotifyAnnotationService",["$http",function(a){return{save_song:function(c,d,b){return a.post("/spotify_annotations/bulk_update",{song_id:c,spotify_annotations:b,spotify_song:{note:d.note,lock_version:d.lock_version,finalized:d.finalized}})},load_song:function(c){return a.get("/songs/"+c+"/spotify_annotations")}}}]);
angular.module("genius").service("SpotifyBridge",["SpotifyLocal","SpotifyRemote",function(a,c){return/local_bridge/.test(document.location.search)?a:c}]);
angular.module("genius").service("SpotifyLocal",["$q","$http","$rootScope",function(a,c,d){var b,g=d.$new(),e=_.once(function(){return a(function(a){var c=new EventSource("http://localhost:5115/stream");c.onopen=function(){g.$emit("ready",{ready:!0});a(c);g.$apply()};c.onerror=function(){g.$emit("error");g.$apply()};c.onmessage=function(a){b||(h({data:JSON.parse(a.data)}),g.$apply())}})}),h=function(a){g.$emit("seek",{playing:"playing"===a.data.playerState,position:a.data.playerPosition,track_uri:_.get(a.data.currentTrack,
"id")});g.$emit("playing",{playing:"playing"===a.data.playerState,track_uri:_.get(a.data.currentTrack,"id")})};return{$on:function(a,b){e();g.$on(a,b)},playpause:function(a){b=!0;return e().then(function(){return c.post("http://localhost:5115/playpause",{trackId:a}).then(h).finally(function(){b=!1})})},seek:function(a,d){b=!0;return e().then(function(){g.$emit("seek",{position:d,track_uri:a});return c.post("http://localhost:5115/seek",{trackId:a,playerPosition:d}).then(h).finally(function(){b=!1})})}}}]);
angular.module("genius").service("SpotifyPlayback",["$rootScope","SpotifyBridge",function(a,c){var d=function(b){this.position=0;this.duration=b.duration;this.spotify_uuid=b.spotify_uuid;this.track_uri="spotify:track:"+this.spotify_uuid;this.emitter=a.$new();c.$on("seek",function(a,b){b.track_uri===this.track_uri&&(this.position=b.position,this.emitter.$emit("state",this.state))}.bind(this));c.$on("playing",function(a,b){this.playing=b.track_uri===this.track_uri&&b.playing;this.emitter.$emit("state",
this.state);_.isUndefined(b.position)||(this.position=b.position)}.bind(this))};Object.defineProperties(d.prototype,{type:{value:"spotify"},$on:{value:function(a,c){return this.emitter.$on(a,c)}},state:{get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,time_remaining:this.duration-this.position,is_loading:!1,is_playing:this.playing}}},api:{get:function(){return{play:function(){this.state.is_playing||c.seek(this.track_uri,this.position||
0)}.bind(this),pause:function(){c.pause()},playpause:function(){this.state.is_playing?this.api.pause():this.api.play()}.bind(this),seek_to:function(a){this.api.seek_to_position(this.duration*a)}.bind(this),seek_to_position:function(a){var d=!this.state.is_playing;this.position=a;c.seek(this.track_uri,this.position);d&&this.api.pause()}.bind(this)}}}});return d}]);
angular.module("genius").service("SpotifyRemote",["$q","$window","$rootScope","$interval","timestamp_for_displayFilter","getScript",function(a,c,d,b,g,e){var h=d.$new(),f,k,l,n=function(a,b){k=(new Date).getTime();l=a;h.$emit("seek",{position:a,track_uri:b})},m=_.once(function(){var b=a.defer();e("https://d2b1xqaw2ss8na.cloudfront.net/static/js/remote-control-bridge.js",{cache:!0}).then(function(){var a=new c.Spotify.RemoteControlBridgeInterface;a.init({remoteBridgeUrl:"https://embed.spotify.com/remote-control-bridge/",
targetOrigin:"https://embed.spotify.com"});a.attach(function(c){if("player-status"===c.key){f=c.data.track.track_resource.uri;h.is_playing=c.data.status;var e;_.isUndefined(c.data.playing_position)||(e=1E3*c.data.playing_position);h.$emit("playing",{playing:c.data.status,track_uri:f,position:e});h.is_playing&&c.data.playing_position&&n(e,f)}else"client-error"===c.key?h.$emit("error"):"client-connected"===c.key?(b.resolve(a),h.$emit("ready",{ready:!0})):"client-disconnected"===c.key&&h.$emit("ready",
{ready:!1});h.$apply()})});return b.promise}),q;h.$watch("is_playing",function(a){b.cancel(q);a&&(q=b(function(){var a=(new Date).getTime()-k;h.$emit("seek",{position:a+l,track_uri:f})},50))});return{$on:function(a,b){m();h.$on(a,b)},pause:function(){m().then(function(a){a.pause()})},playpause:function(a){m().then(function(b){b.playPauseTrack(a.replace(/^spotify:track:/,""),"track")})},seek:function(a,b){m().then(function(c){var e=g(b,{skip_millis:!0});n(b,a);h.is_playing=!1;c.playSpotifyURI(a+"#"+
e)})}}}]);angular.module("genius").service("SpotifyService",["$http",function(a){return{load_artist_metadata:function(c){return a.get("https://api.spotify.com/v1/artists/"+c).then(function(a){return a.data})}}}]);angular.module("genius").service("TagService",["$http","AppConfig",function(a,c){return{autocomplete:function(d){return a.get(c.api_root_url+"/tags/autocomplete",{params:{q:d}}).then(function(a){return a.data.response.tags})},primary:function(){return a.get(c.api_root_url+"/tags/home").then(function(a){return a.data.response.tags})}}}]);
angular.module("genius").service("TargetElementService",["$window",function(a){var c={global_message:".global_messages",cloudflare_unavailable_alert:"#cf_alert_div"};return{get_element:function(d){return a.$(c[d])}}}]);
(function(a,c){"function"===typeof define&&define.amd?define(c):"object"===typeof exports?module.exports=c(require,exports,module):a.Tether=c()})(this,function(a,c,d){function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function g(a){var b=(getComputedStyle(a)||{}).position,c=[];if("fixed"===b)return[a];for(;(a=a.parentNode)&&a&&1===a.nodeType;){var e=void 0;try{e=getComputedStyle(a)}catch(d){}if("undefined"===typeof e||null===e)return c.push(a),c;var f=e;
/(auto|scroll)/.test(f.overflow+f.overflowY+f.overflowX)&&("absolute"!==b||0<=["relative","absolute","fixed"].indexOf(e.position))&&c.push(a)}c.push(document.body);return c}function e(){B&&document.body.removeChild(B);B=null}function h(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,e={};a=a.getBoundingClientRect();for(var d in a)e[d]=a[d];d=M();e.top-=d.top;e.left-=d.left;"undefined"===typeof e.width&&(e.width=document.body.scrollWidth-
e.left-e.right);"undefined"===typeof e.height&&(e.height=document.body.scrollHeight-e.top-e.bottom);e.top-=c.clientTop;e.left-=c.clientLeft;e.right=b.body.clientWidth-e.width-e.left;e.bottom=b.body.clientHeight-e.height-e.top;return e}function f(a){return a.offsetParent||document.documentElement}function k(){var a=document.createElement("div");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");l(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",
width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;c===a&&(a=b.clientWidth);document.body.removeChild(b);b=c-a;return{width:b,height:b}}function l(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],b=[];Array.prototype.push.apply(b,arguments);b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])});return a}function n(a,b){if("undefined"!==
typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),c=r(a).replace(c," ");a.setAttribute("class",c)}}function m(a,b){if("undefined"!==typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{n(a,b);var c=r(a)+(" "+b);a.setAttribute("class",c)}}function q(a,b){if("undefined"!==typeof a.classList)return a.classList.contains(b);var c=r(a);return(new RegExp("(^| )"+b+"( |$)",
"gi")).test(c)}function r(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className}function u(a,b,c){c.forEach(function(c){-1===b.indexOf(c)&&q(a,c)&&n(a,c)});b.forEach(function(b){q(a,b)||m(a,b)})}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function t(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function v(a,b){var c=2>=arguments.length||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function w(){return"undefined"!==typeof performance&&"undefined"!==typeof performance.now?performance.now():+new Date}function x(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];c.forEach(function(b){var c=b.top;b=b.left;"string"===typeof c&&(c=parseFloat(c,
10));"string"===typeof b&&(b=parseFloat(b,10));a.top+=c;a.left+=b});return a}function J(a,b){"string"===typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width);"string"===typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height);return a}function D(a,b){"scrollParent"===b?b=a.scrollParents[0]:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);b===document&&(b=b.documentElement);"undefined"!==typeof b.nodeType&&
function(){var a=h(b),c=getComputedStyle(b);b=[a.left,a.top,a.width+a.left,a.height+a.top];Ra.forEach(function(a,e){a=a[0].toUpperCase()+a.substr(1);b[e]="Top"===a||"Left"===a?b[e]+parseFloat(c["border"+a+"Width"]):b[e]-parseFloat(c["border"+a+"Width"])})}();return b}var A=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,
e);return b}}(),z=void 0;"undefined"===typeof z&&(z={modules:[]});var B=null,C=function(){var a=0;return function(){return++a}}(),K={},M=function(){var a=B;a||(a=document.createElement("div"),a.setAttribute("data-tether-id",C()),l(a.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(a),B=a);var b=a.getAttribute("data-tether-id");if("undefined"===typeof K[b]){K[b]={};var a=a.getBoundingClientRect(),c;for(c in a)K[b][c]=a[c];y(function(){delete K[b]})}return K[b]},N=[],y=function(a){N.push(a)},
G=function(){for(var a=void 0;a=N.pop();)a()};c=function(){function a(){b(this,a)}A(a,[{key:"on",value:function(a,b,c){var e=3>=arguments.length||void 0===arguments[3]?!1:arguments[3];"undefined"===typeof this.bindings&&(this.bindings={});"undefined"===typeof this.bindings[a]&&(this.bindings[a]=[]);this.bindings[a].push({handler:b,ctx:c,once:e})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"===typeof this.bindings||"undefined"===typeof this.bindings[a])if("undefined"===
typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!==typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,e=Array(1<c?c-1:0),d=1;d<c;d++)e[d-1]=arguments[d];for(;b<this.bindings[a].length;){var f=this.bindings[a][b],c=f.handler,d=f.once,f=f.ctx;"undefined"===typeof f&&(f=this);c.apply(f,e);d?this.bindings[a].splice(b,1):++b}}}}]);return a}();
z.Utils={getScrollParents:g,getBounds:h,getOffsetParent:f,extend:l,addClass:m,removeClass:n,hasClass:q,updateClasses:u,defer:y,flush:G,uniqueId:C,Evented:c,getScrollBarSize:k,removeUtilElements:e};"use strict";var V=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],e=!0,d=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(e=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(k){d=!0,f=k}finally{try{if(!e&&g["return"])g["return"]()}finally{if(d)throw f;
}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),A=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),p=function(a,b,c){var e=!0;for(;e;)if(null===a&&(a=Function.prototype),e=Object.getOwnPropertyDescriptor(a,b),void 0===e){a=Object.getPrototypeOf(a);if(null===a)break;
e=!0}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}};if("undefined"===typeof z)throw Error("You must include the utils.js file before tether.js");a=z.Utils;var g=a.getScrollParents,h=a.getBounds,f=a.getOffsetParent,l=a.extend,m=a.addClass,n=a.removeClass,u=a.updateClasses,y=a.defer,G=a.flush,k=a.getScrollBarSize,e=a.removeUtilElements,P=function(){if("undefined"===typeof document)return"";for(var a=document.createElement("div"),b=["transform","webkitTransform","OTransform",
"MozTransform","msTransform"],c=0;c<b.length;++c){var e=b[c];if(void 0!==a.style[e])return e}}(),O=[],W=function(){O.forEach(function(a){a.position(!1)});G()};(function(){var a=null,b=null,c=null,e=function ua(){"undefined"!==typeof b&&16<b?(b=Math.min(b-16,250),c=setTimeout(ua,250)):"undefined"!==typeof a&&10>w()-a||(null!=c&&(clearTimeout(c),c=null),a=w(),W(),b=w()-a)};"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,
e)})})();var Z={center:"center",left:"right",right:"left"},la={middle:"middle",top:"bottom",bottom:"top"},ia={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},wa=function(a,b){var c=a.left,e=a.top;"auto"===c&&(c=Z[b.left]);"auto"===e&&(e=la[b.top]);return{left:c,top:e}},aa=function(a){var b=a.left,c=a.top;"undefined"!==typeof ia[a.left]&&(b=ia[a.left]);"undefined"!==typeof ia[a.top]&&(c=ia[a.top]);return{left:b,top:c}},ya=function(a){a=a.split(" ");a=V(a,2);return{top:a[0],left:a[1]}};
a=function(a){function c(a){var e=this;b(this,c);p(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);this.position=this.position.bind(this);O.push(this);this.history=[];this.setOptions(a,!1);z.modules.forEach(function(a){"undefined"!==typeof a.initialize&&a.initialize.call(e)});this.position()}t(c,a);A(c,[{key:"getClass",value:function(){var a=0>=arguments.length||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!==typeof b&&b[a]?this.options.classes[a]:
this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=1>=arguments.length||void 0===arguments[1]?!0:arguments[1],e=this.options=l({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},a),d=e.target,f=e.targetModifier;this.element=e.element;this.target=d;this.targetModifier=f;"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,
this.targetModifier="scroll-handle");["element","target"].forEach(function(a){if("undefined"===typeof b[a])throw Error("Tether Error: Both element and target must be defined");"undefined"!==typeof b[a].jquery?b[a]=b[a][0]:"string"===typeof b[a]&&(b[a]=document.querySelector(b[a]))});m(this.element,this.getClass("element"));!1!==this.options.addTargetClasses&&m(this.target,this.getClass("target"));if(!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=
ya(this.options.targetAttachment);this.attachment=ya(this.options.attachment);this.offset=ya(this.options.offset);this.targetOffset=ya(this.options.targetOffset);"undefined"!==typeof this.scrollParents&&this.disable();this.scrollParents="scroll-handle"===this.targetModifier?[this.target]:g(this.target);!1!==this.options.enabled&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"!==typeof this.targetModifier){if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,
left:pageXOffset,height:innerHeight,width:innerWidth};var a=h(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};b.height=Math.min(b.height,a.height-(pageYOffset-a.top));b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));b.height=Math.min(innerHeight,b.height);b.height-=2;b.width=Math.min(b.width,a.width-(pageXOffset-a.left));b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));b.width=Math.min(innerWidth,b.width);b.width-=2;b.top<
pageYOffset&&(b.top=pageYOffset);b.left<pageXOffset&&(b.left=pageXOffset);return b}if("scroll-handle"===this.targetModifier){var c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=h(c);var e=getComputedStyle(c),b=0;if(c.scrollWidth>c.clientWidth||0<=[e.overflow,e.overflowX].indexOf("scroll")||this.target!==document.body)b=15;var d=a.height-parseFloat(e.borderTopWidth)-parseFloat(e.borderBottomWidth)-b,b={width:15,
height:d/c.scrollHeight*d*.975,left:a.left+a.width-parseFloat(e.borderLeftWidth)-15},f=0;408>d&&this.target===document.body&&(f=-1.1E-4*Math.pow(d,2)-.00727*d+22.58);this.target!==document.body&&(b.height=Math.max(b.height,24));b.top=this.target.scrollTop/(c.scrollHeight-d)*(d-b.height-f)+a.top+parseFloat(e.borderTopWidth);this.target===document.body&&(b.height=Math.max(b.height,24));return b}}else return h(this.target)}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,
b){"undefined"===typeof this._cache&&(this._cache={});"undefined"===typeof this._cache[a]&&(this._cache[a]=b.call(this));return this._cache[a]}},{key:"enable",value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?!0:arguments[0];!1!==this.options.addTargetClasses&&m(this.target,this.getClass("enabled"));m(this.element,this.getClass("enabled"));this.enabled=!0;this.scrollParents.forEach(function(b){b!==document&&b.addEventListener("scroll",a.position)});b&&this.position()}},{key:"disable",
value:function(){var a=this;n(this.target,this.getClass("enabled"));n(this.element,this.getClass("enabled"));this.enabled=!1;"undefined"!==typeof this.scrollParents&&this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}},{key:"destroy",value:function(){var a=this;this.disable();O.forEach(function(b,c){b===a&&O.splice(c,1)});0===O.length&&e()}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment;b=b||this.targetAttachment;"undefined"!==typeof this._addAttachClasses&&
this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length);"undefined"===typeof this._addAttachClasses&&(this._addAttachClasses=[]);var e=this._addAttachClasses;a.top&&e.push(this.getClass("element-attached")+"-"+a.top);a.left&&e.push(this.getClass("element-attached")+"-"+a.left);b.top&&e.push(this.getClass("target-attached")+"-"+b.top);b.left&&e.push(this.getClass("target-attached")+"-"+b.left);var d=[];"left top bottom right middle center".split(" ").forEach(function(a){d.push(c.getClass("element-attached")+
"-"+a);d.push(c.getClass("target-attached")+"-"+a)});y(function(){"undefined"!==typeof c._addAttachClasses&&(u(c.element,c._addAttachClasses,d),!1!==c.options.addTargetClasses&&u(c.target,c._addAttachClasses,d),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var c=wa(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var e=this.cache("element-bounds",
function(){return h(a.element)}),d=e.width,g=e.height;0===d&&0===g&&"undefined"!==typeof this.lastSize?(g=this.lastSize,d=g.width,g=g.height):this.lastSize={width:d,height:g};for(var l=this.cache("target-bounds",function(){return a.getTargetBounds()}),m=J(aa(this.attachment),{width:d,height:g}),n=J(aa(c),l),r=J(this.offset,{width:d,height:g}),p=J(this.targetOffset,l),m=x(m,r),n=x(n,p),q=l.left+n.left-m.left,t=l.top+n.top-m.top,u=0;u<z.modules.length;++u){var v=z.modules[u].position.call(this,{left:q,
top:t,targetAttachment:c,targetPos:l,elementPos:e,offset:m,targetOffset:n,manualOffset:r,manualTargetOffset:p,scrollbarSize:y,attachment:this.attachment});if(!1===v)return!1;"undefined"!==typeof v&&"object"===typeof v&&(t=v.top,q=v.left)}var w={page:{top:t,left:q},viewport:{top:t-pageYOffset,bottom:pageYOffset-t-g+innerHeight,left:q-pageXOffset,right:pageXOffset-q-d+innerWidth}},y=void 0;document.body.scrollWidth>window.innerWidth&&(y=this.cache("scrollbar-size",k),w.viewport.bottom-=y.height);document.body.scrollHeight>
window.innerHeight&&(y=this.cache("scrollbar-size",k),w.viewport.right-=y.width);if(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))w.page.bottom=document.body.scrollHeight-t-g,w.page.right=document.body.scrollWidth-q-d;"undefined"!==typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&"undefined"===typeof this.targetModifier&&function(){var b=a.cache("target-offsetparent",function(){return f(a.target)}),
c=a.cache("target-offsetparent-bounds",function(){return h(b)}),e=getComputedStyle(b),d={};["Top","Left","Bottom","Right"].forEach(function(a){d[a.toLowerCase()]=parseFloat(e["border"+a+"Width"])});c.right=document.body.scrollWidth-c.left-c.width+d.right;c.bottom=document.body.scrollHeight-c.top-c.height+d.bottom;w.page.top>=c.top+d.top&&w.page.bottom>=c.bottom&&w.page.left>=c.left+d.left&&w.page.right>=c.right&&(w.offset={top:w.page.top-c.top+b.scrollTop-d.top,left:w.page.left-c.left+b.scrollLeft-
d.left})}();this.move(w);this.history.unshift(w);3<this.history.length&&this.history.pop();b&&G();return!0}}},{key:"move",value:function(a){var b=this;if("undefined"!==typeof this.element.parentNode){var c={},e;for(e in a){c[e]={};for(var d in a[e]){for(var g=!1,h=0;h<this.history.length;++h){var k=this.history[h];if("undefined"!==typeof k[e]&&!v(k[e][d],a[e][d])){g=!0;break}}g||(c[e][d]=!0)}}var m={top:"",left:"",right:"",bottom:""},n=function(a,c){if(!1!==("undefined"!==typeof b.options.optimizations?
b.options.optimizations.gpu:null)){var e=void 0,d=void 0;a.top?(m.top=0,e=c.top):(m.bottom=0,e=-c.bottom);a.left?(m.left=0,d=c.left):(m.right=0,d=-c.right);m[P]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)";"msTransform"!==P&&(m[P]+=" translateZ(0)")}else a.top?m.top=c.top+"px":m.bottom=c.bottom+"px",a.left?m.left=c.left+"px":m.right=c.right+"px"},r=!1;(c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(m.position="absolute",n(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&
(c.viewport.left||c.viewport.right)?(m.position="fixed",n(c.viewport,a.viewport)):"undefined"!==typeof c.offset&&c.offset.top&&c.offset.left?function(){m.position="absolute";var e=b.cache("target-offsetparent",function(){return f(b.target)});f(b.element)!==e&&y(function(){b.element.parentNode.removeChild(b.element);e.appendChild(b.element)});n(c.offset,a.offset);r=!0}():(m.position="absolute",n({top:!0,left:!0},a.page));if(!r){e=!0;for(g=this.element.parentNode;g&&1===g.nodeType&&"BODY"!==g.tagName;){if("static"!==
getComputedStyle(g).position){e=!1;break}g=g.parentNode}e||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var p={};e=!1;for(d in m)g=m[d],this.element.style[d]!==g&&(e=!0,p[d]=g);e&&y(function(){l(b.element.style,p)})}}}]);return c}(c);a.modules=[];z.position=W;c=l(a,z);"use strict";V=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],e=!0,d=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(e=(h=g.next()).done)&&
(c.push(h.value),!b||c.length!==b);e=!0);}catch(k){d=!0,f=k}finally{try{if(!e&&g["return"])g["return"]()}finally{if(d)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();a=z.Utils;var h=a.getBounds,l=a.extend,u=a.updateClasses,y=a.defer,Ra=["left","top","right","bottom"];z.modules.push({position:function(a){var b=this,c=a.top,e=a.left,d=a.targetAttachment;if(!this.options.constraints)return!0;a=this.cache("element-bounds",function(){return h(b.element)});
var f=a.height,g=a.width;0===g&&0===f&&"undefined"!==typeof this.lastSize&&(a=this.lastSize,g=a.width,f=a.height);a=this.cache("target-bounds",function(){return b.getTargetBounds()});var k=a.height,m=a.width,n=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass;a=a.pinnedClass;b&&n.push(b);a&&n.push(a)});n.forEach(function(a){["left","top","right","bottom"].forEach(function(b){n.push(a+"-"+b)})});var r=[],p=l({},d),q=l({},
this.attachment);this.options.constraints.forEach(function(a){var h=a.to,l=a.attachment;a=a.pin;"undefined"===typeof l&&(l="");var n=void 0,t=void 0;0<=l.indexOf(" ")?(t=l.split(" "),l=V(t,2),t=l[0],n=l[1]):n=t=l;h=D(b,h);if("target"===t||"both"===t)c<h[1]&&"top"===p.top&&(c+=k,p.top="bottom"),c+f>h[3]&&"bottom"===p.top&&(c-=k,p.top="top");"together"===t&&("top"===p.top&&("bottom"===q.top&&c<h[1]?(c+=k,p.top="bottom",c+=f,q.top="top"):"top"===q.top&&c+f>h[3]&&c-(f-k)>=h[1]&&(c-=f-k,p.top="bottom",
q.top="bottom")),"bottom"===p.top&&("top"===q.top&&c+f>h[3]?(c-=k,p.top="top",c-=f,q.top="bottom"):"bottom"===q.top&&c<h[1]&&c+(2*f-k)<=h[3]&&(c+=f-k,p.top="top",q.top="top")),"middle"===p.top&&(c+f>h[3]&&"top"===q.top?(c-=f,q.top="bottom"):c<h[1]&&"bottom"===q.top&&(c+=f,q.top="top")));if("target"===n||"both"===n)e<h[0]&&"left"===p.left&&(e+=m,p.left="right"),e+g>h[2]&&"right"===p.left&&(e-=m,p.left="left");"together"===n&&(e<h[0]&&"left"===p.left?"right"===q.left?(e+=m,p.left="right",e+=g,q.left=
"left"):"left"===q.left&&(e+=m,p.left="right",e-=g,q.left="right"):e+g>h[2]&&"right"===p.left?"left"===q.left?(e-=m,p.left="left",e-=g,q.left="right"):"right"===q.left&&(e-=m,p.left="left",e+=g,q.left="left"):"center"===p.left&&(e+g>h[2]&&"left"===q.left?(e-=g,q.left="right"):e<h[0]&&"right"===q.left&&(e+=g,q.left="left")));if("element"===t||"both"===t)c<h[1]&&"bottom"===q.top&&(c+=f,q.top="top"),c+f>h[3]&&"top"===q.top&&(c-=f,q.top="bottom");if("element"===n||"both"===n)e<h[0]&&("right"===q.left?
(e+=g,q.left="left"):"center"===q.left&&(e+=g/2,q.left="left")),e+g>h[2]&&("left"===q.left?(e-=g,q.left="right"):"center"===q.left&&(e-=g/2,q.left="right"));"string"===typeof a?a=a.split(",").map(function(a){return a.trim()}):!0===a&&(a=["top","left","right","bottom"]);a=a||[];var u=[],v=[];c<h[1]&&(0<=a.indexOf("top")?(c=h[1],u.push("top")):v.push("top"));c+f>h[3]&&(0<=a.indexOf("bottom")?(c=h[3]-f,u.push("bottom")):v.push("bottom"));e<h[0]&&(0<=a.indexOf("left")?(e=h[0],u.push("left")):v.push("left"));
e+g>h[2]&&(0<=a.indexOf("right")?(e=h[2]-g,u.push("right")):v.push("right"));u.length&&function(){var a=void 0,a="undefined"!==typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned");r.push(a);u.forEach(function(b){r.push(a+"-"+b)})}();v.length&&function(){var a=void 0,a="undefined"!==typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds");r.push(a);v.forEach(function(b){r.push(a+"-"+b)})}();if(0<=u.indexOf("left")||0<=u.indexOf("right"))q.left=p.left=
!1;if(0<=u.indexOf("top")||0<=u.indexOf("bottom"))q.top=p.top=!1;if(p.top!==d.top||p.left!==d.left||q.top!==b.attachment.top||q.left!==b.attachment.left)b.updateAttachClasses(q,p),b.trigger("update",{attachment:q,targetAttachment:p})});y(function(){!1!==b.options.addTargetClasses&&u(b.target,r,n);u(b.element,r,n)});return{top:c,left:e}}});"use strict";a=z.Utils;h=a.getBounds;u=a.updateClasses;y=a.defer;z.modules.push({position:function(a){var b=this,c=a.top,e=a.left,d=this.cache("element-bounds",
function(){return h(b.element)});a=d.height;var d=d.width,f=this.getTargetBounds(),g=c+a,k=e+d,l=[];c<=f.bottom&&g>=f.top&&["left","right"].forEach(function(a){var b=f[a];b!==e&&b!==k||l.push(a)});e<=f.right&&k>=f.left&&["top","bottom"].forEach(function(a){var b=f[a];b!==c&&b!==g||l.push(a)});var m=[],n=[];m.push(this.getClass("abutted"));["left","top","right","bottom"].forEach(function(a){m.push(b.getClass("abutted")+"-"+a)});l.length&&n.push(this.getClass("abutted"));l.forEach(function(a){n.push(b.getClass("abutted")+
"-"+a)});y(function(){!1!==b.options.addTargetClasses&&u(b.target,n,m);u(b.element,n,m)});return!0}});"use strict";V=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],e=!0,d=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(e=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(k){d=!0,f=k}finally{try{if(!e&&g["return"])g["return"]()}finally{if(d)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}();z.modules.push({position:function(a){var b=a.top;a=a.left;if(this.options.shift){var c=this.options.shift;"function"===typeof this.options.shift&&(c=this.options.shift.call(this,{top:b,left:a}));var e=void 0,d=void 0;"string"===typeof c?(c=c.split(" "),c[1]=c[1]||c[0],c=V(c,2),e=c[0],d=c[1],e=parseFloat(e,10),d=parseFloat(d,10)):(e=c.top,d=c.left);return{top:b+e,left:a+d}}}});return c});
(function(a,c){"function"===typeof define&&define.amd?define(["tether"],c):"object"===typeof exports?module.exports=c(require("tether")):a.Drop=c(a.Tether)})(this,function(a){function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function d(a){a=
a.split(" ");var b=h(a,2);a=b[0];b=b[1];0<=["left","right"].indexOf(a)&&(b=[b,a],a=b[0],b=b[1]);return[a,b].join(" ")}function b(a,b){for(var c=void 0,e=[];-1!==(c=a.indexOf(b));)e.push(a.splice(c,1));return e}function g(){var h=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],k=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new (e.apply(B,[null].concat(b)))};l(k,{createContext:g,drops:[],defaults:{}});var v={classPrefix:"drop",defaults:{position:"bottom left",
openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,loadContentOnDemand:!1,tetherOptions:{}}};l(k,v,h);l(k.defaults,v.defaults,h.defaults);"undefined"===typeof x[k.classPrefix]&&(x[k.classPrefix]=[]);k.updateBodyClasses=function(){for(var a=!1,b=x[k.classPrefix],c=b.length,e=0;e<c;++e)if(b[e].isOpened()){a=!0;break}a?n(document.body,k.classPrefix+"-open"):
m(document.body,k.classPrefix+"-open")};var B=function(e){function g(a){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var b;a:{var c=Object.getPrototypeOf(g.prototype),e="constructor";b=this;var d=!0;for(;d;)if(null===c&&(c=Function.prototype),d=Object.getOwnPropertyDescriptor(c,e),void 0===d){c=Object.getPrototypeOf(c);if(null===c)break;d=!0}else{if("value"in d){b=d.value;break a}e=d.get;b=void 0===e?void 0:e.call(b);break a}b=void 0}b.call(this);this.options=l({},
k.defaults,a);this.target=this.options.target;if("undefined"===typeof this.target)throw Error("Drop Error: You must provide a target.");a="data-"+k.classPrefix;if(b=this.target.getAttribute(a))this.options.content=b;b=["position","openOn"];for(e=0;e<b.length;++e)(c=this.target.getAttribute(a+"-"+b[e]))&&(this.options[b[e]]=c);this.options.classes&&!1!==this.options.addTargetClasses&&n(this.target,this.options.classes);k.drops.push(this);x[k.classPrefix].push(this);this._boundEvents=[];this.bindMethods();
this.setupElements();this.setupEvents();this.setupTether()}c(g,e);f(g,[{key:"_on",value:function(a,b,c){this._boundEvents.push({element:a,event:b,handler:c});a.addEventListener(b,c)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var a=this;this.drop=document.createElement("div");n(this.drop,k.classPrefix);this.options.classes&&n(this.drop,this.options.classes);this.content=document.createElement("div");
n(this.content,k.classPrefix+"-content");if("function"===typeof this.options.content){var b=function(){var b=a.options.content.call(a,a);if("string"===typeof b)a.content.innerHTML=b;else if("object"===typeof b)a.content.innerHTML="",a.content.appendChild(b);else throw Error("Drop Error: Content function should return a string or HTMLElement.");};if(this.options.loadContentOnDemand)this.on("beforeOpen",b.bind(this));else b(),this.on("open",b.bind(this))}else"object"===typeof this.options.content?this.content.appendChild(this.options.content):
this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var b=this.options.position.split(" ");b[0]=w[b[0]];var b=b.join(" "),c=[];this.options.constrainToScrollParent?c.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):c.push({to:"scrollParent"});!1!==this.options.constrainToWindow?c.push({to:"window",attachment:"together"}):c.push({to:"window"});b={element:this.drop,target:this.target,attachment:d(b),targetAttachment:d(this.options.position),
classPrefix:k.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:c,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new a(l({},b,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var a=this;if(this.options.openOn)if("always"===this.options.openOn)setTimeout(this.open.bind(this));else{var b=this.options.openOn.split(" ");if(0<=b.indexOf("click"))for(var c=function(b){a.toggle(b);b.preventDefault()},e=function(b){a.isOpened()&&
(b.target===a.drop||a.drop.contains(b.target)||b.target===a.target||a.target.contains(b.target)||a.close(b))},d=0;d<u.length;++d){var f=u[d];this._on(this.target,f,c);this._on(document,f,e)}var g=null,h=null,c=function(b){null!==h?clearTimeout(h):g=setTimeout(function(){a.open(b);g=null},("focus"===b.type?a.options.focusDelay:a.options.hoverOpenDelay)||a.options.openDelay)},e=function(b){null!==g?clearTimeout(g):h=setTimeout(function(){a.close(b);h=null},("blur"===b.type?a.options.blurDelay:a.options.hoverCloseDelay)||
a.options.closeDelay)};0<=b.indexOf("hover")&&(this._on(this.target,"mouseover",c),this._on(this.drop,"mouseover",c),this._on(this.target,"mouseout",e),this._on(this.drop,"mouseout",e));0<=b.indexOf("focus")&&(this._on(this.target,"focus",c),this._on(this.drop,"focus",c),this._on(this.target,"blur",e),this._on(this.drop,"blur",e))}}},{key:"isOpened",value:function(){if(this.drop)return q(this.drop,k.classPrefix+"-open")}},{key:"toggle",value:function(a){this.isOpened()?this.close(a):this.open(a)}},
{key:"open",value:function(a){var b=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!==typeof this.tether&&this.tether.enable(),n(this.drop,k.classPrefix+"-open"),n(this.drop,k.classPrefix+"-open-transitionend"),setTimeout(function(){b.drop&&n(b.drop,k.classPrefix+"-after-open")}),this.trigger("beforeOpen"),"undefined"!==typeof this.tether&&this.tether.position(),this.trigger("open"),k.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(a){a.target===
a.currentTarget&&(q(this.drop,k.classPrefix+"-open")||m(this.drop,k.classPrefix+"-open-transitionend"),this.drop.removeEventListener(t,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(a){var b=!0;this.isClosing||"function"!==typeof this.options.beforeClose||(this.isClosing=!0,b=!1!==this.options.beforeClose(a,this));this.isClosing=!1;return b}},{key:"close",value:function(a){this.isOpened()&&this.beforeCloseHandler(a)&&(m(this.drop,k.classPrefix+"-open"),m(this.drop,k.classPrefix+
"-after-open"),this.drop.addEventListener(t,this.transitionEndHandler),this.trigger("close"),"undefined"!==typeof this.tether&&this.tether.disable(),k.updateBodyClasses(),this.options.remove&&this.remove(a))}},{key:"remove",value:function(a){this.close(a);this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!==typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove();"undefined"!==typeof this.tether&&
this.tether.destroy();for(var a=0;a<this._boundEvents.length;++a){var c=this._boundEvents[a];c.element.removeEventListener(c.event,c.handler)}this._boundEvents=[];this.target=this.content=this.drop=this.tether=null;b(x[k.classPrefix],this);b(k.drops,this)}}]);return g}(r);return k}var e=Function.prototype.bind,h=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],e=!0,d=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(e=(h=g.next()).done)&&(c.push(h.value),
!b||c.length!==b);e=!0);}catch(k){d=!0,f=k}finally{try{if(!e&&g["return"])g["return"]()}finally{if(d)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),f=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),k=a.Utils,l=k.extend,n=k.addClass,m=k.removeClass,q=k.hasClass,
r=k.Evented,u=["click"];"ontouchstart"in document.documentElement&&u.push("touchstart");var k={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},t="",v;for(v in k)({}).hasOwnProperty.call(k,v)&&"undefined"!==typeof document.createElement("p").style[v]&&(t=k[v]);var w={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},x={},J=g();document.addEventListener("DOMContentLoaded",function(){J.updateBodyClasses()});
return J});angular.module("genius").service("TetherDrop",["$window",function(a){return a.Drop}]);angular.module("genius").service("TitleService",["$document",function(a){return{update_count:function(c){a[0].title=a[0].title.replace(/^(\(\d+\) )?/,0<c?"("+c+") ":"")}}}]);
angular.module("genius").service("TopBarIndicatorsLoader",["EagerLoader","$http","Session",function(a,c,d){var b=new a;a=function(){d.user_signed_in&&c.get("/top_bar_indicators",{retries:2}).then(function(a){for(var c in a.data)b.loaded(c,a.data[c])})};a();return{listen_for:b.listen_for.bind(b),refresh:a}}]);angular.module("genius").service("Tracking",["$window",function(a){return new a.Tracking}]);
angular.module("genius").service("Twitter",["$window","querystring",function(a,c){return{share:function(d){d="https://twitter.com/intent/tweet?"+c.stringify({url:d.url,text:d.message});a.open(d)}}}]);
angular.module("genius").service("UserService",["$http","AppConfig","$q",function(a,c,d){var b=function(a){var b=Error(a.data.meta.message);_.extend(b,_.pick(a,"status","statusText"));return d.reject(_.extend(b,a.data.response))},g={autocomplete_api_endpoint:c.api_root_url+"/users/autocomplete",transform_autocomplete_results:function(a){return a.response.users},accomplishments:function(b,d){return a.get(c.api_root_url+"/users/"+b+"/accomplishments",{params:d}).then(function(a){return a.data.response})},
autocomplete:function(b){return a.get(this.autocomplete_api_endpoint,{params:{q:b}}).then(function(a){return this.transform_autocomplete_results(a.data)}.bind(this))},load:function(b){return a.get(c.api_root_url+"/users/"+b).then(function(a){return a.data.response.user})},impersonate:function(b){return a.post("/users/impersonate",{login:b})},autocomplete_options:{parse:function(a){a=g.transform_autocomplete_results(a);return _.map(a,function(a){return{data:[a.login],value:a.login,result:a.login}})}},
load_followers_by_artist:function(b,d){return a.get(c.api_root_url+"/artists/"+b+"/followers",{params:d}).then(function(a){return a.data.response}.bind(this))},load_followers_by_user:function(b,d){return a.get(c.api_root_url+"/users/"+b+"/followers",{params:d}).then(function(a){return a.data.response}.bind(this))},load_followed_users:function(b,d){return a.get(c.api_root_url+"/users/"+b+"/followed_users",{params:d}).then(function(a){return a.data.response}.bind(this))},load_contributions:function(b,
d,f){return a.get(c.api_root_url+"/users/"+b+"/contributions"+(d?"/"+d:""),{params:f}).then(function(a){return a.data.response})},update:function(e,d){return a.put(c.api_root_url+"/users/"+e,d,{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response}).catch(function(a){return b(a)})},load_recent_signups:function(b,d){d.spam_state=b;return a.get(c.api_root_url+"/users/recent_signups",{params:d}).then(function(a){return a.data.response})},add_role:function(e,d){return a.put(c.api_root_url+
"/users/"+e+"/roles/"+d).then(function(a){return a.data.response}).catch(function(a){return b(a)})},remove_role:function(e,d){return a.delete(c.api_root_url+"/users/"+e+"/roles/"+d).then(function(a){return a.data.response}).catch(function(a){return b(a)})},associate_with_artist:function(e,d){return a.put(c.api_root_url+"/users/"+e+"/artist",d).then(function(a){return a.data.response}).catch(function(a){return b(a)})},dissociate_from_artist:function(e){return a.delete(c.api_root_url+"/users/"+e+"/artist").then(function(a){return a.data.response}).catch(function(a){return b(a)})},
penalty_box:function(e){return a.put(c.api_root_url+"/users/"+e+"/penalty_box").then(function(a){return a.data.response}).catch(function(a){return b(a)})},unpenalty_box:function(e){return a.delete(c.api_root_url+"/users/"+e+"/penalty_box").then(function(a){return a.data.response}).catch(function(a){return b(a)})},update_spam_state:function(e,d){return a.put(c.api_root_url+"/users/"+e+"/spam",d).then(function(a){return a.data.response}).catch(function(a){return b(a)})},mass_delete_unreviewed_activity:function(e){return a.delete(c.api_root_url+
"/users/"+e+"/unreviewed_activity").then(function(a){return a.data.response}).catch(function(a){return b(a)})},delete_votes:function(e,d){return a.delete(c.api_root_url+"/users/"+e+"/"+d).then(function(a){return a.data.response}).catch(function(a){return b(a)})},airbrake_errors:function(b,d){return a.get(c.api_root_url+"/users/"+b+"/airbrake_errors",{params:d}).then(function(a){return a.data.response})},other_users_with_ip:function(b,d){return a.get(c.api_root_url+"/users/"+b+"/other_users_with_ip",
{params:d}).then(function(a){return a.data.response})},get_slug:function(a){return _(this.get_path(a).split("/")).last()},get_path:function(a){return(new URL(a.url)).pathname},activity_line_items:function(b,d){return a.get(c.api_root_url+"/users/"+b+"/activity_stream/line_items",{params:d}).then(function(a){return a.data.response})},spam_status:function(b){return a.get(c.api_root_url+"/users/"+b+"/spam_status").then(function(a){return a.data.response})}};return g}]);
angular.module("genius").service("VideoService",["$http","AppConfig",function(a,c){return{index:function(d){return a.get(c.api_root_url+"/videos",{params:d}).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("VoteService",["AppConfig","querystring","$http",function(a,c,d){return{load_voters:function(b,g){var e=_.set({},b+"_id",g);return d.get(a.api_root_url+"/voters?"+c.stringify(e)).then(function(a){return a.data.response.voters})},submit_vote:function(b,c,e){b=_.set({direction:e||"middle"},b+"_id",c);return d.post(a.api_root_url+"/votes",b)}}}]);
angular.module("genius").service("wait_for_global",["$q","$window",function(a,c){return function(d,b){b=_.defaults(b||{},{timeout:1E3});return a(function(a,e){var h;setTimeout(function(){clearInterval(h);e(Error("timed out waiting for '"+d+"' to load"))},b.timeout);h=setInterval(function(){var b=_.get(c,d);b&&(clearInterval(h),a(b))},50)})}}]);
!function(){function a(b){if(!b)throw Error("No options passed to Waypoint constructor");if(!b.element)throw Error("No element option passed to Waypoint constructor");if(!b.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+c;this.options=a.Adapter.extend({},a.defaults,b);this.element=this.options.element;this.adapter=new a.Adapter(this.element);this.callback=b.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;
this.triggerPoint=null;this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=a.Context.findOrCreateByElement(this.options.context);a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]);this.group.add(this);this.context.add(this);d[this.key]=this;c+=1}var c=0,d={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)};a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)};a.prototype.destroy=
function(){this.context.remove(this);this.group.remove(this);delete d[this.key]};a.prototype.disable=function(){return this.enabled=!1,this};a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this};a.prototype.next=function(){return this.group.next(this)};a.prototype.previous=function(){return this.group.previous(this)};a.invokeAll=function(a){var c=[],e;for(e in d)c.push(d[e]);e=0;for(var h=c.length;h>e;e++)c[e][a]()};a.destroyAll=function(){a.invokeAll("destroy")};a.disableAll=
function(){a.invokeAll("disable")};a.enableAll=function(){a.invokeAll("enable")};a.refreshAll=function(){a.Context.refreshAll()};a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};a.viewportWidth=function(){return document.documentElement.clientWidth};a.adapters=[];a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0};a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},
"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=a}();
(function(){function a(a){window.setTimeout(a,1E3/60)}function c(a){this.element=a;this.Adapter=g.Adapter;this.adapter=new this.Adapter(a);this.key="waypoint-context-"+d;this.didResize=this.didScroll=!1;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};a.waypointContextKey=this.key;b[a.waypointContextKey]=this;d+=1;this.createThrottledScrollHandler();this.createThrottledResizeHandler()}var d=0,b={},g=window.Waypoint,e=window.onload;
c.prototype.add=function(a){this.waypoints[a.options.horizontal?"horizontal":"vertical"][a.key]=a;this.refresh()};c.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),c=this.Adapter.isEmptyObject(this.waypoints.vertical);a&&c&&(this.adapter.off(".waypoints"),delete b[this.key])};c.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize();b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=
!0,g.requestAnimationFrame(a))})};c.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll();b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){b.didScroll&&!g.isTouch||(b.didScroll=!0,g.requestAnimationFrame(a))})};c.prototype.handleResize=function(){g.Context.refreshAll()};c.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),
oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c;for(c in b){var e=b[c],d=e.newScroll>e.oldScroll?e.forward:e.backward,g;for(g in this.waypoints[c]){var q=this.waypoints[c][g],r=e.oldScroll<q.triggerPoint,u=e.newScroll>=q.triggerPoint,t=!r&&!u;(r&&u||t)&&(q.queueTrigger(d),a[q.group.id]=q.group)}}for(var v in a)a[v].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};c.prototype.innerHeight=function(){return this.element==this.element.window?g.viewportHeight():
this.adapter.innerHeight()};c.prototype.remove=function(a){delete this.waypoints[a.axis][a.key];this.checkEmpty()};c.prototype.innerWidth=function(){return this.element==this.element.window?g.viewportWidth():this.adapter.innerWidth()};c.prototype.destroy=function(){var a=[],b;for(b in this.waypoints)for(var c in this.waypoints[b])a.push(this.waypoints[b][c]);b=0;for(c=a.length;c>b;b++)a[b].destroy()};c.prototype.refresh=function(){var a,b=(a=this.element==this.element.window)?void 0:this.adapter.offset(),
c={};this.handleScroll();a={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var e in a){var b=a[e],d;for(d in this.waypoints[e]){var m,q,r,u=this.waypoints[e][d];r=u.options.offset;
m=u.triggerPoint;q=0;var t=null==m;u.element!==u.element.window&&(q=u.adapter.offset()[b.offsetProp]);"function"==typeof r?r=r.apply(u):"string"==typeof r&&(r=parseFloat(r),-1<u.options.offset.indexOf("%")&&(r=Math.ceil(b.contextDimension*r/100)));u.triggerPoint=q+(b.contextScroll-b.contextOffset)-r;m=m<b.oldScroll;q=u.triggerPoint>=b.oldScroll;r=m&&q;m=!m&&!q;!t&&r?(u.queueTrigger(b.backward),c[u.group.id]=u.group):!t&&m?(u.queueTrigger(b.forward),c[u.group.id]=u.group):t&&b.oldScroll>=u.triggerPoint&&
(u.queueTrigger(b.forward),c[u.group.id]=u.group)}}return g.requestAnimationFrame(function(){for(var a in c)c[a].flushTriggers()}),this};c.findOrCreateByElement=function(a){return c.findByElement(a)||new c(a)};c.refreshAll=function(){for(var a in b)b[a].refresh()};c.findByElement=function(a){return b[a.waypointContextKey]};window.onload=function(){e&&e();c.refreshAll()};g.requestAnimationFrame=function(b){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
a).call(window,b)};g.Context=c})();
(function(){function a(a,b){return a.triggerPoint-b.triggerPoint}function c(a,b){return b.triggerPoint-a.triggerPoint}function d(a){this.name=a.name;this.axis=a.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();b[this.axis][this.name]=this}var b={vertical:{},horizontal:{}},g=window.Waypoint;d.prototype.add=function(a){this.waypoints.push(a)};d.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};d.prototype.flushTriggers=function(){for(var b in this.triggerQueues){var d=
this.triggerQueues[b];d.sort("up"===b||"left"===b?c:a);for(var f=0,g=d.length;g>f;f+=1){var l=d[f];(l.options.continuous||f===d.length-1)&&l.trigger([b])}}this.clearTriggerQueues()};d.prototype.next=function(b){this.waypoints.sort(a);b=g.Adapter.inArray(b,this.waypoints);return b===this.waypoints.length-1?null:this.waypoints[b+1]};d.prototype.previous=function(b){this.waypoints.sort(a);return(b=g.Adapter.inArray(b,this.waypoints))?this.waypoints[b-1]:null};d.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)};
d.prototype.remove=function(a){a=g.Adapter.inArray(a,this.waypoints);-1<a&&this.waypoints.splice(a,1)};d.prototype.first=function(){return this.waypoints[0]};d.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};d.findOrCreate=function(a){return b[a.axis][a.name]||new d(a)};g.Group=d})();
(function(){function a(a){this.$element=c(a)}var c=window.jQuery,d=window.Waypoint;c.each("innerHeight innerWidth off offset on outerHeight outerWidth scrollLeft scrollTop".split(" "),function(b,c){a.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return this.$element[c].apply(this.$element,a)}});c.each(["extend","inArray","isEmptyObject"],function(b,d){a[d]=c[d]});d.adapters.push({name:"jquery",Adapter:a});d.Adapter=a})();
(function(){function a(a){return function(b,g){var e=[],h=b;return a.isFunction(b)&&(h=a.extend({},g),h.handler=b),this.each(function(){var b=a.extend({},h,{element:this});"string"==typeof b.context&&(b.context=a(this).closest(b.context)[0]);e.push(new c(b))}),e}}var c=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=a(window.jQuery));window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))})();
!function(){function a(b){this.options=c.extend({},d.defaults,a.defaults,b);this.element=this.options.element;this.$element=c(this.element);this.createWrapper();this.createWaypoint()}var c=window.jQuery,d=window.Waypoint;a.prototype.createWaypoint=function(){var a=this.options.handler;this.waypoint=new d(c.extend({},this.options,{element:this.wrapper,handler:c.proxy(function(c){var e=-1<this.options.direction.indexOf(c),d=e?this.$element.outerHeight(!0):"";this.$wrapper.height(d);this.$element.toggleClass(this.options.stuckClass,
e);a&&a.call(this,c)},this)}))};a.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper);this.$wrapper=this.$element.parent();this.wrapper=this.$wrapper[0]};a.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())};a.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"};d.Sticky=
a}();angular.module("genius").service("Waypoint",["$window",function(a){return a.Waypoint}]);
angular.module("genius").service("WebAudioPlayback",["$interval","$document","$rootScope",function(a,c,d){var b=function(b){this.emitter=d.$new();this.audio=c[0].createElement("audio");this.audio.src=b.track_url;a(function(){this.emitter.$emit("state",this.state)}.bind(this),50)};Object.defineProperties(b.prototype,{type:{value:"web_audio"},$on:{value:function(a,b){return this.emitter.$on(a,b)}},src:{get:function(){return this.audio.currentSrc}},duration:{get:function(){return 1E3*this.audio.duration}},
position:{get:function(){return 1E3*this.audio.currentTime}},playing:{get:function(){return!this.audio.paused}},state:{get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,time_remaining:this.duration-this.position,is_loading:!1,is_playing:this.playing}}},api:{get:function(){var a=this;return{play:function(){a.audio.play()},pause:function(){a.audio.pause()},playpause:function(){a.audio.paused?a.audio.play():a.audio.pause()}.bind(this),seek_to:function(a){this.api.seek_to_position(this.duration*
a)}.bind(this),seek_to_position:function(b){a.audio.currentTime=b/1E3}.bind(this)}}}});return b}]);angular.module("genius").service("ZeroClipboard",["$window",function(a){var c;c="https://assets.genius.com/flash/ZeroClipboard.swf?1473794981".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:c});return a.ZeroClipboard}]);angular.module("genius").value("currentFlashMessages",[]);angular.module("genius").value("PreloadCache",{});
(function e$$0(c,d,b){function g(f,h){if(!d[f]){if(!c[f]){var l="function"==typeof require&&require;if(!h&&l)return l(f,!0);if(e)return e(f,!0);l=Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l;}l=d[f]={exports:{}};c[f][0].call(l.exports,function(b){var e=c[f][1][b];return g(e?e:b)},l,l.exports,e$$0,c,d,b)}return d[f].exports}for(var e="function"==typeof require&&require,h=0;h<b.length;h++)g(b[h]);return g})({1:[function(a,c,d){function b(a){return!0}c.exports=function(a,c){var d=
[];c=c||b;do d.push(a),a=a.parentNode;while(a&&a.tagName&&c(a));return d.slice(1)}},{}],2:[function(a,c,d){function b(a){return!isNaN(parseInt(a))&&isFinite(a)}function g(a,b){if(a===b)return!1;for(var c=null,e=[a].concat(h["default"](a)).reverse(),d=[b].concat(h["default"](b)).reverse();e[0]===d[0];)c=e.shift(),d.shift();e=e[0];d=d[0];e=f["default"](c.childNodes,e);c=f["default"](c.childNodes,d);return e>c}d.__esModule=!0;d["default"]=function(a,c){if(a.whatToShow!==n)throw Error(k);var e=0,d=a.referenceNode,
f=null;if(b(c))f={forward:function(){return e<c},backward:function(){return e>c}};else if(c.nodeType===m)f={forward:g(d,c)?function(){return!1}:function(){return d!==c},backward:function(){return d!=c||!a.pointerBeforeReferenceNode}};else throw Error(l);for(;f.forward()&&null!==(d=a.nextNode());)e+=d.nodeValue.length;for(;f.backward()&&null!==(d=a.previousNode());)e-=d.nodeValue.length;return e};var e=a("ancestors"),h=e&&e.__esModule?e:{"default":e},f=(a=a("index-of"))&&a.__esModule?a:{"default":a},
k="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.",l="Argument 2 of seek must be a number or a Text Node.",n=4,m=3;c.exports=d["default"]},{ancestors:1,"index-of":4}],3:[function(a,c,d){function b(a){return a&&a.nodeType===e}function g(a){if(b(a))return a;if(b(a.ownerDocument))return a.ownerDocument;if(b(a.document))return a.document;if(a.parentNode)return g(a.parentNode);if(a.commonAncestorContainer)return g(a.commonAncestorContainer);if(a.startContainer)return g(a.startContainer);if(a.anchorNode)return g(a.anchorNode)}
c.exports=g;var e=9},{}],4:[function(a,c,d){c.exports=function(a,c,e){e=e||0;if(null==a)return-1;var d=a.length;e=0>e?d+e:e;if(e>=a.length)return-1;for(;e<d;){if(a[e]===c)return e;e++}return-1}},{}],5:[function(a,c,d){c.exports=a("./lib/xpath")},{"./lib/xpath":7}],6:[function(a,c,d){d.__esModule=!0;a=function g(a,c){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this.message=a;this.name=c;this.stack=Error().stack};d["default"]=a;a.prototype=Error();a.prototype.toString=
function(){return this.name+": "+this.message};c.exports=d["default"]},{}],7:[function(a,c,d){function b(a){switch(a.nodeName){case "#text":return"text()";case "#comment":return"comment()";case "#cdata-section":return"cdata-section()";default:return a.nodeName.toLowerCase()}}function g(a,c,e){try{var d=a.replace(/\/(?!\.)([^\/:\(]+)(?=\/|$)/g,"/_default_:$1");return document.evaluate(d,c,e,f,null).singleNodeValue}catch(g){for(a=a.split("/");c;){e=a.shift();if(void 0===e)break;if("."!==e)a:{for(d=
e.split(/[\[\]]/),e=d[0],d=d[1],e=e.replace("_default_:",""),d=d?parseInt(d):1,c=c.firstChild;c;c=c.nextSibling)if(b(c)===e&&0===--d)break a;c=null}}return c}}d.__esModule=!0;d.fromNode=function(a){for(var c=1>=arguments.length||void 0===arguments[1]?document:arguments[1],e="/";a!==c;){if(!a)throw new h["default"]("The supplied node is not contained by the root node.","InvalidNodeTypeError");for(var d="/"+b(a)+"[",f=a,g=f.nodeName,k=1;f=f.previousSibling;)f.nodeName===g&&(k+=1);e=d+k+"]"+e;a=a.parentNode}return e.replace(/\/$/,
"")};d.toNode=function(a){var b=1>=arguments.length||void 0===arguments[1]?document:arguments[1],c=2>=arguments.length||void 0===arguments[2]?null:arguments[2];"function"===typeof b&&(c=b,b=document);b!==document&&(a=a.replace(/^\//,"./"));null===c&&document.lookupNamespaceURI&&function(){var a=e["default"](b).documentElement,d=a.lookupNamespaceURI(null)||k;c=function(b){return{_default_:d}[b]||a.lookupNamespaceURI(b)}}();return g(a,b,c)};var e=(c=a("get-document"))&&c.__esModule?c:{"default":c},
h=(a=a("./dom-exception"))&&a.__esModule?a:{"default":a},f=9,k="http://www.w3.org/1999/xhtml"},{"./dom-exception":6,"get-document":3}],8:[function(a,c,d){c.exports=a("./lib/range")},{"./lib/range":9}],9:[function(a,c,d){d.__esModule=!0;d.fromRange=function(a,b){var c=a.startOffset,d=a.endContainer,g=a.endOffset,h=e.fromNode(a.startContainer,b),d=e.fromNode(d,b);return{start:h,end:d,startOffset:c,endOffset:g}};d.toRange=function(a,c,d,n,m){function q(a){a=Error("The "+a+" node was not found.");a.name=
"NotFoundError";return a}function r(a){a=Error("There is no text at the requested "+a+" offset.");a.name="IndexSizeError";return a}var u=b["default"](m);a=e.toNode(a,m);if(null===a)throw q("start");var t=u.createNodeIterator(a,h);c-=g["default"](t,c);a=t.referenceNode;if(!t.pointerBeforeReferenceNode){if(0<c)throw r("start");c+=a.length}d=e.toNode(d,m);if(null===d)throw q("end");m=u.createNodeIterator(d,h);n-=g["default"](m,n);d=m.referenceNode;if(!m.pointerBeforeReferenceNode){if(0<n)throw r("end");
n+=d.length}u=u.createRange();u.setStart(a,c);u.setEnd(d,n);return u};var b=(c=a("get-document"))&&c.__esModule?c:{"default":c},g=(c=a("dom-seek"))&&c.__esModule?c:{"default":c},e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("simple-xpath-position")),h=4},{"dom-seek":2,"get-document":3,"simple-xpath-position":5}],10:[function(a,c,d){window.XpathRange=a("xpath-range")},{"xpath-range":8}]},
{},[10]);angular.module("genius").value("XpathRange",window.XpathRange);
(function(){window["com.genius.Genius"].require.define({"back_page/annotation_loader":function(a,c,d){var b={},g=function(a){_.each(a,function(a){b[a]||(b[a]=$.Deferred())})},e=function(a){var c=_.reject(a,function(a){return b[a]});if(!c.length)return _.pick(b,Array.prototype.slice.apply(a));g(c);$.ajax({url:"/annotations/bulk_standalone",data:{annotation_ids:c},dataType:"json"}).done(function(a){_.each(a,function(a,c){b[c].resolve($(a))})});return _.pick(b,Array.prototype.slice.apply(a))};d.exports=
{load:function(a){e([a]);return b[a]},add_to_cache:function(a,c){g([a]);b[a].resolve(c).promise()},fetch_annotations:e}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/tracking":function(a,c,d){var b=window.app.tracking,g,e=[],h=$.Deferred();d.exports={track_page_load:function(a){g=a;b.start_tracking();b.track("Wrapped Web Page Load",a);h.resolve()},track_annotated_page:function(){h.then(function(){b.track("Annotated Web Page Load",g)})},track_open_annotation:function(a){h.then(function(){var c=a.referent_id;a.from_permalink&&b.set_annotation_opened_from_permalink(c);b.track("Open Annotation",_.extend({},
g,{annotation_id:c}))})},track_engaged_annotation_view:function(a){h.then(function(){var c=a.referent_id;-1===e.indexOf(c)&&(e.push(c),b.track("Engaged Annotation View",_.extend({},g,{annotation_id:c,annotator_login:a.annotator_login,skip_counters:!0})))})},track_filter_change:function(a,c,e){h.then(function(){b.track("Offsite Filter Selection",_.extend({},g,e,{filter_type:a,filter_args:c}))})}}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/referents":function(a,c,d){var b=[],g={},e,h=!1,f=c("back_page/annotation_loader"),k=c("shared/universal/annotation_filter"),l=c("back_page/tracking"),n=k.ALL,m="all";d.exports={initialize:function(a){this.back_page=a;app.parent_channel.bind("close",this.close.bind(this))},open:function(){h||(h=!0,app.parent_channel.notify({method:"show_back_page"}))},close:function(){if(!h||!this.back_page.confirm_no_dirty_fields())return!1;h=!1;
this.close_overlay();e=null;this.update_url_state();app.parent_channel.notify({method:"hide_back_page"});return!0},update_url_state:function(){var a={};n.filter_string!==m&&(a.filter=n.filter_string);e&&(a.annotation_id=e.id);app.parent_channel.notify({method:"update_url_state",params:a})},add:function(a){a.forEach(function(a){var c=g[a.id];c?_.extend(c,a):(a.hidden=!n.test(a),g[a.id]=a,b.push(a))}.bind(this));this.sort()},remove:function(a){b=_.reject(b,function(b){return b.id===a});delete g[a];
app.parent_channel.notify({method:"referent_deleted",params:a});this.back_page.remove_referent(a);e&&e.id===a&&(e=null);b.length?this.ensure_active_referent():this.close()},sort:function(){b=b.sort(function(a,b){if(a.anchor_offset&&b.anchor_offset){var c=a.anchor_offset.top-b.anchor_offset.top;0===c&&(c=a.anchor_offset.left-b.anchor_offset.left);return c}return a.anchor_offset?-1:b.anchor_offset?1:a.id-b.id});this.back_page.update(b)},display:function(a,b){var c=this.set_active_referent(a,b);this.ensure_current_filter_allows_referent(a);
this.open();return c},activate:function(a,b){if(h)return this.set_active_referent(a,b)},feature:function(a){g[a].featured=!0;this.apply_filter()},unfeature:function(a){g[a].featured=!1;this.apply_filter()},set_default_filter_string:function(a){m=a},set_active_referent:function(a,b){e=g[a];this.back_page.activate_referent(a,b);app.parent_channel.notify({method:"activate_referent",params:a});this.update_url_state();var c=f.load(a).then(function(b){this.back_page.hydrate_placeholder(a,b);setTimeout(function(){e&&
e.id===a&&l.track_engaged_annotation_view({referent_id:a,annotator_login:e.annotator_login})}.bind(this),1E3)}.bind(this));this.back_page.load_nearby_annotations(a);return c},preload_first_page:function(){var a=_.map(b.slice(0,6),function(a){return a.id});return this.back_page.load_annotations(a)},ensure_active_referent:function(){e||b.length&&this.set_active_referent(this.back_page.referent_id_in_active_zone()||b[0].id)},filter_by_filter_string:function(a,b){n=new k(a);this.back_page.update_selected_filter(a).done(function(){this.update_url_state()}.bind(this));
this.apply_filter();b&&l.track_filter_change(n.filter_type,n.filter_args.join(":"),b)},apply_filter:function(){var a=[],c=[];b.forEach(function(b){b.hidden=!n.test(b);b.hidden?(c.push(b.id),b===e&&(e=null)):a.push(b.id)});this.back_page.update(b);this.ensure_active_referent();app.parent_channel.notify({method:"update_referent_visibility",params:{visible:a,hidden:c}})},ensure_current_filter_allows_referent:function(a){a=g[a];n.test(a)||this.filter_by_filter_string("annotator:"+a.annotator_login,{reason:"Annotation Permalink"})},
close_overlay:function(){if(!this.back_page.confirm_no_dirty_fields())return!1;h&&this.ensure_active_referent();this.back_page.close_overlay();return!0},load_drafts:function(a){$.get(a).then(function(a){app.parent_channel.notify({method:"draft_referents_loaded",params:{referents:a}})})}}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/back_page":function(a,c,d){var b=c("back_page/annotation_loader"),g=$(window).height(),e=.35*g,h=$(window).width()/2,f,k=$.Deferred(),l={referents:c("back_page/referents"),initialize:function(){this.referents.initialize(this);window.onbeforeunload=function(){if($("textarea:focus, textarea.dirty").length)return n};$(document).on("click",".back_page-close_button",function(){l.referents.close()});$(document).on("click",".overlay_close_button",
function(){(!$(".annotations_for_back_page").contents().length||Modernizr.touch?l.referents.close():l.referents.close_overlay())&&app.parent_channel.notify({method:"reset_referent_in_progress"})});if(!Modernizr.touch)$(document).on("scroll",function(){r();q()});$(document).on("click",".referent_content",function(){l.referents.activate($(this).closest(".annotation_container").attr("data-genius-referent-id"));return!1});$(".back_page-filter_menu").length?k.resolve():$(function(){$(".back_page-filter_menu_container").on("auto_load_url:loaded",
k.resolve.bind(k))});$(document).on("click",".filter_menu-filter",function(){var a=$(this).attr("data-filter");l.referents.filter_by_filter_string(a,{reason:"Menu Selection"})});$(document).on("click",".annotations_for_back_page .annotation_container",function(){l.referents.activate($(this).attr("data-genius-referent-id"))});$(document).on("click","html, .annotations_for_back_page",function(a){$(a.target).is($(this))&&$(document.body).is(".cont-web_pages.act-back_page")&&l.referents.close()});$(document).on("annotation:deleted",
".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));l.referents.remove(a);return!1});$(document).on("annotation:featured",".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));l.referents.feature(a);return!1});$(document).on("annotation:unfeatured",".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));
l.referents.unfeature(a);return!1})},activate_referent:function(a,b){b=b||{};var c=$('[data-genius-referent-id="'+a+'"]');c.length&&(c.addClass("active").siblings().removeClass("active"),void 0===b.align_with_vertical_offset||Modernizr.touch||u(c,b.align_with_vertical_offset))},update_selected_filter:function(a){var b=$.Deferred();k.done(function(){var c=$('.filter_menu-filter[data-filter="'+a+'"]');b.resolve();c.addClass("filter_menu-filter--selected");$(".filter_menu-filter--selected").not(c).removeClass("filter_menu-filter--selected");
$(".filter_menu-selected_filter").html(c.html()).find(".filter_menu-filter-annotation_count").remove();$(".filter_menu-list").removeClass("filter_menu--open")});return b.promise()},hydrate_placeholder:function(a,b){var c=$('.referent_placeholder[data-genius-referent-id="'+a+'"]');c.length&&$(document).retainingScrollPosition($(".annotation_container.active"),function(){b.toggleClass("anchorless",c.hasClass("anchorless"));b.toggleClass("active",c.hasClass("active"));b.toggleClass("annotation_container--hidden",
c.hasClass("annotation_container--hidden"));c.replaceWith(b);app.setup_embedded_annotation(b);!Modernizr.touch&&b.nextAll(".active").length&&0>b[0].getBoundingClientRect().top&&b.addClass("annotation_container--fixed_placeholder_height")})},load_annotations:function(a){$.each(b.fetch_annotations(a),function(a,b){b.done(function(b){l.hydrate_placeholder(a,b)})})},load_nearby_annotations:_.debounce(function(a){a=$('[data-genius-referent-id="'+a+'"]');var b=[];a.is(".referent_placeholder")&&b.push(a.attr("data-genius-referent-id"));
a.prevAll(":visible").slice(0,2).filter(".referent_placeholder").each(function(a,c){b.push($(c).attr("data-genius-referent-id"))});a.nextAll(":visible").slice(0,4).filter(".referent_placeholder").each(function(a,c){b.push($(c).attr("data-genius-referent-id"))});b.length&&this.load_annotations(b)},500),remove_referent:function(a){a=$('[data-genius-referent-id="'+a+'"]');a.slideUp("fast",a.remove.bind(a))},update:function(a){$(function(){var b=$("#annotations"),c=b.children().filter(".active"),e={};
b.children().each(function(){var a=$(this);e[a.attr("data-genius-referent-id")]=a});a.forEach(function(a,c){var d=e[a.id];d||(d=$("<div class='referent_placeholder' data-genius-referent-id='"+a.id+"'><em class='referent_content-loading_text'>Loading:</em> <span class='referent_content-referent'>"+a.fragment+"</span></div>\n").appendTo(b));d.index()!==c&&(d.find("iframe").cache_iframe_contents(),0===c?b.prepend(d.detach()):b.children().eq(c-1).after(d.detach()));d.toggleClass("anchorless",!a.anchor_offset);
d.toggleClass("annotation_container--hidden",a.hidden)});c.is(":visible")&&(u(c),this.load_nearby_annotations(Number(c.attr("data-genius-referent-id"))))}.bind(this))},populate_overlay:function(a){$("#back_page_overlay").addClass("active").find(".contents").html(a)},close_overlay:function(){$("#back_page_overlay").removeClass("active")},referent_id_in_active_zone:function(){var a=m(h,e);if(a.length)return Number(a.attr("data-genius-referent-id"))},confirm_no_dirty_fields:function(){return $("textarea.dirty").length?
confirm(n)?($("textarea.dirty").trigger("dirtyable:changed",!1),!0):!1:!0}},n="Looks like you're in the middle of something. Do you want to leave without finishing?",m=function(a,b){return $(document.elementFromPoint(a,b)).closest(".annotation_container:not(.active), .referent_placeholder:not(.active)")},q=_.throttle(function(){$(document).retainingScrollPosition($(".annotation_container.active, .referent_placeholder.active"),function(){var a=m(h,45);a.add(a.nextAll(".annotation_container--fixed_placeholder_height")).removeClass("annotation_container--fixed_placeholder_height")})},
100),r=_.throttle(function(){if(f)f=!1;else{var a=l.referent_id_in_active_zone();a&&l.referents.activate(a);a=$(document).scrollTop();50>$("body").prop("scrollHeight")-(g+a)&&l.referents.activate($("[data-genius-referent-id]:visible:last").attr("data-genius-referent-id"));50>a&&l.referents.activate($("[data-genius-referent-id]:visible:first").attr("data-genius-referent-id"))}},100),u=function(a,b){b=b||0;f=!0;var c=window.innerHeight-a.outerHeight(),c=Math.max(45,Math.min(c,b-250));$(window).scrollTop(a.offset().top-
c)};d.exports=l}})})();(function(){window["com.genius.Genius"].require.define({"back_page/show_signup_prompt":function(a,c,d){var b=c("back_page/back_page");d.exports=function(){app.set_desired_location_cookie({fallback:$(".embedded_annotation").attr("data-path")});$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1});b.populate_overlay($($("#new_user_session").text()))}}})})();
(function(){window.app=window.app||{};var a=require("back_page/show_signup_prompt"),c=require("shared/universal/tweet_composer");$.extend(window.app,{on_ajax_complete:function(){app.set_up_timeago()},on_ajax_error:function(){}});var d=function(){$(".show_credits").on("click",function(){var a=$(this),c=$(a.toggleClass("pressed").attr("data-target"));c.toggle();c.hasClass("loading")&&$.ajax_with_retry({url:"/annotations/full_credits",data:{annotation_id:c.attr("data-id")},success:function(a){c.html(a).removeClass("loading")}})})};
app.setup_embedded_annotation=function(a){a.length&&(app.setup_embedly(a),app.set_up_mentions_autocomplete(),app.set_up_timeago(),app.load_vidyard_players(),app.pusher=app.angular_inject_get__deprecated("Pusher").pusher,CURRENT_USER&&app.pusher().subscribe(a.attr("data-pusher-channel")).bind("referent-image-changed",function(c){a.find(".compose_tweet_wrapper .loading_with_indicator").replaceWith($("<img>",{src:c}))}),window.chrome&&WRAP_GENIUS_HOST===(new URL(document.referrer)).hostname&&$(".extension_link").css("display",
"block"),a.find(".annotation_unit").each(function(){var a=$(this);a.find(".twitter_button.tweet_composer").length&&new c(a)}))};app.set_up_embedded_annotations=function(){d();app.setup_zeroclipboard();app.set_up_disable_annotation_draft_status_button();$(document).on("click","a:not([target])",function(){$(this).attr("target","_blank");return!0});$(document).on("click",".current_user_is_anonymous .requires_user",function(){a();return!1});$(document).on("click",".delete_annotation",function(){if(!confirm("Are you sure?"))return!1;
var a=$(this),c=a.closest(".annotation_unit");app.delete_annotation(a.attr("href"));a=$.Event("annotation:deleted");c.trigger(a);a.isDefaultPrevented()||(c.siblings(".annotation_unit").length?c.remove():c.closest(".annotation_container").slideUp("fast"));return!1})};$(window).on("keydown",function(a){$(a.target).acts_like_input()||app.parent_channel.notify({method:"window_keydown",params:a.which})});$(function(){app.set_up_embedded_annotations();app.process_auto_load_containers()})})();
window.app=window.app||{};
$.extend(window.app,{set_up_mentions_autocomplete:function(){$("textarea[data-mentions-autocomplete]").each(function(){var a=$(this),c=!1;a.atwho({at:"@",data:JSON.parse(a.attr("data-mentions-seed-data")||"[]"),displayTpl:'<li data-value="${value}">${name}</li>',insertTpl:"@${value}",callbacks:{sorter:function(a,b,g){return c?(c=!1,b):$.fn.atwho.default.callbacks.sorter(a,b,g)},remoteFilter:function(){var a=null,b={};return function(g,e){a&&a.abort();g=g||"";if(!(1>g.length||" "==g[0]))if(g in b)c=
!0,e(b[g]);else{var h=this;$.doTimeout("mentions_autocomplete",200,function(){a=$.ajax({url:h.$inputor.attr("data-mentions-autocomplete-url"),dataType:"json",data:{q:g},success:function(a){c=!0;b[g]=a;e(a)}})})}}}()}})})}});
Backbone.View.attach(".voting_links",{events:{"click a.vote":"on_click_vote_button","click .votes_total":"toggle_voters_panel"},initialize:function(){var a=this;a.$vote_total=a.$el.find(".votes_total");a.$vote_total.on("qtip:beforeContentUpdate",function(c,d){var b=$(d).attr("data-votes-total");b&&a.update_vote_total(parseInt(b,10))})},on_click_vote_button:function(a){var c=$(a.target);(CURRENT_USER||"up"==c.attr("data-direction"))&&this.submit_vote(c);a.preventDefault()},toggle_voters_panel:function(a){a=
$(a.target);if(a.closest(".embedded_annotation").length){a=a.attr("tooltip__deprecated");var c=this.$el.attr("data-voteable-id"),d=$(".votes_for_"+c);d.toggle();d.is(":visible")&&(d.text("Loading..."),$.ajax_with_retry({type:"GET",url:a,success:function(a){d.html(a)}}));return!1}},submit_vote:function(a){var c=a.hasClass("toggled")?"middle":a.attr("data-direction"),d=this.$el.clone();this.increment_vote_count_by(this.voting_delta_for(a));a.toggleClass("toggled").siblings(".vote").removeClass("toggled");
$.ajax({type:"POST",url:a.attr("href"),data:{direction:c},alert_on_error:!1}).done(function(a){this.$el.replaceWith(a)}.bind(this)).error(function(){this.$el.replaceWith(d)}.bind(this))},voting_delta_for:function(a){var c="up"===a.attr("data-direction")?1:-1;a.hasClass("toggled")?c*=-1:a.siblings(".vote").hasClass("toggled")&&(c*=2);return c},increment_vote_count_by:function(a){var c=parseInt(this.$vote_total.text(),10);this.update_vote_total(c+a)},update_vote_total:function(a){var c,d;0>a?(d="downvote",
c=a.toString()):(c="+"+a,d=0<a?"upvote":"neutral");this.$vote_total.removeClass("downvote upvote no_votes neutral").addClass(d).text(c)}});Backbone.View.attach(".comment_unit",{events:{"click .destroy_comment":function(a){this.destroy_comment($(a.target));return!1}},destroy_comment:function(a){app.ajaxQueue.add({type:"post",url:a.attr("href"),data:{_method:"delete"}});a.parents(".comment_unit").slideUp("fast",this.notify_resize.bind(this))},notify_resize:function(){this.$el.trigger("genius:resized")}});
Backbone.View.attach(".comment_section",{events:{"submit form.comment":function(a){this.submit_comment($(a.target));return!1}},initialize:function(){this.ANIMATION_SPEED=150;this.ANIMATION_END_EVENT="animationend webkitAnimationEnd";this.$comment_container=this.$el.find(".comment_container");app.setup_embedly(this.$comment_container);this.set_up_show_all_comments();this.set_up_show_needs_improvement();this.set_up_animation_handlers()},set_up_animation_handlers:function(){this.$comment_container.on(this.ANIMATION_END_EVENT,
".comment_unit",function(){$(this).removeClass("comment_unit--new")})},set_up_show_all_comments:function(){this.$comment_container.on("click",".show_all_comments",function(){$(this).addClass("pressed").siblings(".comment_unit").show();app.setup_embedly();return!1})},set_up_show_needs_improvement:function(){var a=this.$el.find(".reasons");this.$el.parents(".annotation_unit").on("click","[data-show-needs-improvement]",function(){a.slideDown(this.ANIMATION_SPEED)})},render_new_comment:function(a){var c=
Hogan.compile($("#new_comment_template").html());return a.allows_reason?$(c.render(a)).hide().prependTo(this.$comment_container).slideDown(this.ANIMATION_SPEED):$(c.render(a)).appendTo(this.$comment_container)},render_post_comment_message:function(a,c,d){a.remove();a=$($("#post_comment_message").html());this.$comment_container.append(a);a.find("[name='user[login]']").val(c);a.find("[name='user[email]']").val(d);a.find("#user_password").focus()},submit_comment:function(a){var c=a.validate({rules:{"comment[body]":{maxlength:5E4,
required:{depends:function(){var b=a.find('input[name="comment[reason]"]:checked');return!b.length||"other"===b.val()}}},"comment[name]":{maxlength:255}},messages:{"comment[body]":{maxlength:"Your comment is too long."},"comment[name]":{maxlength:"Your name is too long."}}});if(c.form()){var d="new_comment_"+(new Date).getTime();a.submitWithAjaxQueue({complete:function(a){CURRENT_USER&&$("#"+d).find("a.destroy_comment").attr("href","/comments/"+a.responseText).removeClass("loading");this.notify_resize()}.bind(this)});
var b=a.find("[name='comment[reason]']:checked"),c=a.find("[name='comment[name]']").val(),g=a.find("[name='comment[email]']").val(),e=b.data("is-other")?null:b.val(),h=b.data("inline-reason"),f=a.find("[name='allows_reason']").length,k=b.data("reason-context-url"),b=a.find("[name='comment[body]']").val(),e=this.render_new_comment({identifier:d,name:c,reason:e,inline_reason:h,allows_reason:f,reason_context_url:k,body:"",timestamp:(new Date).toISOString()});app.markdown_to_html(b,e.find(".body"),function(a){$(a).find("a").attr("target",
"_blank")});this.reset_interface(a);this.notify_resize();window.top!==window||CURRENT_USER||this.render_post_comment_message(a,c,g);window._gaq&&_gaq.push(["_trackEvent","Comments","Create comment"])}else c.showErrors(),this.notify_resize()},reset_interface:function(a){var c=a.find('input[name="comment[reason]"]:checked');a=a.find('textarea[name="comment[body]"]');c.prop("checked",!1);a.val("")},notify_resize:function(){this.$el.trigger("genius:resized")}});"use strict";
(function(){var a=function(){var a={},b=function(b,c,h){b=b.split(".");for(var f=0;f<b.length-1;f++)h[b[f]]||(h[b[f]]={}),h=h[b[f]];h[b[f]]="function"===typeof c?c.isClass?c:function(){return c.apply(a,arguments)}:c};return{extend:function(c,e,h){"function"===typeof c&&(h=e,e=c,c="");c&&(c+=".");e=e.call(a);for(var f in e){var k=c+f,l=e[f],n=h;b(k,l,a);n&&b(k,l,window.filepicker)}},internal:function(b){b.apply(a,arguments)}}}();if(window.filepicker)for(var c in a)window.filepicker[c]=a[c];else window.filepicker=
a})();"use strict";
filepicker.extend("comm",function(){var a=this,c=function(b){if(b.origin===a.urls.BASE||b.origin===a.urls.DIALOG_BASE)b=a.json.parse(b.data),a.handlers.run(b)},d=!1,b=function(){if(!d)if(d=!0,window.addEventListener)window.addEventListener("message",c,!1);else if(window.attachEvent)window.attachEvent("onmessage",c);else throw new a.FilepickerException("Unsupported browser");};return{openChannel:function(){if(void 0===window.frames.filepicker_comm_iframe){b();var c;c=document.createElement("iframe");c.id=
c.name="filepicker_comm_iframe";c.src=a.urls.COMM;c.style.display="none";document.body.appendChild(c)}void 0===window.frames.fpapi_comm_iframe&&(b(),c=document.createElement("iframe"),c.id=c.name="fpapi_comm_iframe",c.src=a.urls.API_COMM,c.style.display="none",document.body.appendChild(c))},closeChannel:function(){if(window.removeEventListener)window.removeEventListener("message",c,!1);else if(window.attachEvent)window.detachEvent("onmessage",c);else throw new a.FilepickerException("Unsupported browser");
if(d){d=!1;for(var b=document.getElementsByName("filepicker_comm_iframe"),e=0;e<b.length;e++)b[e].parentNode.removeChild(b[e]);try{delete window.frames.filepicker_comm_iframe}catch(h){}b=document.getElementsByName("fpapi_comm_iframe");for(e=0;e<b.length;e++)b[e].parentNode.removeChild(b[e]);try{delete window.frames.fpapi_comm_iframe}catch(h){}}}}});"use strict";
filepicker.extend("comm_fallback",function(){var a=this,c="",d=function(){b()},b=function(){if(void 0===window.frames.host_comm_iframe){var b;b=document.createElement("iframe");b.id=b.name="host_comm_iframe";c=b.src=a.urls.constructHostCommFallback();b.style.display="none";var d=function(){c=b.contentWindow.location.href;if(void 0===window.frames.filepicker_comm_iframe){var d;d=document.createElement("iframe");d.id=d.name="filepicker_comm_iframe";d.src=a.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(c);
d.style.display="none";document.body.appendChild(d)}g||(g=!0,e=window.setInterval(f,200))};b.attachEvent?b.attachEvent("onload",d):b.onload=d;document.body.appendChild(b)}},g=!1,e,h="",f=function(){var b=window.frames.filepicker_comm_iframe;if(b&&(b=b.frames.host_comm_iframe)&&((b=b.location.hash)&&"#"===b.charAt(0)&&(b=b.substr(1)),b!==h&&(h=b))){var c;try{c=a.json.parse(b)}catch(e){}c&&a.handlers.run(c)}},k=function(){window.clearInterval(e);if(g){g=!1;for(var a=document.getElementsByName("filepicker_comm_iframe"),
b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.filepicker_comm_iframe}catch(c){}a=document.getElementsByName("host_comm_iframe");for(b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.host_comm_iframe}catch(c){}}},l=!("postMessage"in window);l&&(a.comm={openChannel:d,closeChannel:k});return{openChannel:d,closeChannel:k,isEnabled:l}});"use strict";
filepicker.extend("cookies",function(){var a=this,c=function(c){return function(b){"ThirdPartyCookies"===b.type&&(a.cookies.THIRD_PARTY_COOKIES=!!b.payload,c&&"function"===typeof c&&c(!!b.payload))}};return{checkThirdParty:function(d){d=c(d);a.handlers.attach("cookies",d);a.comm.openChannel()}}});"use strict";
filepicker.extend("handlers",function(){var a={};return{attach:function(c,d){a.hasOwnProperty(c)?a[c].push(d):a[c]=[d];return d},detach:function(c,d){var b=a[c];if(b)if(d){for(var g=0;g<b.length;g++)if(b[g]===d){b.splice(g,1);break}0===b.length&&delete a[c]}else delete a[c]},run:function(c){var d=c.id;if(a.hasOwnProperty(d)){for(var d=a[d],b=0;b<d.length;b++)d[b](c);return!0}return!1}}});"use strict";
filepicker.extend("exporter",function(){var a=this,c=function(b){if(b.mimetype&&b.extension)throw a.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function");b.services&&!a.util.isArray(b.services)?b.services=[b.services]:b.service&&(b.services=[b.service]);if(b.services)for(var c=0;c<b.services.length;c++){var d=(""+b.services[c]).replace(" ",""),f=a.services[d];b.services[c]=void 0===f?d:f}b.openTo&&(b.openTo=a.services[b.openTo]||b.openTo);a.util.setDefault(b,
"container",a.browser.openInModal()?"modal":"window")},d=function(b,c){return function(d){if("filepickerUrl"===d.type){if(d.error)a.util.console.error(d.error),c(a.errors.FPError(132));else{var f={};f.url=d.payload.url;f.filename=d.payload.data.filename;f.mimetype=d.payload.data.type;f.size=d.payload.data.size;f.client=d.payload.data.client;f.isWriteable=!0;b(f)}a.modal.close()}}},b=function(g,e,h,f){c(e);var k={close:function(){a.modal.close()}};if(e.debug)return setTimeout(function(){h({id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",
filename:"test.png",mimetype:"image/png",size:58979,client:"computer"})},1),k;if(void 0===a.cookies.THIRD_PARTY_COOKIES){var l=!1;a.cookies.checkThirdParty(function(){l||(b(g,e,h,f),l=!0)});return k}var n=a.util.getId(),m=!1;a.window.open(e.container,a.urls.constructExportUrl(g,e,n),function(){m||(m=!0,f(a.errors.FPError(131)))});a.handlers.attach(n,d(function(a){m=!0;h(a)},function(a){m=!0;f(a)}));return k};return{createExporter:b}});"use strict";
filepicker.extend("modal",function(){function a(){var a=c();a&&(a.style.overflow=g)}function c(){try{return document.getElementsByTagName("html")[0]}catch(a){return null}}var d=this,b=c();if(b)var g=b.style.overflow;var e=function(a){var b=document.createElement("div");b.className="fp__close";var c=document.createElement("a");c.appendChild(document.createTextNode("X"));b.appendChild(c);c.onclick=h(a);document.onkeydown=function(b){b=b||window.event;27===b.keyCode&&h(a)()};return b},h=function(b,c){c=
!!c;return function(){if(!d.uploading||c||window.confirm('You are currently uploading. If you choose "OK", the window will close and your upload will not finish. Do you want to stop uploading and close the window?')){d.uploading=!1;document.onkeydown=null;a();var e=document.getElementById("filepicker_shade");e&&document.body.removeChild(e);(e=document.getElementById("filepicker_dialog_container"))&&document.body.removeChild(e);try{delete window.frames[d.window.WINDOW_NAME]}catch(g){}b&&b()}}};return{generate:function(a,
b){var g=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}":
n.appendChild(document.createTextNode(".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}"));
g.appendChild(n);n=document.createElement("div");n.id="filepicker_shade";n.className="fp__overlay";n.onclick=h(b);var m=document.createElement("div");m.id="filepicker_dialog_container";m.className="fp__container";var q=e(b),g=document.createElement("iframe");g.name=d.window.WINDOW_NAME;g.id=d.window.WINDOW_NAME;g.style.width="100%";g.style.height="100%";g.style.border="none";g.style.position="relative";g.setAttribute("border",0);g.setAttribute("frameborder",0);g.setAttribute("frameBorder",0);g.setAttribute("marginwidth",
0);g.setAttribute("marginheight",0);g.src=a;m.appendChild(g);n.appendChild(q);n.appendChild(m);document.body.appendChild(n);if(n=c())n.style.overflow="hidden";return g},close:h(function(){}),hide:function(){var b=document.getElementById("filepicker_shade");b&&(b.hidden=!0);if(b=document.getElementById("filepicker_dialog_container"))b.hidden=!0;a()}}});"use strict";
filepicker.extend("picker",function(){function a(a,b){if("filepickerProgress"===a.type)c.uploading=!0,b&&b(a.payload.data);else if("notUploading"===a.type)c.uploading=!1;else if("closeModal"===a.type)c.modal.close();else if("hideModal"===a.type)c.modal.hide();else if("filepickerUrl"===a.type||"serverHttpError"===a.type)return!1;return!0}var c=this,d=function(a){var b=function(b,e,d){a[e]?c.util.isArray(a[e])||(a[e]=[a[e]]):a[b]?a[e]=[a[b]]:d&&(a[e]=d)};b("service","services");b("mimetype","mimetypes");
b("extension","extensions");if(a.services)for(b=0;b<a.services.length;b++){var e=(""+a.services[b]).replace(" ","");void 0!==c.services[e]&&(e=c.services[e]);a.services[b]=e}if(a.mimetypes&&a.extensions)throw c.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function");a.mimetypes||a.extensions||(a.mimetypes=["*/*"]);a.openTo&&(a.openTo=c.services[a.openTo]||a.openTo);c.util.setDefault(a,"container",c.browser.openInModal()?"modal":"window")},b=function(b,
e,d){return function(g){a(g,d)||(c.uploading=!1,g.error?(c.util.console.error(g.error),g.error.code?e(c.errors.FPError(g.error.code)):(e(c.errors.FPError(102)),c.modal.close())):(g=f(g.payload),b(g),c.modal.close()))}},g=function(b,e,d){return function(f){a(f,d)||(c.uploading=!1,f.error?(c.util.console.error(f.error),e(c.errors.FPError(102))):(f.payload.data.url=f.payload.url,b(f.payload.data)),c.modal.close())}},e=function(a){a=a||function(){};return function(b){"uploading"===b.type&&(c.uploading=
!!b.payload,a(c.uploading))}},h=function(a,b,c){a[c]&&(b[c]=a[c])},f=function(a){var b={},c=a.url;c&&c.url&&(c=c.url);b.url=c;a=a.url.data||a.data;b.filename=a.filename;b.mimetype=a.type;b.size=a.size;void 0!==a.cropped&&(b.cropped=a.cropped);void 0!==a.rotated&&(b.rotated=a.rotated);void 0!==a.converted&&(b.converted=a.converted);h(a,b,"id");h(a,b,"key");h(a,b,"container");h(a,b,"path");h(a,b,"client");b.isWriteable=!0;return b},k=function(b,e,d){return function(g){if(!a(g,d)){c.uploading=!1;if(g.error)c.util.console.error(g.error),
e(c.errors.FPError(102));else{var h=[];c.util.isArray(g.payload)||(g.payload=[g.payload]);for(var k=0;k<g.payload.length;k++){var l=f(g.payload[k]);h.push(l)}b(h)}c.modal.close()}}},l=function(a,f,h,r,u,t,v){d(a);var w={close:function(){c.modal.close()}};if(a.debug){var x={id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"},J;J=r||a.storeLocation?[x,x,x]:x;setTimeout(function(){f(J)},1);return w}if(void 0===c.cookies.THIRD_PARTY_COOKIES){var D=
!1;c.cookies.checkThirdParty(function(){D||(l(a,f,h,!!r,u,t),D=!0)});return w}var x=c.util.getId(),A=!1,z=function(b){"window"===a.container&&(window.onbeforeunload=null);A=!0;f(b)},B=function(a){A=!0;h(a)};v?(v=c.urls.constructConvertUrl(a,x),z=b(z,B,t)):r?(v=c.urls.constructPickUrl(a,x,!0),z=k(z,B,t)):u?(v=c.urls.constructPickFolderUrl(a,x),z=g(z,B,t)):(v=c.urls.constructPickUrl(a,x,!1),z=b(z,B,t));c.window.open(a.container,v,function(){A||(A=!0,h(c.errors.FPError(101)))});c.handlers.attach(x,z);
var C=x+"-upload";c.handlers.attach(C,e(function(){c.handlers.detach(C)}));return w};return{createPicker:l}});"use strict";
filepicker.extend("window",function(){var a=this;return{open:function(c,d,b){b=b||function(){};!c&&a.browser.openInModal()?c="modal":c||(c="window");if("window"===c){c="filepicker_dialog"+a.util.getId();window.onbeforeunload=function(){return"Filepicker upload does not complete."};var g=window.open(d,c,"left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes");g||(window.onbeforeunload=null,window.alert("Please disable your popup blocker to upload files."));
var e=window.setInterval(function(){if(!g||g.closed)window.onbeforeunload=null,window.clearInterval(e),b()},100)}else if("modal"===c)a.modal.generate(d,b);else{var h=document.getElementById(c);if(!h)throw new a.FilepickerException('Container "'+c+'" not found. This should either be set to "window","modal", or the ID of an iframe that is currently in the document.');h.src=d}},WINDOW_NAME:"filepicker_dialog"}});"use strict";
filepicker.extend("conversions",function(){var a=this,c={align:"string",blurAmount:"number",crop:"string or array",crop_first:"boolean",compress:"boolean",exif:"string or boolean",filter:"string",fit:"string",format:"string",height:"number",policy:"string",quality:"number",page:"number",rotate:"string or number",secure:"boolean",sharpenAmount:"number",signature:"string",storeAccess:"string",storeContainer:"string",storeRegion:"string",storeLocation:"string",storePath:"string",text:"string",text_align:"string",
text_color:"string",text_font:"string",text_padding:"number",text_size:"number",watermark:"string",watermark_position:"string",watermark_size:"number",width:"number"},d={w:"width",h:"height"},b=function(b){var e,d;for(d in b){e=!1;for(var f in c)if(d===f&&(e=!0,-1===c[f].indexOf(a.util.typeOf(b[d]))))throw new a.FilepickerException("Conversion parameter "+d+" is not the right type: "+b[d]+". Should be a "+c[f]);if(!e)throw new a.FilepickerException("Conversion parameter "+d+" is not a valid parameter.");
}};return{convert:function(c,e,d,f,k){b(e);e.crop&&a.util.isArray(e.crop)&&(e.crop=e.crop.join(","));a.ajax.post(c+"/convert",{data:e,json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,e){"not_found"===b?f(new a.errors.FPError(141)):"bad_params"===b?f(new a.errors.FPError(142)):"not_authorized"===b?f(new a.errors.FPError(403)):f(new a.errors.FPError(143))},progress:k})},mapRestParams:function(a){var b={},h;for(h in a)b[d[h]||h]=a[h],"number"===c[d[h]||h]&&(b[d[h]||h]=Number(a[h]));
return b}}});"use strict";
filepicker.extend("errors",function(){var a=this,c=function(a){if(this===window)return new c(a);this.code=a;filepicker.debug?(a=filepicker.error_map[this.code],this.message=a.message,this.moreInfo=a.moreInfo,this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}):this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"};return this};c.isClass=!0;return{FPError:c,handleError:function(c){filepicker.debug&&a.util.console.error(c.toString())}}},
!0);"use strict";
filepicker.extend(function(){var a=this;a.API_VERSION="v2";var c=function(a){this.text=a;this.toString=function(){return"FilepickerException: "+this.text};return this};c.isClass=!0;var d=function(b,c,d,g,l){l(10);a.store(b,function(b){l(50);a.read(b,c,d,g,function(a){l(50+a/2)})},g)},b=function(b,c,d,g){a.util.checkApiKey();"function"===typeof c&&(g=d,d=c,c={});c=c?a.util.clone(c):{};d=d||function(){};g=g||a.errors.handleError;var l;if("string"===typeof b&&a.util.isUrl(b))l=b;else if(b.url)l=b.url,
c.mimetype||c.extension||(c.mimetype=b.mimetype),c.suggestedFilename||(c.suggestedFilename=b.filename);else throw new a.FilepickerException("Invalid file to export: "+b+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export");c.suggestedFilename&&(c.suggestedFilename=encodeURI(c.suggestedFilename));return a.exporter.createExporter(l,c,d,g)},g=function(b,c,d,g){a.util.checkApiKey();"function"===typeof c&&(g=d,d=c,c={});c=c||{};d=d||function(){};g=g||
a.errors.handleError;if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to get metadata for: "+b+". Not a filepicker url or FPFile object.");b=a.util.getFPUrl(b);a.files.stat(a.util.trimConvert(b),c,d,g)};return{setKey:function(b){a.apikey=b},setResponsiveOptions:function(b){return a.responsiveImages.setResponsiveOptions(b)},pick:function(b,c,d,g){a.util.checkApiKey();"function"===typeof b&&(d=c,c=b,b={});b=b||{};d=d||a.errors.handleError;return a.picker.createPicker(b,
c||function(){},d,!1,!1,g)},pickFolder:function(b,c,d,g){a.util.checkApiKey();"function"===typeof b&&(d=c,c=b,b={});b=b||{};d=d||a.errors.handleError;return a.picker.createPicker(b,c||function(){},d,!1,!0,g)},pickMultiple:function(b,c,d,g){a.util.checkApiKey();"function"===typeof b&&(g=d,d=c,c=b,b={});b=b||{};d=d||a.errors.handleError;return a.picker.createPicker(b,c||function(){},d,!0,!1,g)},pickAndStore:function(b,c,d,g,l){a.util.checkApiKey();if(!b||!c||"function"===typeof b||"function"===typeof b)throw new a.FilepickerException("Not all required parameters given, missing picker or store options");
g=g||a.errors.handleError;var n=!!b.multiple;b=b?a.util.clone(b):{};b.storeLocation=c.location||"S3";b.storePath=c.path;b.storeContainer=c.storeContainer||c.container;b.storeRegion=c.storeRegion;b.storeAccess=c.access||"private";if(n&&b.storePath&&"/"!==b.storePath.charAt(b.storePath.length-1))throw new a.FilepickerException(NaN/0);c=d;n||(c=function(a){d([a])});return a.picker.createPicker(b,c,g,n,!1,l)},read:function(b,c,f,g,l){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No input given - nothing to read!");
"function"===typeof c&&(l=g,g=f,f=c,c={});c=c||{};f=f||function(){};g=g||a.errors.handleError;l=l||function(){};if("string"===typeof b)a.util.isFPUrl(b)?a.files.readFromFPUrl(b,c,f,g,l):a.files.readFromUrl(b,c,f,g,l);else if(a.util.isFileInputElement(b))b.files?0===b.files.length?g(new a.errors.FPError(115)):a.files.readFromFile(b.files[0],c,f,g,l):d(b,c,f,g,l);else if(a.util.isFile(b))a.files.readFromFile(b,c,f,g,l);else if(b.url)a.files.readFromFPUrl(b.url,c,f,g,l);else throw new a.FilepickerException("Cannot read given input: "+
b+". Not a url, file input, DOM File, or FPFile object.");},write:function(b,c,d,g,l,n){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No fpfile given - nothing to write to!");if(void 0===c||null===c)throw new a.FilepickerException("No input given - nothing to write!");"function"===typeof d&&(n=l,l=g,g=d,d={});d=d||{};g=g||function(){};l=l||a.errors.handleError;n=n||function(){};if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to write to: "+
b+". Not a filepicker url or FPFile object.");b=a.util.trimConvert(a.util.getFPUrl(b));if("string"===typeof c)a.files.writeDataToFPUrl(b,c,d,g,l,n);else if(a.util.isFileInputElement(c))c.files?0===c.files.length?l(new a.errors.FPError(115)):a.files.writeFileToFPUrl(b,c.files[0],d,g,l,n):a.files.writeFileInputToFPUrl(b,c,d,g,l,n);else if(a.util.isFile(c))a.files.writeFileToFPUrl(b,c,d,g,l,n);else if(c.url)a.files.writeUrlToFPUrl(b,c.url,d,g,l,n);else throw new a.FilepickerException("Cannot read from given input: "+
c+". Not a string, file input, DOM File, or FPFile object.");},writeUrl:function(b,c,d,g,l,n){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No fpfile given - nothing to write to!");if(void 0===c||null===c)throw new a.FilepickerException("No input given - nothing to write!");"function"===typeof d&&(n=l,l=g,g=d,d={});d=d||{};g=g||function(){};l=l||a.errors.handleError;n=n||function(){};if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to write to: "+
b+". Not a filepicker url or FPFile object.");b=a.util.getFPUrl(b);a.files.writeUrlToFPUrl(a.util.trimConvert(b),c,d,g,l,n)},"export":b,exportFile:b,processImage:function(b,c,d,g,l){var n;a.util.checkApiKey();"function"===typeof c&&(g=d,d=c,c={});c=c||{};d=d||function(){};g=g||a.errors.handleError;if("string"===typeof b)n=b;else if(b.url)n=b.url,c.filename||(c.filename=b.filename);else throw new a.FilepickerException("Invalid file to convert: "+b+". Not a valid url or FPFile object or not filepicker url. You can convert only filepicker url images.");
c.convertUrl=n;c.multiple=!1;c.services=["CONVERT","COMPUTER"];c.backgroundUpload=!0;c.hide=!1;return a.picker.createPicker(c,d,g,!1,!1,l,!0)},store:function(b,c,d,g,l){a.util.checkApiKey();"function"===typeof c&&(l=g,g=d,d=c,c={});c=c?a.util.clone(c):{};d=d||function(){};g=g||a.errors.handleError;l=l||function(){};if("string"===typeof b)a.files.storeData(b,c,d,g,l);else if(a.util.isFileInputElement(b))b.files?0===b.files.length?g(new a.errors.FPError(115)):a.files.storeFile(b.files[0],c,d,g,l):a.files.storeFileInput(b,
c,d,g,l);else if(a.util.isFile(b))a.files.storeFile(b,c,d,g,l);else if(b.url)c.filename||(c.filename=b.filename),a.files.storeUrl(b.url,c,d,g,l);else throw new a.FilepickerException("Cannot store given input: "+b+". Not a string, file input, DOM File, or FPFile object.");},storeUrl:function(b,c,d,g,l){a.util.checkApiKey();"function"===typeof c&&(l=g,g=d,d=c,c={});c=c||{};g=g||a.errors.handleError;a.files.storeUrl(b,c,d||function(){},g,l||function(){})},stat:g,metadata:g,remove:function(b,c,d,g){a.util.checkApiKey();
"function"===typeof c&&(g=d,d=c,c={});c=c||{};d=d||function(){};g=g||a.errors.handleError;if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to remove: "+b+". Not a filepicker url or FPFile object.");b=a.util.getFPUrl(b);a.files.remove(a.util.trimConvert(b),c,d,g)},convert:function(b,c,d,g,l,n){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No fpfile given - nothing to convert!");"function"===typeof d&&(n=l,l=g,g=d,d={});c=c?a.util.clone(c):
{};d=d||{};g=g||function(){};l=l||a.errors.handleError;n=n||function(){};d.location&&(c.storeLocation=d.location);d.path&&(c.storePath=d.path);d.container&&(c.storeContainer=d.container);c.storeAccess=d.access||"private";if(a.util.isFPUrl(a.util.getFPUrl(b)))d=b;else if(b.url){if(d=b.url,!a.mimetypes.matchesMimetype(b.mimetype,"image/*")&&!a.mimetypes.matchesMimetype(b.mimetype,"application/pdf")){l(new a.errors.FPError(142));return}}else throw new a.FilepickerException("Invalid file to convert: "+
b+". Not a filepicker url or FPFile object.");d=a.util.getFPUrl(d);if(-1<d.indexOf("/convert")){b=a.util.parseUrl(d).params;b=a.conversions.mapRestParams(b);b.crop&&a.util.setDefault(b,"crop_first",!0);for(var m in b)a.util.setDefault(c,m,b[m])}a.conversions.convert(a.util.trimConvert(d),c,g,l,n)},constructWidget:function(b){return a.widgets.constructWidget(b)},makeDropPane:function(b,c){return a.dragdrop.makeDropPane(b,c)},FilepickerException:c,responsive:function(){a.responsiveImages.update.apply(null,
arguments)},version:"2.4.11"}},!0);"use strict";
filepicker.extend("mimetypes",function(){var a=this,c={".stl":"application/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist",".vob":"video/dvd"},d="application/octet-stream application/download application/force-download octet/stream application/unknown application/x-download application/x-msdownload application/x-secure-download".split(" ");return{getMimetype:function(a){if(a.type){for(var g=a.type,g=
g.toLowerCase(),e=!1,h=0;h<d.length;h++)e=e||g===d[h];if(!e)return a.type}return(g=(a.name||a.fileName).match(/\.\w*$/))?c[g[0].toLowerCase()]||"":a.type?a.type:""},matchesMimetype:function(b,c){if(!b)return"*/*"===c;b=a.util.trim(b).toLowerCase();c=a.util.trim(c).toLowerCase();for(var e=0;e<d.length;e++)if(b===d[e])return!0;var e=b.split("/"),h=c.split("/");return"*"===h[0]?!0:h[0]!==e[0]?!1:"*"===h[1]?!0:h[1]===e[1]}}});"use strict";
filepicker.extend("services",function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23,GENERIC:24,CONVERT:25,AUDIO:26}},!0);"use strict";
filepicker.extend("urls",function(){function a(a,b){return"?key="+g.apikey+"&id="+b+"&referrer="+window.location.hostname+"&iframe="+("window"!==a.container)+"&version="+g.API_VERSION+(a.services?"&s="+a.services.join(","):"")+(void 0!==a.container?"&container="+a.container:"modal")+(a.openTo?"&loc="+a.openTo:"")+"&language="+(a.language||g.browser.getLanguage())+(void 0!==a.mobile?"&mobile="+a.mobile:"")+(void 0!==a.backgroundUpload?"&bu="+a.backgroundUpload:"")+(a.cropRatio?"&cratio="+a.cropRatio:
"")+(a.cropDim?"&cdim="+a.cropDim.join(","):"")+(a.cropMax?"&cmax="+a.cropMax.join(","):"")+(a.cropMin?"&cmin="+a.cropMin.join(","):"")+(void 0!==a.cropForce?"&cforce="+a.cropForce:"")+(void 0!==a.hide?"&hide="+a.hide:"")+(a.customCss?"&css="+encodeURIComponent(a.customCss):"")+(a.customText?"&text="+encodeURIComponent(a.customText):"")+(a.imageMin?"&imin="+a.imageMin.join(","):"")+(a.imageMax?"&imax="+a.imageMax.join(","):"")+(a.imageDim?"&idim="+a.imageDim.join(","):"")+(a.imageQuality?"&iq="+a.imageQuality:
"")+(a.noFileReader?"&nfl="+a.noFileReader:"")+(g.util.isCanvasSupported()?"":"&canvas=false")+(a.redirectUrl?"&redirect_url="+a.redirectUrl:"")+(a.showClose&&"modal"!==a.container?"&showClose="+a.showClose:"")+c(a)+"&plugin="+d()}function c(a){return(a.signature?"&signature="+a.signature:"")+(a.policy?"&policy="+a.policy:"")}function d(){return filepicker.plugin||"js_lib"}function b(a){a=a||[];var b=[],c,d;for(c in a)for(d in q)a[c]===q[d]&&a.hasOwnProperty(c)&&b.push(a[c]);b.length||b.push("crop");
return"&co="+b.join(",")}var g=this,e="https://www.filepicker.io";window.filepicker.hostname&&(e=window.filepicker.hostname);var h=e.replace("www","dialog"),f=h+"/dialog/open/",k=h+"/dialog/save/",l=h+"/dialog/process/",n=h+"/dialog/folder/",m=e+"/api/store/",q=["crop","rotate","filter"];return{BASE:e,DIALOG_BASE:h,API_COMM:e+"/dialog/comm_iframe/",COMM:h+"/dialog/comm_iframe/",FP_COMM_FALLBACK:h+"/dialog/comm_hash_iframe/",STORE:m,PICK:f,EXPORT:k,constructPickUrl:function(c,d,e){return f+a(c,d)+
(e?"&multi="+!!e:"")+(void 0!==c.mimetypes?"&m="+c.mimetypes.join(","):"")+(void 0!==c.extensions?"&ext="+c.extensions.join(","):"")+(c.maxSize?"&maxSize="+c.maxSize:"")+(c.customSourceContainer?"&customSourceContainer="+c.customSourceContainer:"")+(c.customSourcePath?"&customSourcePath="+c.customSourcePath:"")+(c.maxFiles?"&maxFiles="+c.maxFiles:"")+(void 0!==c.folders?"&folders="+c.folders:"")+(c.storeLocation?"&storeLocation="+c.storeLocation:"")+(c.storePath?"&storePath="+c.storePath:"")+(c.storeContainer?
"&storeContainer="+c.storeContainer:"")+(c.storeRegion?"&storeRegion="+c.storeRegion:"")+(c.storeAccess?"&storeAccess="+c.storeAccess:"")+(c.webcam&&c.webcam.webcamDim?"&wdim="+c.webcam.webcamDim.join(","):"")+(c.webcamDim?"&wdim="+c.webcamDim.join(","):"")+(c.webcam&&c.webcam.videoRes?"&videoRes="+c.webcam.videoRes:"")+(c.webcam&&c.webcam.videoLen?"&videoLen="+c.webcam.videoLen:"")+(c.webcam&&c.webcam.audioLen?"&audioLen="+c.webcam.audioLen:"")+b(c.conversions)},constructConvertUrl:function(c,d){var e=
c.convertUrl;if(0<=e.indexOf("&")||0<=e.indexOf("?"))e=encodeURIComponent(e);return l+a(c,d)+"&curl="+e+b(c.conversions)},constructPickFolderUrl:function(b,c){return n+a(b,c)},constructExportUrl:function(b,c,d){if(0<=b.indexOf("&")||0<=b.indexOf("?"))b=encodeURIComponent(b);return k+a(c,d)+"&url="+b+(void 0!==c.mimetype?"&m="+c.mimetype:"")+(void 0!==c.extension?"&ext="+c.extension:"")+(c.suggestedFilename?"&defaultSaveasName="+c.suggestedFilename:"")},constructWriteUrl:function(a,b){return a+"?nonce=fp"+
(b.base64decode?"&base64decode=true":"")+(b.mimetype?"&mimetype="+b.mimetype:"")+c(b)+"&plugin="+d()},constructStoreUrl:function(a){return m+a.location+"?key="+g.apikey+(a.base64decode?"&base64decode=true":"")+(a.mimetype?"&mimetype="+a.mimetype:"")+(a.filename?"&filename="+encodeURIComponent(a.filename):"")+(a.path?"&path="+a.path:"")+(a.container?"&container="+a.container:"")+(a.access?"&access="+a.access:"")+c(a)+"&plugin="+d()},constructHostCommFallback:function(){return g.util.parseUrl(window.location.href).origin+
"/404"},getPlugin:d}});"use strict";
filepicker.extend("ajax",function(){var a=this,c=function(b,d){var f=[],g;for(g in b){var l=b[g];d&&(g=d+". + key + ");var n;switch(a.util.typeOf(l)){case "object":n=c(l,g);break;case "array":n={};for(var m=0;m<l.length;m++)n[m]=l[m];n=c(n,g);break;default:n=g+"="+encodeURIComponent(l)}null!==l&&f.push(n)}return f.join("&")},d=function(){try{return new window.XMLHttpRequest}catch(a){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(c){return null}}}},b=
function(b,h){b=b||"";var f=h.method?h.method.toUpperCase():"POST",k=h.success||function(){},l=h.error||function(){},n=void 0===h.async?!0:h.async,m=h.data||null,q=void 0===h.processData?!0:h.processData,r=h.headers||{},u=a.util.parseUrl(b),t=window.location.protocol+"//"+window.location.host!==u.origin,v=!1;b+=(0<=b.indexOf("?")?"&":"?")+"plugin="+a.urls.getPlugin();m&&q&&(m=c(h.data));var w;if(h.xhr)w=h.xhr;else if(w=d(),!w)return h.error("Ajax not allowed"),w;if(t&&window.XDomainRequest&&!("withCredentials"in
w))return new g(b,h);h.progress&&w.upload&&w.upload.addEventListener("progress",function(a){a.lengthComputable&&h.progress(Math.round(95*a.loaded/a.total))},!1);w.onreadystatechange=function(){if(4==w.readyState&&!v){h.progress&&h.progress(100);if(200<=w.status&&300>w.status){var b=w.responseText;if(h.json)try{b=a.json.decode(b)}catch(c){x.call(w,"Invalid json: "+b);return}k(b,w.status,w)}else x.call(w,w.responseText);v=!0}};var x=function(a){v||(h.progress&&h.progress(100),v=!0,400==this.status?
l("bad_params",this.status,this):403==this.status?l("not_authorized",this.status,this):404==this.status?l("not_found",this.status,this):t?4==this.readyState&&0===this.status?l("CORS_not_allowed",this.status,this):l("CORS_error",this.status,this):l(a,this.status,this))};w.onerror=x;m&&"GET"==f&&(b+=(-1!==b.indexOf("?")?"&":"?")+m,m=null);w.open(f,b,n);h.json?w.setRequestHeader("Accept","application/json, text/javascript"):w.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*");
n=r["Content-Type"]||r["content-type"];m&&q&&("POST"==f||"PUT"==f)&&void 0===n&&w.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(r)for(var J in r)w.setRequestHeader(J,r[J]);w.send(m);return w},g=function(b,d){if(!window.XDomainRequest)return null;var f=d.method?d.method.toUpperCase():"POST",g=d.success||function(){},l=d.error||function(){},n=d.data||{};"http:"==window.location.protocol?b=b.replace("https:","http:"):"https:"==window.location.protocol&&(b=b.replace("http:",
"https:"));if(d.async)throw new a.FilepickerException("Asyncronous Cross-domain requests are not supported");"GET"!==f&&"POST"!==f&&(n._method=f,f="POST");!1!==d.processData&&(n=n?c(n):null);n&&"GET"==f&&(b+=(0<=b.indexOf("?")?"&":"?")+n,n=null);b+=(0<=b.indexOf("?")?"&":"?")+"_xdr=true&_cacheBust="+a.util.getId();var m=new window.XDomainRequest;m.onload=function(){var b=m.responseText;d.progress&&d.progress(100);if(d.json)try{b=a.json.decode(b)}catch(c){l("Invalid json: "+b,200,m);return}g(b,200,
m)};m.onerror=function(){d.progress&&d.progress(100);l(m.responseText||"CORS_error",this.status||500,this)};m.onprogress=function(){};m.ontimeout=function(){};m.timeout=3E4;m.open(f,b,!0);m.send(n);return m};return{get:function(a,c){c.method="GET";b(a,c)},post:function(c,d){d.method="POST";c+=(0<=c.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();b(c,d)},request:b}});"use strict";
filepicker.extend("files",function(){var a=this,c=function(b,c,d,f,k){!0!==c.cache&&(c._cacheBust=a.util.getId());a.ajax.get(b,{data:c,headers:{"X-NO-STREAM":!0},success:d,error:function(b,c,d){"CORS_not_allowed"===b?f(new a.errors.FPError(113)):"CORS_error"===b?f(new a.errors.FPError(114)):"not_found"===b?f(new a.errors.FPError(115)):"bad_params"===b?f(new a.errors.FPError(400)):"not_authorized"===b?f(new a.errors.FPError(403)):f(new a.errors.FPError(118))},progress:k})},d=function(c,d,h,f,k){a.util.setDefault(d,
"location","S3");d.filename||(d.filename=c.name||c.fileName);b(c,a.urls.constructStoreUrl(d),function(b){h(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"===b?f(new a.errors.FPError(121)):"bad_params"===b?f(new a.errors.FPError(122)):"not_authorized"===b?f(new a.errors.FPError(403)):(a.util.console.error(b),f(new a.errors.FPError(123)))},k)},b=function(b,c,d,f,k){b.files&&(b=b.files[0]);if(window.FormData&&window.XMLHttpRequest){var l=new window.FormData;l.append("fileUpload",b);a.ajax.post(c,
{json:!0,processData:!1,data:l,success:d,error:f,progress:k})}else a.iframeAjax.post(c,{data:b,json:!0,success:d,error:f})};return{readFromUrl:c,readFromFile:function(b,c,d,f,k){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var l=!!c.base64encode,n=!!c.asText,m=new FileReader;m.onprogress=function(a){a.lengthComputable&&k(Math.round(a.loaded/a.total*100))};m.onload=function(b){k(100);l?d(a.base64.encode(b.target.result,n)):d(b.target.result)};m.onerror=function(b){switch(b.target.error.code){case b.target.error.NOT_FOUND_ERR:f(new a.errors.FPError(115));
break;case b.target.error.NOT_READABLE_ERR:f(new a.errors.FPError(116));break;case b.target.error.ABORT_ERR:f(new a.errors.FPError(117));break;default:f(new a.errors.FPError(118))}};n||!m.readAsBinaryString?m.readAsText(b):m.readAsBinaryString(b)}else k(10),a.files.storeFile(b,{},function(b){k(50);a.files.readFromFPUrl(b.url,c,d,f,function(a){k(50+a/2)})},f,function(a){k(a/2)})},readFromFPUrl:function(b,d,h,f,k){var l=void 0===d.base64encode;l&&(d.base64encode=!0);d.base64encode=!1!==d.base64encode;
c.call(this,b,d,function(b){l&&(b=a.base64.decode(b,!!d.asText));h(b)},f,k)},writeDataToFPUrl:function(b,c,d,f,k,l){var n=d.mimetype||"text/plain";a.ajax.post(a.urls.constructWriteUrl(b,d),{headers:{"Content-Type":n},data:c,processData:!1,json:!0,success:function(b){f(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},progress:l})},
writeFileToFPUrl:function(c,d,h,f,k,l){h.mimetype=d.type;b(d,a.urls.constructWriteUrl(c,h),function(b){f(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},l)},writeFileInputToFPUrl:function(c,d,h,f,k,l){b(d,a.urls.constructWriteUrl(c,h),function(b){f(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):
"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},l)},writeUrlToFPUrl:function(b,c,d,f,k,l){a.ajax.post(a.urls.constructWriteUrl(b,d),{data:{url:c},json:!0,success:function(b){f(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},progress:l})},storeFileInput:function(b,
c,h,f,k){if(b.files)0===b.files.length?f(new a.errors.FPError(115)):d(b.files[0],c,h,f,k);else{a.util.setDefault(c,"location","S3");c.filename||(c.filename=b.value.replace("C:\\fakepath\\","")||b.name);var l=b.name;b.name="fileUpload";a.iframeAjax.post(a.urls.constructStoreUrl(c),{data:b,processData:!1,json:!0,success:function(c){b.name=l;h(a.util.standardizeFPFile(c))},error:function(b,c,d){"not_found"===b?f(new a.errors.FPError(121)):"bad_params"===b?f(new a.errors.FPError(122)):"not_authorized"===
b?f(new a.errors.FPError(403)):f(new a.errors.FPError(123))}})}},storeFile:d,storeUrl:function(b,c,d,f,k){a.util.setDefault(c,"location","S3");a.ajax.post(a.urls.constructStoreUrl(c),{data:{url:a.util.getFPUrl(b)},json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?f(new a.errors.FPError(151)):"bad_params"===b?f(new a.errors.FPError(152)):"not_authorized"===b?f(new a.errors.FPError(403)):f(new a.errors.FPError(153))},progress:k})},storeData:function(b,
c,d,f,k){a.util.setDefault(c,"location","S3");a.util.setDefault(c,"mimetype","text/plain");a.ajax.post(a.urls.constructStoreUrl(c),{headers:{"Content-Type":c.mimetype},data:b,processData:!1,json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?f(new a.errors.FPError(121)):"bad_params"===b?f(new a.errors.FPError(122)):"not_authorized"===b?f(new a.errors.FPError(403)):f(new a.errors.FPError(123))},progress:k})},stat:function(b,c,d,f){var k=["uploaded","modified",
"created"];!0!==c.cache&&(c._cacheBust=a.util.getId());a.ajax.get(b+"/metadata",{json:!0,data:c,success:function(a){for(var b=0;b<k.length;b++)a[k[b]]&&(a[k[b]]=new Date(a[k[b]]));d(a)},error:function(b,c,d){"not_found"===b?f(new a.errors.FPError(161)):"bad_params"===b?f(new a.errors.FPError(400)):"not_authorized"===b?f(new a.errors.FPError(403)):f(new a.errors.FPError(162))}})},remove:function(b,c,d,f){c.key=a.apikey;a.ajax.post(b+"/remove",{data:c,success:function(a){d()},error:function(b,c,d){"not_found"===
b?f(new a.errors.FPError(171)):"bad_params"===b?f(new a.errors.FPError(400)):"not_authorized"===b?f(new a.errors.FPError(403)):f(new a.errors.FPError(172))}})}}});"use strict";
filepicker.extend("iframeAjax",function(){var a=this,c=[],d=!1,b=function(b,f){if(d)c.push({url:b,options:f});else{b+=(0<=b.indexOf("?")?"&":"?")+"plugin="+a.urls.getPlugin()+"&_cacheBust="+a.util.getId();b+="&Content-Type=text%2Fhtml";a.comm.openChannel();var k;try{k=document.createElement('<iframe name="ajax_iframe">')}catch(u){k=document.createElement("iframe")}k.id=k.name="ajax_iframe";k.style.display="none";var l=function(){d=!1};k.attachEvent?(k.attachEvent("onload",l),k.attachEvent("onerror",
l)):k.onerror=k.onload=l;k.id="ajax_iframe";k.name="ajax_iframe";k.style.display="none";k.onerror=k.onload=function(){d=!1};document.body.appendChild(k);a.handlers.attach("upload",g(f));var n=document.createElement("form");n.method=f.method||"GET";n.action=b;n.target="ajax_iframe";k=f.data;if(a.util.isFileInputElement(k)||a.util.isFile(k))n.encoding=n.enctype="multipart/form-data";document.body.appendChild(n);if(a.util.isFile(k)){k=e(k);if(!k)throw a.FilepickerException("Couldn't find corresponding file input.");
k={fileUpload:k}}else a.util.isFileInputElement(k)?(l=k,k={},k.fileUpload=l):k&&a.util.isElement(k)&&"INPUT"===k.tagName?(l=k,k={},k[l.name]=l):!1!==f.processData&&(k={data:k});k.format="iframe";var m={},q;for(q in k)if(l=k[q],a.util.isElement(l)&&"INPUT"===l.tagName)m[q]={par:l.parentNode,sib:l.nextSibling,name:l.name,input:l,focused:l===document.activeElement},l.name=q,n.appendChild(l);else{var r=document.createElement("input");r.name=q;r.value=l;n.appendChild(r)}d=!0;window.setTimeout(function(){n.submit();
for(var a in m){var b=m[a];b.par.insertBefore(b.input,b.sib);b.input.name=b.name;b.focused&&b.input.focus()}n.parentNode.removeChild(n)},1)}},g=function(e){var f=e.success||function(){},g=e.error||function(){};return function(e){"Upload"===e.type&&(d=!1,e=e.payload,e.error?g(e.error):f(e),a.handlers.detach("upload"),0<c.length&&(e=c.shift(),b(e.url,e.options)))}},e=function(a){for(var b=document.getElementsByTagName("input"),c=0;c<b.length;c++){var d=b[0];if("file"===d.type&&d.files&&d.files.length)for(var e=
0;e<d.files.length;e++)if(d.files[e]===a)return d}return null};return{get:function(a,c){c.method="GET";b(a,c)},post:function(c,d){d.method="POST";c+=(0<=c.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();b(c,d)},request:b}});"use strict";
filepicker.extend("base64",function(){return{encode:function(a,c){var d="",b,g,e,h,f,k,l=0;if(c||void 0===c){g=a.replace(/\r\n/g,"\n");e="";for(h=0;h<g.length;h++)b=g.charCodeAt(h),128>b?e+=String.fromCharCode(b):(127<b&&2048>b?e+=String.fromCharCode(b>>6|192):(e+=String.fromCharCode(b>>12|224),e+=String.fromCharCode(b>>6&63|128)),e+=String.fromCharCode(b&63|128));a=e}for(;l<a.length;)b=a.charCodeAt(l),g=a.charCodeAt(l+1),e=a.charCodeAt(l+2),l+=3,h=b>>2,b=(b&3)<<4|g>>4,f=(g&15)<<2|e>>6,k=e&63,isNaN(g)?
f=k=64:isNaN(e)&&(k=64),d=d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);return d},decode:function(a,c){c=c||void 0===c;var d="",b,g,e,h,f,k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k)),
g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k+1)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k+2)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k+3)),k+=4,b=b<<2|g>>4,g=(g&15)<<4|h>>2,e=(h&3)<<6|f,d+=String.fromCharCode(b),64!=h&&(d+=String.fromCharCode(g)),64!=f&&(d+=String.fromCharCode(e));if(c){h="";for(b=k=f=0;f<d.length;)k=d.charCodeAt(f),128>k?(h+=String.fromCharCode(k),
f++):191<k&&224>k?(b=d.charCodeAt(f+1),h+=String.fromCharCode((k&31)<<6|b&63),f+=2):(b=d.charCodeAt(f+1),c3=d.charCodeAt(f+2),h+=String.fromCharCode((k&15)<<12|(b&63)<<6|c3&63),f+=3);d=h}return d}}},!0);"use strict";
filepicker.extend("browser",function(){var a=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))};return{getLanguage:function(){var a=window.navigator.userLanguage||window.navigator.language;void 0===a&&(a="en");return a=a.replace("-","_").toLowerCase()},openInModal:function(){return!(a()||navigator.userAgent.match(/Android/i))||!!window.navigator.standalone},isMobile:function(){return a()||!!navigator.userAgent.match(/Android/i)}}});
"use strict";
filepicker.extend("conversionsUtil",function(){var a=this,c=a.urls.BASE.replace("www","process")+"/";return{CONVERSION_DOMAIN:c,parseUrl:function(a){if(!a)return{url:null,optionsDict:{}};a=a.replace(c,"");var b=a.substring(a.indexOf("/http")+1);a=a.replace("/"+b,"");var g=a.substring(0,a.indexOf("/"));a=a.replace(g+"/","");a=a.split("/");var e={},h,f,k,l,n;for(l in a)if(h=a[l].split("="),1<h.length)for(n in e[h[0]]={},f=h[1].split(","),f)k=f[n].split(":"),1<k.length&&(e[h[0]][k[0]]=k[1]);else a[l]&&
(e[a[l]]=null);return{url:b,apikey:g,optionsDict:e}},buildUrl:function(d,b,g){g=c+g;var e,h,f;b=b||{};for(e in b)for(h in g+="/"+e,(f=a.util.objectKeys(b[e]||{}).length)&&(g+="="),b[e])g+=h+":"+b[e][h],0!==--f&&(g+=",");return g+("/"+d)}}});"use strict";
filepicker.extend("json",function(){var a=this,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},d=function(a){return c[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},b=function(a){a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},g=function(b){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(b);
b&&b.toJSON&&(b=b.toJSON());var c=[];switch(a.util.typeOf(b)){case "string":return'"'+b.replace(/[\x00-\x1f\\"]/g,d)+'"';case "array":for(var e=0;e<b.length;e++)c.push(g(b[e]));return"["+c+"]";case "object":case "hash":for(var l in b)(e=g(b[l]))&&c.push(g(l)+":"+e);return"{"+c+"}";case "number":case "boolean":return""+b;case "null":return"null";default:return"null"}},e=function(c,d){if(!c||"string"!==a.util.typeOf(c))return null;if(window.JSON&&window.JSON.parse)return window.JSON.parse(c);if(d&&
!b(c))throw Error("JSON could not decode the input; security is enabled and the value is not secure.");return eval("("+c+")")};return{validate:b,encode:g,stringify:g,decode:e,parse:e}});"use strict";
filepicker.extend("util",function(){var a=/^(http|https)\:.*\/\//i;return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},trimConvert:function(a){return a.replace(/\/convert\b.*/,"")},parseUrl:function(a){a&&"/"!==a.charAt(0)||(a=window.location.protocol+"//"+window.location.host+a);var d=document.createElement("a");d.href=a;for(var b=-1===d.hostname.indexOf(":")?d.hostname:d.host,g=d.protocol.replace(":",""),e=d.port,h=d.search,f={},k=d.search.replace(/^\?/,"").split("&"),l=k.length,n=0,m;n<
l;n++)k[n]&&(m=k[n].split("="),f[m[0]]=m[1]);d={source:a,protocol:g,host:b,port:e,query:h,params:f,file:(d.pathname.match(/\/([^\/?#]+)$/i)||[void 0,""])[1],hash:d.hash.replace("#",""),path:d.pathname.replace(/^([^\/])/,"/$1"),relative:(d.href.match(/tps?:\/\/[^\/]+(.+)/)||[void 0,""])[1],segments:d.pathname.replace(/^\//,"").split("/")};d.origin=d.protocol+"://"+d.host+(d.port?":"+d.port:"");d.rawUrl=(d.origin+d.path).replace("/convert","");return d},isUrl:function(c){return!!c.match(a)},endsWith:function(a,
d){return-1!==a.indexOf(d,a.length-d.length)},appendQueryToUrl:function(a,d,b){return a+(0<=a.indexOf("?")?"&":"?")+d+"="+b}}});"use strict";
filepicker.extend("util",function(){var a=this,c=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},d=function(a){return a&&"[object File]"===Object.prototype.toString.call(a)},b=function(a){return"object"===typeof window.HTMLElement?a instanceof window.HTMLElement:a&&"object"===typeof a&&1===a.nodeType&&"string"===typeof a.nodeName},g=function(a){return function(){if(window.console&&"function"===typeof window.console[a])try{window.console[a].apply(window.console,arguments)}catch(b){window.alert(Array.prototype.join.call(arguments,
","))}}},e={};e.log=g("log");e.error=g("error");return{isArray:c,isFile:d,isElement:b,isFileInputElement:function(a){return b(a)&&"INPUT"===a.tagName&&"file"===a.type},getId:function(){return(new Date).getTime().toString()},setDefault:function(a,b,c){void 0===a[b]&&(a[b]=c)},typeOf:function(a){return null===a?"null":c(a)?"array":d(a)?"file":typeof a},addOnLoad:function(a){if(window.jQuery)window.jQuery(function(){a()});else if(window.addEventListener)window.addEventListener("load",a,!1);else if(window.attachEvent)window.attachEvent("onload",
a);else if(window.onload){var b=window.onload;window.onload=function(){b();a()}}else window.onload=a},isFPUrl:function(b){return"string"===typeof b&&b.match(a.urls.BASE+"/api/file/")},getFPUrl:function(b){if("string"===typeof b){var c=b.match(/(?:cdn.filestackcontent.com|cdn.filepicker.io)[\S]*\/([\S]{20,})/);if(c&&1<c.length)return a.urls.BASE+"/api/file/"+c[1]}return b},isFPUrlCdn:function(a){return"string"===typeof a&&a.match("/api/file/")},console:e,clone:function(a){var b={},c;for(c in a)b[c]=
a[c];return b},standardizeFPFile:function(a){var b={};b.url=a.url;b.filename=a.filename||a.name;b.mimetype=a.mimetype||a.type;b.size=a.size;b.key=a.key||a.s3_key;b.isWriteable=!(!a.isWriteable&&!a.writeable);return b},isCanvasSupported:function(){try{var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}catch(b){return!1}},extend:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},checkApiKey:function(){if(!a.apikey)throw new a.FilepickerException("API Key not found");
},objectKeys:function(a){return"function"!==typeof Object.keys?function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}:Object.keys(a)}}});"use strict";filepicker.extend("windowUtils",function(){return{getWidth:function(){return document.documentElement.clientWidth||document.body&&document.body.clientWidth||1024},getHeight:function(){return document.documentElement.clientHeight||document.body&&document.body.clientHeight||768}}});"use strict";
filepicker.extend("dragdrop",function(){var a=this,c=function(){return(!!window.FileReader||0<=navigator.userAgent.indexOf("Safari"))&&"draggable"in document.createElement("span")};return{enabled:c,makeDropPane:function(d,b){function g(b){var c=J(0,1),d=a.util.clone(b);d.name=d.filename;B([d])?c(b):a.files.remove(b.url,u,function(){},function(){})}if(!d)throw new a.FilepickerException("No DOM element found to create drop pane");if(d.jquery){if(0===d.length)throw new a.FilepickerException("No DOM element found to create drop pane");
d=d[0]}if(!c())return a.util.console.error("Your browser doesn't support drag-drop functionality"),!1;b=b||{};var e=b.dragEnter||function(){},h=b.dragLeave||function(){},f=b.onStart||function(){},k=b.onSuccess||function(){},l=b.onError||function(){},n=b.onProgress||function(){},m=b.mimetypes;m||(m=b.mimetype?[b.mimetype]:["*/*"]);"string"===a.util.typeOf(m)&&(m=m.split(","));var q=b.extensions;q||b.extension&&(q=[b.extension]);"string"===a.util.typeOf(q)&&(q=q.replace(/ /g,"").split(","));if(q)for(var r=
0;r<q.length;r++)q[r]=q[r].toLowerCase();var u={location:b.location,path:b.path,container:b.container,access:b.access,policy:b.policy,signature:b.signature},t=function(){return d&&"disabled"!==(d.getAttribute("disabled")||"enabled")};d.addEventListener("dragenter",function(a){t()&&e();a.stopPropagation();a.preventDefault();return!1},!1);d.addEventListener("dragleave",function(a){t()&&h();a.stopPropagation();a.preventDefault();return!1},!1);d.addEventListener("dragover",function(a){a.dataTransfer.dropEffect=
"copy";a.preventDefault();return!1},!1);d.addEventListener("drop",function(b){b.stopPropagation();b.preventDefault();if(!t())return!1;var c;a:{var e,h;if(b.dataTransfer.items)for(e=b.dataTransfer.items,h=0;h<e.length;h++)if((c=e[h]&&e[h].webkitGetAsEntry?e[h].webkitGetAsEntry():void 0)&&c.isDirectory){l("WrongType","Uploading a folder is not allowed");c=!0;break a}c=!1}if(c)return!1;c=b.dataTransfer.files;var k;if((b=b.dataTransfer)&&"function"===typeof b.getData){k=b.getData("text");try{k=k||b.getData("text/html")}catch(m){a.util.console.error(m)}k&&
!a.util.isUrl(k)&&(k=(k=k.match(/<img.*?src="(.*?)"/i))&&1<k.length?k[1]:null)}if(c.length){if(k=c.length,B(c))for(f(c),d.setAttribute("disabled","disabled"),b=0;b<c.length;b++)a.store(c[b],u,J(b,k),D,A(b,k))}else k?(c=A(0,1),a.storeUrl(k,g,D,c)):l("NoFilesFound","No files uploaded");return!1});var v=function(){d.setAttribute("disabled","enabled");window.$&&window.$(d).prop("disabled",!1)},w={},x=[],J=function(a,c){return function(d){b.multiple?(x.push(d),x.length===c?(k(x),x=[],w={}):(w[a]=100,z(c))):
k([d]);v()}},D=function(a){l("UploadError",a.toString());v()},A=function(a,b){return function(c){w[a]=c;z(b)}},z=function(a){var b=0,c;for(c in w)b+=w[c];n(b/a)},B=function(c){if(0<c.length){if(1<c.length&&!b.multiple)return l("TooManyFiles","Only one file at a time"),!1;if(0<b.maxFiles&&c.length>b.maxFiles)return l("TooManyFiles","Only "+b.maxFiles+" files at a time"),!1;for(var d,e,f,g=0;g<c.length;g++){d=!1;e=c[g];f=e.name||e.fileName||"Unknown file";for(var h=0;h<m.length;h++){var k=a.mimetypes.getMimetype(e);
d=d||a.mimetypes.matchesMimetype(k,m[h])}if(!d)return l("WrongType",f+" isn't the right type of file"),!1;if(q){d=!1;for(h=0;h<q.length;h++)d=d||a.util.endsWith(f,q[h]);if(!d)return l("WrongType",f+" isn't the right type of file"),!1}if(e.size&&b.maxSize&&e.size>b.maxSize)return l("WrongSize",f+" is too large ("+e.size+" Bytes)"),!1}return!0}l("NoFilesFound","No files uploaded");return!1};return!0}}});"use strict";
filepicker.extend("responsiveImages",function(){function a(a){var b=document.querySelectorAll("img[data-fp-src]"),d,f;for(f=0;f<b.length;f++)d=b[f],(c(d)||!0===a)&&e(d)}function c(a){var b=a.getAttribute("src"),c=a.getAttribute("data-fp-on-resize")||l().onResize||"all";return b&&"all"!==c?"none"===c?!1:(a=g(b).width<d(a).width)&&"up"===c||!a&&"down"===c?!0:!1:!0}function d(a){var b={};if(null===a.parentNode)return b.width=m.windowUtils.getWidth(),b.height=m.windowUtils.getWidth(),b;if(a.alt&&!a.fpAltCheck)return a.parentNode.fpAltCheck=
!0,d(a.parentNode);b.width=a.offsetWidth;b.height=a.offsetHeight;return b.width?b:d(a.parentNode)}function b(a,b){var c=a.getAttribute("src")||a.getAttribute("data-fp-src");c!==b&&(a.src=b,c&&(a.onerror=function(){a.src=c;a.onerror=null}))}function g(a){return m.conversionsUtil.parseUrl(a).optionsDict.resize||{}}function e(a){var c=a.getAttribute("data-fp-src")||a.getAttribute("src"),d=a.getAttribute("data-fp-apikey")||m.apikey,e=l();m.apikey||(m.setKey(d),m.util.checkApiKey());b(a,m.conversionsUtil.buildUrl(c,
h(a,e),d))}function h(a,b){b=b||{};var c=d(a),e=a.getAttribute("data-fp-pixel-round")||b.pixelRound||10,c={resize:{width:n(c.width,e)}};if(e=b.signature||a.getAttribute("data-fp-signature"))c.security={signature:e,policy:b.policy||a.getAttribute("data-fp-policy")};return c}function f(a){window.addEventListener?window.addEventListener("resize",a,!1):window.attachEvent&&window.attachEvent("onresize",a)}function k(a){window.removeEventListener?window.removeEventListener("resize",a,!1):window.detachEvent&&
window.detachEvent("onresize",a)}function l(){return m.responsiveOptions||{}}function n(a,b){var c=0===b?1:b;return Math.ceil(a/c)*c}var m=this,q=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,e)},b)}}(function(){a()},200);return{activate:function(){a();f(q)},deactivate:function(){k(q)},update:function(b){if(void 0!==b)if("IMG"===b.nodeName)e(b);else throw new m.FilepickerException("Passed object is not an image");else a(!0)},
setResponsiveOptions:function(a){a=a||{};if("object"!==typeof a)throw new m.FilepickerException("Responsive options must be an object.");m.responsiveOptions=a},getResponsiveOptions:l,getElementDims:d,replaceSrc:b,getCurrentResizeParams:g,construct:e,constructParams:h,shouldConstruct:c,roundWithStep:n,addWindowResizeEvent:f,removeWindowResizeEvent:k}});"use strict";
filepicker.extend("widgets",function(){var a=this,c=function(a,b){var c;if(document.createEvent)c=document.createEvent("Event"),c.initEvent("change",!0,!1),c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.dispatchEvent(c);else if(document.createEventObject)c=document.createEventObject("Event"),c.eventPhase=2,c.currentTarget=c.srcElement=c.target=a,c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.fireEvent("onchange",c);else if(a.onchange)a.onchange(b)},d=function(a,b,c){for(var d in c){var e=c[d],f=a,g=b.getAttribute(d);
g&&(f[e]=g)}},b=function(b,c){c=c||"pick";var e={},f={"data-fp-mimetypes":"mimetypes","data-fp-extensions":"extensions","data-fp-maxSize":"maxSize","data-fp-maxFiles":"maxFiles","data-fp-store-location":"storeLocation","data-fp-store-path":"storePath","data-fp-store-container":"storeContainer","data-fp-store-region":"storeRegion","data-fp-store-access":"storeAccess","data-fp-image-quality":"imageQuality","data-fp-image-dim":"imageDim","data-fp-image-max":"imageMax","data-fp-image-min":"imageMin"},
g={"data-fp-video-recording-resolution":"videoRes","data-fp-webcam-dim":"webcamDim","data-fp-video-length":"videoLen","data-fp-audio-length":"audioLen"};d(e,b,{"data-fp-container":"container","data-fp-mimetype":"mimetype","data-fp-extension":"extension","data-fp-openTo":"openTo","data-fp-debug":"debug","data-fp-signature":"signature","data-fp-policy":"policy","data-fp-language":"language","data-fp-background-upload":"backgroundUpload","data-fp-hide":"hide","data-fp-custom-css":"customCss","data-fp-crop-force":"cropForce",
"data-fp-crop-ratio":"cropRatio","data-fp-crop-dim":"cropDim","data-fp-crop-max":"cropMax","data-fp-crop-min":"cropMin","data-fp-show-close":"showClose","data-fp-conversions":"conversions","data-fp-custom-text":"customText","data-fp-custom-source-container":"customSourceContainer","data-fp-custom-source-path":"customSourcePath"});"export"===c?(f=b.getAttribute("data-fp-suggestedFilename"))&&(e.suggestedFilename=f):"pick"===c&&(d(e,b,f),e.webcam={},d(e.webcam,b,g));if(f=b.getAttribute("data-fp-services")){f=
f.split(",");for(g=0;g<f.length;g++)f[g]=a.services[f[g].replace(" ","")]||f[g];e.services=f}if(f=b.getAttribute("data-fp-service"))e.service=a.services[f.replace(" ","")]||f;var f="extensions mimetypes imageDim imageMin imageMax cropDim cropMax cropMin webcamDim conversions".split(" "),h;for(h in f)g=f[h],e[g]&&(e[g]=e[g].split(","));(h=b.getAttribute("data-fp-apikey"))&&a.setKey(h);e.folders="true"===b.getAttribute("data-fp-folders");return e},g=function(d){var e=document.createElement("button");
e.setAttribute("type","button");e.innerHTML=d.getAttribute("data-fp-button-text")||"Pick File";e.className=d.getAttribute("data-fp-button-class")||d.className||"fp__btn";d.style.display="none";var f=b(d);"true"===d.getAttribute("data-fp-multiple")?e.onclick=function(){e.blur();a.pickMultiple(f,function(a){for(var b=[],e=0;e<a.length;e++)b.push(a[e].url);d.value=b.join();c(d,a)});return!1}:e.onclick=function(){e.blur();a.pick(f,function(a){d.value=a.url;c(d,[a])});return!1};d.parentNode.insertBefore(e,
d.nextSibling)},e=function(d){var e=d.getAttribute("data-fp-url");if(!e)return!0;var f=document.createElement("button");f.setAttribute("type","button");f.innerHTML=d.getAttribute("data-fp-button-text")||"Convert File";f.className=d.getAttribute("data-fp-button-class")||d.className||"fp__btn";d.style.display="none";var g=b(d,"convert");f.onclick=function(){f.blur();a.processImage(e,g,function(a){d.value=a.url;c(d,[a])});return!1};d.parentNode.insertBefore(f,d.nextSibling)},h=function(d){var e=document.createElement("div");
e.className=d.getAttribute("data-fp-class")||d.className;e.style.padding="1px";d.style.display="none";d.parentNode.insertBefore(e,d.nextSibling);var g=document.createElement("button");g.setAttribute("type","button");g.innerHTML=d.getAttribute("data-fp-button-text")||"Pick File";g.className=d.getAttribute("data-fp-button-class")||"fp__btn";e.appendChild(g);var h=document.createElement("div");k(h);h.innerHTML=d.getAttribute("data-fp-drag-text")||"Or drop files here";h.className=d.getAttribute("data-fp-drag-class")||
"";e.appendChild(h);var m=b(d),e="true"===d.getAttribute("data-fp-multiple");a.dragdrop.enabled()?l(h,e,m,d):h.innerHTML="&nbsp;";h.onclick=e?g.onclick=function(){g.blur();a.pickMultiple(m,function(a){for(var b=[],e=[],g=0;g<a.length;g++)b.push(a[g].url),e.push(a[g].filename);d.value=b.join();f(d,h,e.join(", "));c(d,a)});return!1}:g.onclick=function(){g.blur();a.pick(m,function(a){d.value=a.url;f(d,h,a.filename);c(d,[a])});return!1}},f=function(b,d,e){d.innerHTML=e;d.style.padding="2px 4px";d.style.cursor=
"default";d.style.width="";e=document.createElement("span");e.innerHTML="X";e.style.borderRadius="8px";e.style.fontSize="14px";e.style.cssFloat="right";e.style.padding="0 3px";e.style.color="#600";e.style.cursor="pointer";var f=function(e){e||(e=window.event);e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation();k(d);d.innerHTML=a.dragdrop.enabled?b.getAttribute("data-fp-drag-text")||"Or drop files here":"&nbsp;";b.value="";c(b);return!1};e.addEventListener?e.addEventListener("click",f,!1):e.attachEvent&&
e.attachEvent("onclick",f);d.appendChild(e)},k=function(a){a.style.border="1px dashed #AAA";a.style.display="inline-block";a.style.margin="0 0 0 4px";a.style.borderRadius="3px";a.style.backgroundColor="#F3F3F3";a.style.color="#333";a.style.fontSize="14px";a.style.lineHeight="22px";a.style.padding="2px 4px";a.style.verticalAlign="middle";a.style.cursor="pointer";a.style.overflow="hidden"},l=function(b,d,e,g){var h=b.innerHTML,k;a.dragdrop.makeDropPane(b,{multiple:d,maxSize:e.maxSize,mimetypes:e.mimetypes,
mimetype:e.mimetype,extensions:e.extensions,extension:e.extension,location:e.storeLocation,path:e.storePath,container:e.storeContainer,region:e.storeRegion,access:e.storeAccess,policy:e.policy,signature:e.signature,dragEnter:function(){b.innerHTML="Drop to upload";b.style.backgroundColor="#E0E0E0";b.style.border="1px solid #000"},dragLeave:function(){b.innerHTML=h;b.style.backgroundColor="#F3F3F3";b.style.border="1px dashed #AAA"},onError:function(a,c){"TooManyFiles"===a?b.innerHTML=c:"WrongType"===
a?b.innerHTML=c:"NoFilesFound"===a?b.innerHTML=c:"UploadError"===a&&(b.innerHTML="Oops! Had trouble uploading.")},onStart:function(a){a=document.createElement("div");a.style.height=b.offsetHeight-2+"px";a.style.backgroundColor="#0E90D2";a.style.width="2%";a.style.borderRadius="3px";b.style.width=b.offsetWidth+"px";b.style.padding="0";b.style.border="1px solid #AAA";b.style.backgroundColor="#F3F3F3";b.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)";b.innerHTML="";b.appendChild(a);k=a},onProgress:function(a){k&&
(k.style.width=a+"%")},onSuccess:function(a){for(var d=[],e=[],h=0;h<a.length;h++)d.push(a[h].url),e.push(a[h].filename);g.value=d.join();f(g,b,e.join(", "));c(g,a)}})},n=function(c){c.onclick=function(){var d=c.getAttribute("data-fp-url");if(!d)return!0;var e=b(c,"export");a.exportFile(d,e);return!1}},m=function(b){var c=b.getAttribute("data-fp-url"),d=b.getAttribute("data-fp-custom-css");if((c=a.util.getFPUrl(c))&&a.util.isFPUrl(c))c=c.replace("api/file/","api/preview/");else return!0;var e=document.createElement("iframe");
d&&(c=a.util.appendQueryToUrl(c,"css",d));e.src=c;e.width="100%";e.height="100%";b.appendChild(e)};return{constructPickWidget:g,constructDragWidget:h,constructExportWidget:n,buildWidgets:function(){if(document.querySelectorAll){var a,b=document.querySelectorAll('input[type="filepicker"]');for(a=0;a<b.length;a++)g(b[a]);b=document.querySelectorAll('input[type="filepicker-dragdrop"]');for(a=0;a<b.length;a++)h(b[a]);b=document.querySelectorAll('input[type="filepicker-convert"]');for(a=0;a<b.length;a++)e(b[a]);
var b=[],c=document.querySelectorAll("button[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll("a[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll('input[type="button"][data-fp-url]');for(a=0;a<c.length;a++)b.push(c[a]);for(a=0;a<b.length;a++)n(b[a]);b=document.querySelectorAll('[type="filepicker-preview"][data-fp-url]');for(a=0;a<b.length;a++)m(b[a]);try{var d=document.head||document.getElementsByTagName("head")[0],f=document.createElement("style");
f.type="text/css";f.styleSheet?f.styleSheet.cssText='.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}':
f.appendChild(document.createTextNode('.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}'));
d.appendChild(f)}catch(k){}}},constructWidget:function(b){b.jquery&&(b=b[0]);var c=b.getAttribute("type");"filepicker"===c?g(b):"filepicker-dragdrop"===c?h(b):"filepicker-preview"===c?m(b):b.getAttribute("data-fp-src")?a.responsiveImages.construct(b):n(b)}}});"use strict";
(function(){filepicker.internal(function(){this.util.addOnLoad(this.cookies.checkThirdParty);this.util.addOnLoad(this.widgets.buildWidgets);this.util.addOnLoad(this.responsiveImages.activate)});delete filepicker.internal;delete filepicker.extend;var a=filepicker._queue||[],c,d=a.length;if(d)for(var b=0;b<d;b++)c=a[b],filepicker[c[0]].apply(filepicker,c[1]);filepicker._queue&&delete filepicker._queue})();
(function(){window.app=window.app||{};var a=require("back_page/annotation_loader"),c=require("back_page/back_page");app.setup_annotation_form=function(d,b){b=b||{};var g=!!b.autofocus;$("#container").addClass("active");var e=d.referent.fragment_as_text.match(/[^\s]+/g).length<MAX_REFERENT_LENGTH;$("form#new_annotation").data("payload",d).toggle(e);var h=$(".new-embedded-annotation-container");if(e){h.find(".referent_content-referent").text($.html_to_text(d.referent.fragment));var f=d.referent.context_for_display;
h.find(".referent_content-context_before").text($.html_to_text(f.before_html));h.find(".referent_content-context_after").text($.html_to_text(f.after_html))}h.find(".validation_message").toggle(!e);h.find("a:not([target])").attr("target","_blank");h.on("submit","#new_annotation",function(b){var d=$(this),e=d.data("payload");$.post(d.attr("action"),d.serialize()+"&"+$.param(e),function(b){b=$(b);var d=$.extend(e.referent,{id:Number(b.attr("data-genius-referent-id")),path:b.attr("data-path"),api_path:b.attr("data-api-path"),
annotator_id:Number(b.attr("data-annotator-id")),featured:!0});a.add_to_cache(d.id,b);app.parent_channel.call({method:"finalize_new_annotation",params:d,success:function(a){d.anchor_offset=a.anchor_offset;c.referents.add([d]);c.referents.close_overlay();c.referents.activate(d.id,{align_with_vertical_offset:a.scroll_offset})},error:function(a,b){throw a+" "+b;}})});b.stopImmediatePropagation();return!1});$("#annotation_body").on("focus",function(){$(this).closest(".new-embedded-annotation-container").addClass("active")});
if(g)$(window).one("frame_visible",function(){$("#annotation_body").focus()});$(".web_annotator_signup, .web_annotator_login, .new-embedded-annotation-container .embedded_signup a").on("click",function(){var a=d.referent.range,b=new Date((new Date).getTime()+6E5);$.cookie("new_annotation_referent_range",JSON.stringify(a),{expires:b});app.set_desired_location_cookie()})}})();
(function(){window["com.genius.Genius"].require.define({"back_page/performance_report":function(a,c,d){var b=function(a,b,c){return"mark"===a.entryType&&0===a.name.indexOf("genius.")?(c=c||0,[{event:a.name.slice(7),timestamp:parseInt(a.startTime)+c,window:b}]):"resource"===a.entryType&&-1!==a.name.indexOf(document.location.host)&&-1!==a.name.indexOf(".js")?(c=c||0,[{event:"start "+a.name,timestamp:parseInt(a.startTime+c),window:b},{event:"finish "+a.name,timestamp:parseInt(a.responseEnd+c),window:b}]):
[]};a=function(a){var b=$.Deferred(),c=$.Deferred();this.back_page_data=b.promise();this.host_page_data=c.promise();b.resolve({timing:window.performance.timing,entries:window.performance.getEntries()});a.call({method:"performance_timing",success:function(a){c.resolve({timing:a[0],entries:a[1]})}})};_.extend(a.prototype,{observations:function(){return $.when(this.host_page_data,this.back_page_data).pipe(function(a,c){var d=[],f=-a.timing.navigationStart,k=c.timing.navigationStart-a.timing.navigationStart,
l;for(l in a.timing)d.push({event:l,timestamp:a.timing[l]+f,window:"host"}),d.push({event:l,timestamp:c.timing[l]+f,window:"back"});a.entries.forEach(function(a){d.push.apply(d,b(a,"host"))});c.entries.forEach(function(a){d.push.apply(d,b(a,"back",k))});return d.sort(function(a,b){return a.timestamp-b.timestamp}).filter(function(a){return 0<=a.timestamp})})},print_observations:function(){this.observations().then(function(a){a.forEach(function(a){console.debug(a.window,a.event,a.timestamp)})})}});
d.exports=a}})})();
(function(){var a=require("jschannel"),c=require("back_page/annotation_loader"),d=require("back_page/back_page"),b=require("back_page/tracking"),g;app.parent_channel=a.build({window:window.parent,origin:"*",scope:"com.genius.Genius",onReady:function(){window.performance.mark("genius.omniframeChannelReady")}});app.parent_channel.bind("track_page_load",function(a,c){b.track_page_load(c)});app.parent_channel.bind("track_annotated_page",function(){b.track_annotated_page()});app.parent_channel.bind("add_referents",function(a,
b){d.referents.add(b)});app.parent_channel.bind("all_referents_added",function(){d.referents.preload_first_page()});app.parent_channel.bind("display_annotation",function(a,c){d.referents.display(c.referent_id,{align_with_vertical_offset:c.referent_offset}).done(function(){if(g){var b=g,c=$(".annotation_container[data-id="+b.annotation_id+"]"),d=c.find(".annotation_explainer_message"),h=Hogan.compile($("#underlying_link_content").html());d.html(h.render(b));c.addClass("display_underlying_link");g=
null}a.complete()}).fail(function(b){404===b.status&&a.error(Error())});b.track_open_annotation(c);a.delayReturn(!0)});app.parent_channel.bind("fetch_annotation",function(a,b){c.load(b)});app.parent_channel.bind("new_annotation",function(a,b){b=b||{};var c=b.payload||{},g=!!b.autofocus;d.populate_overlay($($("#new_embedded_annotation").text()));app.setup_annotation_form(c,{autofocus:g});d.referents.open()});app.parent_channel.bind("frame_visible",function(){$(window).trigger("frame_visible")});app.parent_channel.bind("display_underlying_link",
function(a,b){g=b});app.set_up_autogrow();app.set_up_dirtyable_inputs();d.initialize();$(document).on("click","[data-return-to-referring-page]",function(){$.cookie("desired_location",document.referrer,{path:"/"});return!0});$(function(){var a=$.cookie("new_annotation_referent_range");a&&app.parent_channel.notify({method:"resume_new_annotation",params:JSON.parse(a)});$.removeCookie("new_annotation_referent_range")})})();
$(function(){filepicker.setKey(FILEPICKER_API_KEY);var a=function(a){return"http://s3.amazonaws.com/"+S3_IMAGE_BUCKET+"/"+encodeURIComponent(a)};$(".upload_photo").live("click",function(){filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:"COMPUTER URL FACEBOOK INSTAGRAM IMAGE_SEARCH WEBCAM".split(" "),policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(c){var d=$(".user_avatar_"+CURRENT_USER.id);d.wrap('<div class="loading_with_indicator">');var b=
a(c[0].key);$.ajax_with_retry({url:"/account",type:"POST",data:{_method:"put",user:{photo_url:b}},success:function(){d.attr("src",b).unwrap();$("#avatar_solicitation").remove()}})});return!1});$(document).on("click",".image_adder",function(){var c=$(this);filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:["IMAGE_SEARCH","COMPUTER"],openTo:"IMAGE_SEARCH",policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(d){d=a(d[0].key);c.closest("[data-filepicker-form]").find("[data-filepicker-target]").insertAtCursor(d)});
return!1})});window.performance.mark("genius.finishScriptEvaluation");
